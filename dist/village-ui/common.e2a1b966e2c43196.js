"use strict";(self.webpackChunkvillage_ui=self.webpackChunkvillage_ui||[]).push([[76],{2084:(d,u,r)=>{r.d(u,{v:()=>h});var e=r(5312),s=r(2598),p=r(1626);let h=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${e.c.apiUrl}/village`}getAllVillages(){return this.http.get(`${this.apiUrl}/all`)}getVillageById(t){return this.http.get(`${this.apiUrl}/${t}`)}getVillagesCount(){return this.http.get(`${this.apiUrl}/count`)}createVillage(t){return this.http.post(`${this.apiUrl}/create`,t)}updateVillage(t,n){return this.http.put(`${this.apiUrl}/${t}`,n)}deleteVillage(t){return this.http.delete(`${this.apiUrl}/${t}`)}getCoutries(){return this.http.get(`${this.apiUrl}/country/all`)}getStatesByCountry(t){return this.http.get(`${this.apiUrl}/states-by-country/${t}`)}getDistrictsByState(t){return this.http.get(`${this.apiUrl}/district-by-state/${t}`)}getMandalsByDistrict(t){return this.http.get(`${this.apiUrl}/mandals-by-district/${t}`)}getVillagesByMandal(t){return this.http.get(`${this.apiUrl}/villages-by-mandal/${t}`)}static{this.\u0275fac=function(n){return new(n||i)(s.KVO(p.Qq))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},2427:(d,u,r)=>{r.d(u,{U:()=>h});var e=r(5312),s=r(2598),p=r(1626);let h=(()=>{class i{constructor(t){this.http=t,this.apiUrl=`${e.c.apiUrl}/events`}getAllEvents(){return this.http.get(`${this.apiUrl}/all`)}getEventById(t){return this.http.get(`${this.apiUrl}/${t}`)}getActiveEvents(){return this.http.get(`${this.apiUrl}/active`)}getUpcomingEvents(){return this.http.get(`${this.apiUrl}/upcoming`)}getEventsByPlace(t){return this.http.get(`${this.apiUrl}/place/${t}`)}createEvent(t){return this.http.post(`${this.apiUrl}/create`,t)}updateEvent(t,n){return this.http.put(`${this.apiUrl}/${t}`,n)}deleteEvent(t){return this.http.delete(`${this.apiUrl}/${t}`)}toggleEventStatus(t){return this.http.patch(`${this.apiUrl}/${t}/toggle-status`,{})}getEventStats(){return this.http.get(`${this.apiUrl}/stats`)}searchEvents(t){return this.http.get(`${this.apiUrl}/search`,{params:{q:t}})}static{this.\u0275fac=function(n){return new(n||i)(s.KVO(p.Qq))}}static{this.\u0275prov=s.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},7087:(d,u,r)=>{r.d(u,{$:()=>t});var e=r(2598),s=r(177);function p(n,c){if(1&n){const o=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){e.eBV(o);const l=e.XpG();return e.Njj(l.onBack())}),e.qSk(),e.j41(1,"svg",9),e.nrm(2,"path",10),e.k0s()()}}function h(n,c){if(1&n&&(e.j41(0,"p",11),e.EFF(1),e.k0s()),2&n){const o=e.XpG();e.R7$(1),e.JRh(o.subtitle)}}const i=[[["","header-actions",""]]],m=["[header-actions]"];let t=(()=>{class n{constructor(){this.title="",this.subtitle=null,this.showBack=!1,this.dense=!1,this.actionsAlign="right",this.back=new e.bkB}onBack(){this.back.emit()}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-feature-header"]],inputs:{title:"title",subtitle:"subtitle",showBack:"showBack",dense:"dense",actionsAlign:"actionsAlign"},outputs:{back:"back"},ngContentSelectors:m,decls:10,vars:9,consts:[[1,"feature-header"],[1,"feature-header-inner"],[1,"title-group"],["class","back-btn","type","button","aria-label","Back",3,"click",4,"ngIf"],[1,"titles"],[1,"title"],["class","subtitle",4,"ngIf"],[1,"actions"],["type","button","aria-label","Back",1,"back-btn",3,"click"],["viewBox","0 0 24 24","aria-hidden","true"],["fill","currentColor","d","M15.7 5.3a1 1 0 010 1.4L10.41 12l5.3 5.3a1 1 0 01-1.42 1.4l-6-6a1 1 0 010-1.4l6-6a1 1 0 011.41 0z"],[1,"subtitle"]],template:function(a,l){1&a&&(e.NAR(i),e.j41(0,"header",0)(1,"div",1)(2,"div",2),e.DNE(3,p,3,0,"button",3),e.j41(4,"div",4)(5,"h1",5),e.EFF(6),e.k0s(),e.DNE(7,h,2,1,"p",6),e.k0s()(),e.j41(8,"div",7),e.SdG(9),e.k0s()()()),2&a&&(e.AVh("dense",l.dense),e.R7$(1),e.AVh("actions-left","left"===l.actionsAlign)("actions-center","center"===l.actionsAlign),e.R7$(2),e.Y8G("ngIf",l.showBack),e.R7$(3),e.JRh(l.title),e.R7$(1),e.Y8G("ngIf",l.subtitle))},dependencies:[s.bT],styles:["[_nghost-%COMP%]{display:block}.feature-header[_ngcontent-%COMP%]{position:relative;background:rgba(255,255,255,.85);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-bottom:1px solid #eef2f7}.feature-header-inner[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:14px 16px;display:flex;align-items:center;justify-content:space-between;gap:12px}.feature-header.dense[_ngcontent-%COMP%]   .feature-header-inner[_ngcontent-%COMP%]{padding:10px 12px}.title-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.back-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:10px;border:none;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;background:#f1f5f9;color:#0f172a}.back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.titles[_ngcontent-%COMP%]{display:flex;flex-direction:column}.title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;letter-spacing:-.01em;color:#0f172a}.subtitle[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#64748b}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.feature-header-inner.actions-left[_ngcontent-%COMP%]{justify-content:flex-start}.feature-header-inner.actions-center[_ngcontent-%COMP%]{justify-content:center}@media (min-width: 768px){.title[_ngcontent-%COMP%]{font-size:1.5rem}.subtitle[_ngcontent-%COMP%]{font-size:.95rem}.feature-header-inner[_ngcontent-%COMP%]{padding:16px 20px}}"]})}}return n})()},1612:(d,u,r)=>{r.d(u,{O:()=>h});var e=r(2598),s=r(629),p=r(9700);let h=(()=>{class i{constructor(t,n){this.tokenService=t,this.usersService=n}ensureUserLocation(){try{const n=this.tokenService.getCurrentUser()?.userId;return n?new Promise((c,o)=>{this.usersService.getUserById(n).subscribe({next:a=>{a&&null!=a.latitude&&0!=a.latitude&&null!=a.longitude&&0!=a.longitude?c():this.getCurrentCoordinates().then(({lat:g,lng:v})=>{const _={...a};_.latitude=g,_.longitude=v,this.usersService.updateUser(a.id||n,_).subscribe({next:()=>{console.log("User location updated"),c()},error:f=>{console.warn("Failed to update user location",f),o(f)}})}).catch(g=>{console.warn("Geolocation error or permission denied",g),o(g)})},error:a=>{console.warn("Failed to load user for location check",a),o(a)}})}):Promise.resolve()}catch(t){return console.warn("ensureUserLocation error",t),Promise.reject(t)}}getCurrentCoordinates(){if(typeof navigator<"u"&&navigator.geolocation)return new Promise((n,c)=>{navigator.geolocation.getCurrentPosition(o=>n({lat:o.coords.latitude,lng:o.coords.longitude}),o=>c(o),{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})});const t=window?.Capacitor?.Plugins||window?.Capacitor?.Geolocation;return t&&(t.Geolocation||window?.Capacitor?.Geolocation)?(t.Geolocation||window.Capacitor.Geolocation).getCurrentPosition({enableHighAccuracy:!0,timeout:1e4}).then(c=>({lat:c.coords.latitude,lng:c.coords.longitude})):Promise.reject(new Error("Geolocation not supported"))}static{this.\u0275fac=function(n){return new(n||i)(e.KVO(s.B),e.KVO(p.g))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);