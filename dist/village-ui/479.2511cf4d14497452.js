"use strict";(self.webpackChunkvillage_ui=self.webpackChunkvillage_ui||[]).push([[479],{1479:(z,u,a)=>{a.r(u),a.d(u,{SchoolListComponent:()=>B});var h=a(177),r=a(4341),f=a(1413),p=a(6977),s=function(n){return n.SCHOOL="SCHOOL",n.COLLEGE="COLLEGE",n.UNIVERSITY="UNIVERSITY",n.INSTITUTE="INSTITUTE",n.ACADEMY="ACADEMY",n.TRAINING_CENTER="TRAINING_CENTER",n}(s||{}),_=a(401),e=a(2598),b=a(4412),v=a(5312),C=a(1626);let k=(()=>{class n{constructor(t){this.http=t,this.apiUrl=`${v.c.apiUrl}/schools`,this.schoolsSubject=new b.t([]),this.schools$=this.schoolsSubject.asObservable()}createSchool(t){return this.http.post(`${this.apiUrl}/create`,t)}updateSchool(t,o){return this.http.put(`${this.apiUrl}/${t}`,o)}getSchoolById(t){return this.http.get(`${this.apiUrl}/${t}`)}getAllSchools(){return this.http.get(`${this.apiUrl}/all`)}getSchoolsByVillage(t){return this.http.get(`${this.apiUrl}/village/${t}`)}getSchoolsByMandal(t){return this.http.get(`${this.apiUrl}/mandal/${t}`)}getSchoolsByDistrict(t){return this.http.get(`${this.apiUrl}/district/${t}`)}getSchoolsByState(t){return this.http.get(`${this.apiUrl}/state/${t}`)}getSchoolsByOwner(t){return this.http.get(`${this.apiUrl}/owner/${t}`)}getSchoolsByType(t){return this.http.get(`${this.apiUrl}/type/${t}`)}getActiveSchoolsCount(){return this.http.get(`${this.apiUrl}/count/active`)}getSchoolsCountByType(t){return this.http.get(`${this.apiUrl}/count/type/${t}`)}deleteSchool(t){return this.http.delete(`${this.apiUrl}/${t}`,{responseType:"text"})}updateSchools(t){this.schoolsSubject.next(t)}static{this.\u0275fac=function(o){return new(o||n)(e.KVO(C.Qq))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var x=a(9700),M=a(629),y=a(5889),S=a(7087);function O(n,l){if(1&n){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openAddModal())}),e.qSk(),e.j41(1,"svg",25),e.nrm(2,"path",26),e.k0s(),e.EFF(3," Add School "),e.k0s()}}function F(n,l){1&n&&(e.j41(0,"div",27),e.nrm(1,"div",28),e.j41(2,"p"),e.EFF(3,"Loading schools..."),e.k0s()())}function j(n,l){if(1&n&&(e.j41(0,"div",40),e.qSk(),e.j41(1,"svg",41),e.nrm(2,"path",46),e.k0s(),e.joV(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(4),e.JRh(t.phone)}}function E(n,l){if(1&n&&(e.j41(0,"div",40),e.qSk(),e.j41(1,"svg",41),e.nrm(2,"path",47),e.k0s(),e.joV(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(4),e.SpI("",t.currentStudents," Students")}}function w(n,l){if(1&n&&(e.j41(0,"div",40),e.qSk(),e.j41(1,"svg",41),e.nrm(2,"path",48),e.k0s(),e.joV(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2).$implicit;e.R7$(4),e.JRh(t.email)}}function P(n,l){if(1&n&&(e.j41(0,"div",40),e.qSk(),e.j41(1,"svg",41),e.nrm(2,"path",49),e.k0s(),e.joV(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2).$implicit;e.R7$(4),e.JRh(t.website)}}function I(n,l){if(1&n&&(e.j41(0,"div",40),e.qSk(),e.j41(1,"svg",41),e.nrm(2,"path",50),e.k0s(),e.joV(),e.j41(3,"span"),e.EFF(4),e.k0s()()),2&n){const t=e.XpG(2).$implicit;e.R7$(4),e.SpI("Capacity: ",t.studentCapacity,"")}}function N(n,l){if(1&n&&(e.j41(0,"div",39),e.DNE(1,w,5,1,"div",43),e.DNE(2,P,5,1,"div",43),e.DNE(3,I,5,1,"div",43),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf",t.email),e.R7$(1),e.Y8G("ngIf",t.website),e.R7$(1),e.Y8G("ngIf",t.studentCapacity)}}function T(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",51)(1,"button",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,c=e.XpG(2);return e.Njj(c.openEditModal(i))}),e.qSk(),e.j41(2,"svg",53),e.nrm(3,"path",54),e.k0s(),e.EFF(4," Edit "),e.k0s(),e.joV(),e.j41(5,"button",55),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,c=e.XpG(2);return e.Njj(c.openDeleteModal(i))}),e.qSk(),e.j41(6,"svg",53),e.nrm(7,"path",56),e.k0s(),e.EFF(8," Delete "),e.k0s()()}}function L(n,l){if(1&n&&(e.j41(0,"div",31)(1,"div",32)(2,"div",33)(3,"span",34),e.EFF(4),e.k0s()(),e.j41(5,"div",35),e.EFF(6),e.nI1(7,"titlecase"),e.k0s()(),e.j41(8,"div",36)(9,"h3",37),e.EFF(10),e.k0s(),e.j41(11,"p",38),e.EFF(12),e.k0s(),e.j41(13,"div",39)(14,"div",40),e.qSk(),e.j41(15,"svg",41),e.nrm(16,"path",42),e.k0s(),e.joV(),e.j41(17,"span"),e.EFF(18),e.k0s()(),e.DNE(19,j,5,1,"div",43),e.DNE(20,E,5,1,"div",43),e.k0s(),e.DNE(21,N,4,3,"div",44),e.k0s(),e.DNE(22,T,9,0,"div",45),e.k0s()),2&n){const t=l.$implicit,o=e.XpG(2);e.HbH("school-card "+o.getTypeClass(t.type)),e.R7$(4),e.JRh(o.getTypeIcon(t.type)),e.R7$(1),e.HbH("badge-"+t.type),e.R7$(1),e.SpI(" ",e.bMT(7,13,t.type)," "),e.R7$(4),e.JRh(t.name),e.R7$(2),e.JRh(t.address),e.R7$(6),e.JRh(t.principalName),e.R7$(1),e.Y8G("ngIf",t.phone),e.R7$(1),e.Y8G("ngIf",t.currentStudents),e.R7$(1),e.Y8G("ngIf",t.email||t.website||t.studentCapacity),e.R7$(1),e.Y8G("ngIf",o.canCreate())}}function $(n,l){if(1&n&&(e.j41(0,"div",29),e.DNE(1,L,23,15,"div",30),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.filteredSchools)("ngForTrackBy",t.trackBySchoolId)}}function R(n,l){if(1&n){const t=e.RV6();e.j41(0,"button",60),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.openAddModal())}),e.EFF(1," Add First School "),e.k0s()}}function G(n,l){if(1&n&&(e.j41(0,"div",57)(1,"div",58),e.EFF(2,"\u{1f3eb}"),e.k0s(),e.j41(3,"h3"),e.EFF(4,"No Schools Found"),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s(),e.DNE(7,R,2,0,"button",59),e.k0s()),2&n){const t=e.XpG();e.R7$(6),e.JRh(t.searchQuery||"all"!==t.selectedType?"Try adjusting your search or filters":"No educational institutions found in this village"),e.R7$(1),e.Y8G("ngIf",t.canCreate())}}function A(n,l){1&n&&(e.j41(0,"div",97),e.EFF(1," School name is required (minimum 2 characters) "),e.k0s())}function V(n,l){1&n&&(e.j41(0,"div",97),e.EFF(1," Address is required (minimum 10 characters) "),e.k0s())}function D(n,l){1&n&&(e.j41(0,"div",97),e.EFF(1," Please enter a valid email address "),e.k0s())}function U(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",61),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModals())}),e.j41(1,"div",62),e.bIt("click",function(i){return i.stopPropagation()}),e.j41(2,"div",63)(3,"h2",64),e.EFF(4),e.k0s(),e.j41(5,"button",65),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModals())}),e.qSk(),e.j41(6,"svg",53),e.nrm(7,"path",66),e.k0s()()(),e.joV(),e.j41(8,"form",67),e.bIt("ngSubmit",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSubmit())}),e.j41(9,"div",68)(10,"div",69)(11,"label",70),e.EFF(12,"School Name *"),e.k0s(),e.nrm(13,"input",71),e.DNE(14,A,2,0,"div",72),e.k0s(),e.j41(15,"div",73)(16,"label",74),e.EFF(17,"Description"),e.k0s(),e.nrm(18,"textarea",75),e.k0s(),e.j41(19,"div",69)(20,"label",76),e.EFF(21,"Type *"),e.k0s(),e.j41(22,"select",77)(23,"option",14),e.EFF(24,"School"),e.k0s(),e.j41(25,"option",15),e.EFF(26,"College"),e.k0s(),e.j41(27,"option",16),e.EFF(28,"University"),e.k0s(),e.j41(29,"option",17),e.EFF(30,"Institute"),e.k0s(),e.j41(31,"option",18),e.EFF(32,"Academy"),e.k0s(),e.j41(33,"option",19),e.EFF(34,"Training Center"),e.k0s()()(),e.j41(35,"div",73)(36,"label",78),e.EFF(37,"Address *"),e.k0s(),e.nrm(38,"textarea",79),e.DNE(39,V,2,0,"div",72),e.k0s(),e.j41(40,"div",69)(41,"label",80),e.EFF(42,"Phone"),e.k0s(),e.nrm(43,"input",81),e.k0s(),e.j41(44,"div",69)(45,"label",82),e.EFF(46,"Email"),e.k0s(),e.nrm(47,"input",83),e.DNE(48,D,2,0,"div",72),e.k0s(),e.j41(49,"div",69)(50,"label",84),e.EFF(51,"Principal/Head"),e.k0s(),e.nrm(52,"input",85),e.k0s(),e.j41(53,"div",69)(54,"label",86),e.EFF(55,"Website"),e.k0s(),e.nrm(56,"input",87),e.k0s(),e.j41(57,"div",69)(58,"label",88),e.EFF(59,"Student Capacity"),e.k0s(),e.nrm(60,"input",89),e.k0s(),e.j41(61,"div",69)(62,"label",90),e.EFF(63,"Affiliation"),e.k0s(),e.nrm(64,"input",91),e.k0s(),e.j41(65,"div",69)(66,"label",92),e.EFF(67,"Registration Number"),e.k0s(),e.nrm(68,"input",93),e.k0s()(),e.j41(69,"div",94)(70,"button",95),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModals())}),e.EFF(71," Cancel "),e.k0s(),e.j41(72,"button",96),e.EFF(73),e.k0s()()()()()}if(2&n){const t=e.XpG();let o,i,c,d,m,g;e.R7$(4),e.JRh(t.showEditModal?"Edit School":"Add New School"),e.R7$(4),e.Y8G("formGroup",t.schoolForm),e.R7$(5),e.AVh("error",(null==(o=t.schoolForm.get("name"))?null:o.invalid)&&(null==(o=t.schoolForm.get("name"))?null:o.touched)),e.R7$(1),e.Y8G("ngIf",(null==(i=t.schoolForm.get("name"))?null:i.invalid)&&(null==(i=t.schoolForm.get("name"))?null:i.touched)),e.R7$(24),e.AVh("error",(null==(c=t.schoolForm.get("address"))?null:c.invalid)&&(null==(c=t.schoolForm.get("address"))?null:c.touched)),e.R7$(1),e.Y8G("ngIf",(null==(d=t.schoolForm.get("address"))?null:d.invalid)&&(null==(d=t.schoolForm.get("address"))?null:d.touched)),e.R7$(8),e.AVh("error",(null==(m=t.schoolForm.get("email"))?null:m.invalid)&&(null==(m=t.schoolForm.get("email"))?null:m.touched)),e.R7$(1),e.Y8G("ngIf",(null==(g=t.schoolForm.get("email"))?null:g.invalid)&&(null==(g=t.schoolForm.get("email"))?null:g.touched)),e.R7$(24),e.Y8G("disabled",t.schoolForm.invalid),e.R7$(1),e.SpI(" ",t.showEditModal?"Update School":"Add School"," ")}}function Y(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",61),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModals())}),e.j41(1,"div",98),e.bIt("click",function(i){return i.stopPropagation()}),e.j41(2,"div",63)(3,"h2",64),e.EFF(4,"Delete School"),e.k0s(),e.j41(5,"button",65),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModals())}),e.qSk(),e.j41(6,"svg",53),e.nrm(7,"path",66),e.k0s()()(),e.joV(),e.j41(8,"div",99)(9,"div",100),e.EFF(10,"\u26a0\ufe0f"),e.k0s(),e.j41(11,"h3"),e.EFF(12,"Are you sure?"),e.k0s(),e.j41(13,"p"),e.EFF(14,"This action cannot be undone. This will permanently delete "),e.j41(15,"strong"),e.EFF(16),e.k0s(),e.EFF(17,"."),e.k0s(),e.j41(18,"div",94)(19,"button",95),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModals())}),e.EFF(20," Cancel "),e.k0s(),e.j41(21,"button",101),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.confirmDelete())}),e.EFF(22," Delete School "),e.k0s()()()()()}if(2&n){const t=e.XpG();e.R7$(16),e.JRh(null==t.selectedSchool?null:t.selectedSchool.name)}}let B=(()=>{class n{constructor(t,o,i,c,d){this.schoolService=t,this.fb=o,this.userService=i,this.tokenService=c,this.toast=d,this.schools=[],this.filteredSchools=[],this.isLoading=!1,this.showAddModal=!1,this.showEditModal=!1,this.showDeleteModal=!1,this.selectedSchool=null,this.searchQuery="",this.selectedType="all",this.currentUser=null,this.isAdmin=!0,this.destroy$=new f.B,this.schoolTypes=[{value:s.SCHOOL,label:"School"},{value:s.COLLEGE,label:"College"},{value:s.UNIVERSITY,label:"University"},{value:s.INSTITUTE,label:"Institute"},{value:s.ACADEMY,label:"Academy"},{value:s.TRAINING_CENTER,label:"Training Center"}],this.initializeForm()}ngOnInit(){const t=this.tokenService.getCurrentUser();this.userService.getUserById(t?.userId).subscribe({next:o=>{this.currentUser=o,this.isAdmin=["SUPER_ADMIN","VILLAGE_ADMIN"].includes(this.currentUser?.role),console.log("Current user loaded:",o),console.log("Village ID:",this.currentUser?.village?.id),this.loadSchools()},error:o=>{console.error("Error loading user:",o),this.currentUser={village:{id:"demo-village-id"},role:"VILLAGER"},this.isAdmin=!1,this.loadSchools()}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.schoolForm=this.fb.group({name:["",[r.k0.required,r.k0.minLength(2)]],description:[""],type:[s.SCHOOL,r.k0.required],villageId:["",r.k0.required],ownerId:["",r.k0.required],address:["",[r.k0.required,r.k0.minLength(10)]],phone:[""],email:["",[r.k0.email]],website:[""],studentCapacity:[""],principalName:[""],affiliation:[""],registrationNumber:[""]})}loadSchools(){const t=this.currentUser?.village?.id;t?(console.log("Loading schools for village:",t),this.isLoading=!0,this.schoolService.getSchoolsByVillage(t).pipe((0,p.Q)(this.destroy$)).subscribe({next:o=>{console.log("Schools loaded:",o.length),this.schools=o,this.filteredSchools=o,this.isLoading=!1},error:o=>{console.error("Error loading schools:",o),this.schools=[],this.filteredSchools=[],this.isLoading=!1}})):console.error("Village ID not available")}loadMockSchools(){this.schools=[{id:"1",name:"Village Primary School",description:"A premier educational institution serving the local community",type:s.SCHOOL,villageName:"Demo Village",ownerName:"Village Admin",address:"Main Street, Village Center",phone:"+1-234-567-8900",email:"info@villageprimary.edu",website:"https://villageprimary.edu",studentCapacity:300,currentStudents:250,principalName:"Mrs. Smith",affiliation:"State Board",registrationNumber:"REG001",isActive:!0,createdAt:"2024-01-01T00:00:00",updatedAt:"2024-01-01T00:00:00"},{id:"2",name:"Village College",description:"Higher education institution offering undergraduate programs",type:s.COLLEGE,villageName:"Demo Village",ownerName:"Village Admin",address:"College Road, Village",phone:"+1-234-567-8901",email:"admissions@villagecollege.edu",website:"https://villagecollege.edu",studentCapacity:1e3,currentStudents:800,principalName:"Dr. Johnson",affiliation:"University Board",registrationNumber:"REG002",isActive:!0,createdAt:"2024-01-01T00:00:00",updatedAt:"2024-01-01T00:00:00"}],this.filteredSchools=this.schools}canCreate(){return this.isAdmin}filterSchools(){let t=this.schools;this.searchQuery.trim()&&(t=t.filter(o=>o.name.toLowerCase().includes(this.searchQuery.toLowerCase())||o.address.toLowerCase().includes(this.searchQuery.toLowerCase())||o.principalName.toLowerCase().includes(this.searchQuery.toLowerCase()))),"all"!==this.selectedType&&(t=t.filter(o=>o.type===this.selectedType)),this.filteredSchools=t}openAddModal(){this.schoolForm.reset({type:s.SCHOOL,villageId:this.currentUser?.village?.id||"",ownerId:this.currentUser?.id||""}),this.showAddModal=!0}openEditModal(t){this.selectedSchool=t,this.schoolForm.patchValue({name:t.name,description:t.description||"",type:t.type,villageId:this.currentUser?.village?.id||"",ownerId:this.currentUser?.id||"",address:t.address||"",phone:t.phone||"",email:t.email||"",website:t.website||"",studentCapacity:t.studentCapacity||"",principalName:t.principalName||"",affiliation:t.affiliation||"",registrationNumber:t.registrationNumber||""}),this.showEditModal=!0}openDeleteModal(t){this.selectedSchool=t,this.showDeleteModal=!0}closeModals(){this.showAddModal=!1,this.showEditModal=!1,this.showDeleteModal=!1,this.selectedSchool=null,this.schoolForm.reset()}onSubmit(){if(this.schoolForm.valid){const t=this.schoolForm.value;if(!t.villageId||!t.ownerId)return void this.toast.error("Village and owner must be set. Please refresh and try again.");const o={name:t.name,description:t.description||void 0,type:t.type,villageId:t.villageId,ownerId:t.ownerId,address:t.address||void 0,phone:t.phone||void 0,email:t.email||void 0,website:t.website||void 0,studentCapacity:t.studentCapacity||void 0,principalName:t.principalName||void 0,affiliation:t.affiliation||void 0,registrationNumber:t.registrationNumber||void 0};this.showEditModal&&this.selectedSchool?.id?this.updateSchool(this.selectedSchool.id,o):this.createSchool(o)}else Object.keys(this.schoolForm.controls).forEach(t=>{this.schoolForm.get(t)?.markAsTouched()})}createSchool(t){this.schoolService.createSchool(t).pipe((0,p.Q)(this.destroy$)).subscribe({next:o=>{this.loadSchools(),this.closeModals(),this.toast.success("School created successfully")},error:o=>{console.error("Error creating school:",o),this.toast.error("Failed to create school")}})}updateSchool(t,o){this.schoolService.updateSchool(t,o).pipe((0,p.Q)(this.destroy$)).subscribe({next:i=>{this.loadSchools(),this.closeModals(),this.toast.success("School updated successfully")},error:i=>{console.error("Error updating school:",i),this.toast.error("Failed to update school")}})}confirmDelete(){this.selectedSchool?.id&&(console.log("Deleting school:",this.selectedSchool.name,"ID:",this.selectedSchool.id),this.schoolService.deleteSchool(this.selectedSchool.id).pipe((0,p.Q)(this.destroy$)).subscribe({next:t=>{console.log("Delete response:",t),this.schools=this.schools.filter(o=>o.id!==this.selectedSchool?.id),this.filteredSchools=this.filteredSchools.filter(o=>o.id!==this.selectedSchool?.id),this.closeModals(),this.toast.success("School deleted successfully")},error:t=>{console.error("Error deleting school:",t),console.error("Error details:",{status:t.status,statusText:t.statusText,message:t.message,url:t.url}),this.toast.error("Failed to delete school. Please try again.")}}))}getTypeIcon(t){return{[s.SCHOOL]:"\u{1f3eb}",[s.COLLEGE]:"\u{1f393}",[s.UNIVERSITY]:"\u{1f3db}\ufe0f",[s.INSTITUTE]:"\u{1f3e2}",[s.ACADEMY]:"\u{1f4da}",[s.TRAINING_CENTER]:"\u{1f3af}"}[t]||"\u{1f4da}"}getTypeClass(t){return{[s.SCHOOL]:"type-school",[s.COLLEGE]:"type-college",[s.UNIVERSITY]:"type-university",[s.INSTITUTE]:"type-institute",[s.ACADEMY]:"type-academy",[s.TRAINING_CENTER]:"type-training-center"}[t]||"type-default"}trackBySchoolId(t,o){return o.id||t.toString()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(k),e.rXU(r.ok),e.rXU(x.g),e.rXU(M.B),e.rXU(y.f))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-school-list"]],standalone:!0,features:[e.aNF],decls:32,vars:11,consts:[[1,"schools-container"],[3,"title","subtitle","dense"],["header-actions",""],["class","add-btn small",3,"click",4,"ngIf"],[1,"schools-header"],[1,"header-content"],[1,"header-right"],[1,"search-filter-section"],[1,"search-box"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"search-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search schools...",1,"search-input",3,"ngModel","ngModelChange","input"],[1,"filter-select",3,"ngModel","ngModelChange","change"],["value","all"],["value","SCHOOL"],["value","COLLEGE"],["value","UNIVERSITY"],["value","INSTITUTE"],["value","ACADEMY"],["value","TRAINING_CENTER"],["class","loading-container",4,"ngIf"],["class","schools-grid",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"add-btn","small",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"add-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"loading-container"],[1,"loading-spinner"],[1,"schools-grid"],["class","school-card",3,"class",4,"ngFor","ngForOf","ngForTrackBy"],[1,"school-card"],[1,"school-card-header"],[1,"school-icon-wrapper"],[1,"school-icon"],[1,"school-type-badge"],[1,"school-card-content"],[1,"school-name"],[1,"school-address"],[1,"school-details"],[1,"detail-item"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"detail-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],["class","detail-item",4,"ngIf"],["class","school-details",4,"ngIf"],["class","school-card-actions",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 0a9 9 0 01-9-9m9 9a9 9 0 00-9 9m9-9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9h.01M9 12h4.01M9 12v4.01M12 9v.01"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"school-card-actions"],[1,"action-btn","edit-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"action-btn","delete-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"empty-state"],[1,"empty-icon"],["class","add-first-btn",3,"click",4,"ngIf"],[1,"add-first-btn",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-container",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"modal-close-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"modal-form",3,"formGroup","ngSubmit"],[1,"form-grid"],[1,"form-group"],["for","name",1,"form-label"],["id","name","type","text","formControlName","name",1,"form-input"],["class","error-message",4,"ngIf"],[1,"form-group","full-width"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","2","placeholder","Brief description of the school",1,"form-textarea"],["for","type",1,"form-label"],["id","type","formControlName","type",1,"form-select"],["for","address",1,"form-label"],["id","address","formControlName","address","rows","3",1,"form-textarea"],["for","phone",1,"form-label"],["id","phone","type","tel","formControlName","phone",1,"form-input"],["for","email",1,"form-label"],["id","email","type","email","formControlName","email",1,"form-input"],["for","principalName",1,"form-label"],["id","principalName","type","text","formControlName","principalName",1,"form-input"],["for","website",1,"form-label"],["id","website","type","url","formControlName","website","placeholder","https://schoolwebsite.com",1,"form-input"],["for","studentCapacity",1,"form-label"],["id","studentCapacity","type","number","formControlName","studentCapacity","min","0",1,"form-input"],["for","affiliation",1,"form-label"],["id","affiliation","type","text","formControlName","affiliation","placeholder","CBSE, ICSE, State Board, etc.",1,"form-input"],["for","registrationNumber",1,"form-label"],["id","registrationNumber","type","text","formControlName","registrationNumber",1,"form-input"],[1,"modal-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error-message"],[1,"modal-container","small",3,"click"],[1,"delete-confirmation"],[1,"warning-icon"],["type","button",1,"btn-danger",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"app-feature-header",1)(2,"div",2),e.DNE(3,O,4,0,"button",3),e.k0s()(),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),e.qSk(),e.j41(9,"svg",9),e.nrm(10,"path",10),e.k0s(),e.joV(),e.j41(11,"input",11),e.bIt("ngModelChange",function(d){return i.searchQuery=d})("input",function(){return i.filterSchools()}),e.k0s()(),e.j41(12,"select",12),e.bIt("ngModelChange",function(d){return i.selectedType=d})("change",function(){return i.filterSchools()}),e.j41(13,"option",13),e.EFF(14,"All Types"),e.k0s(),e.j41(15,"option",14),e.EFF(16,"Schools"),e.k0s(),e.j41(17,"option",15),e.EFF(18,"Colleges"),e.k0s(),e.j41(19,"option",16),e.EFF(20,"Universities"),e.k0s(),e.j41(21,"option",17),e.EFF(22,"Institutes"),e.k0s(),e.j41(23,"option",18),e.EFF(24,"Academies"),e.k0s(),e.j41(25,"option",19),e.EFF(26,"Training Centers"),e.k0s()()()()()(),e.DNE(27,F,4,0,"div",20),e.DNE(28,$,2,2,"div",21),e.DNE(29,G,8,2,"div",22),e.DNE(30,U,74,13,"div",23),e.DNE(31,Y,23,1,"div",23),e.k0s()),2&o&&(e.R7$(1),e.Y8G("title","\u{1f3eb} Schools & Colleges")("subtitle","Educational institutions in your village")("dense",!0),e.R7$(2),e.Y8G("ngIf",i.canCreate()),e.R7$(8),e.Y8G("ngModel",i.searchQuery),e.R7$(1),e.Y8G("ngModel",i.selectedType),e.R7$(15),e.Y8G("ngIf",i.isLoading),e.R7$(1),e.Y8G("ngIf",!i.isLoading),e.R7$(1),e.Y8G("ngIf",!i.isLoading&&0===i.filteredSchools.length),e.R7$(1),e.Y8G("ngIf",i.showAddModal||i.showEditModal),e.R7$(1),e.Y8G("ngIf",i.showDeleteModal))},dependencies:[h.MD,h.Sq,h.bT,h.PV,r.YN,r.qT,r.xH,r.y7,r.me,r.Q0,r.wz,r.BC,r.cb,r.VZ,r.vS,r.X1,r.j4,r.JD,_.G,S.$],styles:[".schools-container[_ngcontent-%COMP%]{padding:2rem;max-width:1320px;margin:0 auto;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif;background:linear-gradient(180deg,#f9fafb 0%,#f3f4f6 100%);min-height:100vh}.schools-header[_ngcontent-%COMP%]{background:#ffffff;border-radius:16px;padding:1.1rem 1.4rem;margin-bottom:1rem;border:1px solid #e5e7eb;box-shadow:0 2px 8px #00000014}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:nowrap}.header-left[_ngcontent-%COMP%]{flex:1 1 auto;min-width:0}.page-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800;background:linear-gradient(120deg,#6366f1 0%,#8b5cf6 50%,#3b82f6 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;margin:0 0 .1rem;line-height:1.2;letter-spacing:-.015em}.page-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin:0}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;flex:0 0 auto;justify-content:flex-end}.search-filter-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;gap:.5rem;align-items:center}.search-box[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;width:20px;height:20px;color:#94a3b8;z-index:1}.search-input[_ngcontent-%COMP%]{padding:.5rem .75rem .5rem 2.4rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.95rem;background:white;transition:all .3s ease;width:100%;outline:none;height:36px}.search-input[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.filter-select[_ngcontent-%COMP%]{padding:.5rem .75rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.95rem;background:white;cursor:pointer;transition:all .3s ease;outline:none;height:36px}.filter-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.add-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);color:#fff;border:none;border-radius:10px;padding:.5rem .9rem;font-size:.85rem;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:all .3s ease;box-shadow:0 6px 20px #6366f159;white-space:nowrap;min-width:max-content}.add-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 28px #6366f173}.add-icon[_ngcontent-%COMP%]{width:16px;height:16px}.add-btn.small[_ngcontent-%COMP%]{padding:.35rem .7rem;font-size:.8rem;height:36px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem;color:#64748b}.loading-spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e2e8f0;border-top:3px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.schools-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem;padding:.5rem 0}.school-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:14px;padding:.9rem 1rem;box-shadow:0 1px 2px #0000000a;border:1px solid #e5e7eb;transition:background .2s ease,box-shadow .2s ease,transform .2s ease;position:relative;overflow:hidden}.school-card[_ngcontent-%COMP%]:hover{background:#fcfcfd;transform:translateY(-2px);box-shadow:0 6px 16px #00000014}.school-card.type-school[_ngcontent-%COMP%]{border-left:4px solid #10b981}.school-card.type-college[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.school-card.type-university[_ngcontent-%COMP%]{border-left:4px solid #8b5cf6}.school-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.75rem}.school-icon-wrapper[_ngcontent-%COMP%]{width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-size:1.6rem;background:linear-gradient(135deg,#ffffff 0%,#f8fafc 100%);border:1px solid rgba(255,255,255,.8);box-shadow:0 8px 24px #0f172a14,inset 0 1px #fffc}.school-icon[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}.school-type-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.badge-school[_ngcontent-%COMP%]{background:rgba(16,185,129,.1);color:#059669}.badge-college[_ngcontent-%COMP%]{background:rgba(59,130,246,.1);color:#2563eb}.badge-university[_ngcontent-%COMP%]{background:rgba(139,92,246,.1);color:#7c3aed}.school-card-content[_ngcontent-%COMP%]{flex:1}.school-name[_ngcontent-%COMP%]{font-size:1.15rem;font-weight:800;color:#0f172a;margin:0 0 .25rem}.school-address[_ngcontent-%COMP%]{color:#475569;font-size:.9rem;margin:0 0 .75rem;line-height:1.5}.school-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1.5rem}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:.9rem;color:#475569}.detail-icon[_ngcontent-%COMP%]{width:16px;height:16px;color:#94a3b8;flex-shrink:0}.facilities-section[_ngcontent-%COMP%]{margin-top:1.5rem}.facilities-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.facility-tag[_ngcontent-%COMP%]{background:rgba(102,126,234,.1);color:#4f46e5;padding:.25rem .75rem;border-radius:16px;font-size:.8rem;font-weight:500}.facility-tag.more[_ngcontent-%COMP%]{background:rgba(148,163,184,.1);color:#64748b}.school-card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.75rem;padding-top:.75rem;border-top:1px solid #e2e8f0}.action-btn[_ngcontent-%COMP%]{flex:0 0 auto;padding:.45rem .6rem;border:none;border-radius:10px;font-size:.82rem;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:.35rem;transition:all .2s ease}.edit-btn[_ngcontent-%COMP%]{background:rgba(59,130,246,.1);color:#2563eb}.edit-btn[_ngcontent-%COMP%]:hover{background:#3b82f6;color:#fff;transform:translateY(-2px)}.delete-btn[_ngcontent-%COMP%]{background:rgba(239,68,68,.1);color:#dc2626}.delete-btn[_ngcontent-%COMP%]:hover{background:#ef4444;color:#fff;transform:translateY(-2px)}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#64748b}.empty-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1.5rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#334155;margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin:0 0 2rem;max-width:400px;margin-left:auto;margin-right:auto}.add-first-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:#fff;border:none;border-radius:12px;padding:1rem 2rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #10b9814d}.add-first-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #10b98166}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-container[_ngcontent-%COMP%]{background:white;border-radius:20px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;box-shadow:0 25px 50px #00000040;animation:_ngcontent-%COMP%_modalSlideIn .3s ease}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-50px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-container.small[_ngcontent-%COMP%]{max-width:450px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2rem;border-bottom:1px solid #e2e8f0}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin:0}.modal-close-btn[_ngcontent-%COMP%]{width:40px;height:40px;border:none;border-radius:12px;background:#f1f5f9;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;color:#64748b}.modal-close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:#475569}.modal-form[_ngcontent-%COMP%]{padding:2rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:#374151;margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e2e8f0;border-radius:10px;font-size:.95rem;transition:all .3s ease;outline:none;background:white}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input.error[_ngcontent-%COMP%], .form-textarea.error[_ngcontent-%COMP%]{border-color:#ef4444}.error-message[_ngcontent-%COMP%]{font-size:.8rem;color:#ef4444;margin-top:.25rem}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e2e8f0}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s ease;flex:1}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 4px 15px #667eea4d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #667eea66}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569;border:2px solid #e2e8f0}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0;border-color:#cbd5e1}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff;box-shadow:0 4px 15px #ef44444d}.btn-danger[_ngcontent-%COMP%]:hover{background:#dc2626;transform:translateY(-2px);box-shadow:0 8px 25px #ef444466}.delete-confirmation[_ngcontent-%COMP%]{padding:2rem;text-align:center}.warning-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.delete-confirmation[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin:0 0 .5rem}.delete-confirmation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 2rem}@media (max-width: 1024px){.schools-container[_ngcontent-%COMP%]{padding:1.5rem}.schools-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem;text-align:center;align-items:stretch}}@media (max-width: 768px){.schools-container[_ngcontent-%COMP%]{padding:1rem}.schools-header[_ngcontent-%COMP%]{padding:1rem;background-color:#fff;border-radius:10px;box-shadow:0 4px 15px #0000001a;display:flex;flex-direction:column;align-items:stretch}.schools-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.schools-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1e293b;margin:0}.schools-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.schools-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:10px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .3s ease}.page-title[_ngcontent-%COMP%]{font-size:2rem}.schools-grid[_ngcontent-%COMP%], .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.modal-container[_ngcontent-%COMP%]{width:95%;margin:1rem}.modal-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return n})()}}]);