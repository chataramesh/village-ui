"use strict";(self.webpackChunkvillage_ui=self.webpackChunkvillage_ui||[]).push([[474],{8474:(tv,dr,G)=>{G.r(dr),G.d(dr,{DashboardModule:()=>Jx});var pt=G(177),Ce=G(2559),ai=G(400);function li(s){return s+.5|0}const he=(s,t,e)=>Math.max(Math.min(s,e),t);function Si(s){return he(li(2.55*s),0,255)}function ke(s){return he(li(255*s),0,255)}function de(s){return he(li(s/2.55)/100,0,1)}function gr(s){return he(li(100*s),0,100)}const Kt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},cs=[..."0123456789ABCDEF"],wh=s=>cs[15&s],Ch=s=>cs[(240&s)>>4]+cs[15&s],un=s=>(240&s)>>4==(15&s);const Sh=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ur(s,t,e){const i=t*Math.min(e,1-e),n=(o,r=(o+s/30)%12)=>e-i*Math.max(Math.min(r-3,9-r,1),-1);return[n(0),n(8),n(4)]}function Ah(s,t,e){const i=(n,o=(n+s/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function Eh(s,t,e){const i=ur(s,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)i[n]*=1-t-e,i[n]+=t;return i}function hs(s){const e=s.r/255,i=s.g/255,n=s.b/255,o=Math.max(e,i,n),r=Math.min(e,i,n),a=(o+r)/2;let c,h,d;return o!==r&&(d=o-r,h=a>.5?d/(2-o-r):d/(o+r),c=function Ih(s,t,e,i,n){return s===n?(t-e)/i+(t<e?6:0):t===n?(e-s)/i+2:(s-t)/i+4}(e,i,n,d,o),c=60*c+.5),[0|c,h||0,a]}function ds(s,t,e,i){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,e,i)).map(ke)}function gs(s,t,e){return ds(ur,s,t,e)}function pr(s){return(s%360+360)%360}const fr={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},mr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let pn;const Vh=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,us=s=>s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055,ci=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function fn(s,t,e){if(s){let i=hs(s);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,0===t?360:1)),i=gs(i),s.r=i[0],s.g=i[1],s.b=i[2]}}function br(s,t){return s&&Object.assign(t||{},s)}function xr(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=ke(s[3]))):(t=br(s,{r:0,g:0,b:0,a:1})).a=ke(t.a),t}function Yh(s){return"r"===s.charAt(0)?function Nh(s){const t=Vh.exec(s);let i,n,o,e=255;if(t){if(t[7]!==i){const r=+t[7];e=t[8]?Si(r):he(255*r,0,255)}return i=+t[1],n=+t[3],o=+t[5],i=255&(t[2]?Si(i):he(i,0,255)),n=255&(t[4]?Si(n):he(n,0,255)),o=255&(t[6]?Si(o):he(o,0,255)),{r:i,g:n,b:o,a:e}}}(s):function Lh(s){const t=Sh.exec(s);let i,e=255;if(!t)return;t[5]!==i&&(e=t[6]?Si(+t[5]):ke(+t[5]));const n=pr(+t[2]),o=+t[3]/100,r=+t[4]/100;return i="hwb"===t[1]?function Th(s,t,e){return ds(Eh,s,t,e)}(n,o,r):"hsv"===t[1]?function Rh(s,t,e){return ds(Ah,s,t,e)}(n,o,r):gs(n,o,r),{r:i[0],g:i[1],b:i[2],a:e}}(s)}class hi{constructor(t){if(t instanceof hi)return t;const e=typeof t;let i;"object"===e?i=xr(t):"string"===e&&(i=function Mh(s){var e,t=s.length;return"#"===s[0]&&(4===t||5===t?e={r:255&17*Kt[s[1]],g:255&17*Kt[s[2]],b:255&17*Kt[s[3]],a:5===t?17*Kt[s[4]]:255}:(7===t||9===t)&&(e={r:Kt[s[1]]<<4|Kt[s[2]],g:Kt[s[3]]<<4|Kt[s[4]],b:Kt[s[5]]<<4|Kt[s[6]],a:9===t?Kt[s[7]]<<4|Kt[s[8]]:255})),e}(t)||function jh(s){pn||(pn=function zh(){const s={},t=Object.keys(mr),e=Object.keys(fr);let i,n,o,r,a;for(i=0;i<t.length;i++){for(r=a=t[i],n=0;n<e.length;n++)o=e[n],a=a.replace(o,fr[o]);o=parseInt(mr[r],16),s[a]=[o>>16&255,o>>8&255,255&o]}return s}(),pn.transparent=[0,0,0,0]);const t=pn[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||Yh(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=br(this._rgb);return t&&(t.a=de(t.a)),t}set rgb(t){this._rgb=xr(t)}rgbString(){return this._valid?function Bh(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${de(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}(this._rgb):void 0}hexString(){return this._valid?function Oh(s){var t=(s=>un(s.r)&&un(s.g)&&un(s.b)&&un(s.a))(s)?wh:Ch;return s?"#"+t(s.r)+t(s.g)+t(s.b)+((s,t)=>s<255?t(s):"")(s.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function Fh(s){if(!s)return;const t=hs(s),e=t[0],i=gr(t[1]),n=gr(t[2]);return s.a<255?`hsla(${e}, ${i}%, ${n}%, ${de(s.a)})`:`hsl(${e}, ${i}%, ${n}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,n=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,c=i.a-n.a,h=((a*c==-1?a:(a+c)/(1+a*c))+1)/2;o=1-h,i.r=255&h*i.r+o*n.r+.5,i.g=255&h*i.g+o*n.g+.5,i.b=255&h*i.b+o*n.b+.5,i.a=r*i.a+(1-r)*n.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function Hh(s,t,e){const i=ci(de(s.r)),n=ci(de(s.g)),o=ci(de(s.b));return{r:ke(us(i+e*(ci(de(t.r))-i))),g:ke(us(n+e*(ci(de(t.g))-n))),b:ke(us(o+e*(ci(de(t.b))-o))),a:s.a+e*(t.a-s.a)}}(this._rgb,t._rgb,e)),this}clone(){return new hi(this.rgb)}alpha(t){return this._rgb.a=ke(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=li(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return fn(this._rgb,2,t),this}darken(t){return fn(this._rgb,2,-t),this}saturate(t){return fn(this._rgb,1,t),this}desaturate(t){return fn(this._rgb,1,-t),this}rotate(t){return function Dh(s,t){var e=hs(s);e[0]=pr(e[0]+t),e=gs(e),s.r=e[0],s.g=e[1],s.b=e[2]}(this._rgb,t),this}}function ge(){}const Xh=(()=>{let s=0;return()=>s++})();function tt(s){return null==s}function xt(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function et(s){return null!==s&&"[object Object]"===Object.prototype.toString.call(s)}function wt(s){return("number"==typeof s||s instanceof Number)&&isFinite(+s)}function $t(s,t){return wt(s)?s:t}function q(s,t){return typeof s>"u"?t:s}const vr=(s,t)=>"string"==typeof s&&s.endsWith("%")?parseFloat(s)/100*t:+s;function ft(s,t,e){if(s&&"function"==typeof s.call)return s.apply(e,t)}function ht(s,t,e,i){let n,o,r;if(xt(s))if(o=s.length,i)for(n=o-1;n>=0;n--)t.call(e,s[n],n);else for(n=0;n<o;n++)t.call(e,s[n],n);else if(et(s))for(r=Object.keys(s),o=r.length,n=0;n<o;n++)t.call(e,s[r[n]],r[n])}function mn(s,t){let e,i,n,o;if(!s||!t||s.length!==t.length)return!1;for(e=0,i=s.length;e<i;++e)if(n=s[e],o=t[e],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function bn(s){if(xt(s))return s.map(bn);if(et(s)){const t=Object.create(null),e=Object.keys(s),i=e.length;let n=0;for(;n<i;++n)t[e[n]]=bn(s[e[n]]);return t}return s}function yr(s){return-1===["__proto__","prototype","constructor"].indexOf(s)}function Uh(s,t,e,i){if(!yr(s))return;const n=t[s],o=e[s];et(n)&&et(o)?Ai(n,o,i):t[s]=bn(o)}function Ai(s,t,e){const i=xt(t)?t:[t],n=i.length;if(!et(s))return s;const o=(e=e||{}).merger||Uh;let r;for(let a=0;a<n;++a){if(r=i[a],!et(r))continue;const c=Object.keys(r);for(let h=0,d=c.length;h<d;++h)o(c[h],s,r,e)}return s}function Ei(s,t){return Ai(s,t,{merger:Gh})}function Gh(s,t,e){if(!yr(s))return;const i=t[s],n=e[s];et(i)&&et(n)?Ei(i,n):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=bn(n))}const _r={"":s=>s,x:s=>s.x,y:s=>s.y};function Me(s,t){return(_r[t]||(_r[t]=function qh(s){const t=function $h(s){const t=s.split("."),e=[];let i="";for(const n of t)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}(s);return e=>{for(const i of t){if(""===i)break;e=e&&e[i]}return e}}(t)))(s)}function ps(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Ii=s=>typeof s<"u",Pe=s=>"function"==typeof s,wr=(s,t)=>{if(s.size!==t.size)return!1;for(const e of s)if(!t.has(e))return!1;return!0},ot=Math.PI,vt=2*ot,Kh=vt+ot,xn=Number.POSITIVE_INFINITY,Jh=ot/180,Pt=ot/2,je=ot/4,Cr=2*ot/3,Oe=Math.log10,ae=Math.sign;function Ti(s,t,e){return Math.abs(s-t)<e}function kr(s){const t=Math.round(s);s=Ti(s,t,s/1e3)?t:s;const e=Math.pow(10,Math.floor(Oe(s))),i=s/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function di(s){return!function td(s){return"symbol"==typeof s||"object"==typeof s&&null!==s&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function Mr(s,t,e){let i,n,o;for(i=0,n=s.length;i<n;i++)o=s[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ie(s){return s*(ot/180)}function fs(s){return s*(180/ot)}function Pr(s){if(!wt(s))return;let t=1,e=0;for(;Math.round(s*t)/t!==s;)t*=10,e++;return e}function Or(s,t){const e=t.x-s.x,i=t.y-s.y,n=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*ot&&(o+=vt),{angle:o,distance:n}}function ms(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function id(s,t){return(s-t+Kh)%vt-ot}function Dt(s){return(s%vt+vt)%vt}function Ri(s,t,e,i){const n=Dt(s),o=Dt(t),r=Dt(e),a=Dt(o-n),c=Dt(r-n),h=Dt(n-o),d=Dt(n-r);return n===o||n===r||i&&o===r||a>c&&h<d}function Et(s,t,e){return Math.max(t,Math.min(e,s))}function ue(s,t,e,i=1e-6){return s>=Math.min(t,e)-i&&s<=Math.max(t,e)+i}function bs(s,t,e){e=e||(r=>s[r]<t);let o,i=s.length-1,n=0;for(;i-n>1;)o=n+i>>1,e(o)?n=o:i=o;return{lo:n,hi:i}}const pe=(s,t,e,i)=>bs(s,e,i?n=>{const o=s[n][t];return o<e||o===e&&s[n+1][t]===e}:n=>s[n][t]<e),sd=(s,t,e)=>bs(s,e,i=>s[i][t]>=e),Sr=["push","pop","shift","splice","unshift"];function Ar(s,t){const e=s._chartjs;if(!e)return;const i=e.listeners,n=i.indexOf(t);-1!==n&&i.splice(n,1),!(i.length>0)&&(Sr.forEach(o=>{delete s[o]}),delete s._chartjs)}function Er(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const Ir=typeof window>"u"?function(s){return s()}:window.requestAnimationFrame;function Tr(s,t){let e=[],i=!1;return function(...n){e=n,i||(i=!0,Ir.call(window,()=>{i=!1,s.apply(t,e)}))}}const xs=s=>"start"===s?"left":"end"===s?"right":"center",Ft=(s,t,e)=>"start"===s?t:"end"===s?e:(t+e)/2;function Rr(s,t,e){const i=t.length;let n=0,o=i;if(s._sorted){const{iScale:r,vScale:a,_parsed:c}=s,h=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,d=r.axis,{min:g,max:u,minDefined:p,maxDefined:m}=r.getUserBounds();if(p){if(n=Math.min(pe(c,d,g).lo,e?i:pe(t,d,r.getPixelForValue(g)).lo),h){const f=c.slice(0,n+1).reverse().findIndex(b=>!tt(b[a.axis]));n-=Math.max(0,f)}n=Et(n,0,i-1)}if(m){let f=Math.max(pe(c,r.axis,u,!0).hi+1,e?0:pe(t,d,r.getPixelForValue(u),!0).hi+1);if(h){const b=c.slice(f-1).findIndex(x=>!tt(x[a.axis]));f+=Math.max(0,b)}o=Et(f,n,i)-n}else o=i-n}return{start:n,count:o}}function Lr(s){const{xScale:t,yScale:e,_scaleRanges:i}=s,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return s._scaleRanges=n,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,n),o}const vn=s=>0===s||1===s,Dr=(s,t,e)=>-Math.pow(2,10*(s-=1))*Math.sin((s-t)*vt/e),Fr=(s,t,e)=>Math.pow(2,-10*s)*Math.sin((s-t)*vt/e)+1,Li={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>1-Math.cos(s*Pt),easeOutSine:s=>Math.sin(s*Pt),easeInOutSine:s=>-.5*(Math.cos(ot*s)-1),easeInExpo:s=>0===s?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>1===s?1:1-Math.pow(2,-10*s),easeInOutExpo:s=>vn(s)?s:s<.5?.5*Math.pow(2,10*(2*s-1)):.5*(2-Math.pow(2,-10*(2*s-1))),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>vn(s)?s:Dr(s,.075,.3),easeOutElastic:s=>vn(s)?s:Fr(s,.075,.3),easeInOutElastic:s=>vn(s)?s:s<.5?.5*Dr(2*s,.1125,.45):.5+.5*Fr(2*s-1,.1125,.45),easeInBack:s=>s*s*(2.70158*s-1.70158),easeOutBack:s=>(s-=1)*s*(2.70158*s+1.70158)+1,easeInOutBack(s){let t=1.70158;return(s/=.5)<1?s*s*((1+(t*=1.525))*s-t)*.5:.5*((s-=2)*s*((1+(t*=1.525))*s+t)+2)},easeInBounce:s=>1-Li.easeOutBounce(1-s),easeOutBounce:s=>s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375,easeInOutBounce:s=>s<.5?.5*Li.easeInBounce(2*s):.5*Li.easeOutBounce(2*s-1)+.5};function vs(s){if(s&&"object"==typeof s){const t=s.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function zr(s){return vs(s)?s:new hi(s)}function ys(s){return vs(s)?s:new hi(s).saturate(.5).darken(.1).hexString()}const cd=["x","y","borderWidth","radius","tension"],hd=["color","borderColor","backgroundColor"],jr=new Map;function Di(s,t,e){return function ud(s,t){t=t||{};const e=s+JSON.stringify(t);let i=jr.get(e);return i||(i=new Intl.NumberFormat(s,t),jr.set(e,i)),i}(t,e).format(s)}const Vr={values:s=>xt(s)?s:""+s,numeric(s,t,e){if(0===s)return"0";const i=this.chart.options.locale;let n,o=s;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),o=function pd(s,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&s!==Math.floor(s)&&(e=s-Math.floor(s)),e}(s,e)}const r=Oe(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),c={notation:n,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Di(s,i,c)},logarithmic(s,t,e){if(0===s)return"0";const i=e[t].significand||s/Math.pow(10,Math.floor(Oe(s)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Vr.numeric.call(this,s,t,e):""}};var yn={formatters:Vr};const Ve=Object.create(null),_s=Object.create(null);function Fi(s,t){if(!t)return s;const e=t.split(".");for(let i=0,n=e.length;i<n;++i){const o=e[i];s=s[o]||(s[o]=Object.create(null))}return s}function ws(s,t,e){return"string"==typeof t?Ai(Fi(s,t),e):Ai(Fi(s,""),t)}class md{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>ys(n.backgroundColor),this.hoverBorderColor=(i,n)=>ys(n.borderColor),this.hoverColor=(i,n)=>ys(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ws(this,t,e)}get(t){return Fi(this,t)}describe(t,e){return ws(_s,t,e)}override(t,e){return ws(Ve,t,e)}route(t,e,i,n){const o=Fi(this,t),r=Fi(this,i),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const c=this[a],h=r[n];return et(c)?Object.assign({},h,c):q(c,h)},set(c){this[a]=c}}})}apply(t){t.forEach(e=>e(this))}}var yt=new md({_scriptable:s=>!s.startsWith("on"),_indexable:s=>"events"!==s,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function dd(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),s.set("animations",{colors:{type:"color",properties:hd},numbers:{type:"number",properties:cd}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function gd(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function fd(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:yn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function _n(s,t,e,i,n){let o=t[n];return o||(o=t[n]=s.measureText(n).width,e.push(n)),o>i&&(i=o),i}function xd(s,t,e,i){let n=(i=i||{}).data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(n=i.data={},o=i.garbageCollect=[],i.font=t),s.save(),s.font=t;let r=0;const a=e.length;let c,h,d,g,u;for(c=0;c<a;c++)if(g=e[c],null==g||xt(g)){if(xt(g))for(h=0,d=g.length;h<d;h++)u=g[h],null!=u&&!xt(u)&&(r=_n(s,n,o,r,u))}else r=_n(s,n,o,r,g);s.restore();const p=o.length/2;if(p>e.length){for(c=0;c<p;c++)delete n[o[c]];o.splice(0,p)}return r}function Ne(s,t,e){const i=s.currentDevicePixelRatio,n=0!==e?Math.max(e/2,.5):0;return Math.round((t-n)*i)/i+n}function Nr(s,t){!t&&!s||((t=t||s.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function Cs(s,t,e,i){Br(s,t,e,i,null)}function Br(s,t,e,i,n){let o,r,a,c,h,d,g,u;const p=t.pointStyle,m=t.rotation,f=t.radius;let b=(m||0)*Jh;if(p&&"object"==typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return s.save(),s.translate(e,i),s.rotate(b),s.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void s.restore();if(!(isNaN(f)||f<=0)){switch(s.beginPath(),p){default:n?s.ellipse(e,i,n/2,f,0,0,vt):s.arc(e,i,f,0,vt),s.closePath();break;case"triangle":d=n?n/2:f,s.moveTo(e+Math.sin(b)*d,i-Math.cos(b)*f),b+=Cr,s.lineTo(e+Math.sin(b)*d,i-Math.cos(b)*f),b+=Cr,s.lineTo(e+Math.sin(b)*d,i-Math.cos(b)*f),s.closePath();break;case"rectRounded":h=.516*f,c=f-h,r=Math.cos(b+je)*c,g=Math.cos(b+je)*(n?n/2-h:c),a=Math.sin(b+je)*c,u=Math.sin(b+je)*(n?n/2-h:c),s.arc(e-g,i-a,h,b-ot,b-Pt),s.arc(e+u,i-r,h,b-Pt,b),s.arc(e+g,i+a,h,b,b+Pt),s.arc(e-u,i+r,h,b+Pt,b+ot),s.closePath();break;case"rect":if(!m){c=Math.SQRT1_2*f,d=n?n/2:c,s.rect(e-d,i-c,2*d,2*c);break}b+=je;case"rectRot":g=Math.cos(b)*(n?n/2:f),r=Math.cos(b)*f,a=Math.sin(b)*f,u=Math.sin(b)*(n?n/2:f),s.moveTo(e-g,i-a),s.lineTo(e+u,i-r),s.lineTo(e+g,i+a),s.lineTo(e-u,i+r),s.closePath();break;case"crossRot":b+=je;case"cross":g=Math.cos(b)*(n?n/2:f),r=Math.cos(b)*f,a=Math.sin(b)*f,u=Math.sin(b)*(n?n/2:f),s.moveTo(e-g,i-a),s.lineTo(e+g,i+a),s.moveTo(e+u,i-r),s.lineTo(e-u,i+r);break;case"star":g=Math.cos(b)*(n?n/2:f),r=Math.cos(b)*f,a=Math.sin(b)*f,u=Math.sin(b)*(n?n/2:f),s.moveTo(e-g,i-a),s.lineTo(e+g,i+a),s.moveTo(e+u,i-r),s.lineTo(e-u,i+r),b+=je,g=Math.cos(b)*(n?n/2:f),r=Math.cos(b)*f,a=Math.sin(b)*f,u=Math.sin(b)*(n?n/2:f),s.moveTo(e-g,i-a),s.lineTo(e+g,i+a),s.moveTo(e+u,i-r),s.lineTo(e-u,i+r);break;case"line":r=n?n/2:Math.cos(b)*f,a=Math.sin(b)*f,s.moveTo(e-r,i-a),s.lineTo(e+r,i+a);break;case"dash":s.moveTo(e,i),s.lineTo(e+Math.cos(b)*(n?n/2:f),i+Math.sin(b)*f);break;case!1:s.closePath()}s.fill(),t.borderWidth>0&&s.stroke()}}function fe(s,t,e){return e=e||.5,!t||s&&s.x>t.left-e&&s.x<t.right+e&&s.y>t.top-e&&s.y<t.bottom+e}function wn(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function Cn(s){s.restore()}function vd(s,t,e,i,n){if(!t)return s.lineTo(e.x,e.y);if("middle"===n){const o=(t.x+e.x)/2;s.lineTo(o,t.y),s.lineTo(o,e.y)}else"after"===n!=!!i?s.lineTo(t.x,e.y):s.lineTo(e.x,t.y);s.lineTo(e.x,e.y)}function yd(s,t,e,i){if(!t)return s.lineTo(e.x,e.y);s.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function wd(s,t,e,i,n){if(n.strikethrough||n.underline){const o=s.measureText(i),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,h=e+o.actualBoundingBoxDescent,d=n.strikethrough?(e-o.actualBoundingBoxAscent+h)/2:h;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(r,d),s.lineTo(a,d),s.stroke()}}function Cd(s,t){const e=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=e}function Be(s,t,e,i,n,o={}){const r=xt(t)?t:[t],a=o.strokeWidth>0&&""!==o.strokeColor;let c,h;for(s.save(),s.font=n.string,function _d(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),tt(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}(s,o),c=0;c<r.length;++c)h=r[c],o.backdrop&&Cd(s,o.backdrop),a&&(o.strokeColor&&(s.strokeStyle=o.strokeColor),tt(o.strokeWidth)||(s.lineWidth=o.strokeWidth),s.strokeText(h,e,i,o.maxWidth)),s.fillText(h,e,i,o.maxWidth),wd(s,e,i,h,o),i+=Number(n.lineHeight);s.restore()}function zi(s,t){const{x:e,y:i,w:n,h:o,radius:r}=t;s.arc(e+r.topLeft,i+r.topLeft,r.topLeft,1.5*ot,ot,!0),s.lineTo(e,i+o-r.bottomLeft),s.arc(e+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,ot,Pt,!0),s.lineTo(e+n-r.bottomRight,i+o),s.arc(e+n-r.bottomRight,i+o-r.bottomRight,r.bottomRight,Pt,0,!0),s.lineTo(e+n,i+r.topRight),s.arc(e+n-r.topRight,i+r.topRight,r.topRight,0,-Pt,!0),s.lineTo(e+r.topLeft,i)}const kd=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Md=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Pd(s,t){const e=(""+s).match(kd);if(!e||"normal"===e[1])return 1.2*t;switch(s=+e[2],e[3]){case"px":return s;case"%":s/=100}return t*s}const Od=s=>+s||0;function ks(s,t){const e={},i=et(t),n=i?Object.keys(t):t,o=et(s)?i?r=>q(s[r],s[t[r]]):r=>s[r]:()=>s;for(const r of n)e[r]=Od(o(r));return e}function Hr(s){return ks(s,{top:"y",right:"x",bottom:"y",left:"x"})}function He(s){return ks(s,["topLeft","topRight","bottomLeft","bottomRight"])}function zt(s){const t=Hr(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function St(s,t){let e=q((s=s||{}).size,(t=t||yt.font).size);"string"==typeof e&&(e=parseInt(e,10));let i=q(s.style,t.style);i&&!(""+i).match(Md)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:q(s.family,t.family),lineHeight:Pd(q(s.lineHeight,t.lineHeight),e),size:e,style:i,weight:q(s.weight,t.weight),string:""};return n.string=function bd(s){return!s||tt(s.size)||tt(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}(n),n}function ji(s,t,e,i){let o,r,a,n=!0;for(o=0,r=s.length;o<r;++o)if(a=s[o],void 0!==a&&(void 0!==t&&"function"==typeof a&&(a=a(t),n=!1),void 0!==e&&xt(a)&&(a=a[e%a.length],n=!1),void 0!==a))return i&&!n&&(i.cacheable=!1),a}function Se(s,t){return Object.assign(Object.create(s),t)}function Ms(s,t=[""],e,i,n=(()=>s[0])){const o=e||s;typeof i>"u"&&(i=Gr("_fallback",s));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:o,_fallback:i,_getTarget:n,override:a=>Ms([a,...s],t,o,i)};return new Proxy(r,{deleteProperty:(a,c)=>(delete a[c],delete a._keys,delete s[0][c],!0),get:(a,c)=>Xr(a,c,()=>function Fd(s,t,e,i){let n;for(const o of t)if(n=Gr(Ad(o,s),e),typeof n<"u")return Ps(s,n)?Os(e,i,s,n):n}(c,t,s,a)),getOwnPropertyDescriptor:(a,c)=>Reflect.getOwnPropertyDescriptor(a._scopes[0],c),getPrototypeOf:()=>Reflect.getPrototypeOf(s[0]),has:(a,c)=>$r(a).includes(c),ownKeys:a=>$r(a),set(a,c,h){const d=a._storage||(a._storage=n());return a[c]=d[c]=h,delete a._keys,!0}})}function gi(s,t,e,i){const n={_cacheable:!1,_proxy:s,_context:t,_subProxy:e,_stack:new Set,_descriptors:Yr(s,i),setContext:o=>gi(s,o,e,i),override:o=>gi(s.override(o),t,e,i)};return new Proxy(n,{deleteProperty:(o,r)=>(delete o[r],delete s[r],!0),get:(o,r,a)=>Xr(o,r,()=>function Ed(s,t,e){const{_proxy:i,_context:n,_subProxy:o,_descriptors:r}=s;let a=i[t];return Pe(a)&&r.isScriptable(t)&&(a=function Id(s,t,e,i){const{_proxy:n,_context:o,_subProxy:r,_stack:a}=e;if(a.has(s))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+s);a.add(s);let c=t(o,r||i);return a.delete(s),Ps(s,c)&&(c=Os(n._scopes,n,s,c)),c}(t,a,s,e)),xt(a)&&a.length&&(a=function Td(s,t,e,i){const{_proxy:n,_context:o,_subProxy:r,_descriptors:a}=e;if(typeof o.index<"u"&&i(s))return t[o.index%t.length];if(et(t[0])){const c=t,h=n._scopes.filter(d=>d!==c);t=[];for(const d of c){const g=Os(h,n,s,d);t.push(gi(g,o,r&&r[s],a))}}return t}(t,a,s,r.isIndexable)),Ps(t,a)&&(a=gi(a,n,o&&o[t],r)),a}(o,r,a)),getOwnPropertyDescriptor:(o,r)=>o._descriptors.allKeys?Reflect.has(s,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,r),getPrototypeOf:()=>Reflect.getPrototypeOf(s),has:(o,r)=>Reflect.has(s,r),ownKeys:()=>Reflect.ownKeys(s),set:(o,r,a)=>(s[r]=a,delete o[r],!0)})}function Yr(s,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:n=t.allKeys}=s;return{allKeys:n,scriptable:e,indexable:i,isScriptable:Pe(e)?e:()=>e,isIndexable:Pe(i)?i:()=>i}}const Ad=(s,t)=>s?s+ps(t):t,Ps=(s,t)=>et(t)&&"adapters"!==s&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Xr(s,t,e){if(Object.prototype.hasOwnProperty.call(s,t)||"constructor"===t)return s[t];const i=e();return s[t]=i,i}function Wr(s,t,e){return Pe(s)?s(t,e):s}const Rd=(s,t)=>!0===s?t:"string"==typeof s?Me(t,s):void 0;function Ld(s,t,e,i,n){for(const o of t){const r=Rd(e,o);if(r){s.add(r);const a=Wr(r._fallback,e,n);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(!1===r&&typeof i<"u"&&e!==i)return null}return!1}function Os(s,t,e,i){const n=t._rootScopes,o=Wr(t._fallback,e,i),r=[...s,...n],a=new Set;a.add(i);let c=Ur(a,r,e,o||e,i);return!(null===c||typeof o<"u"&&o!==e&&(c=Ur(a,r,o,c,i),null===c))&&Ms(Array.from(a),[""],n,o,()=>function Dd(s,t,e){const i=s._getTarget();t in i||(i[t]={});const n=i[t];return xt(n)&&et(e)?e:n||{}}(t,e,i))}function Ur(s,t,e,i,n){for(;e;)e=Ld(s,t,e,i,n);return e}function Gr(s,t){for(const e of t){if(!e)continue;const i=e[s];if(typeof i<"u")return i}}function $r(s){let t=s._keys;return t||(t=s._keys=function zd(s){const t=new Set;for(const e of s)for(const i of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(i);return Array.from(t)}(s._scopes)),t}function qr(s,t,e,i){const{iScale:n}=s,{key:o="r"}=this._parsing,r=new Array(i);let a,c,h,d;for(a=0,c=i;a<c;++a)h=a+e,d=t[h],r[a]={r:n.parse(Me(d,o),h)};return r}const jd=Number.EPSILON||1e-14,ui=(s,t)=>t<s.length&&!s[t].skip&&s[t],Zr=s=>"x"===s?"y":"x";function Vd(s,t,e,i){const n=s.skip?t:s,o=t,r=e.skip?t:e,a=ms(o,n),c=ms(r,o);let h=a/(a+c),d=c/(a+c);h=isNaN(h)?0:h,d=isNaN(d)?0:d;const g=i*h,u=i*d;return{previous:{x:o.x-g*(r.x-n.x),y:o.y-g*(r.y-n.y)},next:{x:o.x+u*(r.x-n.x),y:o.y+u*(r.y-n.y)}}}function kn(s,t,e){return Math.max(Math.min(s,e),t)}function Xd(s,t,e,i,n){let o,r,a,c;if(t.spanGaps&&(s=s.filter(h=>!h.skip)),"monotone"===t.cubicInterpolationMode)!function Hd(s,t="x"){const e=Zr(t),i=s.length,n=Array(i).fill(0),o=Array(i);let r,a,c,h=ui(s,0);for(r=0;r<i;++r)if(a=c,c=h,h=ui(s,r+1),c){if(h){const d=h[t]-c[t];n[r]=0!==d?(h[e]-c[e])/d:0}o[r]=a?h?ae(n[r-1])!==ae(n[r])?0:(n[r-1]+n[r])/2:n[r-1]:n[r]}(function Nd(s,t,e){const i=s.length;let n,o,r,a,c,h=ui(s,0);for(let d=0;d<i-1;++d)if(c=h,h=ui(s,d+1),c&&h){if(Ti(t[d],0,jd)){e[d]=e[d+1]=0;continue}n=e[d]/t[d],o=e[d+1]/t[d],a=Math.pow(n,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[d]=n*r*t[d],e[d+1]=o*r*t[d])}})(s,n,o),function Bd(s,t,e="x"){const i=Zr(e),n=s.length;let o,r,a,c=ui(s,0);for(let h=0;h<n;++h){if(r=a,a=c,c=ui(s,h+1),!a)continue;const d=a[e],g=a[i];r&&(o=(d-r[e])/3,a[`cp1${e}`]=d-o,a[`cp1${i}`]=g-o*t[h]),c&&(o=(c[e]-d)/3,a[`cp2${e}`]=d+o,a[`cp2${i}`]=g+o*t[h])}}(s,o,t)}(s,n);else{let h=i?s[s.length-1]:s[0];for(o=0,r=s.length;o<r;++o)a=s[o],c=Vd(h,a,s[Math.min(o+1,r-(i?0:1))%r],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,h=a}t.capBezierPoints&&function Yd(s,t){let e,i,n,o,r,a=fe(s[0],t);for(e=0,i=s.length;e<i;++e)r=o,o=a,a=e<i-1&&fe(s[e+1],t),o&&(n=s[e],r&&(n.cp1x=kn(n.cp1x,t.left,t.right),n.cp1y=kn(n.cp1y,t.top,t.bottom)),a&&(n.cp2x=kn(n.cp2x,t.left,t.right),n.cp2y=kn(n.cp2y,t.top,t.bottom)))}(s,e)}function Ss(){return typeof window<"u"&&typeof document<"u"}function As(s){let t=s.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Mn(s,t,e){let i;return"string"==typeof s?(i=parseInt(s,10),-1!==s.indexOf("%")&&(i=i/100*t.parentNode[e])):i=s,i}const Pn=s=>s.ownerDocument.defaultView.getComputedStyle(s,null),Ud=["top","right","bottom","left"];function Ye(s,t,e){const i={};e=e?"-"+e:"";for(let n=0;n<4;n++){const o=Ud[n];i[o]=parseFloat(s[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Gd=(s,t,e)=>(s>0||t>0)&&(!e||!e.shadowRoot);function Xe(s,t){if("native"in s)return s;const{canvas:e,currentDevicePixelRatio:i}=t,n=Pn(e),o="border-box"===n.boxSizing,r=Ye(n,"padding"),a=Ye(n,"border","width"),{x:c,y:h,box:d}=function $d(s,t){const e=s.touches,i=e&&e.length?e[0]:s,{offsetX:n,offsetY:o}=i;let a,c,r=!1;if(Gd(n,o,s.target))a=n,c=o;else{const h=t.getBoundingClientRect();a=i.clientX-h.left,c=i.clientY-h.top,r=!0}return{x:a,y:c,box:r}}(s,e),g=r.left+(d&&a.left),u=r.top+(d&&a.top);let{width:p,height:m}=t;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((c-g)/p*e.width/i),y:Math.round((h-u)/m*e.height/i)}}const On=s=>Math.round(10*s)/10;function Kr(s,t,e){const i=t||1,n=Math.floor(s.height*i),o=Math.floor(s.width*i);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const r=s.canvas;return r.style&&(e||!r.style.height&&!r.style.width)&&(r.style.height=`${s.height}px`,r.style.width=`${s.width}px`),(s.currentDevicePixelRatio!==i||r.height!==n||r.width!==o)&&(s.currentDevicePixelRatio=i,r.height=n,r.width=o,s.ctx.setTransform(i,0,0,i,0,0),!0)}const Kd=function(){let s=!1;try{const t={get passive(){return s=!0,!1}};Ss()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s}();function Jr(s,t){const e=function Wd(s,t){return Pn(s).getPropertyValue(t)}(s,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function We(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:s.y+e*(t.y-s.y)}}function Jd(s,t,e,i){return{x:s.x+e*(t.x-s.x),y:"middle"===i?e<.5?s.y:t.y:"after"===i?e<1?s.y:t.y:e>0?t.y:s.y}}function Qd(s,t,e,i){const n={x:s.cp2x,y:s.cp2y},o={x:t.cp1x,y:t.cp1y},r=We(s,n,e),a=We(n,o,e),c=We(o,t,e),h=We(r,a,e),d=We(a,c,e);return We(h,d,e)}function pi(s,t,e){return s?function(s,t){return{x:e=>s+s+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,i)=>e-i,leftForLtr:(e,i)=>e-i}}(t,e):{x:s=>s,setWidth(s){},textAlign:s=>s,xPlus:(s,t)=>s+t,leftForLtr:(s,t)=>s}}function Qr(s,t){let e,i;("ltr"===t||"rtl"===t)&&(e=s.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),s.prevTextDirection=i)}function ta(s,t){void 0!==t&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function ea(s){return"angle"===s?{between:Ri,compare:id,normalize:Dt}:{between:ue,compare:(t,e)=>t-e,normalize:t=>t}}function ia({start:s,end:t,count:e,loop:i,style:n}){return{start:s%e,end:t%e,loop:i&&(t-s+1)%e==0,style:n}}function na(s,t,e){if(!e)return[s];const{property:i,start:n,end:o}=e,r=t.length,{compare:a,between:c,normalize:h}=ea(i),{start:d,end:g,loop:u,style:p}=function ig(s,t,e){const{property:i,start:n,end:o}=e,{between:r,normalize:a}=ea(i),c=t.length;let u,p,{start:h,end:d,loop:g}=s;if(g){for(h+=c,d+=c,u=0,p=c;u<p&&r(a(t[h%c][i]),n,o);++u)h--,d--;h%=c,d%=c}return d<h&&(d+=c),{start:h,end:d,loop:g,style:s.style}}(s,t,e),m=[];let x,v,_,f=!1,b=null;for(let M=d,P=d;M<=g;++M)v=t[M%r],!v.skip&&(x=h(v[i]),x!==_&&(f=c(x,n,o),null===b&&(f||c(n,_,x)&&0!==a(n,_))&&(b=0===a(x,n)?M:P),null!==b&&(!f||0===a(o,x)||c(o,_,x))&&(m.push(ia({start:b,end:M,loop:u,count:r,style:p})),b=null),P=M,_=x));return null!==b&&m.push(ia({start:b,end:g,loop:u,count:r,style:p})),m}function sa(s,t){const e=[],i=s.segments;for(let n=0;n<i.length;n++){const o=na(i[n],s.points,t);o.length&&e.push(...o)}return e}function ra(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function ag(s,t){if(!t)return!1;const e=[],i=function(n,o){return vs(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(s,i)!==JSON.stringify(t,i)}function Sn(s,t,e){return s.options.clip?s[e]:t[e]}function aa(s,t){const e=t._clip;if(e.disabled)return!1;const i=function lg(s,t){const{xScale:e,yScale:i}=s;return e&&i?{left:Sn(e,t,"left"),right:Sn(e,t,"right"),top:Sn(i,t,"top"),bottom:Sn(i,t,"bottom")}:t}(t,s.chartArea);return{left:!1===e.left?0:i.left-(!0===e.left?0:e.left),right:!1===e.right?s.width:i.right+(!0===e.right?0:e.right),top:!1===e.top?0:i.top-(!0===e.top?0:e.top),bottom:!1===e.bottom?s.height:i.bottom+(!0===e.bottom?0:e.bottom)}}class cg{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const r=e.duration;e.listeners[n].forEach(a=>a({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Ir.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const o=i.items;let c,r=o.length-1,a=!1;for(;r>=0;--r)c=o[r],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(n.draw(),this._notify(n,i,t,"progress")),o.length||(i.running=!1,this._notify(n,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var me=new cg;const la="transparent",hg={boolean:(s,t,e)=>e>.5?t:s,color(s,t,e){const i=zr(s||la),n=i.valid&&zr(t||la);return n&&n.valid?n.mix(i,e).hexString():t},number:(s,t,e)=>s+(t-s)*e};class dg{constructor(t,e,i,n){const o=e[i];n=ji([t.to,n,o,t.from]);const r=ji([t.from,o,n]);this._active=!0,this._fn=t.fn||hg[t.type||typeof r],this._easing=Li[t.easing]||Li.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const n=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=ji([t.to,e,n,t.from]),this._from=ji([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,n=this._prop,o=this._from,r=this._loop,a=this._to;let c;if(this._active=o!==a&&(r||e<i),!this._active)return this._target[n]=a,void this._notify(!0);e<0?this._target[n]=o:(c=e/i%2,c=r&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(o,a,c))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][e]()}}class ca{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!et(t))return;const e=Object.keys(yt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const o=t[n];if(!et(o))return;const r={};for(const a of e)r[a]=o[a];(xt(o.properties)&&o.properties||[n]).forEach(a=>{(a===n||!i.has(a))&&i.set(a,r)})})}_animateOptions(t,e){const i=e.options,n=function ug(s,t){if(!t)return;let e=s.options;if(e)return e.$shared&&(s.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;s.options=t}(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function gg(s,t){const e=[],i=Object.keys(t);for(let n=0;n<i.length;n++){const o=s[i[n]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let c;for(c=r.length-1;c>=0;--c){const h=r[c];if("$"===h.charAt(0))continue;if("options"===h){n.push(...this._animateOptions(t,e));continue}const d=e[h];let g=o[h];const u=i.get(h);if(g){if(u&&g.active()){g.update(u,d,a);continue}g.cancel()}u&&u.duration?(o[h]=g=new dg(u,t,h,d),n.push(g)):t[h]=d}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(me.add(this._chart,i),!0):void 0}}function ha(s,t){const e=s&&s.options||{},i=e.reverse,n=void 0===e.min?t:0,o=void 0===e.max?t:0;return{start:i?o:n,end:i?n:o}}function da(s,t){const e=[],i=s._getSortedDatasetMetas(t);let n,o;for(n=0,o=i.length;n<o;++n)e.push(i[n].index);return e}function ga(s,t,e,i={}){const n=s.keys,o="single"===i.mode;let r,a,c,h;if(null===t)return;let d=!1;for(r=0,a=n.length;r<a;++r){if(c=+n[r],c===e){if(d=!0,i.all)continue;break}h=s.values[c],wt(h)&&(o||0===t||ae(t)===ae(h))&&(t+=h)}return d||i.all?t:0}function Es(s,t){const e=s&&s.options.stacked;return e||void 0===e&&void 0!==t.stack}function vg(s,t,e){const i=s[t]||(s[t]={});return i[e]||(i[e]={})}function ua(s,t,e,i){for(const n of t.getMatchingVisibleMetas(i).reverse()){const o=s[n.index];if(e&&o>0||!e&&o<0)return n.index}return null}function pa(s,t){const{chart:e,_cachedMeta:i}=s,n=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:a}=i,c=o.axis,h=r.axis,d=function bg(s,t,e){return`${s.id}.${t.id}.${e.stack||e.type}`}(o,r,i),g=t.length;let u;for(let p=0;p<g;++p){const m=t[p],{[c]:f,[h]:b}=m;u=(m._stacks||(m._stacks={}))[h]=vg(n,d,f),u[a]=b,u._top=ua(u,r,!0,i.type),u._bottom=ua(u,r,!1,i.type),(u._visualValues||(u._visualValues={}))[a]=b}}function Is(s,t){const e=s.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Vi(s,t){const e=s.controller.index,i=s.vScale&&s.vScale.axis;if(i){t=t||s._parsed;for(const n of t){const o=n._stacks;if(!o||void 0===o[i]||void 0===o[i][e])return;delete o[i][e],void 0!==o[i]._visualValues&&void 0!==o[i]._visualValues[e]&&delete o[i]._visualValues[e]}}}const Ts=s=>"reset"===s||"none"===s,fa=(s,t)=>t?s:Object.assign({},s);let Ae=(()=>class s{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Es(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Vi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,n=this.getDataset(),o=(u,p,m,f)=>"x"===u?p:"r"===u?f:m,r=i.xAxisID=q(n.xAxisID,Is(e,"x")),a=i.yAxisID=q(n.yAxisID,Is(e,"y")),c=i.rAxisID=q(n.rAxisID,Is(e,"r")),h=i.indexAxis,d=i.iAxisID=o(h,r,a,c),g=i.vAxisID=o(h,a,r,c);i.xScale=this.getScaleForId(r),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ar(this._data,this),e._stacked&&Vi(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),n=this._data;if(et(i))this._data=function mg(s,t){const{iScale:e,vScale:i}=t,n="x"===e.axis?"x":"y",o="x"===i.axis?"x":"y",r=Object.keys(s),a=new Array(r.length);let c,h,d;for(c=0,h=r.length;c<h;++c)d=r[c],a[c]={[n]:d,[o]:s[d]};return a}(i,this._cachedMeta);else if(n!==i){if(n){Ar(n,this);const o=this._cachedMeta;Vi(o),o._parsed=[]}i&&Object.isExtensible(i)&&function rd(s,t){s._chartjs?s._chartjs.listeners.push(t):(Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Sr.forEach(e=>{const i="_onData"+ps(e),n=s[e];Object.defineProperty(s,e,{configurable:!0,enumerable:!1,value(...o){const r=n.apply(this,o);return s._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...o)}),r}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,n=this.getDataset();let o=!1;this._dataCheck();const r=i._stacked;i._stacked=Es(i.vScale,i),i.stack!==n.stack&&(o=!0,Vi(i),i.stack=n.stack),this._resyncElements(e),(o||r!==i._stacked)&&(pa(this,i._parsed),i._stacked=Es(i.vScale,i))}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:n,_data:o}=this,{iScale:r,_stacked:a}=n,c=r.axis;let g,u,p,h=0===e&&i===o.length||n._sorted,d=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=o,n._sorted=!0,p=o;else{p=xt(o[e])?this.parseArrayData(n,o,e,i):et(o[e])?this.parseObjectData(n,o,e,i):this.parsePrimitiveData(n,o,e,i);const m=()=>null===u[c]||d&&u[c]<d[c];for(g=0;g<i;++g)n._parsed[g+e]=u=p[g],h&&(m()&&(h=!1),d=u);n._sorted=h}a&&pa(this,p)}parsePrimitiveData(e,i,n,o){const{iScale:r,vScale:a}=e,c=r.axis,h=a.axis,d=r.getLabels(),g=r===a,u=new Array(o);let p,m,f;for(p=0,m=o;p<m;++p)f=p+n,u[p]={[c]:g||r.parse(d[f],f),[h]:a.parse(i[f],f)};return u}parseArrayData(e,i,n,o){const{xScale:r,yScale:a}=e,c=new Array(o);let h,d,g,u;for(h=0,d=o;h<d;++h)g=h+n,u=i[g],c[h]={x:r.parse(u[0],g),y:a.parse(u[1],g)};return c}parseObjectData(e,i,n,o){const{xScale:r,yScale:a}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d=new Array(o);let g,u,p,m;for(g=0,u=o;g<u;++g)p=g+n,m=i[p],d[g]={x:r.parse(Me(m,c),p),y:a.parse(Me(m,h),p)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,n){const r=this._cachedMeta,a=i[e.axis];return ga({keys:da(this.chart,!0),values:i._stacks[e.axis]._visualValues},a,r.index,{mode:n})}updateRangeFromParsed(e,i,n,o){const r=n[i.axis];let a=null===r?NaN:r;const c=o&&n._stacks[i.axis];o&&c&&(o.values=c,a=ga(o,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){const n=this._cachedMeta,o=n._parsed,r=n._sorted&&e===n.iScale,a=o.length,c=this._getOtherScale(e),h=((s,t,e)=>s&&!t.hidden&&t._stacked&&{keys:da(this.chart,!0),values:null})(i,n),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:u}=function xg(s){const{min:t,max:e,minDefined:i,maxDefined:n}=s.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}(c);let p,m;function f(){m=o[p];const b=m[c.axis];return!wt(m[e.axis])||g>b||u<b}for(p=0;p<a&&(f()||(this.updateRangeFromParsed(d,e,m,h),!r));++p);if(r)for(p=a-1;p>=0;--p)if(!f()){this.updateRangeFromParsed(d,e,m,h);break}return d}getAllParsedValues(e){const i=this._cachedMeta._parsed,n=[];let o,r,a;for(o=0,r=i.length;o<r;++o)a=i[o][e.axis],wt(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,n=i.iScale,o=i.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=function fg(s){let t,e,i,n;return et(s)?(t=s.top,e=s.right,i=s.bottom,n=s.left):t=e=i=n=s,{top:t,right:e,bottom:i,left:n,disabled:!1===s}}(q(this.options.clip,function pg(s,t,e){if(!1===e)return!1;const i=ha(s,e),n=ha(t,e);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this._cachedMeta,o=n.data||[],r=this.chart.chartArea,a=[],c=this._drawStart||0,h=this._drawCount||o.length-c,d=this.options.drawActiveElementsOnTop;let g;for(n.dataset&&n.dataset.draw(e,r,c,h),g=c;g<c+h;++g){const u=o[g];u.hidden||(u.active&&d?a.push(u):u.draw(e,r))}for(g=0;g<a.length;++g)a[g].draw(e,r)}getStyle(e,i){const n=i?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,i,n){const o=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];r=a.$context||(a.$context=function _g(s,t,e){return Se(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=o.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function yg(s,t){return Se(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!i,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",n){const o="active"===i,r=this._cachedDataOpts,a=e+"-"+i,c=r[a],h=this.enableOptionSharing&&Ii(n);if(c)return fa(c,h);const d=this.chart.config,g=d.datasetElementScopeKeys(this._type,e),u=o?[`${e}Hover`,"hover",e,""]:[e,""],p=d.getOptionScopes(this.getDataset(),g),m=Object.keys(yt.elements[e]),b=d.resolveNamedOptions(p,m,()=>this.getContext(n,o,i),u);return b.$shared&&(b.$shared=h,r[a]=Object.freeze(fa(b,h))),b}_resolveAnimations(e,i,n){const o=this.chart,r=this._cachedDataOpts,a=`animation-${i}`,c=r[a];if(c)return c;let h;if(!1!==o.options.animation){const g=this.chart.config,u=g.datasetAnimationScopeKeys(this._type,i),p=g.getOptionScopes(this.getDataset(),u);h=g.createResolver(p,this.getContext(e,n,i))}const d=new ca(o,h&&h.animations);return h&&h._cacheable&&(r[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Ts(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const n=this.resolveDataElementOptions(e,i),o=this._sharedOptions,r=this.getSharedOptions(n),a=this.includeOptions(i,r)||r!==o;return this.updateSharedOptions(r,i,n),{sharedOptions:r,includeOptions:a}}updateElement(e,i,n,o){Ts(o)?Object.assign(e,n):this._resolveAnimations(i,o).update(e,n)}updateSharedOptions(e,i,n){e&&!Ts(i)&&this._resolveAnimations(void 0,i).update(e,n)}_setStyle(e,i,n,o){e.active=o;const r=this.getStyle(i,o);this._resolveAnimations(i,n,o).update(e,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(e,i,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,i,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,n=this._cachedMeta.data;for(const[c,h,d]of this._syncList)this[c](h,d);this._syncList=[];const o=n.length,r=i.length,a=Math.min(r,o);a&&this.parse(0,a),r>o?this._insertElements(o,r-o,e):r<o&&this._removeElements(r,o-r)}_insertElements(e,i,n=!0){const o=this._cachedMeta,r=o.data,a=e+i;let c;const h=d=>{for(d.length+=i,c=d.length-1;c>=a;c--)d[c]=d[c-i]};for(h(r),c=e;c<a;++c)r[c]=new this.dataElementType;this._parsing&&h(o._parsed),this.parse(e,i),n&&this.updateElements(r,e,i,"reset")}updateElements(e,i,n,o){}_removeElements(e,i){const n=this._cachedMeta;if(this._parsing){const o=n._parsed.splice(e,i);n._stacked&&Vi(n,o)}n.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,n,o]=e;this[i](n,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}})();function kg(s){const t=s.iScale,e=function Cg(s,t){if(!s._cache.$bar){const e=s.getMatchingVisibleMetas(t);let i=[];for(let n=0,o=e.length;n<o;n++)i=i.concat(e[n].controller.getAllParsedValues(s));s._cache.$bar=Er(i.sort((n,o)=>n-o))}return s._cache.$bar}(t,s.type);let n,o,r,a,i=t._length;const c=()=>{32767===r||-32768===r||(Ii(a)&&(i=Math.min(i,Math.abs(r-a)||i)),a=r)};for(n=0,o=e.length;n<o;++n)r=t.getPixelForValue(e[n]),c();for(a=void 0,n=0,o=t.ticks.length;n<o;++n)r=t.getPixelForTick(n),c();return i}function ma(s,t,e,i){return xt(s)?function Og(s,t,e,i){const n=e.parse(s[0],i),o=e.parse(s[1],i),r=Math.min(n,o),a=Math.max(n,o);let c=r,h=a;Math.abs(r)>Math.abs(a)&&(c=a,h=r),t[e.axis]=h,t._custom={barStart:c,barEnd:h,start:n,end:o,min:r,max:a}}(s,t,e,i):t[e.axis]=e.parse(s,i),t}function ba(s,t,e,i){const n=s.iScale,o=s.vScale,r=n.getLabels(),a=n===o,c=[];let h,d,g,u;for(h=e,d=e+i;h<d;++h)u=t[h],g={},g[n.axis]=a||n.parse(r[h],h),c.push(ma(u,g,o,h));return c}function Rs(s){return s&&void 0!==s.barStart&&void 0!==s.barEnd}function Eg(s,t,e,i){let n=t.borderSkipped;const o={};if(!n)return void(s.borderSkipped=o);if(!0===n)return void(s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:r,end:a,reverse:c,top:h,bottom:d}=function Ag(s){let t,e,i,n,o;return s.horizontal?(t=s.base>s.x,e="left",i="right"):(t=s.base<s.y,e="bottom",i="top"),t?(n="end",o="start"):(n="start",o="end"),{start:e,end:i,reverse:t,top:n,bottom:o}}(s);"middle"===n&&e&&(s.enableBorderRadius=!0,(e._top||0)===i?n=h:(e._bottom||0)===i?n=d:(o[xa(d,r,a,c)]=!0,n=h)),o[xa(n,r,a,c)]=!0,s.borderSkipped=o}function xa(s,t,e,i){return i?(s=function Ig(s,t,e){return s===t?e:s===e?t:s}(s,t,e),s=va(s,e,t)):s=va(s,t,e),s}function va(s,t,e){return"start"===s?t:"end"===s?e:s}function Tg(s,{inflateAmount:t},e){s.inflateAmount="auto"===t?1===e?.33:0:t}let Rg=(()=>class s extends Ae{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,n,o){return ba(e,i,n,o)}parseArrayData(e,i,n,o){return ba(e,i,n,o)}parseObjectData(e,i,n,o){const{iScale:r,vScale:a}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d="x"===r.axis?c:h,g="x"===a.axis?c:h,u=[];let p,m,f,b;for(p=n,m=n+o;p<m;++p)b=i[p],f={},f[r.axis]=r.parse(Me(b,d),p),u.push(ma(Me(b,g),f,a,p));return u}updateRangeFromParsed(e,i,n,o){super.updateRangeFromParsed(e,i,n,o);const r=n._custom;r&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:n,vScale:o}=i,r=this.getParsed(e),a=r._custom,c=Rs(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(r[o.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,n,o){const r="reset"===o,{index:a,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),d=c.isHorizontal(),g=this._getRuler(),{sharedOptions:u,includeOptions:p}=this._getSharedOptions(i,o);for(let m=i;m<i+n;m++){const f=this.getParsed(m),b=r||tt(f[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,g),v=(f._stacks||{})[c.axis],_={horizontal:d,base:b.base,enableBorderRadius:!v||Rs(f._custom)||a===v._top||a===v._bottom,x:d?b.head:x.center,y:d?x.center:b.head,height:d?x.size:Math.abs(b.size),width:d?Math.abs(b.size):x.size};p&&(_.options=u||this.resolveDataElementOptions(m,e[m].active?"active":o));const w=_.options||e[m].options;Eg(_,w,v,a),Tg(_,w,g.ratio),this.updateElement(e[m],m,_,o)}}_getStacks(e,i){const{iScale:n}=this._cachedMeta,o=n.getMatchingVisibleMetas(this._type).filter(g=>g.controller.options.grouped),r=n.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),h=c&&c[n.axis],d=g=>{const u=g._parsed.find(m=>m[n.axis]===h),p=u&&u[g.vScale.axis];if(tt(p)||isNaN(p))return!0};for(const g of o)if((void 0===i||!d(g))&&((!1===r||-1===a.indexOf(g.stack)||void 0===r&&void 0===g.stack)&&a.push(g.stack),g.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===i).shift()}_getAxis(){const e={},i=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[q("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,i)]=!0;return Object.keys(e)}_getStackIndex(e,i,n){const o=this._getStacks(e,n),r=void 0!==i?o.indexOf(i):-1;return-1===r?o.length-1:r}_getRuler(){const e=this.options,i=this._cachedMeta,n=i.iScale,o=[];let r,a;for(r=0,a=i.data.length;r<a;++r)o.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const c=e.barThickness;return{min:c||kg(i),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:n,index:o},options:{base:r,minBarLength:a}}=this,c=r||0,h=this.getParsed(e),d=h._custom,g=Rs(d);let f,b,u=h[i.axis],p=0,m=n?this.applyStack(i,h,n):u;m!==u&&(p=m-u,m=u),g&&(u=d.barStart,m=d.barEnd-d.barStart,0!==u&&ae(u)!==ae(d.barEnd)&&(p=0),p+=u);const x=tt(r)||g?p:r;let v=i.getPixelForValue(x);if(f=this.chart.getDataVisibility(e)?i.getPixelForValue(p+m):v,b=f-v,Math.abs(b)<a){b=function Sg(s,t,e){return 0!==s?ae(s):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(b,i,c)*a,u===c&&(v-=b/2);const _=i.getPixelForDecimal(0),w=i.getPixelForDecimal(1),y=Math.min(_,w),k=Math.max(_,w);v=Math.max(Math.min(v,k),y),f=v+b,n&&!g&&(h._stacks[i.axis]._visualValues[o]=i.getValueForPixel(f)-i.getValueForPixel(v))}if(v===i.getPixelForValue(c)){const _=ae(b)*i.getLineWidthForValue(c)/2;v+=_,b-=_}return{size:b,base:v,head:f,center:f+b/2}}_calculateBarIndexPixels(e,i){const n=i.scale,o=this.options,r=o.skipNull,a=q(o.maxBarThickness,1/0);let c,h;const d=this._getAxisCount();if(i.grouped){const g=r?this._getStackCount(e):i.stackCount,u="flex"===o.barThickness?function Pg(s,t,e,i){const n=t.pixels,o=n[s];let r=s>0?n[s-1]:null,a=s<n.length-1?n[s+1]:null;const c=e.categoryPercentage;null===r&&(r=o-(null===a?t.end-t.start:a-o)),null===a&&(a=o+o-r);const h=o-(o-Math.min(r,a))/2*c;return{chunk:Math.abs(a-r)/2*c/i,ratio:e.barPercentage,start:h}}(e,i,o,g*d):function Mg(s,t,e,i){const n=e.barThickness;let o,r;return tt(n)?(o=t.min*e.categoryPercentage,r=e.barPercentage):(o=n*i,r=1),{chunk:o/i,ratio:r,start:t.pixels[s]-o/2}}(e,i,o,g*d),p="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(q(p,this.getFirstScaleIdForIndexAxis())),f=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+m;c=u.start+u.chunk*f+u.chunk/2,h=Math.min(a,u.chunk*u.ratio)}else c=n.getPixelForValue(this.getParsed(e)[n.axis],e),h=Math.min(a,i.min*i.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const e=this._cachedMeta,i=e.vScale,n=e.data,o=n.length;let r=0;for(;r<o;++r)null!==this.getParsed(r)[i.axis]&&!n[r].hidden&&n[r].draw(this._ctx)}})(),Lg=(()=>class s extends Ae{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,n,o){const r=super.parsePrimitiveData(e,i,n,o);for(let a=0;a<r.length;a++)r[a]._custom=this.resolveDataElementOptions(a+n).radius;return r}parseArrayData(e,i,n,o){const r=super.parseArrayData(e,i,n,o);for(let a=0;a<r.length;a++)r[a]._custom=q(i[n+a][2],this.resolveDataElementOptions(a+n).radius);return r}parseObjectData(e,i,n,o){const r=super.parseObjectData(e,i,n,o);for(let a=0;a<r.length;a++){const c=i[n+a];r[a]._custom=q(c&&c.r&&+c.r,this.resolveDataElementOptions(a+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let n=e.length-1;n>=0;--n)i=Math.max(i,e[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:o,yScale:r}=i,a=this.getParsed(e),c=o.getLabelForValue(a.x),h=r.getLabelForValue(a.y),d=a._custom;return{label:n[e]||"",value:"("+c+", "+h+(d?", "+d:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,n,o){const r="reset"===o,{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(i,o),g=a.axis,u=c.axis;for(let p=i;p<i+n;p++){const m=e[p],f=!r&&this.getParsed(p),b={},x=b[g]=r?a.getPixelForDecimal(.5):a.getPixelForValue(f[g]),v=b[u]=r?c.getBasePixel():c.getPixelForValue(f[u]);b.skip=isNaN(x)||isNaN(v),d&&(b.options=h||this.resolveDataElementOptions(p,m.active?"active":o),r&&(b.options.radius=0)),this.updateElement(m,p,b,o)}}resolveDataElementOptions(e,i){const n=this.getParsed(e);let o=super.resolveDataElementOptions(e,i);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const r=o.radius;return"active"!==i&&(o.radius=0),o.radius+=q(n&&n._custom,r),o}})(),Ls=(()=>class s extends Ae{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:o}}=e.legend.options;return i.labels.map((r,a)=>{const h=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const n=this.getDataset().data,o=this._cachedMeta;if(!1===this._parsing)o._parsed=n;else{let a,c,r=h=>+n[h];if(et(n[e])){const{key:h="value"}=this._parsing;r=d=>+Me(n[d],h)}for(a=e,c=e+i;a<c;++a)o._parsed[a]=r(a)}}_getRotation(){return ie(this.options.rotation-90)}_getCircumference(){return ie(this.options.circumference)}_getRotationExtents(){let e=vt,i=-vt;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const o=this.chart.getDatasetMeta(n).controller,r=o._getRotation(),a=o._getCircumference();e=Math.min(e,r),i=Math.max(i,r+a)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:n}=i,o=this._cachedMeta,r=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(n.width,n.height)-a)/2,0),h=Math.min(((s,t)=>"string"==typeof s&&s.endsWith("%")?parseFloat(s)/100:+s/t)(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:g,rotation:u}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:f,offsetY:b}=function Dg(s,t,e){let i=1,n=1,o=0,r=0;if(t<vt){const a=s,c=a+t,h=Math.cos(a),d=Math.sin(a),g=Math.cos(c),u=Math.sin(c),p=(_,w,y)=>Ri(_,a,c,!0)?1:Math.max(w,w*e,y,y*e),m=(_,w,y)=>Ri(_,a,c,!0)?-1:Math.min(w,w*e,y,y*e),f=p(0,h,g),b=p(Pt,d,u),x=m(ot,h,g),v=m(ot+Pt,d,u);i=(f-x)/2,n=(b-v)/2,o=-(f+x)/2,r=-(b+v)/2}return{ratioX:i,ratioY:n,offsetX:o,offsetY:r}}(u,g,h),_=Math.max(Math.min((n.width-a)/p,(n.height-a)/m)/2,0),w=vr(this.options.radius,_),k=(w-Math.max(w*h,0))/this._getVisibleDatasetWeightTotal();this.offsetX=f*w,this.offsetY=b*w,o.total=this.calculateTotal(),this.outerRadius=w-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,i){const n=this.options,o=this._cachedMeta,r=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===o._parsed[e]||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*r/vt)}updateElements(e,i,n,o){const r="reset"===o,a=this.chart,c=a.chartArea,g=(c.left+c.right)/2,u=(c.top+c.bottom)/2,p=r&&a.options.animation.animateScale,m=p?0:this.innerRadius,f=p?0:this.outerRadius,{sharedOptions:b,includeOptions:x}=this._getSharedOptions(i,o);let _,v=this._getRotation();for(_=0;_<i;++_)v+=this._circumference(_,r);for(_=i;_<i+n;++_){const w=this._circumference(_,r),y=e[_],k={x:g+this.offsetX,y:u+this.offsetY,startAngle:v,endAngle:v+w,circumference:w,outerRadius:f,innerRadius:m};x&&(k.options=b||this.resolveDataElementOptions(_,y.active?"active":o)),v+=w,this.updateElement(y,_,k,o)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let o,n=0;for(o=0;o<i.length;o++){const r=e._parsed[o];null!==r&&!isNaN(r)&&this.chart.getDataVisibility(o)&&!i[o].hidden&&(n+=Math.abs(r))}return n}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?vt*(Math.abs(e)/i):0}getLabelAndValue(e){const n=this.chart,o=n.data.labels||[],r=Di(this._cachedMeta._parsed[e],n.options.locale);return{label:o[e]||"",value:r}}getMaxBorderWidth(e){let i=0;const n=this.chart;let o,r,a,c,h;if(!e)for(o=0,r=n.data.datasets.length;o<r;++o)if(n.isDatasetVisible(o)){a=n.getDatasetMeta(o),e=a.data,c=a.controller;break}if(!e)return 0;for(o=0,r=e.length;o<r;++o)h=c.resolveDataElementOptions(o),"inner"!==h.borderAlign&&(i=Math.max(i,h.borderWidth||0,h.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let n=0,o=e.length;n<o;++n){const r=this.resolveDataElementOptions(n);i=Math.max(i,r.offset||0,r.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(e){return Math.max(q(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}})(),Fg=(()=>class s extends Ae{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:n,data:o=[],_dataset:r}=i,a=this.chart._animationsDisabled;let{start:c,count:h}=Rr(i,o,a);this._drawStart=c,this._drawCount=h,Lr(i)&&(c=0,h=o.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=o;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:d},e),this.updateElements(o,c,h,e)}updateElements(e,i,n,o){const r="reset"===o,{iScale:a,vScale:c,_stacked:h,_dataset:d}=this._cachedMeta,{sharedOptions:g,includeOptions:u}=this._getSharedOptions(i,o),p=a.axis,m=c.axis,{spanGaps:f,segment:b}=this.options,x=di(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===o,_=i+n,w=e.length;let y=i>0&&this.getParsed(i-1);for(let k=0;k<w;++k){const C=e[k],M=v?C:{};if(k<i||k>=_){M.skip=!0;continue}const P=this.getParsed(k),O=tt(P[m]),S=M[p]=a.getPixelForValue(P[p],k),E=M[m]=r||O?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,P,h):P[m],k);M.skip=isNaN(S)||isNaN(E)||O,M.stop=k>0&&Math.abs(P[p]-y[p])>x,b&&(M.parsed=P,M.raw=d.data[k]),u&&(M.options=g||this.resolveDataElementOptions(k,C.active?"active":o)),v||this.updateElement(C,k,M,o),y=P}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,o=e.data||[];if(!o.length)return n;const r=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(n,r,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}})(),ya=(()=>class s extends Ae{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:o}}=e.legend.options;return i.labels.map((r,a)=>{const h=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:o,lineWidth:h.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this.chart,o=n.data.labels||[],r=Di(this._cachedMeta._parsed[e].r,n.options.locale);return{label:o[e]||"",value:r}}parseObjectData(e,i,n,o){return qr.bind(this)(e,i,n,o)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((n,o)=>{const r=this.getParsed(o).r;!isNaN(r)&&this.chart.getDataVisibility(o)&&(r<i.min&&(i.min=r),r>i.max&&(i.max=r))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,n=e.options,o=Math.min(i.right-i.left,i.bottom-i.top),r=Math.max(o/2,0),c=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(e,i,n,o){const r="reset"===o,a=this.chart,h=a.options.animation,d=this._cachedMeta.rScale,g=d.xCenter,u=d.yCenter,p=d.getIndexAngle(0)-.5*ot;let f,m=p;const b=360/this.countVisibleElements();for(f=0;f<i;++f)m+=this._computeAngle(f,o,b);for(f=i;f<i+n;f++){const x=e[f];let v=m,_=m+this._computeAngle(f,o,b),w=a.getDataVisibility(f)?d.getDistanceFromCenterForValue(this.getParsed(f).r):0;m=_,r&&(h.animateScale&&(w=0),h.animateRotate&&(v=_=p));const y={x:g,y:u,innerRadius:0,outerRadius:w,startAngle:v,endAngle:_,options:this.resolveDataElementOptions(f,x.active?"active":o)};this.updateElement(x,f,y,o)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((n,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&i++}),i}_computeAngle(e,i,n){return this.chart.getDataVisibility(e)?ie(this.resolveDataElementOptions(e,i).angle||n):0}})();var zg=Object.freeze({__proto__:null,BarController:Rg,BubbleController:Lg,DoughnutController:Ls,LineController:Fg,PieController:(()=>class s extends Ls{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}})(),PolarAreaController:ya,RadarController:(()=>class s extends Ae{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const i=this._cachedMeta.vScale,n=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(e,i,n,o){return qr.bind(this)(e,i,n,o)}update(e){const i=this._cachedMeta,n=i.dataset,o=i.data||[],r=i.iScale.getLabels();if(n.points=o,"resize"!==e){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0),this.updateElement(n,void 0,{_loop:!0,_fullLoop:r.length===o.length,options:a},e)}this.updateElements(o,0,o.length,e)}updateElements(e,i,n,o){const r=this._cachedMeta.rScale,a="reset"===o;for(let c=i;c<i+n;c++){const h=e[c],d=this.resolveDataElementOptions(c,h.active?"active":o),g=r.getPointPositionForValue(c,this.getParsed(c).r),u=a?r.xCenter:g.x,p=a?r.yCenter:g.y,m={x:u,y:p,angle:g.angle,skip:isNaN(u)||isNaN(p),options:d};this.updateElement(h,c,m,o)}}})(),ScatterController:(()=>class s extends Ae{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:o,yScale:r}=i,a=this.getParsed(e),c=o.getLabelForValue(a.x),h=r.getLabelForValue(a.y);return{label:n[e]||"",value:"("+c+", "+h+")"}}update(e){const i=this._cachedMeta,{data:n=[]}=i,o=this.chart._animationsDisabled;let{start:r,count:a}=Rr(i,n,o);if(this._drawStart=r,this._drawCount=a,Lr(i)&&(r=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:c,_dataset:h}=i;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!h._decimated,c.points=n;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(c,void 0,{animated:!o,options:d},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(n,r,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,n,o){const r="reset"===o,{iScale:a,vScale:c,_stacked:h,_dataset:d}=this._cachedMeta,g=this.resolveDataElementOptions(i,o),u=this.getSharedOptions(g),p=this.includeOptions(o,u),m=a.axis,f=c.axis,{spanGaps:b,segment:x}=this.options,v=di(b)?b:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||r||"none"===o;let w=i>0&&this.getParsed(i-1);for(let y=i;y<i+n;++y){const k=e[y],C=this.getParsed(y),M=_?k:{},P=tt(C[f]),O=M[m]=a.getPixelForValue(C[m],y),S=M[f]=r||P?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,C,h):C[f],y);M.skip=isNaN(O)||isNaN(S)||P,M.stop=y>0&&Math.abs(C[m]-w[m])>v,x&&(M.parsed=C,M.raw=d.data[y]),p&&(M.options=u||this.resolveDataElementOptions(y,k.active?"active":o)),_||this.updateElement(k,y,M,o),w=C}this.updateSharedOptions(u,o,g)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let c=0;for(let h=i.length-1;h>=0;--h)c=Math.max(c,i[h].size(this.resolveDataElementOptions(h))/2);return c>0&&c}const n=e.dataset,o=n.options&&n.options.borderWidth||0;if(!i.length)return o;const r=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(o,r,a)/2}})()});function Ue(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ds{static override(t){Object.assign(Ds.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Ue()}parse(){return Ue()}format(){return Ue()}add(){return Ue()}diff(){return Ue()}startOf(){return Ue()}endOf(){return Ue()}}var jg__date=Ds;function Vg(s,t,e,i){const{controller:n,data:o,_sorted:r}=s,a=n._cachedMeta.iScale,c=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&r&&o.length){const h=a._reversePixels?sd:pe;if(!i){const d=h(o,t,e);if(c){const{vScale:g}=n._cachedMeta,{_parsed:u}=s,p=u.slice(0,d.lo+1).reverse().findIndex(f=>!tt(f[g.axis]));d.lo-=Math.max(0,p);const m=u.slice(d.hi).findIndex(f=>!tt(f[g.axis]));d.hi+=Math.max(0,m)}return d}if(n._sharedOptions){const d=o[0],g="function"==typeof d.getRange&&d.getRange(t);if(g){const u=h(o,t,e-g),p=h(o,t,e+g);return{lo:u.lo,hi:p.hi}}}}return{lo:0,hi:o.length-1}}function Ni(s,t,e,i,n){const o=s.getSortedVisibleDatasetMetas(),r=e[t];for(let a=0,c=o.length;a<c;++a){const{index:h,data:d}=o[a],{lo:g,hi:u}=Vg(o[a],t,r,n);for(let p=g;p<=u;++p){const m=d[p];m.skip||i(m,h,p)}}}function Fs(s,t,e,i,n){const o=[];return!n&&!s.isPointInArea(t)||Ni(s,e,t,function(a,c,h){!n&&!fe(a,s.chartArea,0)||a.inRange(t.x,t.y,i)&&o.push({element:a,datasetIndex:c,index:h})},!0),o}function zs(s,t,e,i,n,o){return o||s.isPointInArea(t)?"r"!==e||i?function Hg(s,t,e,i,n,o){let r=[];const a=function Ng(s){const t=-1!==s.indexOf("x"),e=-1!==s.indexOf("y");return function(i,n){const o=t?Math.abs(i.x-n.x):0,r=e?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}(e);let c=Number.POSITIVE_INFINITY;return Ni(s,e,t,function h(d,g,u){const p=d.inRange(t.x,t.y,n);if(i&&!p)return;const m=d.getCenterPoint(n);if(!o&&!s.isPointInArea(m)&&!p)return;const b=a(t,m);b<c?(r=[{element:d,datasetIndex:g,index:u}],c=b):b===c&&r.push({element:d,datasetIndex:g,index:u})}),r}(s,t,e,i,n,o):function Bg(s,t,e,i){let n=[];return Ni(s,e,t,function o(r,a,c){const{startAngle:h,endAngle:d}=r.getProps(["startAngle","endAngle"],i),{angle:g}=Or(r,{x:t.x,y:t.y});Ri(g,h,d)&&n.push({element:r,datasetIndex:a,index:c})}),n}(s,t,e,n):[]}function _a(s,t,e,i,n){const o=[],r="x"===e?"inXRange":"inYRange";let a=!1;return Ni(s,e,t,(c,h,d)=>{c[r]&&c[r](t[e],n)&&(o.push({element:c,datasetIndex:h,index:d}),a=a||c.inRange(t.x,t.y,n))}),i&&!a?[]:o}var Yg={evaluateInteractionItems:Ni,modes:{index(s,t,e,i){const n=Xe(t,s),o=e.axis||"x",r=e.includeInvisible||!1,a=e.intersect?Fs(s,n,o,i,r):zs(s,n,o,!1,i,r),c=[];return a.length?(s.getSortedVisibleDatasetMetas().forEach(h=>{const d=a[0].index,g=h.data[d];g&&!g.skip&&c.push({element:g,datasetIndex:h.index,index:d})}),c):[]},dataset(s,t,e,i){const n=Xe(t,s),o=e.axis||"xy",r=e.includeInvisible||!1;let a=e.intersect?Fs(s,n,o,i,r):zs(s,n,o,!1,i,r);if(a.length>0){const c=a[0].datasetIndex,h=s.getDatasetMeta(c).data;a=[];for(let d=0;d<h.length;++d)a.push({element:h[d],datasetIndex:c,index:d})}return a},point:(s,t,e,i)=>Fs(s,Xe(t,s),e.axis||"xy",i,e.includeInvisible||!1),nearest:(s,t,e,i)=>zs(s,Xe(t,s),e.axis||"xy",e.intersect,i,e.includeInvisible||!1),x:(s,t,e,i)=>_a(s,Xe(t,s),"x",e.intersect,i),y:(s,t,e,i)=>_a(s,Xe(t,s),"y",e.intersect,i)}};const wa=["left","top","right","bottom"];function Bi(s,t){return s.filter(e=>e.pos===t)}function Ca(s,t){return s.filter(e=>-1===wa.indexOf(e.pos)&&e.box.axis===t)}function Hi(s,t){return s.sort((e,i)=>{const n=t?i:e,o=t?e:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function ka(s,t,e,i){return Math.max(s[e],t[e])+Math.max(s[i],t[i])}function Ma(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function $g(s,t,e,i){const{pos:n,box:o}=e,r=s.maxPadding;if(!et(n)){e.size&&(s[n]-=e.size);const g=i[e.stack]||{size:0,count:1};g.size=Math.max(g.size,e.horizontal?o.height:o.width),e.size=g.size/g.count,s[n]+=e.size}o.getPadding&&Ma(r,o.getPadding());const a=Math.max(0,t.outerWidth-ka(r,s,"left","right")),c=Math.max(0,t.outerHeight-ka(r,s,"top","bottom")),h=a!==s.w,d=c!==s.h;return s.w=a,s.h=c,e.horizontal?{same:h,other:d}:{same:d,other:h}}function Zg(s,t){const e=t.maxPadding;return function i(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}(s?["left","right"]:["top","bottom"])}function Yi(s,t,e,i){const n=[];let o,r,a,c,h,d;for(o=0,r=s.length,h=0;o<r;++o){a=s[o],c=a.box,c.update(a.width||t.w,a.height||t.h,Zg(a.horizontal,t));const{same:g,other:u}=$g(t,e,a,i);h|=g&&n.length,d=d||u,c.fullSize||n.push(a)}return h&&Yi(n,t,e,i)||d}function An(s,t,e,i,n){s.top=e,s.left=t,s.right=t+i,s.bottom=e+n,s.width=i,s.height=n}function Pa(s,t,e,i){const n=e.padding;let{x:o,y:r}=t;for(const a of s){const c=a.box,h=i[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/h.weight||1;if(a.horizontal){const g=t.w*d,u=h.size||c.height;Ii(h.start)&&(r=h.start),c.fullSize?An(c,n.left,r,e.outerWidth-n.right-n.left,u):An(c,t.left+h.placed,r,g,u),h.start=r,h.placed+=g,r=c.bottom}else{const g=t.h*d,u=h.size||c.width;Ii(h.start)&&(o=h.start),c.fullSize?An(c,o,n.top,u,e.outerHeight-n.bottom-n.top):An(c,o,t.top+h.placed,u,g),h.start=o,h.placed+=g,o=c.right}}t.x=o,t.y=r}var jt={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},s.boxes.push(t)},removeBox(s,t){const e=s.boxes?s.boxes.indexOf(t):-1;-1!==e&&s.boxes.splice(e,1)},configure(s,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(s,t,e,i){if(!s)return;const n=zt(s.options.layout.padding),o=Math.max(t-n.width,0),r=Math.max(e-n.height,0),a=function Gg(s){const t=function Xg(s){const t=[];let e,i,n,o,r,a;for(e=0,i=(s||[]).length;e<i;++e)n=s[e],({position:o,options:{stack:r,stackWeight:a=1}}=n),t.push({index:e,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&o+r,stackWeight:a});return t}(s),e=Hi(t.filter(h=>h.box.fullSize),!0),i=Hi(Bi(t,"left"),!0),n=Hi(Bi(t,"right")),o=Hi(Bi(t,"top"),!0),r=Hi(Bi(t,"bottom")),a=Ca(t,"x"),c=Ca(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:n.concat(c).concat(r).concat(a),chartArea:Bi(t,"chartArea"),vertical:i.concat(n).concat(c),horizontal:o.concat(r).concat(a)}}(s.boxes),c=a.vertical,h=a.horizontal;ht(s.boxes,f=>{"function"==typeof f.beforeLayout&&f.beforeLayout()});const d=c.reduce((f,b)=>b.box.options&&!1===b.box.options.display?f:f+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/d,hBoxMaxHeight:r/2}),u=Object.assign({},n);Ma(u,zt(i));const p=Object.assign({maxPadding:u,w:o,h:r,x:n.left,y:n.top},n),m=function Ug(s,t){const e=function Wg(s){const t={};for(const e of s){const{stack:i,pos:n,stackWeight:o}=e;if(!i||!wa.includes(n))continue;const r=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}(s),{vBoxMaxWidth:i,hBoxMaxHeight:n}=t;let o,r,a;for(o=0,r=s.length;o<r;++o){a=s[o];const{fullSize:c}=a.box,h=e[a.stack],d=h&&a.stackWeight/h.weight;a.horizontal?(a.width=d?d*i:c&&t.availableWidth,a.height=n):(a.width=i,a.height=d?d*n:c&&t.availableHeight)}return e}(c.concat(h),g);Yi(a.fullSize,p,g,m),Yi(c,p,g,m),Yi(h,p,g,m)&&Yi(c,p,g,m),function qg(s){const t=s.maxPadding;function e(i){const n=Math.max(t[i]-s[i],0);return s[i]+=n,n}s.y+=e("top"),s.x+=e("left"),e("right"),e("bottom")}(p),Pa(a.leftAndTop,p,g,m),p.x+=p.w,p.y+=p.h,Pa(a.rightAndBottom,p,g,m),s.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ht(a.chartArea,f=>{const b=f.box;Object.assign(b,s.chartArea),b.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class Oa{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}updateConfig(t){}}class Kg extends Oa{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const En="$chartjs",Jg={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Sa=s=>null===s||""===s,Aa=!!Kd&&{passive:!0};function eu(s,t,e){s&&s.canvas&&s.canvas.removeEventListener(t,e,Aa)}function In(s,t){for(const e of s)if(e===t||e.contains(t))return!0}function nu(s,t,e){const i=s.canvas,n=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||In(a.addedNodes,i),r=r&&!In(a.removedNodes,i);r&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function su(s,t,e){const i=s.canvas,n=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||In(a.removedNodes,i),r=r&&!In(a.addedNodes,i);r&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const Xi=new Map;let Ea=0;function Ia(){const s=window.devicePixelRatio;s!==Ea&&(Ea=s,Xi.forEach((t,e)=>{e.currentDevicePixelRatio!==s&&t()}))}function au(s,t,e){const i=s.canvas,n=i&&As(i);if(!n)return;const o=Tr((a,c)=>{const h=n.clientWidth;e(a,c),h<n.clientWidth&&e()},window),r=new ResizeObserver(a=>{const c=a[0],h=c.contentRect.width,d=c.contentRect.height;0===h&&0===d||o(h,d)});return r.observe(n),function ou(s,t){Xi.size||window.addEventListener("resize",Ia),Xi.set(s,t)}(s,o),r}function js(s,t,e){e&&e.disconnect(),"resize"===t&&function ru(s){Xi.delete(s),Xi.size||window.removeEventListener("resize",Ia)}(s)}function lu(s,t,e){const i=s.canvas,n=Tr(o=>{null!==s.ctx&&e(function iu(s,t){const e=Jg[s.type]||s.type,{x:i,y:n}=Xe(s,t);return{type:e,chart:t,native:s,x:void 0!==i?i:null,y:void 0!==n?n:null}}(o,s))},s);return function tu(s,t,e){s&&s.addEventListener(t,e,Aa)}(i,t,n),n}class cu extends Oa{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function Qg(s,t){const e=s.style,i=s.getAttribute("height"),n=s.getAttribute("width");if(s[En]={initial:{height:i,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Sa(n)){const o=Jr(s,"width");void 0!==o&&(s.width=o)}if(Sa(i))if(""===s.style.height)s.height=s.width/(t||2);else{const o=Jr(s,"height");void 0!==o&&(s.height=o)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[En])return!1;const i=e[En].initial;["height","width"].forEach(o=>{const r=i[o];tt(r)?e.removeAttribute(o):e.setAttribute(o,r)});const n=i.style||{};return Object.keys(n).forEach(o=>{e.style[o]=n[o]}),e.width=e.width,delete e[En],!0}addEventListener(t,e,i){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:nu,detach:su,resize:au}[e]||lu)(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];n&&(({attach:js,detach:js,resize:js}[e]||eu)(t,e,n),i[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return function Zd(s,t,e,i){const n=Pn(s),o=Ye(n,"margin"),r=Mn(n.maxWidth,s,"clientWidth")||xn,a=Mn(n.maxHeight,s,"clientHeight")||xn,c=function qd(s,t,e){let i,n;if(void 0===t||void 0===e){const o=s&&As(s);if(o){const r=o.getBoundingClientRect(),a=Pn(o),c=Ye(a,"border","width"),h=Ye(a,"padding");t=r.width-h.width-c.width,e=r.height-h.height-c.height,i=Mn(a.maxWidth,o,"clientWidth"),n=Mn(a.maxHeight,o,"clientHeight")}else t=s.clientWidth,e=s.clientHeight}return{width:t,height:e,maxWidth:i||xn,maxHeight:n||xn}}(s,t,e);let{width:h,height:d}=c;if("content-box"===n.boxSizing){const u=Ye(n,"border","width"),p=Ye(n,"padding");h-=p.width+u.width,d-=p.height+u.height}return h=Math.max(0,h-o.width),d=Math.max(0,i?h/i:d-o.height),h=On(Math.min(h,r,c.maxWidth)),d=On(Math.min(d,a,c.maxHeight)),h&&!d&&(d=On(h/2)),(void 0!==t||void 0!==e)&&i&&c.height&&d>c.height&&(d=c.height,h=On(Math.floor(d*i))),{width:h,height:d}}(t,e,i,n)}isAttached(t){const e=t&&As(t);return!(!e||!e.isConnected)}}class be{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return di(this.x)&&di(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const n={};return t.forEach(o=>{n[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),n}}function Tn(s,t,e,i,n){const o=q(i,0),r=Math.min(q(n,s.length),s.length);let c,h,d,a=0;for(e=Math.ceil(e),n&&(c=n-i,e=c/Math.floor(c/e)),d=o;d<0;)a++,d=Math.round(o+a*e);for(h=Math.max(o,0);h<r;h++)h===d&&(t.push(s[h]),a++,d=Math.round(o+a*e))}const Ta=(s,t,e)=>"top"===t||"left"===t?s[t]+e:s[t]-e,Ra=(s,t)=>Math.min(t||s,s);function La(s,t){const e=[],i=s.length/t,n=s.length;let o=0;for(;o<n;o+=i)e.push(s[Math.floor(o)]);return e}function xu(s,t,e){const i=s.ticks.length,n=Math.min(t,i-1),o=s._startPixel,r=s._endPixel,a=1e-6;let h,c=s.getPixelForTick(n);if(!(e&&(h=1===i?Math.max(c-o,r-c):0===t?(s.getPixelForTick(1)-c)/2:(c-s.getPixelForTick(n-1))/2,c+=n<t?h:-h,c<o-a||c>r+a)))return c}function Wi(s){return s.drawTicks?s.tickLength:0}function Da(s,t){if(!s.display)return 0;const e=St(s.font,t),i=zt(s.padding);return(xt(s.text)?s.text.length:1)*e.lineHeight+i.height}function wu(s,t,e){let i=xs(s);return(e&&"right"!==t||!e&&"right"===t)&&(i=(s=>"left"===s?"right":"right"===s?"left":s)(i)),i}class Ge extends be{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=$t(t,Number.POSITIVE_INFINITY),e=$t(e,Number.NEGATIVE_INFINITY),i=$t(i,Number.POSITIVE_INFINITY),n=$t(n,Number.NEGATIVE_INFINITY),{min:$t(t,i),max:$t(e,n),minDefined:wt(t),maxDefined:wt(e)}}getMinMax(t){let r,{min:e,max:i,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let c=0,h=a.length;c<h;++c)r=a[c].controller.getMinMax(this,t),n||(e=Math.min(e,r.min)),o||(i=Math.max(i,r.max));return e=o&&e>i?i:e,i=n&&e>i?e:i,{min:$t(e,$t(i,e)),max:$t(i,$t(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:n,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function Sd(s,t,e){const{min:i,max:n}=s,o=vr(t,(n-i)/2),r=(a,c)=>e&&0===a?0:a+c;return{min:r(i,-Math.abs(o)),max:r(n,o)}}(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?La(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=function du(s,t){const e=s.options.ticks,i=function gu(s){const t=s.options.offset,e=s._tickSize();return Math.floor(Math.min(s._length/e+(t?0:1),s._maxLength/e))}(s),n=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?function pu(s){const t=[];let e,i;for(e=0,i=s.length;e<i;e++)s[e].major&&t.push(e);return t}(t):[],r=o.length,a=o[0],c=o[r-1],h=[];if(r>n)return function fu(s,t,e,i){let r,n=0,o=e[0];for(i=Math.ceil(i),r=0;r<s.length;r++)r===o&&(t.push(s[r]),n++,o=e[n*i])}(t,h,o,r/n),h;const d=function uu(s,t,e){const i=function mu(s){const t=s.length;let e,i;if(t<2)return!1;for(i=s[0],e=1;e<t;++e)if(s[e]-s[e-1]!==i)return!1;return i}(s),n=t.length/e;if(!i)return Math.max(n,1);const o=function Qh(s){const t=[],e=Math.sqrt(s);let i;for(i=1;i<e;i++)s%i==0&&(t.push(i),t.push(s/i));return e===(0|e)&&t.push(e),t.sort((n,o)=>n-o).pop(),t}(i);for(let r=0,a=o.length-1;r<a;r++){const c=o[r];if(c>n)return c}return Math.max(n,1)}(o,t,n);if(r>0){let g,u;const p=r>1?Math.round((c-a)/(r-1)):null;for(Tn(t,h,d,tt(p)?0:a-p,a),g=0,u=r-1;g<u;g++)Tn(t,h,d,o[g],o[g+1]);return Tn(t,h,d,c,tt(p)?t.length:c+p),h}return Tn(t,h,d),h}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,i,t=this.options.reverse;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ft(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,n,o;for(i=0,n=t.length;i<n;i++)o=t[i],o.label=ft(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=Ra(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,o=e.maxRotation;let a,c,h,r=n;if(!this._isVisible()||!e.display||n>=o||i<=1||!this.isHorizontal())return void(this.labelRotation=n);const d=this._getLabelSizes(),g=d.widest.width,u=d.highest.height,p=Et(this.chart.width-g,0,this.maxWidth);a=t.offset?this.maxWidth/i:p/(i-1),g+6>a&&(a=p/(i-(t.offset?.5:1)),c=this.maxHeight-Wi(t.grid)-e.padding-Da(t.title,this.chart.options.font),h=Math.sqrt(g*g+u*u),r=fs(Math.min(Math.asin(Et((d.highest.height+6)/a,-1,1)),Math.asin(Et(c/h,-1,1))-Math.asin(Et(u/h,-1,1)))),r=Math.max(n,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:n,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const c=Da(n,e.options.font);if(a?(t.width=this.maxWidth,t.height=Wi(o)+c):(t.height=this.maxHeight,t.width=Wi(o)+c),i.display&&this.ticks.length){const{first:h,last:d,widest:g,highest:u}=this._getLabelSizes(),p=2*i.padding,m=ie(this.labelRotation),f=Math.cos(m),b=Math.sin(m);a?t.height=Math.min(this.maxHeight,t.height+(i.mirror?0:b*g.width+f*u.height)+p):t.width=Math.min(this.maxWidth,t.width+(i.mirror?0:f*g.width+b*u.height)+p),this._calculatePadding(h,d,b,f)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,n){const{ticks:{align:o,padding:r},position:a}=this.options,c=0!==this.labelRotation,h="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,p=0;c?h?(u=n*t.width,p=i*e.height):(u=i*t.height,p=n*e.width):"start"===o?p=e.width:"end"===o?u=t.width:"inner"!==o&&(u=t.width/2,p=e.width/2),this.paddingLeft=Math.max((u-d+r)*this.width/(this.width-d),0),this.paddingRight=Math.max((p-g+r)*this.width/(this.width-g),0)}else{let d=e.height/2,g=t.height/2;"start"===o?(d=0,g=t.height):"end"===o&&(d=e.height,g=0),this.paddingTop=d+r,this.paddingBottom=g+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)tt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=La(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:n,_longestTextCache:o}=this,r=[],a=[],c=Math.floor(e/Ra(e,i));let g,u,p,m,f,b,x,v,_,w,y,h=0,d=0;for(g=0;g<e;g+=c){if(m=t[g].label,f=this._resolveTickFontOptions(g),n.font=b=f.string,x=o[b]=o[b]||{data:{},gc:[]},v=f.lineHeight,_=w=0,tt(m)||xt(m)){if(xt(m))for(u=0,p=m.length;u<p;++u)y=m[u],!tt(y)&&!xt(y)&&(_=_n(n,x.data,x.gc,_,y),w+=v)}else _=_n(n,x.data,x.gc,_,m),w=v;r.push(_),a.push(w),h=Math.max(_,h),d=Math.max(w,d)}!function vu(s,t){ht(s,e=>{const i=e.gc,n=i.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[i[o]];i.splice(0,n)}})}(o,e);const k=r.indexOf(h),C=a.indexOf(d),M=P=>({width:r[P]||0,height:a[P]||0});return{first:M(0),last:M(e-1),widest:M(k),highest:M(C),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function nd(s){return Et(s,-32768,32767)}(this._alignToPixels?Ne(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function _u(s,t,e){return Se(s,{tick:e,index:t,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=function yu(s,t){return Se(s,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ie(this.labelRotation),i=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,c=o?o.highest.height+r:0;return this.isHorizontal()?c*i>a*n?a/i:c/n:c*n<a*i?c/i:a/n}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,n=this.options,{grid:o,position:r,border:a}=n,c=o.offset,h=this.isHorizontal(),g=this.ticks.length+(c?1:0),u=Wi(o),p=[],m=a.setContext(this.getContext()),f=m.display?m.width:0,b=f/2,x=function(L){return Ne(i,L,f)};let v,_,w,y,k,C,M,P,O,S,E,I;if("top"===r)v=x(this.bottom),C=this.bottom-u,P=v-b,S=x(t.top)+b,I=t.bottom;else if("bottom"===r)v=x(this.top),S=t.top,I=x(t.bottom)-b,C=v+b,P=this.top+u;else if("left"===r)v=x(this.right),k=this.right-u,M=v-b,O=x(t.left)+b,E=t.right;else if("right"===r)v=x(this.left),O=t.left,E=x(t.right)-b,k=v+b,M=this.left+u;else if("x"===e){if("center"===r)v=x((t.top+t.bottom)/2+.5);else if(et(r)){const L=Object.keys(r)[0];v=x(this.chart.scales[L].getPixelForValue(r[L]))}S=t.top,I=t.bottom,C=v+b,P=C+u}else if("y"===e){if("center"===r)v=x((t.left+t.right)/2);else if(et(r)){const L=Object.keys(r)[0];v=x(this.chart.scales[L].getPixelForValue(r[L]))}k=v-b,M=k-u,O=t.left,E=t.right}const R=q(n.ticks.maxTicksLimit,g),T=Math.max(1,Math.ceil(g/R));for(_=0;_<g;_+=T){const L=this.getContext(_),F=o.setContext(L),V=a.setContext(L),H=F.lineWidth,Y=F.color,X=V.dash||[],Q=V.dashOffset,ct=F.tickWidth,$=F.tickColor,bt=F.tickBorderDash||[],K=F.tickBorderDashOffset;w=xu(this,_,c),void 0!==w&&(y=Ne(i,w,H),h?k=M=O=E=y:C=P=S=I=y,p.push({tx1:k,ty1:C,tx2:M,ty2:P,x1:O,y1:S,x2:E,y2:I,width:H,color:Y,borderDash:X,borderDashOffset:Q,tickWidth:ct,tickColor:$,tickBorderDash:bt,tickBorderDashOffset:K}))}return this._ticksLength=g,this._borderValue=v,p}_computeLabelItems(t){const e=this.axis,i=this.options,{position:n,ticks:o}=i,r=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:h,padding:d,mirror:g}=o,u=Wi(i.grid),p=u+d,m=g?-d:p,f=-ie(this.labelRotation),b=[];let x,v,_,w,y,k,C,M,P,O,S,E,I="middle";if("top"===n)k=this.bottom-m,C=this._getXAxisLabelAlignment();else if("bottom"===n)k=this.top+m,C=this._getXAxisLabelAlignment();else if("left"===n){const T=this._getYAxisLabelAlignment(u);C=T.textAlign,y=T.x}else if("right"===n){const T=this._getYAxisLabelAlignment(u);C=T.textAlign,y=T.x}else if("x"===e){if("center"===n)k=(t.top+t.bottom)/2+p;else if(et(n)){const T=Object.keys(n)[0];k=this.chart.scales[T].getPixelForValue(n[T])+p}C=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===n)y=(t.left+t.right)/2-p;else if(et(n)){const T=Object.keys(n)[0];y=this.chart.scales[T].getPixelForValue(n[T])}C=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===c?I="top":"end"===c&&(I="bottom"));const R=this._getLabelSizes();for(x=0,v=a.length;x<v;++x){_=a[x],w=_.label;const T=o.setContext(this.getContext(x));M=this.getPixelForTick(x)+o.labelOffset,P=this._resolveTickFontOptions(x),O=P.lineHeight,S=xt(w)?w.length:1;const L=S/2,F=T.color,V=T.textStrokeColor,H=T.textStrokeWidth;let X,Y=C;if(r?(y=M,"inner"===C&&(Y=x===v-1?this.options.reverse?"left":"right":0===x?this.options.reverse?"right":"left":"center"),E="top"===n?"near"===h||0!==f?-S*O+O/2:"center"===h?-R.highest.height/2-L*O+O:O/2-R.highest.height:"near"===h||0!==f?O/2:"center"===h?R.highest.height/2-L*O:R.highest.height-S*O,g&&(E*=-1),0!==f&&!T.showLabelBackdrop&&(y+=O/2*Math.sin(f))):(k=M,E=(1-S)*O/2),T.showLabelBackdrop){const Q=zt(T.backdropPadding),ct=R.heights[x],$=R.widths[x];let bt=E-Q.top,K=0-Q.left;switch(I){case"middle":bt-=ct/2;break;case"bottom":bt-=ct}switch(C){case"center":K-=$/2;break;case"right":K-=$;break;case"inner":x===v-1?K-=$:x>0&&(K-=$/2)}X={left:K,top:bt,width:$+Q.width,height:ct+Q.height,color:T.backdropColor}}b.push({label:w,font:P,textOffset:E,options:{rotation:f,color:F,strokeColor:V,strokeWidth:H,textAlign:Y,textBaseline:I,translation:[y,k],backdrop:X}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ie(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:n,padding:o}}=this.options,a=t+o,c=this._getLabelSizes().widest.width;let h,d;return"left"===e?n?(d=this.right+o,"near"===i?h="left":"center"===i?(h="center",d+=c/2):(h="right",d+=c)):(d=this.right-a,"near"===i?h="right":"center"===i?(h="center",d-=c/2):(h="left",d=this.left)):"right"===e?n?(d=this.left+o,"near"===i?h="right":"center"===i?(h="center",d-=c/2):(h="left",d-=c)):(d=this.left+a,"near"===i?h="left":"center"===i?(h="center",d+=c/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(o=>o.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(c,h,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(e.display)for(o=0,r=n.length;o<r;++o){const c=n[o];e.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:n}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const a=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,d,g,u;this.isHorizontal()?(h=Ne(t,this.left,r)-r/2,d=Ne(t,this.right,a)+a/2,g=u=c):(g=Ne(t,this.top,r)-r/2,u=Ne(t,this.bottom,a)+a/2,h=d=c),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(h,g),e.lineTo(d,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&wn(i,n);const o=this.getLabelItems(t);for(const r of o)Be(i,r.label,0,r.textOffset,r.font,r.options);n&&Cn(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const o=St(i.font),r=zt(i.padding),a=i.align;let c=o.lineHeight/2;"bottom"===e||"center"===e||et(e)?(c+=r.bottom,xt(i.text)&&(c+=o.lineHeight*(i.text.length-1))):c+=r.top;const{titleX:h,titleY:d,maxWidth:g,rotation:u}=function Cu(s,t,e,i){const{top:n,left:o,bottom:r,right:a,chart:c}=s,{chartArea:h,scales:d}=c;let u,p,m,g=0;const f=r-n,b=a-o;if(s.isHorizontal()){if(p=Ft(i,o,a),et(e)){const x=Object.keys(e)[0];m=d[x].getPixelForValue(e[x])+f-t}else m="center"===e?(h.bottom+h.top)/2+f-t:Ta(s,e,t);u=a-o}else{if(et(e)){const x=Object.keys(e)[0];p=d[x].getPixelForValue(e[x])-b+t}else p="center"===e?(h.left+h.right)/2-b+t:Ta(s,e,t);m=Ft(i,r,n),g="left"===e?-Pt:Pt}return{titleX:p,titleY:m,maxWidth:u,rotation:g}}(this,c,e,a);Be(t,i.text,0,0,o,{color:i.color,maxWidth:g,rotation:u,textAlign:wu(a,e,n),textBaseline:"middle",translation:[h,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=q(t.grid&&t.grid.z,-1),n=q(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Ge.prototype.draw?[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]:[{z:e,draw:o=>{this.draw(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let o,r;for(o=0,r=e.length;o<r;++o){const a=e[o];a[i]===this.id&&(!t||a.type===t)&&n.push(a)}return n}_resolveTickFontOptions(t){return St(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Rn{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function Pu(s){return"id"in s&&"defaults"in s})(e)&&(i=this.register(e));const n=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,function ku(s,t,e){const i=Ai(Object.create(null),[e?yt.get(e):{},yt.get(t),s.defaults]);yt.set(t,i),s.defaultRoutes&&function Mu(s,t){Object.keys(t).forEach(e=>{const i=e.split("."),n=i.pop(),o=[s].concat(i).join("."),r=t[e].split("."),a=r.pop(),c=r.join(".");yt.route(o,n,c,a)})}(t,s.defaultRoutes),s.descriptors&&yt.describe(t,s.descriptors)}(t,r,i),this.override&&yt.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in yt[n]&&(delete yt[n][i],this.override&&delete Ve[i])}}class Ou{constructor(){this.controllers=new Rn(Ae,"datasets",!0),this.elements=new Rn(be,"elements"),this.plugins=new Rn(Object,"plugins"),this.scales=new Rn(Ge,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(n=>{const o=i||this._getRegistryForType(n);i||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):ht(n,r=>{const a=i||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,e,i){const n=ps(t);ft(i["before"+n],[],i),e[t](i),ft(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}}var le=new Ou;class Su{constructor(){this._init=[]}notify(t,e,i,n){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=n?this._descriptors(t).filter(n):this._descriptors(t),r=this._notify(o,t,e,i);return"afterDestroy"===e&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,i,n){n=n||{};for(const o of t){const r=o.plugin;if(!1===ft(r[i],[e,n,o.options],r)&&n.cancelable)return!1}return!0}invalidate(){tt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=q(i.options&&i.options.plugins,{}),o=function Au(s){const t={},e=[],i=Object.keys(le.plugins.items);for(let o=0;o<i.length;o++)e.push(le.getPlugin(i[o]));const n=s.plugins||[];for(let o=0;o<n.length;o++){const r=n[o];-1===e.indexOf(r)&&(e.push(r),t[r.id]=!0)}return{plugins:e,localIds:t}}(i);return!1!==n||e?function Iu(s,{plugins:t,localIds:e},i,n){const o=[],r=s.getContext();for(const a of t){const c=a.id,h=Eu(i[c],n);null!==h&&o.push({plugin:a,options:Tu(s.config,{plugin:a,local:e[c]},h,r)})}return o}(t,o,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(o,r)=>o.filter(a=>!r.some(c=>a.plugin.id===c.plugin.id));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function Eu(s,t){return t||!1!==s?!0===s?{}:s:null}function Tu(s,{plugin:t,local:e},i,n){const o=s.pluginScopeKeys(t),r=s.getOptionScopes(i,o);return e&&t.defaults&&r.push(t.defaults),s.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Vs(s,t){return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||(yt.datasets[s]||{}).indexAxis||"x"}function Fa(s){if("x"===s||"y"===s||"r"===s)return s}function Du(s){return"top"===s||"bottom"===s?"x":"left"===s||"right"===s?"y":void 0}function Ns(s,...t){if(Fa(s))return s;for(const e of t){const i=e.axis||Du(e.position)||s.length>1&&Fa(s[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function za(s,t,e){if(e[t+"AxisID"]===s)return{axis:t}}function ja(s){const t=s.options||(s.options={});t.plugins=q(t.plugins,{}),t.scales=function zu(s,t){const e=Ve[s.type]||{scales:{}},i=t.scales||{},n=Vs(s.type,t),o=Object.create(null);return Object.keys(i).forEach(r=>{const a=i[r];if(!et(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const c=Ns(r,a,function Fu(s,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===s||i.yAxisID===s);if(e.length)return za(s,"x",e[0])||za(s,"y",e[0])}return{}}(r,s),yt.scales[a.type]),h=function Lu(s,t){return s===t?"_index_":"_value_"}(c,n),d=e.scales||{};o[r]=Ei(Object.create(null),[{axis:c},a,d[c],d[h]])}),s.data.datasets.forEach(r=>{const a=r.type||s.type,c=r.indexAxis||Vs(a,t),d=(Ve[a]||{}).scales||{};Object.keys(d).forEach(g=>{const u=function Ru(s,t){let e=s;return"_index_"===s?e=t:"_value_"===s&&(e="x"===t?"y":"x"),e}(g,c),p=r[u+"AxisID"]||u;o[p]=o[p]||Object.create(null),Ei(o[p],[{axis:u},i[p],d[g]])})}),Object.keys(o).forEach(r=>{const a=o[r];Ei(a,[yt.scales[a.type],yt.scale])}),o}(s,t)}function Va(s){return(s=s||{}).datasets=s.datasets||[],s.labels=s.labels||[],s}const Na=new Map,Ba=new Set;function Ln(s,t){let e=Na.get(s);return e||(e=t(),Na.set(s,e),Ba.add(e)),e}const Ui=(s,t,e)=>{const i=Me(t,e);void 0!==i&&s.add(i)};class Vu{constructor(t){this._config=function ju(s){return(s=s||{}).data=Va(s.data),ja(s),s}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Va(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ja(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ln(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Ln(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Ln(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return Ln(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return(!n||e)&&(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,r=this._cachedScopes(t,i),a=r.get(e);if(a)return a;const c=new Set;e.forEach(d=>{t&&(c.add(t),d.forEach(g=>Ui(c,t,g))),d.forEach(g=>Ui(c,n,g)),d.forEach(g=>Ui(c,Ve[o]||{},g)),d.forEach(g=>Ui(c,yt,g)),d.forEach(g=>Ui(c,_s,g))});const h=Array.from(c);return 0===h.length&&h.push(Object.create(null)),Ba.has(e)&&r.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Ve[e]||{},yt.datasets[e]||{},{type:e},yt,_s]}resolveNamedOptions(t,e,i,n=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=Ha(this._resolverCache,t,n);let c=r;(function Bu(s,t){const{isScriptable:e,isIndexable:i}=Yr(s);for(const n of t){const o=e(n),r=i(n),a=(r||o)&&s[n];if(o&&(Pe(a)||Nu(a))||r&&xt(a))return!0}return!1})(r,e)&&(o.$shared=!1,c=gi(r,i=Pe(i)?i():i,this.createResolver(t,i,a)));for(const h of e)o[h]=c[h];return o}createResolver(t,e,i=[""],n){const{resolver:o}=Ha(this._resolverCache,t,i);return et(e)?gi(o,e,void 0,n):o}}function Ha(s,t,e){let i=s.get(t);i||(i=new Map,s.set(t,i));const n=e.join();let o=i.get(n);return o||(o={resolver:Ms(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(n,o)),o}const Nu=s=>et(s)&&Object.getOwnPropertyNames(s).some(t=>Pe(s[t])),Yu=["top","bottom","left","right","chartArea"];function Ya(s,t){return"top"===s||"bottom"===s||-1===Yu.indexOf(s)&&"x"===t}function Xa(s,t){return function(e,i){return e[s]===i[s]?e[t]-i[t]:e[s]-i[s]}}function Wa(s){const t=s.chart,e=t.options.animation;t.notifyPlugins("afterRender"),ft(e&&e.onComplete,[s],t)}function Xu(s){const t=s.chart,e=t.options.animation;ft(e&&e.onProgress,[s],t)}function Ua(s){return Ss()&&"string"==typeof s?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const Dn={},Ga=s=>{const t=Ua(s);return Object.values(Dn).filter(e=>e.canvas===t).pop()};function Wu(s,t,e){const i=Object.keys(s);for(const n of i){const o=+n;if(o>=t){const r=s[n];delete s[n],(e>0||o>t)&&(s[o+e]=r)}}}let Nt=(()=>class s{static defaults=yt;static instances=Dn;static overrides=Ve;static registry=le;static version="4.5.0";static getChart=Ga;static register(...e){le.add(...e),$a()}static unregister(...e){le.remove(...e),$a()}constructor(e,i){const n=this.config=new Vu(i),o=Ua(e),r=Ga(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function hu(s){return!Ss()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Kg:cu}(o)),this.platform.updateConfig(n);const c=this.platform.acquireContext(o,a.aspectRatio),h=c&&c.canvas,d=h&&h.height,g=h&&h.width;this.id=Xh(),this.ctx=c,this.canvas=h,this.width=g,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Su,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function ad(s,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(s,t,i)):s.apply(this,i),t}}(u=>this.update(u),a.resizeDelay||0),this._dataChanges=[],Dn[this.id]=this,c&&h?(me.listen(this,"complete",Wa),me.listen(this,"progress",Xu),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:n,height:o,_aspectRatio:r}=this;return tt(e)?i&&r?r:o?n/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return le}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kr(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Nr(this.canvas,this.ctx),this}stop(){return me.stop(this),this}resize(e,i){me.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const n=this.options,a=this.platform.getMaximumSize(this.canvas,e,i,n.maintainAspectRatio&&this.aspectRatio),c=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Kr(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),ft(n.onResize,[this,a],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){ht(this.options.scales||{},(n,o)=>{n.id=o})}buildOrUpdateScales(){const e=this.options,i=e.scales,n=this.scales,o=Object.keys(n).reduce((a,c)=>(a[c]=!1,a),{});let r=[];i&&(r=r.concat(Object.keys(i).map(a=>{const c=i[a],h=Ns(a,c),d="r"===h,g="x"===h;return{options:c,dposition:d?"chartArea":g?"bottom":"left",dtype:d?"radialLinear":g?"category":"linear"}}))),ht(r,a=>{const c=a.options,h=c.id,d=Ns(h,c),g=q(c.type,a.dtype);(void 0===c.position||Ya(c.position,d)!==Ya(a.dposition))&&(c.position=a.dposition),o[h]=!0;let u=null;h in n&&n[h].type===g?u=n[h]:(u=new(le.getScale(g))({id:h,type:g,ctx:this.ctx,chart:this}),n[u.id]=u),u.init(c,e)}),ht(o,(a,c)=>{a||delete n[c]}),ht(n,a=>{jt.configure(this,a,a.options),jt.addBox(this,a)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,n=e.length;if(e.sort((o,r)=>o.index-r.index),n>i){for(let o=i;o<n;++o)this._destroyDatasetMeta(o);e.splice(i,n-i)}this._sortedMetasets=e.slice(0).sort(Xa("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((n,o)=>{0===i.filter(r=>r===n._dataset).length&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let n,o;for(this._removeUnreferencedMetasets(),n=0,o=i.length;n<o;n++){const r=i[n];let a=this.getDatasetMeta(n);const c=r.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=c,a.indexAxis=r.indexAxis||Vs(c,this.options),a.order=r.order||0,a.index=n,a.label=""+r.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const h=le.getController(c),{datasetElementType:d,dataElementType:g}=yt.datasets[c];Object.assign(h,{dataElementType:le.getElement(g),datasetElementType:d&&le.getElement(d)}),a.controller=new h(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,g=this.data.datasets.length;d<g;d++){const{controller:u}=this.getDatasetMeta(d),p=!o&&-1===r.indexOf(u);u.buildOrUpdateElements(p),a=Math.max(+u.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),o||ht(r,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Xa("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ht(this.scales,e=>{jt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!wr(i,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:o,count:r}of i)Wu(e,o,"_removeElements"===n?-r:r)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=r=>new Set(e.filter(a=>a[0]===r).map((a,c)=>c+","+a.splice(1).join(","))),o=n(0);for(let r=1;r<i;r++)if(!wr(o,n(r)))return;return Array.from(o).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;jt.update(this,this.width,this.height,e);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],ht(this.boxes,o=>{n&&"chartArea"===o.position||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,r)=>{o._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,Pe(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const n=this.getDatasetMeta(e),o={meta:n,index:e,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",o)&&(n.controller._update(i),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(me.has(this)?this.attached&&!me.running(this)&&me.start(this):(this.draw(),Wa({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,o)}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,n=[];let o,r;for(o=0,r=i.length;o<r;++o){const a=i[o];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,n={meta:e,index:e.index,cancelable:!0},o=aa(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(o&&wn(i,o),e.controller.draw(),o&&Cn(i),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return fe(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,n,o){const r=Yg.modes[i];return"function"==typeof r?r(this,e,n,o):[]}getDatasetMeta(e){const i=this.data.datasets[e],n=this._metasets;let o=n.filter(r=>r&&r._dataset===i).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},n.push(o)),o}getContext(){return this.$context||(this.$context=Se(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const n=this.getDatasetMeta(e);return"boolean"==typeof n.hidden?!n.hidden:!i.hidden}setDatasetVisibility(e,i){this.getDatasetMeta(e).hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,n){const o=n?"show":"hide",r=this.getDatasetMeta(e),a=r.controller._resolveAnimations(void 0,o);Ii(i)?(r.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(r,{visible:n}),this.update(c=>c.datasetIndex===e?o:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),me.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Nr(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Dn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,n=(r,a)=>{i.addEventListener(this,r,a),e[r]=a},o=(r,a,c)=>{r.offsetX=a,r.offsetY=c,this._eventHandler(r)};ht(this.options.events,r=>n(r,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,n=(h,d)=>{i.addEventListener(this,h,d),e[h]=d},o=(h,d)=>{e[h]&&(i.removeEventListener(this,h,d),delete e[h])},r=(h,d)=>{this.canvas&&this.resize(h,d)};let a;const c=()=>{o("attach",c),this.attached=!0,this.resize(),n("resize",r),n("detach",a)};a=()=>{this.attached=!1,o("resize",r),this._stop(),this._resize(0,0),n("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){ht(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},ht(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,n){const o=n?"set":"remove";let r,a,c,h;for("dataset"===i&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+o+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){a=e[c];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],n=e.map(({datasetIndex:r,index:a})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[a],index:a}});!mn(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(e,i,n){return this._plugins.notify(this,e,i,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(i=>i.plugin.id===e).length}_updateHoverStyles(e,i,n){const o=this.options.hover,r=(h,d)=>h.filter(g=>!d.some(u=>g.datasetIndex===u.datasetIndex&&g.index===u.index)),a=r(i,e),c=n?e:r(e,i);a.length&&this.updateHoverStyle(a,o.mode,!1),c.length&&o.mode&&this.updateHoverStyle(c,o.mode,!0)}_eventHandler(e,i){const n={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},o=a=>(a.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,o))return;const r=this._handleEvent(e,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,o),(r||n.changed)&&this.render(),this}_handleEvent(e,i,n){const{_active:o=[],options:r}=this,c=this._getActiveElements(e,o,n,i),h=function Zh(s){return"mouseup"===s.type||"click"===s.type||"contextmenu"===s.type}(e),d=function Uu(s,t,e,i){return e&&"mouseout"!==s.type?i?t:s:null}(e,this._lastEvent,n,h);n&&(this._lastEvent=null,ft(r.onHover,[e,c,this],this),h&&ft(r.onClick,[e,c,this],this));const g=!mn(c,o);return(g||i)&&(this._active=c,this._updateHoverStyles(c,o,i)),this._lastEvent=d,g}_getActiveElements(e,i,n,o){if("mouseout"===e.type)return[];if(!n)return i;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,o)}})();function $a(){return ht(Nt.instances,s=>s._plugins.invalidate())}function fi(s,t,e,i){return{x:e+s*Math.cos(t),y:i+s*Math.sin(t)}}function Fn(s,t,e,i,n,o){const{x:r,y:a,startAngle:c,pixelMargin:h,innerRadius:d}=t,g=Math.max(t.outerRadius+i+e-h,0),u=d>0?d+i+e+h:0;let p=0;const m=n-c;if(i){const F=((d>0?d-i:0)+(g>0?g-i:0))/2;p=(m-(0!==F?m*F/(F+i):m))/2}const b=(m-Math.max(.001,m*g-e/ot)/g)/2,x=c+b+p,v=n-b-p,{outerStart:_,outerEnd:w,innerStart:y,innerEnd:k}=function Zu(s,t,e,i){const n=function qu(s){return ks(s,["outerStart","outerEnd","innerStart","innerEnd"])}(s.options.borderRadius),o=(e-t)/2,r=Math.min(o,i*t/2),a=c=>{const h=(e-Math.min(o,c))*i/2;return Et(c,0,Math.min(o,h))};return{outerStart:a(n.outerStart),outerEnd:a(n.outerEnd),innerStart:Et(n.innerStart,0,r),innerEnd:Et(n.innerEnd,0,r)}}(t,u,g,v-x),C=g-_,M=g-w,P=x+_/C,O=v-w/M,S=u+y,E=u+k,I=x+y/S,R=v-k/E;if(s.beginPath(),o){const T=(P+O)/2;if(s.arc(r,a,g,P,T),s.arc(r,a,g,T,O),w>0){const H=fi(M,O,r,a);s.arc(H.x,H.y,w,O,v+Pt)}const L=fi(E,v,r,a);if(s.lineTo(L.x,L.y),k>0){const H=fi(E,R,r,a);s.arc(H.x,H.y,k,v+Pt,R+Math.PI)}const F=(v-k/u+(x+y/u))/2;if(s.arc(r,a,u,v-k/u,F,!0),s.arc(r,a,u,F,x+y/u,!0),y>0){const H=fi(S,I,r,a);s.arc(H.x,H.y,y,I+Math.PI,x-Pt)}const V=fi(C,x,r,a);if(s.lineTo(V.x,V.y),_>0){const H=fi(C,P,r,a);s.arc(H.x,H.y,_,x-Pt,P)}}else{s.moveTo(r,a);const T=Math.cos(P)*g+r,L=Math.sin(P)*g+a;s.lineTo(T,L);const F=Math.cos(O)*g+r,V=Math.sin(O)*g+a;s.lineTo(F,V)}s.closePath()}function qa(s,t,e=t){s.lineCap=q(e.borderCapStyle,t.borderCapStyle),s.setLineDash(q(e.borderDash,t.borderDash)),s.lineDashOffset=q(e.borderDashOffset,t.borderDashOffset),s.lineJoin=q(e.borderJoinStyle,t.borderJoinStyle),s.lineWidth=q(e.borderWidth,t.borderWidth),s.strokeStyle=q(e.borderColor,t.borderColor)}function tp(s,t,e){s.lineTo(e.x,e.y)}function Za(s,t,e={}){const i=s.length,{start:n=0,end:o=i-1}=e,{start:r,end:a}=t,c=Math.max(n,r),h=Math.min(o,a);return{count:i,start:c,loop:t.loop,ilen:h<c&&!(n<r&&o<r||n>a&&o>a)?i+h-c:h-c}}function ip(s,t,e,i){const{points:n,options:o}=t,{count:r,start:a,loop:c,ilen:h}=Za(n,e,i),d=function ep(s){return s.stepped?vd:s.tension||"monotone"===s.cubicInterpolationMode?yd:tp}(o);let p,m,f,{move:g=!0,reverse:u}=i||{};for(p=0;p<=h;++p)m=n[(a+(u?h-p:p))%r],!m.skip&&(g?(s.moveTo(m.x,m.y),g=!1):d(s,f,m,u,o.stepped),f=m);return c&&(m=n[(a+(u?h:0))%r],d(s,f,m,u,o.stepped)),!!c}function np(s,t,e,i){const n=t.points,{count:o,start:r,ilen:a}=Za(n,e,i),{move:c=!0,reverse:h}=i||{};let u,p,m,f,b,x,d=0,g=0;const v=w=>(r+(h?a-w:w))%o,_=()=>{f!==b&&(s.lineTo(d,b),s.lineTo(d,f),s.lineTo(d,x))};for(c&&(p=n[v(0)],s.moveTo(p.x,p.y)),u=0;u<=a;++u){if(p=n[v(u)],p.skip)continue;const w=p.x,y=p.y,k=0|w;k===m?(y<f?f=y:y>b&&(b=y),d=(g*d+w)/++g):(_(),s.lineTo(w,y),m=k,g=0,f=b=y),x=y}_()}function Bs(s){const t=s.options;return s._decimated||s._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?ip:np}const ap="function"==typeof Path2D;let zn=(()=>class s extends be{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const n=this.options;!n.tension&&"monotone"!==n.cubicInterpolationMode||n.stepped||this._pointsUpdated||(Xd(this._points,n,e,n.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function og(s,t){const e=s.points,i=s.options.spanGaps,n=e.length;if(!n)return[];const o=!!s._loop,{start:r,end:a}=function ng(s,t,e,i){let n=0,o=t-1;if(e&&!i)for(;n<t&&!s[n].skip;)n++;for(;n<t&&s[n].skip;)n++;for(n%=t,e&&(o+=n);o>n&&s[o%t].skip;)o--;return o%=t,{start:n,end:o}}(e,n,o,i);return function oa(s,t,e,i){return i&&i.setContext&&e?function rg(s,t,e,i){const n=s._chart.getContext(),o=ra(s.options),{_datasetIndex:r,options:{spanGaps:a}}=s,c=e.length,h=[];let d=o,g=t[0].start,u=g;function p(m,f,b,x){const v=a?-1:1;if(m!==f){for(m+=c;e[m%c].skip;)m-=v;for(;e[f%c].skip;)f+=v;m%c!=f%c&&(h.push({start:m%c,end:f%c,loop:b,style:x}),d=x,g=f%c)}}for(const m of t){g=a?g:m.start;let b,f=e[g%c];for(u=g+1;u<=m.end;u++){const x=e[u%c];b=ra(i.setContext(Se(n,{type:"segment",p0:f,p1:x,p0DataIndex:(u-1)%c,p1DataIndex:u%c,datasetIndex:r}))),ag(b,d)&&p(g,u-1,m.loop,d),f=x,d=b}g<u-1&&p(g,u-1,m.loop,d)}return h}(s,t,e,i):t}(s,!0===i?[{start:r,end:a,loop:o}]:function sg(s,t,e,i){const n=s.length,o=[];let c,r=t,a=s[t];for(c=t+1;c<=e;++c){const h=s[c%n];h.skip||h.stop?a.skip||(o.push({start:t%n,end:(c-1)%n,loop:i=!1}),t=r=h.stop?c:null):(r=c,a.skip&&(t=c)),a=h}return null!==r&&o.push({start:t%n,end:r%n,loop:i}),o}(e,r,a<r?a+n:a,!!s._fullLoop&&0===r&&a===n-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,n=e.length;return n&&this.points[e[n-1].end]}interpolate(e,i){const n=this.options,o=e[i],r=this.points,a=sa(this,{property:i,start:o,end:o});if(!a.length)return;const c=[],h=function sp(s){return s.stepped?Jd:s.tension||"monotone"===s.cubicInterpolationMode?Qd:We}(n);let d,g;for(d=0,g=a.length;d<g;++d){const{start:u,end:p}=a[d],m=r[u],f=r[p];if(m===f){c.push(m);continue}const x=h(m,f,Math.abs((o-m[i])/(f[i]-m[i])),n.stepped);x[i]=e[i],c.push(x)}return 1===c.length?c[0]:c}pathSegment(e,i,n){return Bs(this)(e,this,i,n)}path(e,i,n){const o=this.segments,r=Bs(this);let a=this._loop;i=i||0,n=n||this.points.length-i;for(const c of o)a&=r(e,this,c,{start:i,end:i+n-1});return!!a}draw(e,i,n,o){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function lp(s,t,e,i){ap&&!t.options.segment?function op(s,t,e,i){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,i)&&n.closePath()),qa(s,t.options),s.stroke(n)}(s,t,e,i):function rp(s,t,e,i){const{segments:n,options:o}=t,r=Bs(t);for(const a of n)qa(s,o,a.style),s.beginPath(),r(s,t,a,{start:e,end:e+i-1})&&s.closePath(),s.stroke()}(s,t,e,i)}(e,this,n,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}})();function Ka(s,t,e,i){const n=s.options,{[e]:o}=s.getProps([e],i);return Math.abs(t-o)<n.radius+n.hitRadius}let cp=(()=>class s extends be{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,n){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(i-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return Ka(this,e,"x",i)}inYRange(e,i){return Ka(this,e,"y",i)}getCenterPoint(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}size(e){let i=(e=e||this.options||{}).radius||0;return i=Math.max(i,i&&e.hoverRadius||0),2*(i+(i&&e.borderWidth||0))}draw(e,i){const n=this.options;this.skip||n.radius<.1||!fe(this,i,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Cs(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}})();function Ja(s,t){const{x:e,y:i,base:n,width:o,height:r}=s.getProps(["x","y","base","width","height"],t);let a,c,h,d,g;return s.horizontal?(g=r/2,a=Math.min(e,n),c=Math.max(e,n),h=i-g,d=i+g):(g=o/2,a=e-g,c=e+g,h=Math.min(i,n),d=Math.max(i,n)),{left:a,top:h,right:c,bottom:d}}function Ee(s,t,e,i){return s?0:Et(t,e,i)}function Hs(s,t,e,i){const n=null===t,o=null===e,a=s&&!(n&&o)&&Ja(s,i);return a&&(n||ue(t,a.left,a.right))&&(o||ue(e,a.top,a.bottom))}function pp(s,t){s.rect(t.x,t.y,t.w,t.h)}function Ys(s,t,e={}){const i=s.x!==e.x?-t:0,n=s.y!==e.y?-t:0;return{x:s.x+i,y:s.y+n,w:s.w+((s.x+s.w!==e.x+e.w?t:0)-i),h:s.h+((s.y+s.h!==e.y+e.h?t:0)-n),radius:s.radius}}var mp=Object.freeze({__proto__:null,ArcElement:class Qu extends be{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.getProps(["x","y"],i),{angle:o,distance:r}=Or(n,{x:t,y:e}),{startAngle:a,endAngle:c,innerRadius:h,outerRadius:d,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=(this.options.spacing+this.options.borderWidth)/2,p=q(g,c-a),m=Ri(o,a,c)&&a!==c,f=p>=vt||m,b=ue(r,h+u,d+u);return f&&b}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:h}=this.options,d=(n+o)/2,g=(r+a+h+c)/2;return{x:e+Math.cos(d)*g,y:i+Math.sin(d)*g}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,n=(e.offset||0)/4,o=(e.spacing||0)/2,r=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>vt?Math.floor(i/vt):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*n,Math.sin(a)*n);const h=n*(1-Math.sin(Math.min(ot,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function Ku(s,t,e,i,n){const{fullCircles:o,startAngle:r,circumference:a}=t;let c=t.endAngle;if(o){Fn(s,t,e,i,c,n);for(let h=0;h<o;++h)s.fill();isNaN(a)||(c=r+(a%vt||vt))}Fn(s,t,e,i,c,n),s.fill()}(t,this,h,o,r),function Ju(s,t,e,i,n){const{fullCircles:o,startAngle:r,circumference:a,options:c}=t,{borderWidth:h,borderJoinStyle:d,borderDash:g,borderDashOffset:u,borderRadius:p}=c,m="inner"===c.borderAlign;if(!h)return;s.setLineDash(g||[]),s.lineDashOffset=u,m?(s.lineWidth=2*h,s.lineJoin=d||"round"):(s.lineWidth=h,s.lineJoin=d||"bevel");let f=t.endAngle;if(o){Fn(s,t,e,i,f,n);for(let b=0;b<o;++b)s.stroke();isNaN(a)||(f=r+(a%vt||vt))}m&&function $u(s,t,e){const{startAngle:i,pixelMargin:n,x:o,y:r,outerRadius:a,innerRadius:c}=t;let h=n/a;s.beginPath(),s.arc(o,r,a,i-h,e+h),c>n?(h=n/c,s.arc(o,r,c,e+h,i-h,!0)):s.arc(o,r,n,e+Pt,i-Pt),s.closePath(),s.clip()}(s,t,f),c.selfJoin&&f-r>=ot&&0===p&&"miter"!==d&&function Gu(s,t,e){const{startAngle:i,x:n,y:o,outerRadius:r,innerRadius:a,options:c}=t,{borderWidth:h,borderJoinStyle:d}=c,g=Math.min(h/r,Dt(i-e));if(s.beginPath(),s.arc(n,o,r-h/2,i+g/2,e-g/2),a>0){const u=Math.min(h/a,Dt(i-e));s.arc(n,o,a+h/2,e-u/2,i+u/2,!0)}else{const u=Math.min(h/2,r*Dt(i-e));if("round"===d)s.arc(n,o,u,e-ot/2,i+ot/2,!0);else if("bevel"===d){const p=2*u*u,m=-p*Math.cos(e+ot/2)+n,f=-p*Math.sin(e+ot/2)+o,b=p*Math.cos(i+ot/2)+n,x=p*Math.sin(i+ot/2)+o;s.lineTo(m,f),s.lineTo(b,x)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}(s,t,f),o||(Fn(s,t,e,i,f,n),s.stroke())}(t,this,h,o,r),t.restore()}},BarElement:class fp extends be{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:n}}=this,{inner:o,outer:r}=function gp(s){const t=Ja(s),e=t.right-t.left,i=t.bottom-t.top,n=function hp(s,t,e){const n=s.borderSkipped,o=Hr(s.options.borderWidth);return{t:Ee(n.top,o.top,0,e),r:Ee(n.right,o.right,0,t),b:Ee(n.bottom,o.bottom,0,e),l:Ee(n.left,o.left,0,t)}}(s,e/2,i/2),o=function dp(s,t,e){const{enableBorderRadius:i}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,o=He(n),r=Math.min(t,e),a=s.borderSkipped,c=i||et(n);return{topLeft:Ee(!c||a.top||a.left,o.topLeft,0,r),topRight:Ee(!c||a.top||a.right,o.topRight,0,r),bottomLeft:Ee(!c||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Ee(!c||a.bottom||a.right,o.bottomRight,0,r)}}(s,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}(this),a=function up(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}(r.radius)?zi:pp;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,Ys(r,e,o)),t.clip(),a(t,Ys(o,-e,r)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Ys(o,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,i){return Hs(this,t,e,i)}inXRange(t,e){return Hs(this,t,null,e)}inYRange(t,e){return Hs(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:zn,PointElement:cp});const Xs=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Qa=Xs.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function tl(s){return Xs[s%Xs.length]}function el(s){return Qa[s%Qa.length]}function il(s){let t;for(t in s)if(s[t].borderColor||s[t].backgroundColor)return!0;return!1}var Cp={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,t,e){if(!e.enabled)return;const{data:{datasets:i},options:n}=s.config,{elements:o}=n,r=il(i)||function _p(s){return s&&(s.borderColor||s.backgroundColor)}(n)||o&&il(o)||function wp(){return"rgba(0,0,0,0.1)"!==yt.borderColor||"rgba(0,0,0,0.1)"!==yt.backgroundColor}();if(!e.forceOverride&&r)return;const a=function yp(s){let t=0;return(e,i)=>{const n=s.getDatasetMeta(i).controller;n instanceof Ls?t=function xp(s,t){return s.backgroundColor=s.data.map(()=>tl(t++)),t}(e,t):n instanceof ya?t=function vp(s,t){return s.backgroundColor=s.data.map(()=>el(t++)),t}(e,t):n&&(t=function bp(s,t){return s.borderColor=tl(t),s.backgroundColor=el(t),++t}(e,t))}}(s);i.forEach(a)}};function nl(s){if(s._decimated){const t=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function sl(s){s.data.datasets.forEach(t=>{nl(t)})}var Op={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,t,e)=>{if(!e.enabled)return void sl(s);const i=s.width;s.data.datasets.forEach((n,o)=>{const{_data:r,indexAxis:a}=n,c=s.getDatasetMeta(o),h=r||n.data;if("y"===ji([a,s.options.indexAxis])||!c.controller.supportsDecimation)return;const d=s.scales[c.xAxisID];if("linear"!==d.type&&"time"!==d.type||s.options.parsing)return;let m,{start:g,count:u}=function Pp(s,t){const e=t.length;let n,i=0;const{iScale:o}=s,{min:r,max:a,minDefined:c,maxDefined:h}=o.getUserBounds();return c&&(i=Et(pe(t,o.axis,r).lo,0,e-1)),n=h?Et(pe(t,o.axis,a).hi+1,i,e)-i:e-i,{start:i,count:n}}(c,h);if(u<=(e.threshold||4*i))nl(n);else{switch(tt(r)&&(n._data=h,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(f){this._data=f}})),e.algorithm){case"lttb":m=function kp(s,t,e,i,n){const o=n.samples||i;if(o>=e)return s.slice(t,t+e);const r=[],a=(e-2)/(o-2);let c=0;const h=t+e-1;let g,u,p,m,f,d=t;for(r[c++]=s[d],g=0;g<o-2;g++){let v,b=0,x=0;const _=Math.floor((g+1)*a)+1+t,w=Math.min(Math.floor((g+2)*a)+1,e)+t,y=w-_;for(v=_;v<w;v++)b+=s[v].x,x+=s[v].y;b/=y,x/=y;const k=Math.floor(g*a)+1+t,C=Math.min(Math.floor((g+1)*a)+1,e)+t,{x:M,y:P}=s[d];for(p=m=-1,v=k;v<C;v++)m=.5*Math.abs((M-b)*(s[v].y-P)-(M-s[v].x)*(x-P)),m>p&&(p=m,u=s[v],f=v);r[c++]=u,d=f}return r[c++]=s[h],r}(h,g,u,i,e);break;case"min-max":m=function Mp(s,t,e,i){let r,a,c,h,d,g,u,p,m,f,n=0,o=0;const b=[],v=s[t].x,w=s[t+e-1].x-v;for(r=t;r<t+e;++r){a=s[r],c=(a.x-v)/w*i,h=a.y;const y=0|c;if(y===d)h<m?(m=h,g=r):h>f&&(f=h,u=r),n=(o*n+a.x)/++o;else{const k=r-1;if(!tt(g)&&!tt(u)){const C=Math.min(g,u),M=Math.max(g,u);C!==p&&C!==k&&b.push({...s[C],x:n}),M!==p&&M!==k&&b.push({...s[M],x:n})}r>0&&k!==p&&b.push(s[k]),b.push(a),d=y,o=0,m=f=h,g=u=p=r}}return b}(h,g,u,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=m}})},destroy(s){sl(s)}};function Ws(s,t,e,i){if(i)return;let n=t[s],o=e[s];return"angle"===s&&(n=Dt(n),o=Dt(o)),{property:s,start:n,end:o}}function jn(s,t,e){for(;t>s;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function ol(s,t,e,i){return s&&t?i(s[e],t[e]):s?s[e]:t?t[e]:0}function rl(s,t){let e=[],i=!1;return xt(s)?(i=!0,e=s):e=function Ap(s,t){const{x:e=null,y:i=null}=s||{},n=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=jn(r,a,n);const c=n[r],h=n[a];null!==i?(o.push({x:c.x,y:i}),o.push({x:h.x,y:i})):null!==e&&(o.push({x:e,y:c.y}),o.push({x:e,y:h.y}))}),o}(s,t),e.length?new zn({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function al(s){return s&&!1!==s.fill}function Ep(s,t,e){let n=s[t].fill;const o=[t];let r;if(!e)return n;for(;!1!==n&&-1===o.indexOf(n);){if(!wt(n))return n;if(r=s[n],!r)return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function Ip(s,t,e){const i=function Dp(s){const t=s.options,e=t.fill;let i=q(e&&e.target,e);return void 0===i&&(i=!!t.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(s);if(et(i))return!isNaN(i.value)&&i;let n=parseFloat(i);return wt(n)&&Math.floor(n)===n?function Tp(s,t,e,i){return("-"===s||"+"===s)&&(e=t+e),!(e===t||e<0||e>=i)&&e}(i[0],t,n,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function jp(s,t,e){const i=[];for(let n=0;n<e.length;n++){const o=e[n],{first:r,last:a,point:c}=Vp(o,t,"x");if(!(!c||r&&a))if(r)i.unshift(c);else if(s.push(c),!a)break}s.push(...i)}function Vp(s,t,e){const i=s.interpolate(t,e);if(!i)return{};const n=i[e],o=s.segments,r=s.points;let a=!1,c=!1;for(let h=0;h<o.length;h++){const d=o[h],g=r[d.start][e],u=r[d.end][e];if(ue(n,g,u)){a=n===g,c=n===u;break}}return{first:a,last:c,point:i}}class ll{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:o,radius:r}=this;return t.arc(n,o,r,(e=e||{start:0,end:vt}).end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function Us(s,t,e){const i=function Np(s){const{chart:t,fill:e,line:i}=s;if(wt(e))return function Bp(s,t){const e=s.getDatasetMeta(t);return e&&s.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function Fp(s){const{scale:t,index:e,line:i}=s,n=[],o=i.segments,r=i.points,a=function zp(s,t){const e=[],i=s.getMatchingVisibleMetas("line");for(let n=0;n<i.length;n++){const o=i[n];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}(t,e);a.push(rl({x:null,y:t.bottom},i));for(let c=0;c<o.length;c++){const h=o[c];for(let d=h.start;d<=h.end;d++)jp(n,r[d],a)}return new zn({points:n,options:{}})}(s);if("shape"===e)return!0;const n=function Hp(s){return(s.scale||{}).getPointPositionForValue?function Xp(s){const{scale:t,fill:e}=s,i=t.options,n=t.getLabels().length,o=i.reverse?t.max:t.min,r=function Lp(s,t,e){let i;return i="start"===s?e:"end"===s?t.options.reverse?t.min:t.max:et(s)?s.value:t.getBaseValue(),i}(e,t,o),a=[];if(i.grid.circular){const c=t.getPointPositionForValue(0,o);return new ll({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(r)})}for(let c=0;c<n;++c)a.push(t.getPointPositionForValue(c,r));return a}(s):function Yp(s){const{scale:t={},fill:e}=s,i=function Rp(s,t){let e=null;return"start"===s?e=t.bottom:"end"===s?e=t.top:et(s)?e=t.getPixelForValue(s.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(wt(i)){const n=t.isHorizontal();return{x:n?i:null,y:n?null:i}}return null}(s)}(s);return n instanceof ll?n:rl(n,i)}(t),{chart:n,index:o,line:r,scale:a,axis:c}=t,h=r.options,d=h.fill,g=h.backgroundColor,{above:u=g,below:p=g}=d||{},m=n.getDatasetMeta(o),f=aa(n,m);i&&r.points.length&&(wn(s,e),function Wp(s,t){const{line:e,target:i,above:n,below:o,area:r,scale:a,clip:c}=t,h=e._loop?"angle":t.axis;s.save();let d=o;o!==n&&("x"===h?(cl(s,i,r.top),Gs(s,{line:e,target:i,color:n,scale:a,property:h,clip:c}),s.restore(),s.save(),cl(s,i,r.bottom)):"y"===h&&(hl(s,i,r.left),Gs(s,{line:e,target:i,color:o,scale:a,property:h,clip:c}),s.restore(),s.save(),hl(s,i,r.right),d=n)),Gs(s,{line:e,target:i,color:d,scale:a,property:h,clip:c}),s.restore()}(s,{line:r,target:i,above:u,below:p,area:e,scale:a,axis:c,clip:f}),Cn(s))}function cl(s,t,e){const{segments:i,points:n}=t;let o=!0,r=!1;s.beginPath();for(const a of i){const{start:c,end:h}=a,d=n[c],g=n[jn(c,h,n)];o?(s.moveTo(d.x,d.y),o=!1):(s.lineTo(d.x,e),s.lineTo(d.x,d.y)),r=!!t.pathSegment(s,a,{move:r}),r?s.closePath():s.lineTo(g.x,e)}s.lineTo(t.first().x,e),s.closePath(),s.clip()}function hl(s,t,e){const{segments:i,points:n}=t;let o=!0,r=!1;s.beginPath();for(const a of i){const{start:c,end:h}=a,d=n[c],g=n[jn(c,h,n)];o?(s.moveTo(d.x,d.y),o=!1):(s.lineTo(e,d.y),s.lineTo(d.x,d.y)),r=!!t.pathSegment(s,a,{move:r}),r?s.closePath():s.lineTo(e,g.y)}s.lineTo(e,t.first().y),s.closePath(),s.clip()}function Gs(s,t){const{line:e,target:i,property:n,color:o,scale:r,clip:a}=t,c=function Sp(s,t,e){const i=s.segments,n=s.points,o=t.points,r=[];for(const a of i){let{start:c,end:h}=a;h=jn(c,h,n);const d=Ws(e,n[c],n[h],a.loop);if(!t.segments){r.push({source:a,target:d,start:n[c],end:n[h]});continue}const g=sa(t,d);for(const u of g){const p=Ws(e,o[u.start],o[u.end],u.loop),m=na(a,n,p);for(const f of m)r.push({source:f,target:u,start:{[e]:ol(d,p,"start",Math.max)},end:{[e]:ol(d,p,"end",Math.min)}})}}return r}(e,i,n);for(const{source:h,target:d,start:g,end:u}of c){const{style:{backgroundColor:p=o}={}}=h,m=!0!==i;s.save(),s.fillStyle=p,Up(s,r,a,m&&Ws(n,g,u)),s.beginPath();const f=!!e.pathSegment(s,h);let b;if(m){f?s.closePath():dl(s,i,u,n);const x=!!i.pathSegment(s,d,{move:f,reverse:!0});b=f&&x,b||dl(s,i,g,n)}s.closePath(),s.fill(b?"evenodd":"nonzero"),s.restore()}}function Up(s,t,e,i){const n=t.chart.chartArea,{property:o,start:r,end:a}=i||{};if("x"===o||"y"===o){let c,h,d,g;"x"===o?(c=r,h=n.top,d=a,g=n.bottom):(c=n.left,h=r,d=n.right,g=a),s.beginPath(),e&&(c=Math.max(c,e.left),d=Math.min(d,e.right),h=Math.max(h,e.top),g=Math.min(g,e.bottom)),s.rect(c,h,d-c,g-h),s.clip()}}function dl(s,t,e,i){const n=t.interpolate(e,i);n&&s.lineTo(n.x,n.y)}var Gp={id:"filler",afterDatasetsUpdate(s,t,e){const i=(s.data.datasets||[]).length,n=[];let o,r,a,c;for(r=0;r<i;++r)o=s.getDatasetMeta(r),a=o.dataset,c=null,a&&a.options&&a instanceof zn&&(c={visible:s.isDatasetVisible(r),index:r,fill:Ip(a,r,i),chart:s,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=c,n.push(c);for(r=0;r<i;++r)c=n[r],c&&!1!==c.fill&&(c.fill=Ep(n,r,e.propagate))},beforeDraw(s,t,e){const i="beforeDraw"===e.drawTime,n=s.getSortedVisibleDatasetMetas(),o=s.chartArea;for(let r=n.length-1;r>=0;--r){const a=n[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),i&&a.fill&&Us(s.ctx,a,o))}},beforeDatasetsDraw(s,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const i=s.getSortedVisibleDatasetMetas();for(let n=i.length-1;n>=0;--n){const o=i[n].$filler;al(o)&&Us(s.ctx,o,s.chartArea)}},beforeDatasetDraw(s,t,e){const i=t.meta.$filler;!al(i)||"beforeDatasetDraw"!==e.drawTime||Us(s.ctx,i,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const gl=(s,t)=>{let{boxHeight:e=t,boxWidth:i=t}=s;return s.usePointStyle&&(e=Math.min(e,t),i=s.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}};class ul extends be{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ft(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,n)=>t.sort(i,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,n=St(i.font),o=n.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=gl(i,o);let h,d;e.font=n.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(r,o,a,c)+10):(d=this.maxHeight,h=this._fitCols(r,n,a,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,n){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],d=n+a;let g=t;o.textAlign="left",o.textBaseline="middle";let u=-1,p=-d;return this.legendItems.forEach((m,f)=>{const b=i+e/2+o.measureText(m.text).width;(0===f||h[h.length-1]+b+2*a>r)&&(g+=d,h[h.length-(f>0?0:1)]=0,p+=d,u++),c[f]={left:0,top:p,row:u,width:b,height:n},h[h.length-1]+=b+a}),g}_fitCols(t,e,i,n){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],d=r-t;let g=a,u=0,p=0,m=0,f=0;return this.legendItems.forEach((b,x)=>{const{itemWidth:v,itemHeight:_}=function qp(s,t,e,i,n){const o=function Zp(s,t,e,i){let n=s.text;return n&&"string"!=typeof n&&(n=n.reduce((o,r)=>o.length>r.length?o:r)),t+e.size/2+i.measureText(n).width}(i,s,t,e),r=function Kp(s,t,e){let i=s;return"string"!=typeof t.text&&(i=pl(t,e)),i}(n,i,t.lineHeight);return{itemWidth:o,itemHeight:r}}(i,e,o,b,n);x>0&&p+_+2*a>d&&(g+=u+a,h.push({width:u,height:p}),m+=u+a,f++,u=p=0),c[x]={left:m,top:p,col:f,width:v,height:_},u=Math.max(u,v),p+=_+a}),g+=u,h.push({width:u,height:p}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:n},rtl:o}}=this,r=pi(o,this.left,this.width);if(this.isHorizontal()){let a=0,c=Ft(i,this.left+n,this.right-this.lineWidths[a]);for(const h of e)a!==h.row&&(a=h.row,c=Ft(i,this.left+n,this.right-this.lineWidths[a])),h.top+=this.top+t+n,h.left=r.leftForLtr(r.x(c),h.width),c+=h.width+n}else{let a=0,c=Ft(i,this.top+t+n,this.bottom-this.columnSizes[a].height);for(const h of e)h.col!==a&&(a=h.col,c=Ft(i,this.top+t+n,this.bottom-this.columnSizes[a].height)),h.top=c,h.left+=this.left+n,h.left=r.leftForLtr(r.x(h.left),h.width),c+=h.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;wn(t,this),this._draw(),Cn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:n}=this,{align:o,labels:r}=t,a=yt.color,c=pi(t.rtl,this.left,this.width),h=St(r.font),{padding:d}=r,g=h.size,u=g/2;let p;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:m,boxHeight:f,itemHeight:b}=gl(r,g),_=this.isHorizontal(),w=this._computeTitleHeight();p=_?{x:Ft(o,this.left+d,this.right-i[0]),y:this.top+d+w,line:0}:{x:this.left+d,y:Ft(o,this.top+w+d,this.bottom-e[0].height),line:0},Qr(this.ctx,t.textDirection);const y=b+d;this.legendItems.forEach((k,C)=>{n.strokeStyle=k.fontColor,n.fillStyle=k.fontColor;const M=n.measureText(k.text).width,P=c.textAlign(k.textAlign||(k.textAlign=r.textAlign)),O=m+u+M;let S=p.x,E=p.y;c.setWidth(this.width),_?C>0&&S+O+d>this.right&&(E=p.y+=y,p.line++,S=p.x=Ft(o,this.left+d,this.right-i[p.line])):C>0&&E+y>this.bottom&&(S=p.x=S+e[p.line].width+d,p.line++,E=p.y=Ft(o,this.top+w+d,this.bottom-e[p.line].height)),function(k,C,M){if(isNaN(m)||m<=0||isNaN(f)||f<0)return;n.save();const P=q(M.lineWidth,1);if(n.fillStyle=q(M.fillStyle,a),n.lineCap=q(M.lineCap,"butt"),n.lineDashOffset=q(M.lineDashOffset,0),n.lineJoin=q(M.lineJoin,"miter"),n.lineWidth=P,n.strokeStyle=q(M.strokeStyle,a),n.setLineDash(q(M.lineDash,[])),r.usePointStyle){const O={radius:f*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:P},S=c.xPlus(k,m/2);Br(n,O,S,C+u,r.pointStyleWidth&&m)}else{const O=C+Math.max((g-f)/2,0),S=c.leftForLtr(k,m),E=He(M.borderRadius);n.beginPath(),Object.values(E).some(I=>0!==I)?zi(n,{x:S,y:O,w:m,h:f,radius:E}):n.rect(S,O,m,f),n.fill(),0!==P&&n.stroke()}n.restore()}(c.x(S),E,k),S=((s,t,e,i)=>s===(i?"left":"right")?e:"center"===s?(t+e)/2:t)(P,S+m+u,_?S+O:this.right,t.rtl),function(k,C,M){Be(n,M.text,k,C+b/2,h,{strikethrough:M.hidden,textAlign:c.textAlign(M.textAlign)})}(c.x(S),E,k),_?p.x+=O+d:p.y+="string"!=typeof k.text?pl(k,h.lineHeight)+d:y}),ta(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=St(e.font),n=zt(e.padding);if(!e.display)return;const o=pi(t.rtl,this.left,this.width),r=this.ctx,a=e.position,h=n.top+i.size/2;let d,g=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+h,g=Ft(t.align,g,this.right-u);else{const m=this.columnSizes.reduce((f,b)=>Math.max(f,b.height),0);d=h+Ft(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=Ft(a,g,g+u);r.textAlign=o.textAlign(xs(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=i.string,Be(r,e.text,p,d,i)}_computeTitleHeight(){const t=this.options.title,e=St(t.font),i=zt(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,n,o;if(ue(t,this.left,this.right)&&ue(e,this.top,this.bottom))for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(n=o[i],ue(t,n.left,n.left+n.width)&&ue(e,n.top,n.top+n.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function Jp(s,t){return!(("mousemove"!==s&&"mouseout"!==s||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==s&&"mouseup"!==s))}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const n=this._hoveredItem,o=((s,t)=>null!==s&&null!==t&&s.datasetIndex===t.datasetIndex&&s.index===t.index)(n,i);n&&!o&&ft(e.onLeave,[t,n,this],this),this._hoveredItem=i,i&&!o&&ft(e.onHover,[t,i,this],this)}else i&&ft(e.onClick,[t,i,this],this)}}function pl(s,t){return t*(s.text?s.text.length:0)}var Qp={id:"legend",_element:ul,start(s,t,e){const i=s.legend=new ul({ctx:s.ctx,options:e,chart:s});jt.configure(s,i,e),jt.addBox(s,i)},stop(s){jt.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,e){const i=s.legend;jt.configure(s,i,e),i.options=e},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,e){const i=t.datasetIndex,n=e.chart;n.isDatasetVisible(i)?(n.hide(i),t.hidden=!0):(n.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:n,color:o,useBorderRadius:r,borderRadius:a}}=s.legend.options;return s._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(e?0:void 0),d=zt(h.borderWidth);return{text:t[c.index].label,fillStyle:h.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:r&&(a||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class $s extends be{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const n=xt(i.text)?i.text.length:1;this._padding=zt(i.padding);const o=n*St(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:n,right:o,options:r}=this,a=r.align;let h,d,g,c=0;return this.isHorizontal()?(d=Ft(a,i,o),g=e+t,h=o-i):("left"===r.position?(d=i+t,g=Ft(a,n,e),c=-.5*ot):(d=o-t,g=Ft(a,e,n),c=.5*ot),h=n-e),{titleX:d,titleY:g,maxWidth:h,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=St(e.font),o=i.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:c,rotation:h}=this._drawArgs(o);Be(t,e.text,0,0,i,{color:e.color,maxWidth:c,rotation:h,textAlign:xs(e.align),textBaseline:"middle",translation:[r,a]})}}var ef={id:"title",_element:$s,start(s,t,e){!function tf(s,t){const e=new $s({ctx:s.ctx,options:t,chart:s});jt.configure(s,e,t),jt.addBox(s,e),s.titleBlock=e}(s,e)},stop(s){jt.removeBox(s,s.titleBlock),delete s.titleBlock},beforeUpdate(s,t,e){const i=s.titleBlock;jt.configure(s,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Vn=new WeakMap;var nf={id:"subtitle",start(s,t,e){const i=new $s({ctx:s.ctx,options:e,chart:s});jt.configure(s,i,e),jt.addBox(s,i),Vn.set(s,i)},stop(s){jt.removeBox(s,Vn.get(s)),Vn.delete(s)},beforeUpdate(s,t,e){const i=Vn.get(s);jt.configure(s,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Gi={average(s){if(!s.length)return!1;let t,e,i=new Set,n=0,o=0;for(t=0,e=s.length;t<e;++t){const a=s[t].element;if(a&&a.hasValue()){const c=a.tooltipPosition();i.add(c.x),n+=c.y,++o}}return 0!==o&&0!==i.size&&{x:[...i].reduce((a,c)=>a+c)/i.size,y:n/o}},nearest(s,t){if(!s.length)return!1;let o,r,a,e=t.x,i=t.y,n=Number.POSITIVE_INFINITY;for(o=0,r=s.length;o<r;++o){const c=s[o].element;if(c&&c.hasValue()){const d=ms(t,c.getCenterPoint());d<n&&(n=d,a=c)}}if(a){const c=a.tooltipPosition();e=c.x,i=c.y}return{x:e,y:i}}};function ce(s,t){return t&&(xt(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function xe(s){return("string"==typeof s||s instanceof String)&&s.indexOf("\n")>-1?s.split("\n"):s}function sf(s,t){const{element:e,datasetIndex:i,index:n}=t,o=s.getDatasetMeta(i).controller,{label:r,value:a}=o.getLabelAndValue(n);return{chart:s,label:r,parsed:o.getParsed(n),raw:s.data.datasets[i].data[n],formattedValue:a,dataset:o.getDataset(),dataIndex:n,datasetIndex:i,element:e}}function fl(s,t){const e=s.chart.ctx,{body:i,footer:n,title:o}=s,{boxWidth:r,boxHeight:a}=t,c=St(t.bodyFont),h=St(t.titleFont),d=St(t.footerFont),g=o.length,u=n.length,p=i.length,m=zt(t.padding);let f=m.height,b=0,x=i.reduce((w,y)=>w+y.before.length+y.lines.length+y.after.length,0);x+=s.beforeBody.length+s.afterBody.length,g&&(f+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),x&&(f+=p*(t.displayColors?Math.max(a,c.lineHeight):c.lineHeight)+(x-p)*c.lineHeight+(x-1)*t.bodySpacing),u&&(f+=t.footerMarginTop+u*d.lineHeight+(u-1)*t.footerSpacing);let v=0;const _=function(w){b=Math.max(b,e.measureText(w).width+v)};return e.save(),e.font=h.string,ht(s.title,_),e.font=c.string,ht(s.beforeBody.concat(s.afterBody),_),v=t.displayColors?r+2+t.boxPadding:0,ht(i,w=>{ht(w.before,_),ht(w.lines,_),ht(w.after,_)}),v=0,e.font=d.string,ht(s.footer,_),e.restore(),b+=m.width,{width:b,height:f}}function lf(s,t,e,i){const{x:n,width:o}=e,{width:r,chartArea:{left:a,right:c}}=s;let h="center";return"center"===i?h=n<=(a+c)/2?"left":"right":n<=o/2?h="left":n>=r-o/2&&(h="right"),function af(s,t,e,i){const{x:n,width:o}=i,r=e.caretSize+e.caretPadding;if("left"===s&&n+o+r>t.width||"right"===s&&n-o-r<0)return!0}(h,s,t,e)&&(h="center"),h}function ml(s,t,e){const i=e.yAlign||t.yAlign||function rf(s,t){const{y:e,height:i}=t;return e<i/2?"top":e>s.height-i/2?"bottom":"center"}(s,e);return{xAlign:e.xAlign||t.xAlign||lf(s,t,e,i),yAlign:i}}function bl(s,t,e,i){const{caretSize:n,caretPadding:o,cornerRadius:r}=s,{xAlign:a,yAlign:c}=e,h=n+o,{topLeft:d,topRight:g,bottomLeft:u,bottomRight:p}=He(r);let m=function cf(s,t){let{x:e,width:i}=s;return"right"===t?e-=i:"center"===t&&(e-=i/2),e}(t,a);const f=function hf(s,t,e){let{y:i,height:n}=s;return"top"===t?i+=e:i-="bottom"===t?n+e:n/2,i}(t,c,h);return"center"===c?"left"===a?m+=h:"right"===a&&(m-=h):"left"===a?m-=Math.max(d,u)+n:"right"===a&&(m+=Math.max(g,p)+n),{x:Et(m,0,i.width-t.width),y:Et(f,0,i.height-t.height)}}function Nn(s,t,e){const i=zt(e.padding);return"center"===t?s.x+s.width/2:"right"===t?s.x+s.width-i.right:s.x+i.left}function xl(s){return ce([],xe(s))}function vl(s,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?s.override(e):s}const yl={beforeTitle:ge,title(s){if(s.length>0){const t=s[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:ge,beforeBody:ge,beforeLabel:ge,label(s){if(this&&this.options&&"dataset"===this.options.mode)return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const e=s.formattedValue;return tt(e)||(t+=e),t},labelColor(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const e=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ge,afterBody:ge,beforeFooter:ge,footer:ge,afterFooter:ge};function Wt(s,t,e,i){const n=s[t].call(e,i);return typeof n>"u"?yl[t].call(e,i):n}let _l=(()=>class s extends be{static positioners=Gi;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,n=this.options.setContext(this.getContext()),o=n.enabled&&i.options.animation&&n.animations,r=new ca(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=function df(s,t,e){return Se(s,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:n}=i,o=Wt(n,"beforeTitle",this,e),r=Wt(n,"title",this,e),a=Wt(n,"afterTitle",this,e);let c=[];return c=ce(c,xe(o)),c=ce(c,xe(r)),c=ce(c,xe(a)),c}getBeforeBody(e,i){return xl(Wt(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:n}=i,o=[];return ht(e,r=>{const a={before:[],lines:[],after:[]},c=vl(n,r);ce(a.before,xe(Wt(c,"beforeLabel",this,r))),ce(a.lines,Wt(c,"label",this,r)),ce(a.after,xe(Wt(c,"afterLabel",this,r))),o.push(a)}),o}getAfterBody(e,i){return xl(Wt(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:n}=i,o=Wt(n,"beforeFooter",this,e),r=Wt(n,"footer",this,e),a=Wt(n,"afterFooter",this,e);let c=[];return c=ce(c,xe(o)),c=ce(c,xe(r)),c=ce(c,xe(a)),c}_createItems(e){const i=this._active,n=this.chart.data,o=[],r=[],a=[];let h,d,c=[];for(h=0,d=i.length;h<d;++h)c.push(sf(this.chart,i[h]));return e.filter&&(c=c.filter((g,u,p)=>e.filter(g,u,p,n))),e.itemSort&&(c=c.sort((g,u)=>e.itemSort(g,u,n))),ht(c,g=>{const u=vl(e.callbacks,g);o.push(Wt(u,"labelColor",this,g)),r.push(Wt(u,"labelPointStyle",this,g)),a.push(Wt(u,"labelTextColor",this,g))}),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=c,c}update(e,i){const n=this.options.setContext(this.getContext()),o=this._active;let r,a=[];if(o.length){const c=Gi[n.position].call(this,o,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const h=this._size=fl(this,n),d=Object.assign({},c,h),g=ml(this.chart,n,d),u=bl(n,d,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,r={opacity:1,x:u.x,y:u.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,n,o){const r=this.getCaretPosition(e,n,o);i.lineTo(r.x1,r.y1),i.lineTo(r.x2,r.y2),i.lineTo(r.x3,r.y3)}getCaretPosition(e,i,n){const{xAlign:o,yAlign:r}=this,{caretSize:a,cornerRadius:c}=n,{topLeft:h,topRight:d,bottomLeft:g,bottomRight:u}=He(c),{x:p,y:m}=e,{width:f,height:b}=i;let x,v,_,w,y,k;return"center"===r?(y=m+b/2,"left"===o?(x=p,v=x-a,w=y+a,k=y-a):(x=p+f,v=x+a,w=y-a,k=y+a),_=x):(v="left"===o?p+Math.max(h,g)+a:"right"===o?p+f-Math.max(d,u)-a:this.caretX,"top"===r?(w=m,y=w-a,x=v-a,_=v+a):(w=m+b,y=w+a,x=v+a,_=v-a),k=w),{x1:x,x2:v,x3:_,y1:w,y2:y,y3:k}}drawTitle(e,i,n){const o=this.title,r=o.length;let a,c,h;if(r){const d=pi(n.rtl,this.x,this.width);for(e.x=Nn(this,n.titleAlign,n),i.textAlign=d.textAlign(n.titleAlign),i.textBaseline="middle",a=St(n.titleFont),c=n.titleSpacing,i.fillStyle=n.titleColor,i.font=a.string,h=0;h<r;++h)i.fillText(o[h],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+c,h+1===r&&(e.y+=n.titleMarginBottom-c)}}_drawColorBox(e,i,n,o,r){const a=this.labelColors[n],c=this.labelPointStyles[n],{boxHeight:h,boxWidth:d}=r,g=St(r.bodyFont),u=Nn(this,"left",r),p=o.x(u),f=i.y+(h<g.lineHeight?(g.lineHeight-h)/2:0);if(r.usePointStyle){const b={radius:Math.min(d,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=o.leftForLtr(p,d)+d/2,v=f+h/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Cs(e,b,x,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Cs(e,b,x,v)}else{e.lineWidth=et(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const b=o.leftForLtr(p,d),x=o.leftForLtr(o.xPlus(p,1),d-2),v=He(a.borderRadius);Object.values(v).some(_=>0!==_)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,zi(e,{x:b,y:f,w:d,h,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),zi(e,{x,y:f+1,w:d-2,h:h-2,radius:v}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(b,f,d,h),e.strokeRect(b,f,d,h),e.fillStyle=a.backgroundColor,e.fillRect(x,f+1,d-2,h-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,i,n){const{body:o}=this,{bodySpacing:r,bodyAlign:a,displayColors:c,boxHeight:h,boxWidth:d,boxPadding:g}=n,u=St(n.bodyFont);let p=u.lineHeight,m=0;const f=pi(n.rtl,this.x,this.width),b=function(P){i.fillText(P,f.x(e.x+m),e.y+p/2),e.y+=p+r},x=f.textAlign(a);let v,_,w,y,k,C,M;for(i.textAlign=a,i.textBaseline="middle",i.font=u.string,e.x=Nn(this,x,n),i.fillStyle=n.bodyColor,ht(this.beforeBody,b),m=c&&"right"!==x?"center"===a?d/2+g:d+2+g:0,y=0,C=o.length;y<C;++y){for(v=o[y],_=this.labelTextColors[y],i.fillStyle=_,ht(v.before,b),w=v.lines,c&&w.length&&(this._drawColorBox(i,e,y,f,n),p=Math.max(u.lineHeight,h)),k=0,M=w.length;k<M;++k)b(w[k]),p=u.lineHeight;ht(v.after,b)}m=0,p=u.lineHeight,ht(this.afterBody,b),e.y-=r}drawFooter(e,i,n){const o=this.footer,r=o.length;let a,c;if(r){const h=pi(n.rtl,this.x,this.width);for(e.x=Nn(this,n.footerAlign,n),e.y+=n.footerMarginTop,i.textAlign=h.textAlign(n.footerAlign),i.textBaseline="middle",a=St(n.footerFont),i.fillStyle=n.footerColor,i.font=a.string,c=0;c<r;++c)i.fillText(o[c],h.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,i,n,o){const{xAlign:r,yAlign:a}=this,{x:c,y:h}=e,{width:d,height:g}=n,{topLeft:u,topRight:p,bottomLeft:m,bottomRight:f}=He(o.cornerRadius);i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=o.borderWidth,i.beginPath(),i.moveTo(c+u,h),"top"===a&&this.drawCaret(e,i,n,o),i.lineTo(c+d-p,h),i.quadraticCurveTo(c+d,h,c+d,h+p),"center"===a&&"right"===r&&this.drawCaret(e,i,n,o),i.lineTo(c+d,h+g-f),i.quadraticCurveTo(c+d,h+g,c+d-f,h+g),"bottom"===a&&this.drawCaret(e,i,n,o),i.lineTo(c+m,h+g),i.quadraticCurveTo(c,h+g,c,h+g-m),"center"===a&&"left"===r&&this.drawCaret(e,i,n,o),i.lineTo(c,h+u),i.quadraticCurveTo(c,h,c+u,h),i.closePath(),i.fill(),o.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,n=this.$animations,o=n&&n.x,r=n&&n.y;if(o||r){const a=Gi[e.position].call(this,this._active,this._eventPosition);if(!a)return;const c=this._size=fl(this,e),h=Object.assign({},a,this._size),d=ml(i,e,h),g=bl(e,h,d,i);(o._to!==g.x||r._to!==g.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const o={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=zt(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,o,i),Qr(e,i.textDirection),r.y+=a.top,this.drawTitle(r,e,i),this.drawBody(r,e,i),this.drawFooter(r,e,i),ta(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const n=this._active,o=e.map(({datasetIndex:c,index:h})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[h],index:h}}),r=!mn(n,o),a=this._positionChanged(o,i);(r||a)&&(this._active=o,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,r=this._active||[],a=this._getActiveElements(e,r,i,n),c=this._positionChanged(a,e),h=i||!mn(a,r)||c;return h&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),h}_getActiveElements(e,i,n,o){const r=this.options;if("mouseout"===e.type)return[];if(!o)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&void 0!==this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index));const a=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&a.reverse(),a}_positionChanged(e,i){const{caretX:n,caretY:o,options:r}=this,a=Gi[r.position].call(this,e,i);return!1!==a&&(n!==a.x||o!==a.y)}})();var uf=Object.freeze({__proto__:null,Colors:Cp,Decimation:Op,Filler:Gp,Legend:Qp,SubTitle:nf,Title:ef,Tooltip:{id:"tooltip",_element:_l,positioners:Gi,afterInit(s,t,e){e&&(s.tooltip=new _l({chart:s,options:e}))},beforeUpdate(s,t,e){s.tooltip&&s.tooltip.initialize(e)},reset(s,t,e){s.tooltip&&s.tooltip.initialize(e)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===s.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0}))return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",e)}},afterEvent(s,t){s.tooltip&&s.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yl},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>"filter"!==s&&"itemSort"!==s&&"external"!==s,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});function wl(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}let bf=(()=>class s extends Ge{static id="category";static defaults={ticks:{callback:wl}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:o,label:r}of i)n[o]===r&&n.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(tt(e))return null;const n=this.getLabels();return((s,t)=>null===s?null:Et(Math.round(s),0,t))(i=isFinite(i)&&n[i]===e?i:function ff(s,t,e,i){const n=s.indexOf(t);return-1===n?((s,t,e,i)=>("string"==typeof t?(e=s.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(s,t,e,i):n!==s.lastIndexOf(t)?e:n}(n,e,q(i,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),i||(o=this.getLabels().length-1)),this.min=n,this.max=o}buildTicks(){const e=this.min,i=this.max,n=this.options.offset,o=[];let r=this.getLabels();r=0===e&&i===r.length-1?r:r.slice(e,i+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=i;a++)o.push({value:a});return o}getLabelForValue(e){return wl.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}})();function Cl(s,t,{horizontal:e,minRotation:i}){const n=ie(i),o=(e?Math.sin(n):Math.cos(n))||.001;return Math.min(t/o,.75*t*(""+s).length)}class Bn extends Ge{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return tt(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:o}=this;const r=c=>n=e?n:c,a=c=>o=i?o:c;if(t){const c=ae(n),h=ae(o);c<0&&h<0?a(0):c>0&&h>0&&r(0)}if(n===o){let c=0===o?1:Math.abs(.05*o);a(o+c),t||r(n-c)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let n,{maxTicksLimit:e,stepSize:i}=t;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r=function xf(s,t){const e=[],{bounds:n,step:o,min:r,max:a,precision:c,count:h,maxTicks:d,maxDigits:g,includeBounds:u}=s,p=o||1,m=d-1,{min:f,max:b}=t,x=!tt(r),v=!tt(a),_=!tt(h),w=(b-f)/(g+1);let k,C,M,P,y=kr((b-f)/m/p)*p;if(y<1e-14&&!x&&!v)return[{value:f},{value:b}];P=Math.ceil(b/y)-Math.floor(f/y),P>m&&(y=kr(P*y/m/p)*p),tt(c)||(k=Math.pow(10,c),y=Math.ceil(y*k)/k),"ticks"===n?(C=Math.floor(f/y)*y,M=Math.ceil(b/y)*y):(C=f,M=b),x&&v&&o&&function ed(s,t){const e=Math.round(s);return e-t<=s&&e+t>=s}((a-r)/o,y/1e3)?(P=Math.round(Math.min((a-r)/y,d)),y=(a-r)/P,C=r,M=a):_?(C=x?r:C,M=v?a:M,P=h-1,y=(M-C)/P):(P=(M-C)/y,P=Ti(P,Math.round(P),y/1e3)?Math.round(P):Math.ceil(P));const O=Math.max(Pr(y),Pr(C));k=Math.pow(10,tt(c)?O:c),C=Math.round(C*k)/k,M=Math.round(M*k)/k;let S=0;for(x&&(u&&C!==r?(e.push({value:r}),C<r&&S++,Ti(Math.round((C+S*y)*k)/k,r,Cl(r,w,s))&&S++):C<r&&S++);S<P;++S){const E=Math.round((C+S*y)*k)/k;if(v&&E>a)break;e.push({value:E})}return v&&u&&M!==a?e.length&&Ti(e[e.length-1].value,a,Cl(a,w,s))?e[e.length-1].value=a:e.push({value:a}):(!v||M===a)&&e.push({value:M}),e}({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Mr(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const n=(i-e)/Math.max(t.length-1,1)/2;e-=n,i+=n}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Di(t,this.chart.options.locale,this.options.ticks.format)}}const $i=s=>Math.floor(Oe(s)),$e=(s,t)=>Math.pow(10,$i(s)+t);function kl(s){return s/Math.pow(10,$i(s))==1}function Ml(s,t,e){const i=Math.pow(10,e),n=Math.floor(s/i);return Math.ceil(t/i)-n}function qs(s){const t=s.ticks;if(t.display&&s.display){const e=zt(t.backdropPadding);return q(t.font&&t.font.size,yt.font.size)+e.height}return 0}function Cf(s,t,e){return e=xt(e)?e:[e],{w:xd(s,t.string,e),h:e.length*t.lineHeight}}function Pl(s,t,e,i,n){return s===i||s===n?{start:t-e/2,end:t+e/2}:s<i||s>n?{start:t-e,end:t}:{start:t,end:t+e}}function Mf(s,t,e,i,n){const o=Math.abs(Math.sin(e)),r=Math.abs(Math.cos(e));let a=0,c=0;i.start<t.l?(a=(t.l-i.start)/o,s.l=Math.min(s.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/o,s.r=Math.max(s.r,t.r+a)),n.start<t.t?(c=(t.t-n.start)/r,s.t=Math.min(s.t,t.t-c)):n.end>t.b&&(c=(n.end-t.b)/r,s.b=Math.max(s.b,t.b+c))}function Pf(s,t,e){const i=s.drawingArea,{extra:n,additionalAngle:o,padding:r,size:a}=e,c=s.getPointPosition(t,i+n+r,o),h=Math.round(fs(Dt(c.angle+Pt))),d=function If(s,t,e){return 90===e||270===e?s-=t/2:(e>270||e<90)&&(s-=t),s}(c.y,a.h,h),g=function Af(s){return 0===s||180===s?"center":s<180?"left":"right"}(h),u=function Ef(s,t,e){return"right"===e?s-=t:"center"===e&&(s-=t/2),s}(c.x,a.w,g);return{visible:!0,x:c.x,y:d,textAlign:g,left:u,top:d,right:u+a.w,bottom:d+a.h}}function Of(s,t){if(!t)return!0;const{left:e,top:i,right:n,bottom:o}=s;return!(fe({x:e,y:i},t)||fe({x:e,y:o},t)||fe({x:n,y:i},t)||fe({x:n,y:o},t))}function Tf(s,t,e){const{left:i,top:n,right:o,bottom:r}=e,{backdropColor:a}=t;if(!tt(a)){const c=He(t.borderRadius),h=zt(t.backdropPadding);s.fillStyle=a;const d=i-h.left,g=n-h.top,u=o-i+h.width,p=r-n+h.height;Object.values(c).some(m=>0!==m)?(s.beginPath(),zi(s,{x:d,y:g,w:u,h:p,radius:c}),s.fill()):s.fillRect(d,g,u,p)}}function Ol(s,t,e,i){const{ctx:n}=s;if(e)n.arc(s.xCenter,s.yCenter,t,0,vt);else{let o=s.getPointPosition(0,t);n.moveTo(o.x,o.y);for(let r=1;r<i;r++)o=s.getPointPosition(r,t),n.lineTo(o.x,o.y)}}const Hn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ut=Object.keys(Hn);function Sl(s,t){return s-t}function Al(s,t){if(tt(t))return null;const e=s._adapter,{parser:i,round:n,isoWeekday:o}=s._parseOpts;let r=t;return"function"==typeof i&&(r=i(r)),wt(r)||(r="string"==typeof i?e.parse(r,i):e.parse(r)),null===r?null:(n&&(r="week"!==n||!di(o)&&!0!==o?e.startOf(r,n):e.startOf(r,"isoWeek",o)),+r)}function El(s,t,e,i){const n=Ut.length;for(let o=Ut.indexOf(s);o<n-1;++o){const r=Hn[Ut[o]];if(r.common&&Math.ceil((e-t)/((r.steps?r.steps:Number.MAX_SAFE_INTEGER)*r.size))<=i)return Ut[o]}return Ut[n-1]}function Il(s,t,e){if(e){if(e.length){const{lo:i,hi:n}=bs(e,t);s[e[i]>=t?e[i]:e[n]]=!0}}else s[t]=!0}function Tl(s,t,e){const i=[],n={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],n[a]=r,i.push({value:a,major:!1});return 0!==o&&e?function Vf(s,t,e,i){const n=s._adapter,o=+n.startOf(t[0].value,i),r=t[t.length-1].value;let a,c;for(a=o;a<=r;a=+n.add(a,1,i))c=e[a],c>=0&&(t[c].major=!0);return t}(s,i,n,e):i}let Zs=(()=>class s extends Ge{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const n=e.time||(e.time={}),o=this._adapter=new jg__date(e.adapters.date);o.init(i),Ei(n.displayFormats,o.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return void 0===e?null:Al(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,n=e.time.unit||"day";let{min:o,max:r,minDefined:a,maxDefined:c}=this.getUserBounds();function h(d){!a&&!isNaN(d.min)&&(o=Math.min(o,d.min)),!c&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!a||!c)&&(h(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&h(this.getMinMax(!1))),o=wt(o)&&!isNaN(o)?o:+i.startOf(Date.now(),n),r=wt(r)&&!isNaN(r)?r:+i.endOf(Date.now(),n)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],n=e[e.length-1]),{min:i,max:n}}buildTicks(){const e=this.options,i=e.time,n=e.ticks,o="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const r=this.min,c=function od(s,t,e){let i=0,n=s.length;for(;i<n&&s[i]<t;)i++;for(;n>i&&s[n-1]>e;)n--;return i>0||n<s.length?s.slice(i,n):s}(o,r,this.max);return this._unit=i.unit||(n.autoSkip?El(i.minUnit,this.min,this.max,this._getLabelCapacity(r)):function zf(s,t,e,i,n){for(let o=Ut.length-1;o>=Ut.indexOf(e);o--){const r=Ut[o];if(Hn[r].common&&s._adapter.diff(n,i,r)>=t-1)return r}return Ut[e?Ut.indexOf(e):0]}(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function jf(s){for(let t=Ut.indexOf(s)+1,e=Ut.length;t<e;++t)if(Hn[Ut[t]].common)return Ut[t]}(this._unit):void 0,this.initOffsets(o),e.reverse&&c.reverse(),Tl(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let o,r,i=0,n=0;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),i=1===e.length?1-o:(this.getDecimalForValue(e[1])-o)/2,r=this.getDecimalForValue(e[e.length-1]),n=1===e.length?r:(r-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;i=Et(i,0,a),n=Et(n,0,a),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const e=this._adapter,i=this.min,n=this.max,o=this.options,r=o.time,a=r.unit||El(r.minUnit,i,n,this._getLabelCapacity(i)),c=q(o.ticks.stepSize,1),h="week"===a&&r.isoWeekday,d=di(h)||!0===h,g={};let p,m,u=i;if(d&&(u=+e.startOf(u,"isoWeek",h)),u=+e.startOf(u,d?"day":a),e.diff(n,i,a)>1e5*c)throw new Error(i+" and "+n+" are too far apart with stepSize of "+c+" "+a);const f="data"===o.ticks.source&&this.getDataTimestamps();for(p=u,m=0;p<n;p=+e.add(p,c,a),m++)Il(g,p,f);return(p===n||"ticks"===o.bounds||1===m)&&Il(g,p,f),Object.keys(g).sort(Sl).map(b=>+b)}getLabelForValue(e){const n=this.options.time;return this._adapter.format(e,n.tooltipFormat?n.tooltipFormat:n.displayFormats.datetime)}format(e,i){return this._adapter.format(e,i||this.options.time.displayFormats[this._unit])}_tickFormatFunction(e,i,n,o){const r=this.options,a=r.ticks.callback;if(a)return ft(a,[e,i,n],this);const c=r.time.displayFormats,h=this._unit,d=this._majorUnit,u=d&&c[d],p=n[i];return this._adapter.format(e,o||(d&&u&&p&&p.major?u:h&&c[h]))}generateTickLabels(e){let i,n,o;for(i=0,n=e.length;i<n;++i)o=e[i],o.label=this._tickFormatFunction(o.value,i,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,n=this.ctx.measureText(e).width,o=ie(this.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(o),a=Math.sin(o),c=this._resolveTickFontOptions(0).size;return{w:n*r+c*a,h:n*a+c*r}}_getLabelCapacity(e){const i=this.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,r=this._tickFormatFunction(e,0,Tl(this,[e],this._majorUnit),o),a=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let i,n,e=this._cache.data||[];if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(i=0,n=o.length;i<n;++i)e=e.concat(o[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,n;if(e.length)return e;const o=this.getLabels();for(i=0,n=o.length;i<n;++i)e.push(Al(this,o[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Er(e.sort(Sl))}})();function Yn(s,t,e){let o,r,a,c,i=0,n=s.length-1;e?(t>=s[i].pos&&t<=s[n].pos&&({lo:i,hi:n}=pe(s,"pos",t)),({pos:o,time:a}=s[i]),({pos:r,time:c}=s[n])):(t>=s[i].time&&t<=s[n].time&&({lo:i,hi:n}=pe(s,"time",t)),({time:o,pos:a}=s[i]),({time:r,pos:c}=s[n]));const h=r-o;return h?a+(c-a)*(t-o)/h:a}const Rl=[zg,mp,uf,Object.freeze({__proto__:null,CategoryScale:bf,LinearScale:class vf extends Bn{static id="linear";static defaults={ticks:{callback:yn.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=wt(t)?t:0,this.max=wt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=ie(this.options.ticks.minRotation),n=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},LogarithmicScale:class wf extends Ge{static id="logarithmic";static defaults={ticks:{callback:yn.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Bn.prototype.parse.apply(this,[t,e]);if(0!==i)return wt(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=wt(t)?Math.max(0,t):null,this.max=wt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!wt(this._userMin)&&(this.min=t===$e(this.min,0)?$e(this.min,-1):$e(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,n=this.max;const o=a=>i=t?i:a,r=a=>n=e?n:a;i===n&&(i<=0?(o(1),r(10)):(o($e(i,-1)),r($e(n,1)))),i<=0&&o($e(n,-1)),n<=0&&r($e(i,1)),this.min=i,this.max=n}buildTicks(){const t=this.options,i=function _f(s,{min:t,max:e}){t=$t(s.min,t);const i=[],n=$i(t);let o=function yf(s,t){let i=$i(t-s);for(;Ml(s,t,i)>10;)i++;for(;Ml(s,t,i)<10;)i--;return Math.min(i,$i(s))}(t,e),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),c=n>o?Math.pow(10,n):0,h=Math.round((t-c)*r)/r,d=Math.floor((t-c)/a/10)*a*10;let g=Math.floor((h-d)/Math.pow(10,o)),u=$t(s.min,Math.round((c+d+g*Math.pow(10,o))*r)/r);for(;u<e;)i.push({value:u,major:kl(u),significand:g}),g>=10?g=g<15?15:20:g++,g>=20&&(o++,g=2,r=o>=0?1:r),u=Math.round((c+d+g*Math.pow(10,o))*r)/r;const p=$t(s.max,u);return i.push({value:p,major:kl(p),significand:g}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Mr(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return void 0===t?"0":Di(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Oe(t),this._valueRange=Oe(this.max)-Oe(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Oe(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}},RadialLinearScale:class Ff extends Bn{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:yn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=zt(qs(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=wt(t)&&!isNaN(t)?t:0,this.max=wt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/qs(this.options))}generateTickLabels(t){Bn.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const n=ft(this.options.pointLabels.callback,[e,i],this);return n||0===n?n:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?function kf(s){const t={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},e=Object.assign({},t),i=[],n=[],o=s._pointLabels.length,r=s.options.pointLabels,a=r.centerPointLabels?ot/o:0;for(let c=0;c<o;c++){const h=r.setContext(s.getPointLabelContext(c));n[c]=h.padding;const d=s.getPointPosition(c,s.drawingArea+n[c],a),g=St(h.font),u=Cf(s.ctx,g,s._pointLabels[c]);i[c]=u;const p=Dt(s.getIndexAngle(c)+a),m=Math.round(fs(p));Mf(e,t,p,Pl(m,d.x,u.w,0,180),Pl(m,d.y,u.h,90,270))}s.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),s._pointLabelItems=function Sf(s,t,e){const i=[],n=s._pointLabels.length,o=s.options,{centerPointLabels:r,display:a}=o.pointLabels,c={extra:qs(o)/2,additionalAngle:r?ot/n:0};let h;for(let d=0;d<n;d++){c.padding=e[d],c.size=t[d];const g=Pf(s,d,c);i.push(g),"auto"===a&&(g.visible=Of(g,h),g.visible&&(h=g))}return i}(s,i,n)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,n))}getIndexAngle(t){return Dt(t*(vt/(this._pointLabels.length||1))+ie(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(tt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(tt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function Df(s,t,e){return Se(s,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const n=this.getIndexAngle(t)-Pt+i;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Ol(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:n,border:o}=e,r=this._pointLabels.length;let a,c,h;if(e.pointLabels.display&&function Rf(s,t){const{ctx:e,options:{pointLabels:i}}=s;for(let n=t-1;n>=0;n--){const o=s._pointLabelItems[n];if(!o.visible)continue;const r=i.setContext(s.getPointLabelContext(n));Tf(e,r,o);const a=St(r.font),{x:c,y:h,textAlign:d}=o;Be(e,s._pointLabels[n],c,h+a.lineHeight/2,a,{color:r.color,textAlign:d,textBaseline:"middle"})}}(this,r),n.display&&this.ticks.forEach((d,g)=>{if(0!==g||0===g&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);const u=this.getContext(g),p=n.setContext(u),m=o.setContext(u);!function Lf(s,t,e,i,n){const o=s.ctx,r=t.circular,{color:a,lineWidth:c}=t;!r&&!i||!a||!c||e<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(n.dash||[]),o.lineDashOffset=n.dashOffset,o.beginPath(),Ol(s,e,r,i),o.closePath(),o.stroke(),o.restore())}(this,p,c,r,m)}}),i.display){for(t.save(),a=r-1;a>=0;a--){const d=i.setContext(this.getPointLabelContext(a)),{color:g,lineWidth:u}=d;!u||!g||(t.lineWidth=u,t.strokeStyle=g,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),h=this.getPointPosition(a,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const n=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,c)=>{if(0===c&&this.min>=0&&!e.reverse)return;const h=i.setContext(this.getContext(c)),d=St(h.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),h.showLabelBackdrop){t.font=d.string,r=t.measureText(a.label).width,t.fillStyle=h.backdropColor;const g=zt(h.backdropPadding);t.fillRect(-r/2-g.left,-o-d.size/2-g.top,r+g.width,d.size+g.height)}Be(t,a.label,0,-o,d,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),t.restore()}drawTitle(){}},TimeScale:Zs,TimeSeriesScale:class Nf extends Zs{static id="timeseries";static defaults=Zs.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Yn(e,this.min),this._tableRange=Yn(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,n=[],o=[];let r,a,c,h,d;for(r=0,a=t.length;r<a;++r)h=t[r],h>=e&&h<=i&&n.push(h);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(r=0,a=n.length;r<a;++r)d=n[r+1],c=n[r-1],h=n[r],Math.round((d+c)/2)!==h&&o.push({time:h,pos:r/(a-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||1===i.length)&&i.push(e),i.sort((n,o)=>n-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Yn(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Yn(this._table,i*this._tableRange+this._minPos,!0)}}})];var l=G(2598),Ie=G(629),mi=G(9700),Ks=G(5538),Js=G(7047),It=G(9969);function Hf(s,t){if(1&s&&l.nrm(0,"img",12),2&s){const e=l.XpG();l.Y8G("src",e.userData.userImage,l.B4B)("alt",e.userData.userName)}}function Yf(s,t){if(1&s&&(l.j41(0,"div",13),l.EFF(1),l.k0s()),2&s){const e=l.XpG();l.R7$(1),l.SpI(" ",(e.userData.userName||"U").charAt(0).toUpperCase()," ")}}function Xf(s,t){if(1&s&&l.nrm(0,"img",39),2&s){const e=l.XpG(2);l.Y8G("src",e.userData.userImage,l.B4B)("alt",e.userData.userName)}}function Wf(s,t){if(1&s&&(l.j41(0,"div",40),l.EFF(1),l.k0s()),2&s){const e=l.XpG(2);l.R7$(1),l.SpI(" ",(e.userData.userName||"U").charAt(0).toUpperCase()," ")}}function Uf(s,t){if(1&s){const e=l.RV6();l.qSk(),l.joV(),l.j41(0,"button",41),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2);return l.Njj(n.viewSubscriptions())}),l.j41(1,"div",25),l.qSk(),l.j41(2,"svg",26),l.nrm(3,"path",42),l.k0s()(),l.joV(),l.j41(4,"div",28)(5,"span",29),l.EFF(6,"Subscriptions"),l.k0s(),l.j41(7,"span",30),l.EFF(8,"View your active subscriptions"),l.k0s()(),l.j41(9,"div",31),l.qSk(),l.j41(10,"svg",26),l.nrm(11,"path",32),l.k0s()()()}}function Gf(s,t){if(1&s){const e=l.RV6();l.qSk(),l.joV(),l.j41(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17),l.DNE(4,Xf,1,2,"img",18),l.DNE(5,Wf,2,1,"ng-template",null,19,l.C5r),l.k0s(),l.j41(7,"div",20)(8,"h3",21),l.EFF(9),l.k0s(),l.j41(10,"p",22),l.EFF(11),l.k0s()()()(),l.j41(12,"div",23)(13,"button",24),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.viewProfile())}),l.j41(14,"div",25),l.qSk(),l.j41(15,"svg",26),l.nrm(16,"path",27),l.k0s()(),l.joV(),l.j41(17,"div",28)(18,"span",29),l.EFF(19,"View Profile"),l.k0s(),l.j41(20,"span",30),l.EFF(21,"Manage your account settings"),l.k0s()(),l.j41(22,"div",31),l.qSk(),l.j41(23,"svg",26),l.nrm(24,"path",32),l.k0s()()(),l.DNE(25,Uf,12,0,"button",33),l.k0s(),l.joV(),l.nrm(26,"div",34),l.j41(27,"div",35)(28,"button",36),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.handleLogout())}),l.qSk(),l.j41(29,"svg",37),l.nrm(30,"path",38),l.k0s(),l.joV(),l.j41(31,"span"),l.EFF(32,"Sign Out"),l.k0s()()()()}if(2&s){const e=l.sdS(6),i=l.XpG();l.Y8G("@dropdownAnimation",void 0),l.R7$(4),l.Y8G("ngIf",i.userData.userImage)("ngIfElse",e),l.R7$(5),l.JRh(i.userData.userName),l.R7$(2),l.JRh(i.getRoleDisplayName(i.userData.userRole)),l.R7$(14),l.Y8G("ngIf",i.showSubscriptions)}}let Qs=(()=>{class s{constructor(e,i,n){this.router=e,this.tokenService=i,this.usersService=n,this.showSubscriptions=!0,this.profileModalOpened=new l.bkB,this.subscriptionsNavigated=new l.bkB,this.logoutClicked=new l.bkB,this.showUserMenu=!1}ngOnChanges(e){e.userData&&this.userData&&console.log("User profile data updated:",this.userData)}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}closeUserMenu(){this.showUserMenu=!1}onDocumentClick(e){e.target.closest(".profile-dropdown-wrapper")||this.closeUserMenu()}viewProfile(){console.log("Viewing profile..."),this.closeUserMenu(),this.userData.userId&&this.usersService.getUserById(this.userData.userId).subscribe({next:e=>{const i={id:e.id||this.userData.userId,name:e.name,email:e.email,phone:e.phone,role:e.role,village:e.village?.name||"",joinDate:e.createdDate?.toISOString()||(new Date).toISOString(),address:"",emergencyContact:"",latitude:e.latitude,longitude:e.longitude};this.profileModalOpened.emit(i)},error:e=>{console.error("Error loading user profile:",e);const i={id:this.userData.userId,name:this.userData.userName,email:`${this.userData.userName.toLowerCase().replace(" ",".")}@village.local`,phone:"+91-9876543210",role:this.userData.userRole,village:"Village Name",joinDate:(new Date).toISOString(),address:"Village Address, District",emergencyContact:"+91-9876543211",latitude:this.userData.latitude,longitude:this.userData.longitude};this.profileModalOpened.emit(i)}})}viewSubscriptions(){console.log("Viewing subscriptions..."),this.closeUserMenu(),this.subscriptionsNavigated.emit()}getRoleDisplayName(e){return e?{VILLAGER:"VILLAGER",VILLAGE_ADMIN:"VILLAGE_ADMIN",SUPER_ADMIN:"SUPER_ADMIN"}[e]:"User"}handleLogout(){console.log("Logging out..."),this.logoutClicked.emit()}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(Ce.Ix),l.rXU(Ie.B),l.rXU(mi.g))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-user-profile-dropdown"]],hostBindings:function(i,n){1&i&&l.bIt("click",function(r){return n.onDocumentClick(r)},!1,l.EBC)},inputs:{userData:"userData",showSubscriptions:"showSubscriptions"},outputs:{profileModalOpened:"profileModalOpened",subscriptionsNavigated:"subscriptionsNavigated",logoutClicked:"logoutClicked"},features:[l.OA$],decls:15,vars:7,consts:[[1,"profile-dropdown-wrapper"],["aria-label","Open user menu",1,"profile-trigger",3,"click"],[1,"user-avatar"],["class","avatar-image",3,"src","alt",4,"ngIf","ngIfElse"],["defaultAvatar",""],[1,"user-details"],[1,"user-name"],[1,"user-role"],[1,"dropdown-indicator"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"chevron-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","profile-menu",4,"ngIf"],[1,"avatar-image",3,"src","alt"],[1,"avatar-fallback"],[1,"profile-menu"],[1,"menu-header"],[1,"user-card"],[1,"user-avatar-large"],["class","avatar-large",3,"src","alt",4,"ngIf","ngIfElse"],["defaultAvatarLarge",""],[1,"user-summary"],[1,"user-display-name"],[1,"user-display-role"],[1,"menu-options"],[1,"menu-option","profile-option",3,"click"],[1,"option-icon"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"option-content"],[1,"option-title"],[1,"option-description"],[1,"option-arrow"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["class","menu-option subscriptions-option",3,"click",4,"ngIf"],[1,"menu-divider"],[1,"menu-footer"],[1,"logout-button",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"logout-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"avatar-large",3,"src","alt"],[1,"avatar-fallback-large"],[1,"menu-option","subscriptions-option",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"]],template:function(i,n){if(1&i&&(l.j41(0,"div",0)(1,"button",1),l.bIt("click",function(){return n.toggleUserMenu()}),l.j41(2,"div",2),l.DNE(3,Hf,1,2,"img",3),l.DNE(4,Yf,2,1,"ng-template",null,4,l.C5r),l.k0s(),l.j41(6,"div",5)(7,"span",6),l.EFF(8),l.k0s(),l.j41(9,"span",7),l.EFF(10),l.k0s()(),l.j41(11,"div",8),l.qSk(),l.j41(12,"svg",9),l.nrm(13,"path",10),l.k0s()()(),l.DNE(14,Gf,33,6,"div",11),l.k0s()),2&i){const o=l.sdS(5);l.R7$(3),l.Y8G("ngIf",n.userData.userImage)("ngIfElse",o),l.R7$(5),l.JRh(n.userData.userName||"Loading..."),l.R7$(2),l.JRh(n.getRoleDisplayName(n.userData.userRole)),l.R7$(1),l.AVh("rotated",n.showUserMenu),l.R7$(3),l.Y8G("ngIf",n.showUserMenu)}},dependencies:[pt.bT],styles:['.profile-dropdown-wrapper{position:relative;display:inline-block;z-index:1000}.profile-trigger{display:flex;align-items:center;gap:10px;padding:6px 10px;background:white;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1.5px solid rgba(226,232,240,.6);border-radius:50px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px -2px #0000001a,0 1px 4px -1px #0000000f}@media (max-width: 480px){.profile-trigger{padding:4px 8px;gap:8px}}.profile-trigger:hover{background:rgb(255,255,255);border-color:#cbd5e1e6;box-shadow:0 6px 20px -4px #00000026,0 4px 12px -2px #0000001a;transform:translateY(-1px) scale(1.02)}.profile-trigger:active{transform:translateY(0) scale(1);box-shadow:0 2px 8px -1px #0000001a}.profile-trigger:focus{outline:none;box-shadow:0 0 0 3px #3b82f626,0 4px 12px -2px #0000001a}.user-avatar{width:40px;height:40px;border-radius:50%;overflow:hidden;position:relative;border:2px solid rgb(255,255,255);box-shadow:0 2px 8px #0000001f,0 1px 3px #00000014,0 0 0 .5px #0000000d;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);flex-shrink:0;transition:all .3s cubic-bezier(.4,0,.2,1)}@media (max-width: 480px){.user-avatar{width:36px;height:36px}}.profile-trigger:hover .user-avatar{border-color:#fff;box-shadow:0 4px 14px #0000002e,0 2px 6px #0000001f,0 0 0 .5px #00000014;transform:scale(1.05)}.avatar-image{width:100%;height:100%;object-fit:cover;border-radius:50%}.avatar-fallback{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:600;color:#fff;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.user-details{display:flex;flex-direction:column;text-align:left;min-width:0;flex:1}.user-name{font-size:13px;font-weight:700;color:#0f172a;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:color .2s ease;display:none}@media (min-width: 640px){.user-name{display:block}}.user-role{font-size:10px;font-weight:600;color:#64748b;margin:0;text-transform:uppercase;letter-spacing:.5px;transition:color .2s ease;display:none}@media (min-width: 640px){.user-role{display:block}}.profile-trigger:hover .user-name{color:#0f172a}.profile-trigger:hover .user-role{color:#475569}.dropdown-indicator{width:18px;height:18px;display:flex;align-items:center;justify-content:center;color:#94a3b8;transition:all .3s cubic-bezier(.4,0,.2,1);flex-shrink:0;display:none}@media (min-width: 640px){.dropdown-indicator{display:flex}}.profile-trigger:hover .dropdown-indicator{color:#64748b}.dropdown-indicator.rotated{transform:rotate(180deg)}.chevron-icon{width:14px;height:14px}.profile-menu{position:absolute;top:calc(100% + 8px);right:0;width:320px;background:rgba(255,255,255,.95);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:20px;box-shadow:0 20px 25px -5px #0000001a,0 10px 10px -5px #0000000a,0 0 0 1px #ffffff1a;z-index:9999;overflow:hidden;animation:menuSlideIn .2s cubic-bezier(.4,0,.2,1)}.profile-menu:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent 0%,rgba(229,231,235,.4) 20%,rgba(229,231,235,.8) 50%,rgba(229,231,235,.4) 80%,transparent 100%)}@keyframes menuSlideIn{0%{opacity:0;transform:translateY(-8px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}.menu-header{padding:20px 24px 16px;background:linear-gradient(135deg,rgba(255,255,255,.1) 0%,rgba(255,255,255,.05) 100%);border-bottom:1px solid rgba(229,231,235,.3)}.user-card{display:flex;align-items:center;gap:16px}.user-avatar-large{width:56px;height:56px;border-radius:50%;overflow:hidden;border:3px solid rgba(255,255,255,.3);box-shadow:0 4px 12px #0000001a;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);flex-shrink:0}.avatar-large{width:100%;height:100%;object-fit:cover;border-radius:50%}.avatar-fallback-large{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:600;color:#fff;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}.user-summary{flex:1;min-width:0}.user-display-name{font-size:18px;font-weight:700;color:#111827f2;margin:0 0 4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.user-display-role{font-size:13px;font-weight:500;color:#6b7280cc;margin:0;text-transform:uppercase;letter-spacing:.8px}.menu-options{padding:8px}.menu-option{display:flex;align-items:center;gap:16px;width:100%;padding:16px 20px;background:transparent;border:none;border-radius:12px;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);text-align:left;margin-bottom:4px;position:relative}.menu-option:hover{background:linear-gradient(135deg,rgba(59,130,246,.08) 0%,rgba(99,102,241,.06) 100%);transform:translate(4px);box-shadow:0 4px 12px #3b82f626}.menu-option:active{transform:translate(2px);background:linear-gradient(135deg,rgba(59,130,246,.12) 0%,rgba(99,102,241,.08) 100%)}.menu-option:focus{outline:none;box-shadow:0 0 0 3px #3b82f64d}.option-icon{width:20px;height:20px;color:#6b7280cc;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.option-content{flex:1;min-width:0}.option-title{display:block;font-size:15px;font-weight:600;color:#111827e6;margin:0 0 2px;transition:color .2s ease}.option-description{display:block;font-size:13px;color:#6b7280b3;margin:0;line-height:1.3;transition:color .2s ease}.option-arrow{width:16px;height:16px;color:#9ca3af99;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.menu-option:hover .option-icon{color:#3b82f6;transform:scale(1.1)}.menu-option:hover .option-title{color:#111827}.menu-option:hover .option-description{color:#6b7280e6}.menu-option:hover .option-arrow{color:#3b82f6;transform:translate(2px)}.menu-divider{height:1px;background:linear-gradient(90deg,transparent 0%,rgba(229,231,235,.5) 20%,rgba(229,231,235,.8) 50%,rgba(229,231,235,.5) 80%,transparent 100%);margin:8px 16px}.menu-footer{padding:16px 20px 20px;background:linear-gradient(135deg,rgba(239,68,68,.04) 0%,rgba(220,38,38,.02) 100%)}.logout-button{display:flex;align-items:center;gap:12px;width:100%;padding:12px 16px;background:linear-gradient(135deg,rgba(239,68,68,.08) 0%,rgba(220,38,38,.06) 100%);border:1px solid rgba(239,68,68,.2);border-radius:12px;cursor:pointer;transition:all .2s cubic-bezier(.4,0,.2,1);color:#ef4444;font-size:14px;font-weight:600}.logout-button:hover{background:linear-gradient(135deg,rgba(239,68,68,.12) 0%,rgba(220,38,38,.08) 100%);border-color:#ef44444d;transform:translateY(-1px);box-shadow:0 4px 12px #ef444433}.logout-button:active{transform:translateY(0)}.logout-button:focus{outline:none;box-shadow:0 0 0 3px #ef44444d}.logout-icon{width:18px;height:18px;flex-shrink:0;transition:transform .2s ease}.logout-button:hover .logout-icon{transform:scale(1.1) rotate(90deg)}@media (max-width: 768px){.profile-trigger{padding:6px 10px;gap:8px}.user-avatar{width:36px;height:36px}.user-name{font-size:13px}.user-role{font-size:11px}.profile-menu{width:280px;right:-20px}.menu-header{padding:16px 20px 12px}.user-avatar-large{width:48px;height:48px}.user-display-name{font-size:16px}.user-display-role{font-size:12px}.menu-options{padding:6px}.menu-option{padding:12px 16px;gap:12px}.option-title{font-size:14px}.option-description{font-size:12px}}@media (max-width: 480px){.profile-trigger{padding:6px 8px;gap:6px}.user-details{display:none}.profile-menu{width:260px;right:-40px}}@media (prefers-color-scheme: dark){.profile-trigger{background:rgba(31,41,55,.8);border-color:#4b55634d}.profile-trigger:hover{background:rgba(55,65,81,.9);border-color:#6b728066}.user-name{color:#f3f4f6e6}.user-role{color:#9ca3afcc}.profile-trigger:hover .user-name{color:#f3f4f6}.profile-trigger:hover .user-role{color:#9ca3af}.dropdown-indicator{color:#9ca3afb3}.profile-menu{background:rgba(31,41,55,.95);border-color:#4b55634d;box-shadow:0 20px 25px -5px #0000004d,0 10px 10px -5px #0003}.menu-header{background:linear-gradient(135deg,rgba(31,41,55,.5) 0%,rgba(55,65,81,.3) 100%);border-bottom-color:#4b55634d}.user-display-name{color:#f3f4f6f2}.user-display-role{color:#9ca3afcc}.menu-option:hover{background:linear-gradient(135deg,rgba(59,130,246,.15) 0%,rgba(99,102,241,.1) 100%)}.option-title{color:#f3f4f6e6}.option-description{color:#9ca3afb3}.menu-option:hover .option-title{color:#f3f4f6}.menu-option:hover .option-description{color:#9ca3afe6}.menu-divider{background:linear-gradient(90deg,transparent 0%,rgba(75,85,99,.5) 20%,rgba(75,85,99,.8) 50%,rgba(75,85,99,.5) 80%,transparent 100%)}.logout-button{background:linear-gradient(135deg,rgba(239,68,68,.15) 0%,rgba(220,38,38,.1) 100%);border-color:#ef44444d;color:#f87171}.logout-button:hover{background:linear-gradient(135deg,rgba(239,68,68,.2) 0%,rgba(220,38,38,.15) 100%);color:#fca5a5}}.profile-trigger.loading{opacity:.7;pointer-events:none}.profile-trigger.loading .user-name:after{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;background:rgba(107,114,128,.5);margin-left:8px;animation:loadingPulse 1.5s ease-in-out infinite}@keyframes loadingPulse{0%,80%,to{transform:scale(.8);opacity:.5}40%{transform:scale(1);opacity:1}}\n'],encapsulation:2,data:{animation:[(0,It.hZ)("dropdownAnimation",[(0,It.wk)("void",(0,It.iF)({opacity:0,transform:"translateY(-10px) scale(0.95)",transformOrigin:"top right"})),(0,It.kY)(":enter",[(0,It.i0)("150ms cubic-bezier(0.4, 0, 0.2, 1)",(0,It.iF)({opacity:1,transform:"translateY(0) scale(1)"}))]),(0,It.kY)(":leave",[(0,It.i0)("100ms cubic-bezier(0.4, 0, 0.2, 1)",(0,It.iF)({opacity:0,transform:"translateY(-5px) scale(0.98)"}))])])]}})}}return s})();var to=G(1657),$f=G(467),qt=G(4341),Ll=G(5889),qf=G(1612);function Zf(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",38),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2);return l.Njj(n.onClose())}),l.qSk(),l.j41(1,"svg",39),l.nrm(2,"path",40),l.k0s()()}}function Kf(s,t){if(1&s&&l.nrm(0,"img",41),2&s){const e=l.XpG(2);l.Y8G("src",null==e.userProfile?null:e.userProfile.profileImage,l.B4B)("alt",null==e.userProfile?null:e.userProfile.name)}}function Jf(s,t){if(1&s&&(l.j41(0,"div",42)(1,"span",43),l.EFF(2),l.k0s()()),2&s){const e=l.XpG(2);l.R7$(2),l.JRh(e.getInitials(null==e.userProfile?null:e.userProfile.name))}}function Qf(s,t){1&s&&(l.j41(0,"div",44)(1,"button",45),l.qSk(),l.j41(2,"svg",39),l.nrm(3,"path",46)(4,"path",47),l.k0s(),l.joV(),l.j41(5,"span"),l.EFF(6,"Change Photo"),l.k0s()()())}function tm(s,t){if(1&s&&l.nrm(0,"input",30),2&s){const e=l.XpG(2);l.Y8G("value",e.getRoleDisplayName(null==e.userProfile?null:e.userProfile.role))}}function em(s,t){if(1&s&&(l.j41(0,"option",50),l.EFF(1),l.k0s()),2&s){const e=t.$implicit;l.Y8G("value",e.value),l.R7$(1),l.JRh(e.label)}}function im(s,t){if(1&s){const e=l.RV6();l.j41(0,"select",48),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG(2);return l.Njj(o.editedProfile.role=n)}),l.DNE(1,em,2,2,"option",49),l.k0s()}if(2&s){const e=l.XpG(2);l.AVh("editing",e.isEditing),l.Y8G("disabled",!e.isEditing)("ngModel",e.editedProfile.role),l.R7$(1),l.Y8G("ngForOf",e.availableRoles)}}function nm(s,t){1&s&&(l.j41(0,"span"),l.EFF(1,"Update map location"),l.k0s())}function sm(s,t){1&s&&(l.j41(0,"span"),l.EFF(1,"Fetching location..."),l.k0s())}function om(s,t){if(1&s&&(l.j41(0,"div",51)(1,"span"),l.EFF(2),l.nI1(3,"number"),l.nI1(4,"number"),l.k0s()()),2&s){const e=l.XpG(2);l.R7$(2),l.Lme("Lat: ",l.i5U(3,2,e.editedProfile.latitude,"1.6-6"),", Lng: ",l.i5U(4,5,e.editedProfile.longitude,"1.6-6"),"")}}function rm(s,t){if(1&s&&(l.j41(0,"div",52),l.EFF(1),l.k0s()),2&s){const e=l.XpG(2);l.R7$(1),l.JRh(e.locationError)}}function am(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",53),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2);return l.Njj(n.onClose())}),l.EFF(1," Close "),l.k0s()}}function lm(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",54)(1,"button",55),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2);return l.Njj(n.onEdit())}),l.qSk(),l.j41(2,"svg",39),l.nrm(3,"path",56),l.k0s(),l.joV(),l.j41(4,"span"),l.EFF(5,"Edit Profile"),l.k0s()()()}}function cm(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",57)(1,"button",53),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2);return l.Njj(n.onCancel())}),l.EFF(2,"Cancel"),l.k0s(),l.j41(3,"button",55),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2);return l.Njj(n.onSave())}),l.EFF(4,"Save Changes"),l.k0s()()}}function hm(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",1),l.bIt("click",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.onBackdropClick(n))}),l.j41(1,"div",2)(2,"div",3)(3,"h2",4),l.EFF(4,"User Profile"),l.k0s(),l.DNE(5,Zf,3,0,"button",5),l.k0s(),l.j41(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),l.DNE(10,Kf,1,2,"img",10),l.DNE(11,Jf,3,1,"ng-template",null,11,l.C5r),l.k0s(),l.DNE(13,Qf,7,0,"div",12),l.k0s(),l.j41(14,"div",13)(15,"div",14)(16,"h3",15),l.EFF(17,"Basic Information"),l.k0s(),l.j41(18,"div",16)(19,"div",17)(20,"label",18),l.EFF(21,"Full Name"),l.k0s(),l.j41(22,"input",19),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.editedProfile.name=n)}),l.k0s()(),l.j41(23,"div",17)(24,"label",18),l.EFF(25,"Email Address"),l.k0s(),l.j41(26,"input",20),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.editedProfile.email=n)}),l.k0s()(),l.j41(27,"div",17)(28,"label",18),l.EFF(29,"Phone Number"),l.k0s(),l.j41(30,"input",21),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.editedProfile.phone=n)}),l.k0s()(),l.j41(31,"div",17)(32,"label",18),l.EFF(33,"Role"),l.k0s(),l.DNE(34,tm,1,1,"input",22),l.DNE(35,im,2,5,"select",23),l.k0s()()(),l.j41(36,"div",14)(37,"h3",15),l.EFF(38,"Address Information"),l.k0s(),l.j41(39,"div",16)(40,"div",24)(41,"label",18),l.EFF(42,"Village"),l.k0s(),l.j41(43,"input",25),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.editedProfile.village=n)}),l.k0s()(),l.j41(44,"div",24)(45,"label",18),l.EFF(46,"Full Address"),l.k0s(),l.j41(47,"div",26)(48,"button",27),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.onGetMapLocation())}),l.DNE(49,nm,2,0,"span",28),l.DNE(50,sm,2,0,"span",28),l.k0s()(),l.j41(51,"div",29),l.nrm(52,"input",30),l.DNE(53,om,5,8,"div",31),l.DNE(54,rm,2,1,"div",32),l.k0s()()()(),l.j41(55,"div",14)(56,"h3",15),l.EFF(57,"Emergency Contact"),l.k0s(),l.j41(58,"div",24)(59,"label",18),l.EFF(60,"Emergency Contact"),l.k0s(),l.j41(61,"input",33),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.editedProfile.emergencyContact=n)}),l.k0s()()(),l.j41(62,"div",14)(63,"h3",15),l.EFF(64,"Account Information"),l.k0s(),l.j41(65,"div",16)(66,"div",17)(67,"label",18),l.EFF(68,"Member Since"),l.k0s(),l.nrm(69,"input",30),l.k0s()()()()()(),l.j41(70,"div",34),l.DNE(71,am,2,0,"button",35),l.DNE(72,lm,6,0,"div",36),l.DNE(73,cm,5,0,"div",37),l.k0s()()()}if(2&s){const e=l.sdS(12),i=l.XpG();l.R7$(5),l.Y8G("ngIf",!i.isEditing),l.R7$(5),l.Y8G("ngIf",null==i.userProfile?null:i.userProfile.profileImage)("ngIfElse",e),l.R7$(3),l.Y8G("ngIf",i.isEditing),l.R7$(9),l.AVh("editing",i.isEditing),l.Y8G("readonly",!i.isEditing)("ngModel",i.editedProfile.name),l.R7$(4),l.AVh("editing",i.isEditing),l.Y8G("readonly",!i.isEditing)("ngModel",i.editedProfile.email),l.R7$(4),l.AVh("editing",i.isEditing),l.Y8G("readonly",!i.isEditing)("ngModel",i.editedProfile.phone),l.R7$(4),l.Y8G("ngIf",!i.isEditing),l.R7$(1),l.Y8G("ngIf",i.isEditing),l.R7$(8),l.AVh("editing",i.isEditing),l.Y8G("readonly",!i.isEditing)("ngModel",i.editedProfile.village),l.R7$(5),l.Y8G("disabled",i.isLocating),l.R7$(1),l.Y8G("ngIf",!i.isLocating),l.R7$(1),l.Y8G("ngIf",i.isLocating),l.R7$(2),l.Y8G("value",(null==i.editedProfile?null:i.editedProfile.address)||"No address set"),l.R7$(1),l.Y8G("ngIf",null!=(null==i.editedProfile?null:i.editedProfile.latitude)&&null!=(null==i.editedProfile?null:i.editedProfile.longitude)),l.R7$(1),l.Y8G("ngIf",i.locationError),l.R7$(7),l.AVh("editing",i.isEditing),l.Y8G("readonly",!i.isEditing)("ngModel",i.editedProfile.emergencyContact),l.R7$(8),l.Y8G("value",i.formatDate(null==i.userProfile?null:i.userProfile.joinDate)),l.R7$(2),l.Y8G("ngIf",!i.isEditing),l.R7$(1),l.Y8G("ngIf",!i.isEditing),l.R7$(1),l.Y8G("ngIf",i.isEditing)}}let Xn=(()=>{class s{constructor(e,i,n,o){this.usersService=e,this.tokenService=i,this.toast=n,this.geo=o,this.isVisible=!1,this.userProfile=null,this.closeModal=new l.bkB,this.updateProfile=new l.bkB,this.deleteProfile=new l.bkB,this.isEditing=!1,this.editedProfile=null,this.isLocating=!1,this.coords=null,this.locationError=null,this.availableRoles=[]}ngOnInit(){this.loadAvailableRoles();const e=this.tokenService.getCurrentUser();this.usersService.getUserById(e.userId).subscribe(i=>{this.currentUser=i})}ngOnChanges(e){this.userProfile&&this.isVisible&&(this.editedProfile={...this.userProfile},this.isEditing=!1)}loadAvailableRoles(){this.usersService.getAllRoles().subscribe(e=>{this.availableRoles=e.map(i=>({value:i,label:i}))})}onClose(){this.closeModal.emit(),this.isEditing=!1}onEdit(){this.isEditing=!0}onCancel(){this.isEditing=!1,this.userProfile&&(this.editedProfile={...this.userProfile})}onSave(){if(this.editedProfile){const e={id:this.editedProfile.id,name:this.editedProfile.name,email:this.editedProfile.email,phone:this.editedProfile.phone,role:this.currentUser.role,active:!0,village:this.currentUser.village,latitude:this.editedProfile.latitude,longitude:this.editedProfile.longitude},i=this.currentUser||{},n=Number(e.latitude??0)!==Number(i.latitude??0),o=Number(e.longitude??0)!==Number(i.longitude??0);if(!n&&!o&&e.name===i.name&&e.email===i.email&&e.phone===i.phone&&(e.village?.id||e.village)===(i.village?.id||i.village)&&this.editedProfile.address===this.userProfile?.address)return this.isEditing=!1,void this.closeModal.emit();this.usersService.updateUser(this.editedProfile.id,e).subscribe({next:a=>{console.log("User updated successfully:",a),this.userProfile=this.editedProfile?{...this.editedProfile}:null,this.isEditing=!1,this.editedProfile&&this.updateProfile.emit(this.editedProfile),this.closeModal.emit()},error:a=>{console.error("Error updating user:",a),this.toast.error("Failed to update profile. Please try again.")}})}}onDelete(){this.userProfile&&confirm("Are you sure you want to delete this profile? This action cannot be undone.")&&this.deleteProfile.emit(this.userProfile.id)}onBackdropClick(e){e.target===e.currentTarget&&this.onClose()}getInitials(e){return e?e.split(" ").map(i=>i[0]).join("").toUpperCase().slice(0,2):"U"}formatDate(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return e}}getRoleDisplayName(e){return e?{VILLAGER:"VILLAGER",VILLAGE_ADMIN:"VILLAGE_ADMIN",SUPER_ADMIN:"SUPER_ADMIN"}[e]||e:"N/A"}onGetMapLocation(){var e=this;return(0,$f.A)(function*(){e.locationError=null,e.isLocating=!0;try{const{lat:i,lng:n}=yield e.geo.getCurrentCoordinates();e.coords={lat:i,lng:n};const o=`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${encodeURIComponent(i)}&lon=${encodeURIComponent(n)}`,r=yield fetch(o,{headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Reverse geocoding failed (${r.status})`);const a=yield r.json(),c=a?.display_name,h=a?.address||{},d=[h.road,h.neighbourhood,h.suburb,h.village||h.town||h.city,h.state,h.postcode,h.country].filter(Boolean).join(", "),g=c||d||`${i.toFixed(6)}, ${n.toFixed(6)}`;!e.editedProfile&&e.userProfile&&(e.editedProfile={...e.userProfile}),e.editedProfile&&(e.editedProfile.address=g,e.editedProfile.latitude=i,e.editedProfile.longitude=n)}catch(i){const n=i?.code;e.locationError=1===n?"Permission denied. Please allow location access.":2===n?"Position unavailable. Try again later.":3===n?"Location request timed out.":i?.message||"Failed to fetch location."}finally{e.isLocating=!1}})()}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(mi.g),l.rXU(Ie.B),l.rXU(Ll.f),l.rXU(qf.O))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-profile-modal"]],inputs:{isVisible:"isVisible",userProfile:"userProfile"},outputs:{closeModal:"closeModal",updateProfile:"updateProfile",deleteProfile:"deleteProfile"},standalone:!0,features:[l.OA$,l.aNF],decls:1,vars:1,consts:[["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["class","close-btn",3,"click",4,"ngIf"],[1,"modal-body"],[1,"profile-section"],[1,"profile-picture-section"],[1,"profile-picture"],["class","profile-image",3,"src","alt",4,"ngIf","ngIfElse"],["defaultAvatar",""],["class","profile-picture-actions",4,"ngIf"],[1,"profile-info-section"],[1,"info-group"],[1,"section-title"],[1,"form-grid"],[1,"form-field"],[1,"field-label"],["type","text","placeholder","Enter full name",1,"form-input",3,"readonly","ngModel","ngModelChange"],["type","email","placeholder","Enter email address",1,"form-input",3,"readonly","ngModel","ngModelChange"],["type","tel","placeholder","Enter phone number",1,"form-input",3,"readonly","ngModel","ngModelChange"],["type","text","class","form-input","readonly","",3,"value",4,"ngIf"],["class","form-input",3,"editing","disabled","ngModel","ngModelChange",4,"ngIf"],[1,"form-field","full-width"],["type","text","placeholder","Enter village name",1,"form-input",3,"readonly","ngModel","ngModelChange"],[1,"address-action-row"],["type","button",1,"btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"address-display"],["type","text","readonly","",1,"form-input",3,"value"],["class","address-meta",4,"ngIf"],["class","address-error",4,"ngIf"],["type","text","placeholder","Enter emergency contact details",1,"form-input",3,"readonly","ngModel","ngModelChange"],[1,"modal-actions"],["class","btn-secondary",3,"click",4,"ngIf"],["class","action-buttons",4,"ngIf"],["class","edit-actions",4,"ngIf"],[1,"close-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"profile-image",3,"src","alt"],[1,"default-avatar"],[1,"avatar-text"],[1,"profile-picture-actions"],[1,"change-photo-btn"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],[1,"form-input",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"address-meta"],[1,"address-error"],[1,"btn-secondary",3,"click"],[1,"action-buttons"],[1,"btn-primary",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"edit-actions"]],template:function(i,n){1&i&&l.DNE(0,hm,74,36,"div",0),2&i&&l.Y8G("ngIf",n.isVisible)},dependencies:[pt.MD,pt.Sq,pt.bT,pt.QX,qt.YN,qt.xH,qt.y7,qt.me,qt.wz,qt.BC,qt.vS],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.modal-content[_ngcontent-%COMP%]{background:white;border-radius:1rem;width:100%;max-width:800px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 25px #0000001a}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2rem 2rem 0;border-bottom:1px solid #e5e7eb;margin-bottom:2rem}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#1f2937;margin:0}.close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6b7280;cursor:pointer;padding:.5rem;border-radius:.5rem;transition:all .2s ease}.close-btn[_ngcontent-%COMP%]:hover{color:#374151;background:#f3f4f6}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem}.modal-body[_ngcontent-%COMP%]{padding:0 2rem}.profile-section[_ngcontent-%COMP%]{display:flex;gap:2rem}.profile-picture-section[_ngcontent-%COMP%]{flex-shrink:0;text-align:center}.profile-picture[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:1rem;position:relative}.profile-image[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:4px solid #e5e7eb}.default-avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;background:linear-gradient(135deg,#3b82f6,#8b5cf6);display:flex;align-items:center;justify-content:center;border:4px solid #e5e7eb}.avatar-text[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#fff;text-transform:uppercase}.change-photo-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:#f3f4f6;border:1px solid #d1d5db;border-radius:.5rem;color:#374151;font-size:.875rem;cursor:pointer;transition:all .2s ease}.change-photo-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.change-photo-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.profile-info-section[_ngcontent-%COMP%]{flex:1}.info-group[_ngcontent-%COMP%]{margin-bottom:2rem}.info-group[_ngcontent-%COMP%]:last-child{margin-bottom:0}.section-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1f2937;margin:0 0 1rem;padding-bottom:.5rem;border-bottom:2px solid #3b82f6}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}.form-field.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.field-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.5rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:.5rem;font-size:.875rem;color:#374151;background:white;transition:all .2s ease}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-input[_ngcontent-%COMP%]:disabled, .form-input[readonly][_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]:disabled, .form-textarea[readonly][_ngcontent-%COMP%]{background:#f9fafb;color:#6b7280;cursor:not-allowed}.form-input.editing[_ngcontent-%COMP%], .form-textarea.editing[_ngcontent-%COMP%]{background:white;border-color:#3b82f6}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;border-top:1px solid #e5e7eb;background:#f9fafb}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;width:100%;justify-content:flex-end}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:.5rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;text-decoration:none;border:none}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#2563eb}.btn-primary[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151;border:1px solid #d1d5db}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#dc2626}.btn-danger[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}@media (max-width: 768px){.modal-overlay[_ngcontent-%COMP%]{padding:.5rem}.modal-content[_ngcontent-%COMP%]{max-height:95vh}.modal-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 0}.modal-body[_ngcontent-%COMP%]{padding:0 1.5rem}.profile-section[_ngcontent-%COMP%]{flex-direction:column;gap:1.5rem}.profile-picture-section[_ngcontent-%COMP%]{align-self:center}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.modal-actions[_ngcontent-%COMP%]{padding:1.5rem;flex-direction:column;gap:1rem}.action-buttons[_ngcontent-%COMP%], .edit-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.8rem}.modal-title[_ngcontent-%COMP%]{font-size:1.25rem}}"]})}}return s})();const dm=["villageAdminsChart"],gm=["villagesChart"],um=["villagersChart"],pm=["activityChart"];Nt.register(...Rl);let Dl=(()=>{class s{constructor(e,i,n,o,r){this.tokenService=e,this.router=i,this.userService=n,this.chatService=o,this.websocketService=r,this.userName="Super Admin",this.userImage="assets/people.png",this.showUserMenu=!1,this.userProfileData={userName:"Super Admin",userRole:"SUPER_ADMIN",userImage:"assets/people.png",userId:"",latitude:"",longitude:""},this.counts={villagers:1250,activeVillagers:1150,inactiveVillagers:100,villageAdmins:45,activeVillageAdmins:30,inactiveVillageAdmins:15,villages:28,activeVillages:25,inactiveVillages:3,countries:0,activeCountries:0,inactiveCountries:0,states:0,activeStates:0,inactiveStates:0,districts:0,activeDistricts:0,inactiveDistricts:0,mandals:0,activeMandals:0,inactiveMandals:0},this.showChatPopup=!1,this.unreadMessages=3,this.selectedChatUser="",this.chatMessage="",this.chatUsers=[],this.chatMessages=[],this.currentUserId=null,this.isLoadingUsers=!1,this.isConnected=!1,this.lastSentMessage="",this.lastSentTime=0,this.activeConversationPartner=null,this.charts=[],this.showProfileModal=!1,this.currentUserProfile=null}ngOnInit(){this.loadCurrentUser(),this.userService.getUsersCount().subscribe({next:e=>{this.counts.villagers=e.totalVillagers,this.counts.activeVillagers=e.activeVillagers,this.counts.inactiveVillagers=e.inactiveVillagers,this.counts.villageAdmins=e.totalVillageAdmins,this.counts.activeVillageAdmins=e.activeVillageAdmins,this.counts.inactiveVillageAdmins=e.inactiveVillageAdmins},error:e=>{console.error("Error:",e),alert("Error: "+JSON.stringify(e))}}),this.userService.getDashboardCount().subscribe({next:e=>{this.counts.villages=e?.villageCounts?.totalVillages||0,this.counts.activeVillages=e?.villageCounts?.activeVillages||0,this.counts.inactiveVillages=e?.villageCounts?.inactiveVillages||0,this.counts.countries=e?.countryCounts?.totalCountries||0,this.counts.activeCountries=e?.countryCounts?.activeCountries||0,this.counts.inactiveCountries=e?.countryCounts?.inactiveCountries||0,this.counts.states=e?.stateCounts?.totalStates||0,this.counts.activeStates=e?.stateCounts?.activeStates||0,this.counts.inactiveStates=e?.stateCounts?.inactiveStates||0,this.counts.districts=e?.districtCounts?.totalDistricts||0,this.counts.activeDistricts=e?.districtCounts?.activeDistricts||0,this.counts.inactiveDistricts=e?.districtCounts?.inactiveDistricts||0,this.counts.mandals=e?.mandalCounts?.totalMandals||0,this.counts.activeMandals=e?.mandalCounts?.activeMandals||0,this.counts.inactiveMandals=e?.mandalCounts?.inactiveMandals||0,console.log("Comprehensive counts loaded:",this.counts)},error:e=>{console.error("Error loading comprehensive counts:",e),alert("Error loading counts: "+JSON.stringify(e))}}),this.websocketService.messages$.subscribe(e=>{if(e){console.log("Super-admin received message:",e);const i=Date.now();if(e.content===this.lastSentMessage&&e.senderId===this.currentUserId&&i-this.lastSentTime<5e3)return void console.log("Filtering out echo message (duplicate)");if(this.shouldDisplayMessage(e)){const n={sender:e.senderId===this.currentUserId?"me":"other",content:e.content,timestamp:new Date(e.timestamp||new Date)};console.log("Adding message to chat UI:",n),this.chatMessages.push(n)}this.lastSentMessage="",this.lastSentTime=0}}),this.websocketService.connectionStatus$.subscribe(e=>{this.isConnected=e,e&&console.log("WebSocket connection established")})}ngAfterViewInit(){setTimeout(()=>{this.initializeCharts()},100)}ngOnDestroy(){this.charts.forEach(e=>e.destroy())}loadCurrentUser(){const e=this.tokenService.getCurrentUser();e&&e.userId&&(this.currentUserId=e.userId,this.userService.getUserById(e.userId).subscribe({next:i=>{this.userProfileData={userName:i.name||"Super Admin",userRole:i.role||"SUPER_ADMIN",userImage:this.userImage,userId:this.currentUserId||"",latitude:i.latitude,longitude:i.longitude},console.log("Current super-admin user loaded:",i)},error:i=>{console.error("Error loading current user:",i)}}))}onProfileModalOpened(e){this.currentUserProfile=e,this.showProfileModal=!0}onSubscriptionsNavigated(){this.router.navigate(["/dashboard/subscriptions"])}onLogoutClicked(){this.tokenService.logout()}closeProfileModal(){this.showProfileModal=!1,this.currentUserProfile=null}updateUserProfile(e){console.log("Updating user profile:",e),this.closeProfileModal()}deleteUserProfile(e){console.log("Deleting user profile:",e),this.closeProfileModal()}onChatToggled(e){console.log("Chat toggled:",e)}loadChatUsers(){this.currentUserId?(this.isLoadingUsers=!0,this.userService.getAllUsers().subscribe({next:e=>{this.chatUsers=e.filter(i=>i.id!==this.currentUserId),console.log("Chat users loaded:",this.chatUsers.length,"users"),this.isLoadingUsers=!1},error:e=>{console.error("Error loading chat users:",e),this.isLoadingUsers=!1}})):console.log("Current user not loaded yet, cannot load chat users")}loadChatMessages(){this.selectedChatUser?(this.setActiveConversation(this.selectedChatUser),console.log("Loading chat messages for user:",this.selectedChatUser),!this.isConnected&&this.currentUserId&&(console.log("Connecting to WebSocket for real-time messaging"),this.connect()),this.chatService.getChatMessages(this.selectedChatUser,this.currentUserId).subscribe({next:e=>{console.log("Received initial messages from API:",e),this.chatMessages=e.map(i=>({sender:i.senderId===this.currentUserId?"me":"other",content:i.content,timestamp:new Date(i.timestamp)})),console.log("Loaded initial chat messages:",this.chatMessages)},error:e=>{console.error("Error loading chat messages:",e)}})):(this.chatMessages=[],this.activeConversationPartner=null)}sendMessage(){if(this.chatMessage.trim()&&this.selectedChatUser&&this.currentUserId){const e=this.chatMessage.trim();this.chatMessages.push({sender:"me",content:e,timestamp:new Date}),this.lastSentMessage=e,this.lastSentTime=Date.now();const n={senderId:this.currentUserId,receiverId:this.selectedChatUser,content:e,timestamp:(new Date).toISOString(),token:this.tokenService.getToken()};console.log("Sending WebSocket message:",n),this.websocketService.sendMessage(n),this.chatMessage=""}}connect(){console.log("Connecting to WebSocket with user ID:",this.currentUserId),this.websocketService.connect(this.currentUserId)}setActiveConversation(e){this.activeConversationPartner=e,console.log("Active conversation set to:",e)}shouldDisplayMessage(e){return!!this.activeConversationPartner&&(e.senderId===this.currentUserId&&e.receiverId===this.activeConversationPartner||e.receiverId===this.currentUserId&&e.senderId===this.activeConversationPartner)}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}closeUserMenu(){this.showUserMenu=!1}onDocumentClick(e){e.target.closest(".user-profile-wrapper")||this.closeUserMenu()}viewProfile(){console.log("Viewing profile..."),this.closeUserMenu(),this.router.navigate(["/profile"])}viewSubscriptions(){console.log("Viewing subscriptions..."),this.closeUserMenu()}handleLogout(){this.closeUserMenu(),this.tokenService.logout()}navigateToUserCreate(){this.router.navigate(["/users/"])}navigateToVillageAdmins(){console.log("navigateToVillageAdmins called"),this.router.navigate(["/users"],{queryParams:{role:"VILLAGE_ADMIN"}})}navigateToVillagers(){console.log("navigateToVillagers called"),this.router.navigate(["/users"],{queryParams:{role:"VILLAGER"}})}navigateToVillages(){this.router.navigate(["/address/"])}navigateToCountries(){this.router.navigate(["/address/countries"])}navigateToStates(){this.router.navigate(["/address/states"])}navigateToDistricts(){this.router.navigate(["/address/districts"])}navigateToMandals(){this.router.navigate(["/address/mandals"])}navigateToImages(){this.router.navigate(["/images"])}navigateToEntities(){this.router.navigate(["/entities"])}navigateToVehicles(){this.router.navigate(["/vehicles"])}navigateToIncidents(){this.router.navigate(["/incidents"])}navigateToEvents(){this.router.navigate(["/events"])}navigateToTemples(){this.router.navigate(["/temples"])}navigateToSchools(){this.router.navigate(["/schools"])}initializeCharts(){this.createVillageAdminsChart(),this.createVillagesChart(),this.createVillagersChart(),this.createActivityChart()}createVillageAdminsChart(){if(this.villageAdminsChartRef){const e=this.villageAdminsChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"doughnut",data:{labels:["Active","Inactive","Pending"],datasets:[{data:[35,5,5],backgroundColor:["#10b981","#ef4444","#f59e0b"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom"}}}});this.charts.push(i)}}createVillagesChart(){if(this.villagesChartRef){const e=this.villagesChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"bar",data:{labels:["North","South","East","West"],datasets:[{label:"Villages",data:[8,6,7,7],backgroundColor:"#8b5cf6",borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}});this.charts.push(i)}}createVillagersChart(){if(this.villagersChartRef){const e=this.villagersChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Villagers",data:[1e3,1050,1100,1150,1200,1250],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!1}}}});this.charts.push(i)}}createActivityChart(){if(this.activityChartRef){const e=this.activityChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"line",data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Logins",data:[65,78,90,81,76,85,80],borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Activities",data:[45,55,70,60,55,65,60],borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}});this.charts.push(i)}}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(Ie.B),l.rXU(Ce.Ix),l.rXU(mi.g),l.rXU(Ks.m),l.rXU(Js.H))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-super-admin"]],viewQuery:function(i,n){if(1&i&&(l.GBs(dm,5),l.GBs(gm,5),l.GBs(um,5),l.GBs(pm,5)),2&i){let o;l.mGM(o=l.lsd())&&(n.villageAdminsChartRef=o.first),l.mGM(o=l.lsd())&&(n.villagesChartRef=o.first),l.mGM(o=l.lsd())&&(n.villagersChartRef=o.first),l.mGM(o=l.lsd())&&(n.activityChartRef=o.first)}},hostBindings:function(i,n){1&i&&l.bIt("click",function(r){return n.onDocumentClick(r)},!1,l.EBC)},decls:270,vars:27,consts:[[1,"super-admin-dashboard"],[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-left"],[1,"dashboard-title"],[1,"dashboard-subtitle"],[1,"header-right"],[3,"userData","profileModalOpened","subscriptionsNavigated","logoutClicked"],[1,"count-cards-row"],[1,"count-card","village-admin-card","clickable",3,"click"],[1,"count-card-icon"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"],[1,"count-card-content"],[1,"count-card-label"],[1,"count-card-value"],[1,"count-card-details"],[1,"detail-item","active"],[1,"detail-dot","active"],[1,"detail-item","inactive"],[1,"detail-dot","inactive"],[1,"card-hover-indicator"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"count-card","villager-card","clickable",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"count-card","village-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],[1,"count-card","mandal-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"count-card","district-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"count-card","state-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"],[1,"count-card","country-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"nav-cards-row"],[1,"nav-card","village-admin-nav",3,"click"],[1,"nav-card-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"nav-card-title"],[1,"nav-card-desc"],[1,"nav-card","villager-nav",3,"click"],[1,"nav-card","country-nav",3,"click"],[1,"nav-card","state-nav",3,"click"],[1,"nav-card","district-nav",3,"click"],[1,"nav-card","mandal-nav",3,"click"],[1,"nav-card","images-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"nav-card","entities-nav",3,"click"],[1,"nav-card","vehicles-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"nav-card","incidents-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"nav-card","events-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"nav-card","temples-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"nav-card","schools-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"],[1,"charts-section"],[1,"section-title"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-title"],["villageAdminsChart",""],["villagesChart",""],["villagersChart",""],["activityChart",""],[3,"currentUserId","currentUserRole","currentUserName","chatToggled"],[3,"isVisible","userProfile","closeModal","updateProfile","deleteProfile"]],template:function(i,n){1&i&&(l.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l.EFF(5,"Super Admin Dashboard"),l.k0s(),l.j41(6,"p",5),l.EFF(7,"Manage everything from here"),l.k0s()(),l.j41(8,"div",6)(9,"app-user-profile-dropdown",7),l.bIt("profileModalOpened",function(r){return n.onProfileModalOpened(r)})("subscriptionsNavigated",function(){return n.onSubscriptionsNavigated()})("logoutClicked",function(){return n.onLogoutClicked()}),l.k0s()()(),l.j41(10,"div",8)(11,"div",9),l.bIt("click",function(){return n.navigateToVillageAdmins()}),l.j41(12,"div",10),l.qSk(),l.j41(13,"svg",11),l.nrm(14,"path",12),l.k0s()(),l.joV(),l.j41(15,"div",13)(16,"p",14),l.EFF(17,"Village Admins"),l.k0s(),l.j41(18,"p",15),l.EFF(19),l.k0s(),l.j41(20,"div",16)(21,"span",17),l.nrm(22,"span",18),l.EFF(23),l.k0s(),l.j41(24,"span",19),l.nrm(25,"span",20),l.EFF(26),l.k0s()()(),l.j41(27,"div",21),l.qSk(),l.j41(28,"svg",11),l.nrm(29,"path",22),l.k0s()()(),l.joV(),l.j41(30,"div",23),l.bIt("click",function(){return n.navigateToVillagers()}),l.j41(31,"div",10),l.qSk(),l.j41(32,"svg",11),l.nrm(33,"path",24),l.k0s()(),l.joV(),l.j41(34,"div",13)(35,"p",14),l.EFF(36,"Villagers"),l.k0s(),l.j41(37,"p",15),l.EFF(38),l.k0s(),l.j41(39,"div",16)(40,"span",17),l.nrm(41,"span",18),l.EFF(42),l.k0s(),l.j41(43,"span",19),l.nrm(44,"span",20),l.EFF(45),l.k0s()()(),l.j41(46,"div",21),l.qSk(),l.j41(47,"svg",11),l.nrm(48,"path",22),l.k0s()()(),l.joV(),l.j41(49,"div",25)(50,"div",10),l.qSk(),l.j41(51,"svg",11),l.nrm(52,"path",26),l.k0s()(),l.joV(),l.j41(53,"div",13)(54,"p",14),l.EFF(55,"Villages"),l.k0s(),l.j41(56,"p",15),l.EFF(57),l.k0s(),l.j41(58,"div",16)(59,"span",17),l.nrm(60,"span",18),l.EFF(61),l.k0s(),l.j41(62,"span",19),l.nrm(63,"span",20),l.EFF(64),l.k0s()()()(),l.j41(65,"div",27)(66,"div",10),l.qSk(),l.j41(67,"svg",11),l.nrm(68,"path",28),l.k0s()(),l.joV(),l.j41(69,"div",13)(70,"p",14),l.EFF(71,"Mandals"),l.k0s(),l.j41(72,"p",15),l.EFF(73),l.k0s(),l.j41(74,"div",16)(75,"span",17),l.nrm(76,"span",18),l.EFF(77),l.k0s(),l.j41(78,"span",19),l.nrm(79,"span",20),l.EFF(80),l.k0s()()()(),l.j41(81,"div",29)(82,"div",10),l.qSk(),l.j41(83,"svg",11),l.nrm(84,"path",26)(85,"path",30),l.k0s()(),l.joV(),l.j41(86,"div",13)(87,"p",14),l.EFF(88,"Districts"),l.k0s(),l.j41(89,"p",15),l.EFF(90),l.k0s(),l.j41(91,"div",16)(92,"span",17),l.nrm(93,"span",18),l.EFF(94),l.k0s(),l.j41(95,"span",19),l.nrm(96,"span",20),l.EFF(97),l.k0s()()()(),l.j41(98,"div",31)(99,"div",10),l.qSk(),l.j41(100,"svg",11),l.nrm(101,"path",32),l.k0s()(),l.joV(),l.j41(102,"div",13)(103,"p",14),l.EFF(104,"States"),l.k0s(),l.j41(105,"p",15),l.EFF(106),l.k0s(),l.j41(107,"div",16)(108,"span",17),l.nrm(109,"span",18),l.EFF(110),l.k0s(),l.j41(111,"span",19),l.nrm(112,"span",20),l.EFF(113),l.k0s()()()(),l.j41(114,"div",33)(115,"div",10),l.qSk(),l.j41(116,"svg",11),l.nrm(117,"path",34),l.k0s()(),l.joV(),l.j41(118,"div",13)(119,"p",14),l.EFF(120,"Countries"),l.k0s(),l.j41(121,"p",15),l.EFF(122),l.k0s(),l.j41(123,"div",16)(124,"span",17),l.nrm(125,"span",18),l.EFF(126),l.k0s(),l.j41(127,"span",19),l.nrm(128,"span",20),l.EFF(129),l.k0s()()()()(),l.j41(130,"div",35)(131,"button",36),l.bIt("click",function(){return n.navigateToVillageAdmins()}),l.j41(132,"div",37),l.qSk(),l.j41(133,"svg",11),l.nrm(134,"path",38),l.k0s()(),l.joV(),l.j41(135,"p",39),l.EFF(136,"Village Admin"),l.k0s(),l.j41(137,"p",40),l.EFF(138,"Manage village administrators"),l.k0s()(),l.j41(139,"button",41),l.bIt("click",function(){return n.navigateToVillagers()}),l.j41(140,"div",37),l.qSk(),l.j41(141,"svg",11),l.nrm(142,"path",38),l.k0s()(),l.joV(),l.j41(143,"p",39),l.EFF(144,"Villager"),l.k0s(),l.j41(145,"p",40),l.EFF(146,"Manage villagers"),l.k0s()(),l.j41(147,"button",42),l.bIt("click",function(){return n.navigateToCountries()}),l.j41(148,"div",37),l.qSk(),l.j41(149,"svg",11),l.nrm(150,"path",34),l.k0s()(),l.joV(),l.j41(151,"p",39),l.EFF(152,"Country"),l.k0s(),l.j41(153,"p",40),l.EFF(154,"Manage countries"),l.k0s()(),l.j41(155,"button",43),l.bIt("click",function(){return n.navigateToStates()}),l.j41(156,"div",37),l.qSk(),l.j41(157,"svg",11),l.nrm(158,"path",32),l.k0s()(),l.joV(),l.j41(159,"p",39),l.EFF(160,"State"),l.k0s(),l.j41(161,"p",40),l.EFF(162,"Manage states"),l.k0s()(),l.j41(163,"button",44),l.bIt("click",function(){return n.navigateToDistricts()}),l.j41(164,"div",37),l.qSk(),l.j41(165,"svg",11),l.nrm(166,"path",26)(167,"path",30),l.k0s()(),l.joV(),l.j41(168,"p",39),l.EFF(169,"District"),l.k0s(),l.j41(170,"p",40),l.EFF(171,"Manage districts"),l.k0s()(),l.j41(172,"button",45),l.bIt("click",function(){return n.navigateToMandals()}),l.j41(173,"div",37),l.qSk(),l.j41(174,"svg",11),l.nrm(175,"path",28),l.k0s()(),l.joV(),l.j41(176,"p",39),l.EFF(177,"Mandal"),l.k0s(),l.j41(178,"p",40),l.EFF(179,"Manage mandals"),l.k0s()(),l.j41(180,"button",45),l.bIt("click",function(){return n.navigateToVillages()}),l.j41(181,"div",37),l.qSk(),l.j41(182,"svg",11),l.nrm(183,"path",28),l.k0s()(),l.joV(),l.j41(184,"p",39),l.EFF(185,"Village"),l.k0s(),l.j41(186,"p",40),l.EFF(187,"Manage villages"),l.k0s()(),l.j41(188,"button",46),l.bIt("click",function(){return n.navigateToImages()}),l.j41(189,"div",37),l.qSk(),l.j41(190,"svg",11),l.nrm(191,"path",47),l.k0s()(),l.joV(),l.j41(192,"p",39),l.EFF(193,"Images"),l.k0s(),l.j41(194,"p",40),l.EFF(195,"Manage village images"),l.k0s()(),l.j41(196,"button",48),l.bIt("click",function(){return n.navigateToEntities()}),l.j41(197,"div",37),l.qSk(),l.j41(198,"svg",11),l.nrm(199,"path",28),l.k0s()(),l.joV(),l.j41(200,"p",39),l.EFF(201,"Entities"),l.k0s(),l.j41(202,"p",40),l.EFF(203,"Manage village entities"),l.k0s()(),l.j41(204,"button",49),l.bIt("click",function(){return n.navigateToVehicles()}),l.j41(205,"div",37),l.qSk(),l.j41(206,"svg",11),l.nrm(207,"path",50),l.k0s()(),l.joV(),l.j41(208,"p",39),l.EFF(209,"Vehicles"),l.k0s(),l.j41(210,"p",40),l.EFF(211,"Manage vehicle registry"),l.k0s()(),l.j41(212,"button",51),l.bIt("click",function(){return n.navigateToIncidents()}),l.j41(213,"div",37),l.qSk(),l.j41(214,"svg",11),l.nrm(215,"path",52),l.k0s()(),l.joV(),l.j41(216,"p",39),l.EFF(217,"Incidents"),l.k0s(),l.j41(218,"p",40),l.EFF(219,"Manage incidents"),l.k0s()(),l.j41(220,"button",53),l.bIt("click",function(){return n.navigateToEvents()}),l.j41(221,"div",37),l.qSk(),l.j41(222,"svg",11),l.nrm(223,"path",54),l.k0s()(),l.joV(),l.j41(224,"p",39),l.EFF(225,"Events"),l.k0s(),l.j41(226,"p",40),l.EFF(227,"Manage events"),l.k0s()(),l.j41(228,"button",55),l.bIt("click",function(){return n.navigateToTemples()}),l.j41(229,"div",37),l.qSk(),l.j41(230,"svg",11),l.nrm(231,"path",56),l.k0s()(),l.joV(),l.j41(232,"p",39),l.EFF(233,"Temples"),l.k0s(),l.j41(234,"p",40),l.EFF(235,"Manage temples"),l.k0s()(),l.j41(236,"button",57),l.bIt("click",function(){return n.navigateToSchools()}),l.j41(237,"div",37),l.qSk(),l.j41(238,"svg",11),l.nrm(239,"path",58),l.k0s()(),l.joV(),l.j41(240,"p",39),l.EFF(241,"Schools/Colleges"),l.k0s(),l.j41(242,"p",40),l.EFF(243,"Manage educational institutions"),l.k0s()()(),l.j41(244,"div",59)(245,"h2",60),l.EFF(246,"Analytics Overview"),l.k0s(),l.j41(247,"div",61)(248,"div",62)(249,"h3",63),l.EFF(250,"Village Admins Distribution"),l.k0s(),l.nrm(251,"canvas",null,64),l.k0s(),l.j41(253,"div",62)(254,"h3",63),l.EFF(255,"Villages by District"),l.k0s(),l.nrm(256,"canvas",null,65),l.k0s(),l.j41(258,"div",62)(259,"h3",63),l.EFF(260,"Villagers Growth"),l.k0s(),l.nrm(261,"canvas",null,66),l.k0s(),l.j41(263,"div",62)(264,"h3",63),l.EFF(265,"System Activity"),l.k0s(),l.nrm(266,"canvas",null,67),l.k0s()()()(),l.j41(268,"app-chat-widget",68),l.bIt("chatToggled",function(r){return n.onChatToggled(r)}),l.k0s(),l.j41(269,"app-profile-modal",69),l.bIt("closeModal",function(){return n.closeProfileModal()})("updateProfile",function(r){return n.updateUserProfile(r)})("deleteProfile",function(r){return n.deleteUserProfile(r)}),l.k0s()()),2&i&&(l.R7$(9),l.Y8G("userData",n.userProfileData),l.R7$(10),l.JRh(n.counts.villageAdmins),l.R7$(4),l.SpI(" ",n.counts.activeVillageAdmins," Active "),l.R7$(3),l.SpI(" ",n.counts.inactiveVillageAdmins," Inactive "),l.R7$(12),l.JRh(n.counts.villagers),l.R7$(4),l.SpI(" ",n.counts.activeVillagers," Active "),l.R7$(3),l.SpI(" ",n.counts.inactiveVillagers," Inactive "),l.R7$(12),l.JRh(n.counts.villages),l.R7$(4),l.SpI(" ",n.counts.activeVillages," Active "),l.R7$(3),l.SpI(" ",n.counts.inactiveVillages," Inactive "),l.R7$(9),l.JRh(n.counts.mandals),l.R7$(4),l.SpI(" ",n.counts.activeMandals," Active "),l.R7$(3),l.SpI(" ",n.counts.inactiveMandals," Inactive "),l.R7$(10),l.JRh(n.counts.districts),l.R7$(4),l.SpI(" ",n.counts.activeDistricts," Active "),l.R7$(3),l.SpI(" ",n.counts.inactiveDistricts," Inactive "),l.R7$(9),l.JRh(n.counts.states),l.R7$(4),l.SpI(" ",n.counts.activeStates," Active "),l.R7$(3),l.SpI(" ",n.counts.inactiveStates," Inactive "),l.R7$(9),l.JRh(n.counts.countries),l.R7$(4),l.SpI(" ",n.counts.activeCountries," Active "),l.R7$(3),l.SpI(" ",n.counts.inactiveCountries," Inactive "),l.R7$(139),l.Y8G("currentUserId",n.currentUserId||"")("currentUserRole","SUPER_ADMIN")("currentUserName",n.userProfileData.userName),l.R7$(1),l.Y8G("isVisible",n.showProfileModal)("userProfile",n.currentUserProfile))},dependencies:[Qs,to.I,Xn],styles:[".super-admin-dashboard[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);padding-bottom:80px}@media (min-width: 768px){.super-admin-dashboard[_ngcontent-%COMP%]{padding-bottom:20px}}.dashboard-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:16px}@media (min-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:20px}}@media (min-width: 1200px){.dashboard-container[_ngcontent-%COMP%]{padding:24px}}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;background:white;padding:16px;border-radius:10px;box-shadow:0 2px 8px #00000014}@media (min-width: 768px){.dashboard-header[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px}}.header-left[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1e293b;margin:0}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:18px}}.header-left[_ngcontent-%COMP%]   .dashboard-subtitle[_ngcontent-%COMP%]{font-size:13px;color:#64748b;margin:4px 0 0}@media (max-width: 480px){.header-left[_ngcontent-%COMP%]   .dashboard-subtitle[_ngcontent-%COMP%]{font-size:12px}}.header-right[_ngcontent-%COMP%]{position:relative}.count-cards-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:18px}@media (max-width: 768px){.count-cards-row[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:8px;margin-bottom:14px}}@media (max-width: 480px){.count-cards-row[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:6px;margin-bottom:12px}}.count-card[_ngcontent-%COMP%]{background:white;border-radius:6px;padding:12px;box-shadow:0 1px 4px #0000000d;display:flex;align-items:center;gap:8px;transition:all .3s ease;position:relative}.count-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 3px 8px #00000014}.count-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.count-card.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-1px) scale(1.01);box-shadow:0 4px 12px #0000001a}.count-card.clickable[_ngcontent-%COMP%]:hover   .card-hover-indicator[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.count-card[_ngcontent-%COMP%]   .card-hover-indicator[_ngcontent-%COMP%]{position:absolute;right:6px;top:50%;transform:translateY(-50%) translate(-4px);opacity:0;transition:all .3s ease}.count-card[_ngcontent-%COMP%]   .card-hover-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;color:#8b5cf6}.count-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.count-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#fff}.count-card[_ngcontent-%COMP%]   .count-card-content[_ngcontent-%COMP%]{flex:1;min-width:0}.count-card[_ngcontent-%COMP%]   .count-card-label[_ngcontent-%COMP%]{font-size:10px;color:#64748b;margin:0 0 3px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.count-card[_ngcontent-%COMP%]   .count-card-value[_ngcontent-%COMP%]{font-size:18px;font-weight:800;color:#1e293b;margin:0 0 4px;line-height:1.2}@media (max-width: 480px){.count-card[_ngcontent-%COMP%]   .count-card-value[_ngcontent-%COMP%]{font-size:16px}}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}@media (max-width: 480px){.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]{gap:4px}}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px;font-size:9px;font-weight:500}@media (max-width: 480px){.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{font-size:8px}}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item.active[_ngcontent-%COMP%]{color:#10b981}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item.inactive[_ngcontent-%COMP%]{color:#64748b}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-dot[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-dot.active[_ngcontent-%COMP%]{background:#10b981;box-shadow:0 0 3px #10b98166;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-dot.inactive[_ngcontent-%COMP%]{background:#94a3b8}.count-card.users-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.count-card.village-admin-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.count-card.villager-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.count-card.village-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)}.count-card.mandal-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4 0%,#0891b2 100%)}.count-card.district-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}.count-card.state-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.count-card.country-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.nav-cards-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-bottom:24px}@media (max-width: 768px){.nav-cards-row[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-bottom:20px}}@media (max-width: 480px){.nav-cards-row[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;margin-bottom:16px}}.nav-card[_ngcontent-%COMP%]{background:white;border-radius:10px;padding:20px;box-shadow:0 2px 8px #00000014;border:2px solid transparent;cursor:pointer;transition:all .3s ease;text-align:center}.nav-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #0000001f}.nav-card[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{width:56px;height:56px;margin:0 auto 14px;border-radius:50%;display:flex;align-items:center;justify-content:center}@media (max-width: 480px){.nav-card[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin-bottom:12px}}.nav-card[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:#fff}@media (max-width: 480px){.nav-card[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}}.nav-card[_ngcontent-%COMP%]   .nav-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#1e293b;margin:0 0 6px}@media (max-width: 480px){.nav-card[_ngcontent-%COMP%]   .nav-card-title[_ngcontent-%COMP%]{font-size:14px}}.nav-card[_ngcontent-%COMP%]   .nav-card-desc[_ngcontent-%COMP%]{font-size:12px;color:#64748b;margin:0}@media (max-width: 480px){.nav-card[_ngcontent-%COMP%]   .nav-card-desc[_ngcontent-%COMP%]{font-size:11px}}.nav-card.village-admin-nav[_ngcontent-%COMP%]:hover{border-color:#10b981}.nav-card.village-admin-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.nav-card.villager-nav[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.nav-card.villager-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.nav-card.village-nav[_ngcontent-%COMP%]:hover{border-color:#8b5cf6}.nav-card.village-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)}.nav-card.country-nav[_ngcontent-%COMP%]:hover{border-color:#10b981}.nav-card.country-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.nav-card.state-nav[_ngcontent-%COMP%]:hover{border-color:#f59e0b}.nav-card.state-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.nav-card.district-nav[_ngcontent-%COMP%]:hover{border-color:#ef4444}.nav-card.district-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}.nav-card.mandal-nav[_ngcontent-%COMP%]:hover{border-color:#06b6d4}.nav-card.mandal-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#06b6d4 0%,#0891b2 100%)}.nav-card.images-nav[_ngcontent-%COMP%]:hover{border-color:#8b5cf6}.nav-card.images-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)}.nav-card.entities-nav[_ngcontent-%COMP%]:hover{border-color:#f59e0b}.nav-card.entities-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.nav-card.vehicles-nav[_ngcontent-%COMP%]:hover{border-color:#10b981}.nav-card.vehicles-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.nav-card.incidents-nav[_ngcontent-%COMP%]:hover{border-color:#ef4444}.nav-card.incidents-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}.nav-card.events-nav[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.nav-card.events-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.nav-card.temples-nav[_ngcontent-%COMP%]:hover{border-color:#eab308}.nav-card.temples-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eab308 0%,#ca8a04 100%)}.nav-card.schools-nav[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.nav-card.schools-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.charts-section[_ngcontent-%COMP%]{margin-bottom:24px}@media (min-width: 768px){.charts-section[_ngcontent-%COMP%]{margin-bottom:30px}}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0 0 16px}@media (min-width: 768px){.section-title[_ngcontent-%COMP%]{font-size:22px;margin-bottom:20px}}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:16px}@media (max-width: 768px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.chart-card[_ngcontent-%COMP%]{background:white;border-radius:10px;padding:18px;box-shadow:0 2px 8px #00000014}@media (min-width: 768px){.chart-card[_ngcontent-%COMP%]{padding:24px}}.chart-card[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1e293b;margin:0 0 16px}@media (min-width: 768px){.chart-card[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:20px}}.chart-card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:250px}@media (max-width: 480px){.chart-card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:200px}}.chat-fab[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;width:56px;height:56px;background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);border:none;border-radius:50%;box-shadow:0 4px 20px #3b82f666;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:999}@media (max-width: 480px){.chat-fab[_ngcontent-%COMP%]{bottom:20px;right:20px;width:52px;height:52px}}.chat-fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 30px #3b82f680}.chat-fab[_ngcontent-%COMP%]   .chat-icon[_ngcontent-%COMP%]{width:26px;height:26px;color:#fff}@media (max-width: 480px){.chat-fab[_ngcontent-%COMP%]   .chat-icon[_ngcontent-%COMP%]{width:24px;height:24px}}.chat-fab[_ngcontent-%COMP%]   .chat-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;background:#ef4444;color:#fff;font-size:11px;font-weight:700;width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid white}@media (max-width: 480px){.chat-fab[_ngcontent-%COMP%]   .chat-badge[_ngcontent-%COMP%]{width:20px;height:20px;font-size:10px}}.chat-popup[_ngcontent-%COMP%]{position:fixed;bottom:90px;right:24px;width:360px;max-height:560px;background:white;border-radius:14px;box-shadow:0 10px 40px #0003;display:flex;flex-direction:column;z-index:1000;animation:_ngcontent-%COMP%_chatPopupFadeIn .3s ease}@media (max-width: 768px){.chat-popup[_ngcontent-%COMP%]{width:calc(100vw - 40px);right:20px;bottom:80px;max-height:500px}}@media (max-width: 480px){.chat-popup[_ngcontent-%COMP%]{width:calc(100vw - 32px);right:16px;bottom:76px;max-height:450px}}@keyframes _ngcontent-%COMP%_chatPopupFadeIn{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.chat-popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e2e8f0}.chat-popup-header[_ngcontent-%COMP%]   .chat-popup-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:#f1f5f9;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#64748b}.chat-popup-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;max-height:400px}.chat-user-select[_ngcontent-%COMP%]{margin-bottom:20px}.chat-user-select[_ngcontent-%COMP%]   .chat-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#475569;margin-bottom:8px}.chat-user-select[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;color:#1e293b;background:white;cursor:pointer;transition:all .2s ease}.chat-user-select[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.chat-message[_ngcontent-%COMP%]{max-width:80%;padding:12px 16px;border-radius:12px;animation:_ngcontent-%COMP%_messageFadeIn .3s ease}.chat-message.message-sent[_ngcontent-%COMP%]{align-self:flex-end;background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);color:#fff;border-bottom-right-radius:4px}.chat-message.message-received[_ngcontent-%COMP%]{align-self:flex-start;background:#f1f5f9;color:#1e293b;border-bottom-left-radius:4px}.chat-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{font-size:14px;margin:0 0 4px;word-wrap:break-word}.chat-message[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:11px;opacity:.7}@keyframes _ngcontent-%COMP%_messageFadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.no-messages[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#94a3b8}.no-messages[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:32px;height:32px;margin:0 auto 16px;opacity:.5}.no-messages[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.chat-empty[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#94a3b8}.chat-empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:32px;height:32px;margin:0 auto 16px;opacity:.5}.chat-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.chat-popup-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 20px;border-top:1px solid #e2e8f0}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{flex:1;padding:10px 14px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;color:#1e293b}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}"]})}}return s})();var eo=G(1626),fm=G(2427);const mm=["entitiesChart"],bm=["villagersChart"],xm=["eventsChart"],vm=["activityChart"];function ym(s,t){if(1&s&&(l.j41(0,"div",60)(1,"div",61),l.EFF(2),l.k0s(),l.j41(3,"div",62)(4,"h4",63),l.EFF(5),l.k0s(),l.j41(6,"p",64),l.EFF(7),l.k0s()()()),2&s){const e=t.$implicit;l.R7$(2),l.JRh(e.time),l.R7$(3),l.JRh(e.title),l.R7$(2),l.JRh(e.message)}}Nt.register(...Rl);let Fl=(()=>{class s{constructor(e,i,n,o,r,a,c){this.router=e,this.tokenService=i,this.usersService=n,this.http=o,this.chatService=r,this.websocketService=a,this.eventService=c,this.villageName="NA",this.userRole="NA",this.userName="NA",this.userImage="assets/people.png",this.showUserMenu=!1,this.userProfileData={userName:"NA",userRole:"VILLAGE_ADMIN",userImage:"assets/people.png",userId:"",latitude:"",longitude:""},this.counts={userCounts:{totalVillageAdmins:0,activeVillageAdmins:0,inactiveVillageAdmins:0,totalVillagers:0,activeVillagers:0,inactiveVillagers:0},villageCounts:{totalVillages:0,activeVillages:0,inactiveVillages:0},mandalCounts:{totalMandals:0,activeMandals:0,inactiveMandals:0},districtCounts:{totalDistricts:0,activeDistricts:0,inactiveDistricts:0},stateCounts:{totalStates:0,activeStates:0,inactiveStates:0},countryCounts:{totalCountries:0,activeCountries:0,inactiveCountries:0},entities:{totalEntities:0,activeEntities:0,inactiveEntities:0},villagers:{totalVillagers:0,activeVillagers:0,inactiveVillagers:0},events:{totalEvents:0,activeEvents:0,inactiveEvents:0},incidents:{totalIncidents:0,activeIncidents:0,inactiveIncidents:0},temples:{totalTemples:0,activeTemples:0,inactiveTemples:0},schools:{totalSchools:0,activeSchools:0,inactiveSchools:0},vehicles:{totalVehicles:0,activeVehicles:0,inactiveVehicles:0},images:{totalImages:0,activeImages:0,inactiveImages:0}},this.eventMessages=[],this.showChatPopup=!1,this.unreadMessages=2,this.selectedChatUser="",this.chatMessage="",this.chatUsers=[],this.chatMessages=[],this.currentUserId=null,this.isLoadingUsers=!1,this.lastSentMessage="",this.lastSentTime=0,this.lastMessageTimestamp=null,this.isChatActive=!1,this.lastPollTime=0,this.minPollInterval=5e3,this.charts=[],this.currentUser=null,this.currentUserVillageId=null,this.currentUserVillageName=null,this.showProfileModal=!1,this.currentUserProfile=null,this.title="frontend",this.username="",this.message="",this.messages=[],this.isConnected=!1,this.connectingMessage="Connecting..."}ngOnInit(){this.loadCurrentUser(),this.loadEvents(),this.startEventMessagesScroll(),this.usersService.getUserById(this.tokenService.getCurrentUser().userId).subscribe({next:e=>{this.villageName=e.village.name,this.userRole=e.role,this.userName=e.name,this.userProfileData={userName:this.userName,userRole:this.userRole,userImage:this.userImage,userId:e.id,latitude:e.latitude,longitude:e.longitude},console.log("Current village-admin user loaded:",e)},error:e=>{console.error("Error loading current user details:",e)}}),this.websocketService.messages$.subscribe(e=>{if(e){console.log(`Message received from ${e.sender}: ${e.content}`);const i=Date.now();if(e.content===this.lastSentMessage&&e.senderId===this.currentUserId&&i-this.lastSentTime<5e3)return void console.log("Filtering out echo message (duplicate)");const o={sender:e.senderId===this.currentUserId?"me":"other",content:e.content,timestamp:new Date(e.timestamp||new Date)};this.chatMessages.push(o),console.log("Added message to chat UI:",o),this.lastSentMessage="",this.lastSentTime=0}}),this.websocketService.connectionStatus$.subscribe(e=>{this.isConnected=e,e&&(this.connectingMessage="",console.log("WebSocket connection established"))})}loadEvents(){this.eventService.getAllEvents().subscribe({next:e=>{this.eventMessages=e,console.log("Events loaded:",e)},error:e=>{console.error("Error loading events:",e)}})}loadCurrentUser(){const e=this.tokenService.getCurrentUser();e&&e.userId?this.usersService.getUserById(e.userId).subscribe({next:i=>{this.currentUser=i,this.currentUserId=i.id,console.log("Current village-admin user loaded:",i),i.village&&i.village.id?(this.currentUserVillageId=i.village.id,this.currentUserVillageName=i.village.name||null,console.log("Village-admin village ID:",this.currentUserVillageId),console.log("Village-admin village name:",this.currentUserVillageName),this.userProfileData={userName:i.name||"NA",userRole:i.role||"VILLAGE_ADMIN",userImage:this.userImage,userId:this.currentUserId,latitude:i.latitude,longitude:i.longitude},this.loadVillageDashboardCounts(this.currentUserVillageId)):console.warn("Village-admin user has no village information"),this.showChatPopup&&0===this.chatUsers.length&&this.loadChatUsers()},error:i=>{console.error("Error loading current user details:",i)}}):console.warn("No userId found in token")}loadVillageDashboardCounts(e){this.usersService.getVillageDashboardCount(e).subscribe({next:i=>{console.log("Village dashboard counts loaded:",i),this.counts.villagers.totalVillagers=i.userCounts.totalVillagers,this.counts.villagers.activeVillagers=i.userCounts.activeVillagers,this.counts.villagers.inactiveVillagers=i.userCounts.inactiveVillagers,this.counts.entities.totalEntities=i.entityCounts.totalEntities,this.counts.entities.activeEntities=i.entityCounts.activeEntities,this.counts.entities.inactiveEntities=i.entityCounts.inactiveEntities,this.counts.events.totalEvents=i.eventCounts.totalEvents,this.counts.events.activeEvents=i.eventCounts.activeEvents,this.counts.events.inactiveEvents=i.eventCounts.inactiveEvents,this.counts.incidents.totalIncidents=i.incidentCounts.totalIncidents,this.counts.incidents.activeIncidents=i.incidentCounts.activeIncidents,this.counts.incidents.inactiveIncidents=i.incidentCounts.inactiveIncidents,this.counts.temples.totalTemples=i.templeCounts.totalTemples,this.counts.temples.activeTemples=i.templeCounts.activeTemples,this.counts.temples.inactiveTemples=i.templeCounts.inactiveTemples,this.counts.schools.totalSchools=i.schoolCounts.totalSchools,this.counts.schools.activeSchools=i.schoolCounts.activeSchools,this.counts.schools.inactiveSchools=i.schoolCounts.inactiveSchools,this.counts.vehicles.totalVehicles=i.vehicleCounts.totalVehicles,this.counts.vehicles.activeVehicles=i.vehicleCounts.activeVehicles,this.counts.vehicles.inactiveVehicles=i.vehicleCounts.inactiveVehicles,this.counts.images.totalImages=i.imageCounts.totalImages,this.counts.images.activeImages=i.imageCounts.activeImages,this.counts.images.inactiveImages=i.imageCounts.inactiveImages,this.counts.userCounts=i.userCounts,this.counts.villageCounts=i.villageCounts,this.counts.mandalCounts=i.mandalCounts,this.counts.districtCounts=i.districtCounts,this.counts.stateCounts=i.stateCounts,this.counts.countryCounts=i.countryCounts},error:i=>{console.error("Error loading village dashboard counts:",i)}})}loadChatUsers(){this.currentUserId?(this.isLoadingUsers=!0,this.usersService.getAllUsers().subscribe({next:e=>{this.chatUsers=e.filter(i=>i.id!==this.currentUserId),console.log("Chat users loaded:",this.chatUsers.length,"users"),console.log("Current user ID for filtering:",this.currentUserId),this.isLoadingUsers=!1},error:e=>{console.error("Error loading chat users:",e),this.isLoadingUsers=!1}})):console.log("Current user not loaded yet, cannot load chat users")}ngAfterViewInit(){setTimeout(()=>{this.initializeCharts()},100)}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}closeUserMenu(){this.showUserMenu=!1}onDocumentClick(e){e.target.closest(".user-profile-wrapper")||this.closeUserMenu()}viewProfile(){console.log("Viewing profile..."),this.closeUserMenu(),this.router.navigate(["/profile"])}viewSubscriptions(){console.log("Viewing subscriptions..."),this.closeUserMenu()}handleLogout(){this.closeUserMenu(),console.log("Logging out..."),this.tokenService.logout()}onProfileModalOpened(e){this.currentUserProfile=e,this.showProfileModal=!0}onSubscriptionsNavigated(){this.router.navigate(["/dashboard/subscriptions"])}onLogoutClicked(){this.tokenService.logout()}closeProfileModal(){this.showProfileModal=!1,this.currentUserProfile=null}updateUserProfile(e){console.log("Updating user profile:",e),this.closeProfileModal()}deleteUserProfile(e){console.log("Deleting user profile:",e),this.closeProfileModal()}onChatToggled(e){console.log("Chat toggled:",e)}navigateToEntityCreate(){this.router.navigate(["/entities"])}navigateToVillagers(){console.log("navigateToVillagers called"),console.log("Current village-admin village ID:",this.currentUserVillageId),console.log("Current village-admin village name:",this.currentUserVillageName),this.currentUserVillageId?(console.log("Navigating to Villagers filtered by village ID:",this.currentUserVillageId),this.router.navigate(["/users"],{queryParams:{role:"VILLAGER",villageId:this.currentUserVillageId,villageName:this.currentUserVillageName}}).then(e=>{console.log("Navigation result:",e),console.log("Current URL after navigation:",this.router.url)}).catch(e=>{console.error("Navigation error:",e)})):(console.warn("No village information found for current user, using general villagers view"),this.router.navigate(["/users"],{queryParams:{role:"VILLAGER"}}))}navigateToEventCreate(){this.router.navigate(["/events"])}navigateToImageCreate(){this.router.navigate(["/images"])}navigateToVehicles(){this.router.navigate(["/vehicles"])}navigateToIncidents(){this.router.navigate(["/incidents"])}navigateToTemples(){this.router.navigate(["/temples"])}navigateToSchools(){this.router.navigate(["/schools"])}startEventMessagesScroll(){}toggleChatPopup(){this.showChatPopup=!this.showChatPopup,this.showChatPopup?(this.unreadMessages=0,this.currentUserId?this.loadChatUsers():console.log("Current user not loaded yet, users will be loaded when current user loads"),!this.isConnected&&this.currentUser?.id&&(console.log("Connecting to WebSocket for chat functionality"),this.connect())):(this.stopChatPolling(),this.isChatActive=!1)}stopChatPolling(){this.chatPollingInterval&&(clearInterval(this.chatPollingInterval),this.chatPollingInterval=null),this.isChatActive=!1,this.removeChatActivityListeners()}setupChatActivityListeners(){const e=document.querySelector(".chat-popup");e&&["mousedown","keydown","focus"].forEach(n=>{e.addEventListener(n,o=>{this.onChatActivity()},{passive:!0})})}removeChatActivityListeners(){const e=document.querySelector(".chat-popup");e&&["mousedown","keydown","focus"].forEach(n=>{e.removeEventListener(n,this.onChatActivity)})}smartPollForMessages(){const e=Date.now();e-this.lastPollTime<this.minPollInterval||(this.lastPollTime=e,this.selectedChatUser&&this.currentUserId&&this.isChatActive&&this.loadChatMessages())}onChatActivity(){this.isChatActive&&this.chatPollingInterval&&(console.log("Chat activity detected, increasing polling frequency"),clearInterval(this.chatPollingInterval),this.chatPollingInterval=setInterval(()=>{console.log("Active polling - checking for new messages"),this.smartPollForMessages()},3e3),setTimeout(()=>{this.chatPollingInterval&&(console.log("Activity timeout, resetting to normal polling frequency"),clearInterval(this.chatPollingInterval),this.chatPollingInterval=setInterval(()=>{this.smartPollForMessages()},8e3))},45e3))}loadChatMessages(){this.selectedChatUser?(console.log("Loading chat messages for user:",this.selectedChatUser),console.log("Current user ID:",this.currentUser?.id),console.log("Current user:",this.currentUser),!this.isConnected&&this.currentUser?.id&&(console.log("Connecting to WebSocket for real-time messaging"),this.connect()),this.chatService.getChatMessages(this.selectedChatUser,this.currentUser.id).subscribe({next:e=>{console.log("Received initial messages from API:",e),this.chatMessages=e.map(i=>(console.log("Processing initial message:",i),{sender:i.senderId===this.currentUserId?"me":"other",content:i.content,timestamp:new Date(i.timestamp)})),console.log("Loaded initial chat messages:",this.chatMessages)},error:e=>{console.error("Error loading chat messages:",e)}})):this.chatMessages=[]}hasMessagesChanged(e){if(!this.chatMessages||e.length!==this.chatMessages.length)return e.length>0;for(let i=0;i<e.length;i++){const n=e[i],o=this.chatMessages[i];if(n.content!==o.content||n.senderId!==o.senderId||new Date(n.timestamp).getTime()!==new Date(o.timestamp).getTime())return!0}return!1}sendMessage(){if(this.chatMessage.trim()&&this.selectedChatUser&&this.currentUserId){const e=this.chatMessage.trim();this.lastSentMessage=e,this.lastSentTime=Date.now();const i={senderId:this.currentUserId,receiverId:this.selectedChatUser,content:e,timestamp:(new Date).toISOString(),token:this.tokenService.getToken()};this.websocketService.sendMessage(i),this.chatMessage="",this.lastSentMessage="",this.lastSentTime=0}}initializeCharts(){this.createEntitiesChart(),this.createVillagersChart(),this.createEventsChart(),this.createActivityChart()}createEntitiesChart(){if(this.entitiesChartRef){const e=this.entitiesChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"doughnut",data:{labels:["Healthcare","Education","Government","Services"],datasets:[{data:[5,4,6,3],backgroundColor:["#10b981","#3b82f6","#8b5cf6","#f59e0b"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom"}}}});this.charts.push(i)}}createVillagersChart(){if(this.villagersChartRef){const e=this.villagersChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Villagers",data:[200,215,225,230,240,245],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!1}}}});this.charts.push(i)}}createEventsChart(){if(this.eventsChartRef){const e=this.eventsChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Events",data:[3,5,4,6,5,7],backgroundColor:"#f59e0b",borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}});this.charts.push(i)}}createActivityChart(){if(this.activityChartRef){const e=this.activityChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"line",data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Logins",data:[45,55,60,50,48,52,50],borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Activities",data:[30,40,45,38,35,40,38],borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}});this.charts.push(i)}}ngOnDestroy(){this.charts.forEach(e=>e.destroy()),this.stopChatPolling()}connect(){console.log("Attempting to connect to WebSocket at http://localhost:8080/ws with username:",this.currentUser.id),this.websocketService.connect(this.currentUser.id)}sendMessages(){if(this.chatMessage.trim()){const e={senderId:this.currentUserId,receiverId:this.selectedChatUser,content:this.chatMessage.trim(),timestamp:(new Date).toISOString()};this.websocketService.sendMessage(e),this.chatMessage=""}}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(Ce.Ix),l.rXU(Ie.B),l.rXU(mi.g),l.rXU(eo.Qq),l.rXU(Ks.m),l.rXU(Js.H),l.rXU(fm.U))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-village-admin"]],viewQuery:function(i,n){if(1&i&&(l.GBs(mm,5),l.GBs(bm,5),l.GBs(xm,5),l.GBs(vm,5)),2&i){let o;l.mGM(o=l.lsd())&&(n.entitiesChartRef=o.first),l.mGM(o=l.lsd())&&(n.villagersChartRef=o.first),l.mGM(o=l.lsd())&&(n.eventsChartRef=o.first),l.mGM(o=l.lsd())&&(n.activityChartRef=o.first)}},hostBindings:function(i,n){1&i&&l.bIt("click",function(r){return n.onDocumentClick(r)},!1,l.EBC)},decls:180,vars:20,consts:[[1,"village-admin-dashboard"],[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-left"],[1,"dashboard-title"],[1,"dashboard-subtitle"],[1,"header-right"],[3,"userData","profileModalOpened","subscriptionsNavigated","logoutClicked"],[1,"count-cards-row"],[1,"count-card","entity-card"],[1,"count-card-icon"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"count-card-content"],[1,"count-card-label"],[1,"count-card-value"],[1,"count-card-details"],[1,"detail-item","active"],[1,"detail-dot","active"],[1,"detail-item","inactive"],[1,"detail-dot","inactive"],[1,"count-card","villager-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"count-card","event-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"count-card","incident-card"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"nav-cards-row"],[1,"nav-card","entity-nav",3,"click"],[1,"nav-card-icon"],[1,"nav-card-title"],[1,"nav-card-desc"],[1,"nav-card","villager-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"nav-card","event-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"nav-card","image-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"nav-card","vehicle-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"nav-card","incident-nav",3,"click"],[1,"nav-card","temples-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"nav-card","schools-nav",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"],[1,"event-messages-section"],[1,"section-title"],[1,"event-messages-container"],[1,"event-messages-scroll"],["class","event-message-item",4,"ngFor","ngForOf"],[1,"charts-section"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-title"],["entitiesChart",""],["villagersChart",""],["eventsChart",""],["activityChart",""],[3,"currentUserId","currentUserRole","currentUserName","chatToggled"],[3,"isVisible","userProfile","closeModal","updateProfile","deleteProfile"],[1,"event-message-item"],[1,"event-message-time"],[1,"event-message-content"],[1,"event-message-title"],[1,"event-message-text"]],template:function(i,n){1&i&&(l.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l.EFF(5),l.k0s(),l.j41(6,"p",5),l.EFF(7,"Village Admin Dashboard"),l.k0s()(),l.j41(8,"div",6)(9,"app-user-profile-dropdown",7),l.bIt("profileModalOpened",function(r){return n.onProfileModalOpened(r)})("subscriptionsNavigated",function(){return n.onSubscriptionsNavigated()})("logoutClicked",function(){return n.onLogoutClicked()}),l.k0s()()(),l.j41(10,"div",8)(11,"div",9)(12,"div",10),l.qSk(),l.j41(13,"svg",11),l.nrm(14,"path",12),l.k0s()(),l.joV(),l.j41(15,"div",13)(16,"p",14),l.EFF(17,"Entities"),l.k0s(),l.j41(18,"p",15),l.EFF(19),l.k0s(),l.j41(20,"div",16)(21,"div",17),l.nrm(22,"div",18),l.j41(23,"span"),l.EFF(24),l.k0s()(),l.j41(25,"div",19),l.nrm(26,"div",20),l.j41(27,"span"),l.EFF(28),l.k0s()()()()(),l.j41(29,"div",21)(30,"div",10),l.qSk(),l.j41(31,"svg",11),l.nrm(32,"path",22),l.k0s()(),l.joV(),l.j41(33,"div",13)(34,"p",14),l.EFF(35,"Villagers"),l.k0s(),l.j41(36,"p",15),l.EFF(37),l.k0s(),l.j41(38,"div",16)(39,"div",17),l.nrm(40,"div",18),l.j41(41,"span"),l.EFF(42),l.k0s()(),l.j41(43,"div",19),l.nrm(44,"div",20),l.j41(45,"span"),l.EFF(46),l.k0s()()()()(),l.j41(47,"div",23)(48,"div",10),l.qSk(),l.j41(49,"svg",11),l.nrm(50,"path",24),l.k0s()(),l.joV(),l.j41(51,"div",13)(52,"p",14),l.EFF(53,"Events"),l.k0s(),l.j41(54,"p",15),l.EFF(55),l.k0s(),l.j41(56,"div",16)(57,"div",17),l.nrm(58,"div",18),l.j41(59,"span"),l.EFF(60),l.k0s()(),l.j41(61,"div",19),l.nrm(62,"div",20),l.j41(63,"span"),l.EFF(64),l.k0s()()()()(),l.j41(65,"div",25)(66,"div",10),l.qSk(),l.j41(67,"svg",11),l.nrm(68,"path",26),l.k0s()(),l.joV(),l.j41(69,"div",13)(70,"p",14),l.EFF(71,"Incidents"),l.k0s(),l.j41(72,"p",15),l.EFF(73),l.k0s(),l.j41(74,"div",16)(75,"div",17),l.nrm(76,"div",18),l.j41(77,"span"),l.EFF(78),l.k0s()(),l.j41(79,"div",19),l.nrm(80,"div",20),l.j41(81,"span"),l.EFF(82),l.k0s()()()()()(),l.j41(83,"div",27)(84,"button",28),l.bIt("click",function(){return n.navigateToEntityCreate()}),l.j41(85,"div",29),l.qSk(),l.j41(86,"svg",11),l.nrm(87,"path",12),l.k0s()(),l.joV(),l.j41(88,"p",30),l.EFF(89,"Entity"),l.k0s(),l.j41(90,"p",31),l.EFF(91,"Manage village entities"),l.k0s()(),l.j41(92,"button",32),l.bIt("click",function(){return n.navigateToVillagers()}),l.j41(93,"div",29),l.qSk(),l.j41(94,"svg",11),l.nrm(95,"path",33),l.k0s()(),l.joV(),l.j41(96,"p",30),l.EFF(97,"Villager"),l.k0s(),l.j41(98,"p",31),l.EFF(99,"Manage villagers"),l.k0s()(),l.j41(100,"button",34),l.bIt("click",function(){return n.navigateToEventCreate()}),l.j41(101,"div",29),l.qSk(),l.j41(102,"svg",11),l.nrm(103,"path",35),l.k0s()(),l.joV(),l.j41(104,"p",30),l.EFF(105,"Events"),l.k0s(),l.j41(106,"p",31),l.EFF(107,"Create and manage events"),l.k0s()(),l.j41(108,"button",36),l.bIt("click",function(){return n.navigateToImageCreate()}),l.j41(109,"div",29),l.qSk(),l.j41(110,"svg",11),l.nrm(111,"path",37),l.k0s()(),l.joV(),l.j41(112,"p",30),l.EFF(113,"Images"),l.k0s(),l.j41(114,"p",31),l.EFF(115,"Upload and manage images"),l.k0s()(),l.j41(116,"button",38),l.bIt("click",function(){return n.navigateToVehicles()}),l.j41(117,"div",29),l.qSk(),l.j41(118,"svg",11),l.nrm(119,"path",39),l.k0s()(),l.joV(),l.j41(120,"p",30),l.EFF(121,"Vehicles"),l.k0s(),l.j41(122,"p",31),l.EFF(123,"Manage vehicle registry"),l.k0s()(),l.j41(124,"button",40),l.bIt("click",function(){return n.navigateToIncidents()}),l.j41(125,"div",29),l.qSk(),l.j41(126,"svg",11),l.nrm(127,"path",26),l.k0s()(),l.joV(),l.j41(128,"p",30),l.EFF(129,"Incidents"),l.k0s(),l.j41(130,"p",31),l.EFF(131,"Report and track incidents"),l.k0s()(),l.j41(132,"button",41),l.bIt("click",function(){return n.navigateToTemples()}),l.j41(133,"div",29),l.qSk(),l.j41(134,"svg",11),l.nrm(135,"path",42),l.k0s()(),l.joV(),l.j41(136,"p",30),l.EFF(137,"Temples"),l.k0s(),l.j41(138,"p",31),l.EFF(139,"Visit temples"),l.k0s()(),l.j41(140,"button",43),l.bIt("click",function(){return n.navigateToSchools()}),l.j41(141,"div",29),l.qSk(),l.j41(142,"svg",11),l.nrm(143,"path",44),l.k0s()(),l.joV(),l.j41(144,"p",30),l.EFF(145,"Schools/Colleges"),l.k0s(),l.j41(146,"p",31),l.EFF(147,"Education information"),l.k0s()()(),l.j41(148,"div",45)(149,"h2",46),l.EFF(150,"\u{1f4e2} Event Messages"),l.k0s(),l.j41(151,"div",47)(152,"div",48),l.DNE(153,ym,8,3,"div",49),l.k0s()()(),l.j41(154,"div",50)(155,"h2",46),l.EFF(156,"Analytics Overview"),l.k0s(),l.j41(157,"div",51)(158,"div",52)(159,"h3",53),l.EFF(160,"Entities Distribution"),l.k0s(),l.nrm(161,"canvas",null,54),l.k0s(),l.j41(163,"div",52)(164,"h3",53),l.EFF(165,"Villagers Growth"),l.k0s(),l.nrm(166,"canvas",null,55),l.k0s(),l.j41(168,"div",52)(169,"h3",53),l.EFF(170,"Events Timeline"),l.k0s(),l.nrm(171,"canvas",null,56),l.k0s(),l.j41(173,"div",52)(174,"h3",53),l.EFF(175,"Daily Activity"),l.k0s(),l.nrm(176,"canvas",null,57),l.k0s()()()(),l.j41(178,"app-chat-widget",58),l.bIt("chatToggled",function(r){return n.onChatToggled(r)}),l.k0s(),l.j41(179,"app-profile-modal",59),l.bIt("closeModal",function(){return n.closeProfileModal()})("updateProfile",function(r){return n.updateUserProfile(r)})("deleteProfile",function(r){return n.deleteUserProfile(r)}),l.k0s()()),2&i&&(l.R7$(5),l.JRh(n.villageName),l.R7$(4),l.Y8G("userData",n.userProfileData),l.R7$(10),l.JRh(n.counts.entities.totalEntities),l.R7$(5),l.SpI("",n.counts.entities.activeEntities," Active"),l.R7$(4),l.SpI("",n.counts.entities.inactiveEntities," Inactive"),l.R7$(9),l.JRh(n.counts.villagers.totalVillagers||0),l.R7$(5),l.SpI("",n.counts.villagers.activeVillagers||0," Active"),l.R7$(4),l.SpI("",n.counts.villagers.inactiveVillagers||0," Inactive"),l.R7$(9),l.JRh(n.counts.events.totalEvents),l.R7$(5),l.SpI("",n.counts.events.activeEvents," Active"),l.R7$(4),l.SpI("",n.counts.events.inactiveEvents," Inactive"),l.R7$(9),l.JRh(n.counts.incidents.totalIncidents),l.R7$(5),l.SpI("",n.counts.incidents.activeIncidents," Active"),l.R7$(4),l.SpI("",n.counts.incidents.inactiveIncidents," Inactive"),l.R7$(71),l.Y8G("ngForOf",n.eventMessages),l.R7$(25),l.Y8G("currentUserId",n.currentUserId||"")("currentUserRole","VILLAGE_ADMIN")("currentUserName",n.userProfileData.userName),l.R7$(1),l.Y8G("isVisible",n.showProfileModal)("userProfile",n.currentUserProfile))},dependencies:[pt.Sq,Qs,to.I,Xn],styles:[".village-admin-dashboard[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#d4fc79 0%,#96e6a1 100%);padding-bottom:80px}@media (min-width: 768px){.village-admin-dashboard[_ngcontent-%COMP%]{padding-bottom:20px}}.dashboard-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:20px}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;background:white;padding:20px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.header-left[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1e293b;margin:0}.header-left[_ngcontent-%COMP%]   .dashboard-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:5px 0 0}.header-right[_ngcontent-%COMP%]{position:relative;scroll-snap-align:start}.count-cards-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.count-card[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a;display:flex;align-items:center;gap:20px;transition:all .3s ease}.count-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #00000026}.count-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center}.count-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px;color:#fff}.count-card[_ngcontent-%COMP%]   .count-card-content[_ngcontent-%COMP%]{flex:1}.count-card[_ngcontent-%COMP%]   .count-card-label[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:0 0 8px}.count-card[_ngcontent-%COMP%]   .count-card-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1e293b;margin:0}.count-card.entity-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.count-card.event-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.nav-cards-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:24px}.nav-card[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:22px;box-shadow:0 2px 8px #0000001a;border:2px solid transparent;cursor:pointer;transition:all .3s ease;text-align:center;border-left:3px solid #e5e7eb}.nav-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #00000026}.nav-card[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{width:56px;height:56px;margin:0 auto 14px;border-radius:14px;display:flex;align-items:center;justify-content:center}.nav-card[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#fff}.nav-card[_ngcontent-%COMP%]   .nav-card-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0 0 8px}.nav-card[_ngcontent-%COMP%]   .nav-card-desc[_ngcontent-%COMP%]{font-size:13px;color:#64748b;margin:0}.nav-card.entity-nav[_ngcontent-%COMP%]{border-left-color:#10b981}.nav-card.entity-nav[_ngcontent-%COMP%]:hover{border-color:#10b981}.nav-card.entity-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.nav-card.villager-nav[_ngcontent-%COMP%]{border-left-color:#3b82f6}.nav-card.villager-nav[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.nav-card.villager-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.nav-card.event-nav[_ngcontent-%COMP%]{border-left-color:#f59e0b}.nav-card.event-nav[_ngcontent-%COMP%]:hover{border-color:#f59e0b}.nav-card.event-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.nav-card.image-nav[_ngcontent-%COMP%]{border-left-color:#8b5cf6}.nav-card.image-nav[_ngcontent-%COMP%]:hover{border-color:#8b5cf6}.nav-card.image-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)}.nav-card.vehicle-nav[_ngcontent-%COMP%]{border-left-color:#10b981}.nav-card.vehicle-nav[_ngcontent-%COMP%]:hover{border-color:#10b981}.nav-card.vehicle-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.nav-card.incident-nav[_ngcontent-%COMP%]{border-left-color:#ef4444}.nav-card.incident-nav[_ngcontent-%COMP%]:hover{border-color:#ef4444}.nav-card.incident-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}.nav-card.temples-nav[_ngcontent-%COMP%]{border-left-color:#eab308}.nav-card.temples-nav[_ngcontent-%COMP%]:hover{border-color:#eab308}.nav-card.temples-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eab308 0%,#ca8a04 100%)}.nav-card.schools-nav[_ngcontent-%COMP%]{border-left-color:#3b82f6}.nav-card.schools-nav[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.nav-card.schools-nav[_ngcontent-%COMP%]   .nav-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.event-messages-section[_ngcontent-%COMP%]{margin-bottom:30px}.section-title[_ngcontent-%COMP%]{font-size:22px;font-weight:700;color:#1e293b;margin:0 0 20px}.event-messages-container[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000001a;height:300px;overflow:hidden;position:relative}.event-messages-scroll[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scrollUp 20s linear infinite}.event-messages-scroll[_ngcontent-%COMP%]:hover{animation-play-state:paused}@keyframes _ngcontent-%COMP%_scrollUp{0%{transform:translateY(0)}to{transform:translateY(-50%)}}.event-message-item[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #f1f5f9;margin-bottom:12px}.event-message-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.event-message-item[_ngcontent-%COMP%]   .event-message-time[_ngcontent-%COMP%]{font-size:12px;color:#94a3b8;margin-bottom:8px}.event-message-item[_ngcontent-%COMP%]   .event-message-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e293b;margin:0 0 4px}.event-message-item[_ngcontent-%COMP%]   .event-message-text[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:0}.charts-section[_ngcontent-%COMP%]{margin-bottom:30px}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px}@media (max-width: 768px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-card[_ngcontent-%COMP%]{background:white;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000001a}.chart-card[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e293b;margin:0 0 20px}.chart-card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:300px}.chat-fab[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;width:60px;height:60px;background:linear-gradient(135deg,#10b981 0%,#059669 100%);border:none;border-radius:50%;box-shadow:0 4px 20px #10b98166;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:999}.chat-fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 30px #10b98180}.chat-fab[_ngcontent-%COMP%]   .chat-icon[_ngcontent-%COMP%]{width:28px;height:28px;color:#fff}.chat-fab[_ngcontent-%COMP%]   .chat-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#ef4444;color:#fff;font-size:12px;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid white}.chat-popup[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:30px;width:380px;max-height:600px;background:white;border-radius:16px;box-shadow:0 10px 40px #0003;display:flex;flex-direction:column;z-index:1000;animation:_ngcontent-%COMP%_chatPopupFadeIn .3s ease}@media (max-width: 768px){.chat-popup[_ngcontent-%COMP%]{width:calc(100vw - 40px);right:20px;bottom:90px}}@keyframes _ngcontent-%COMP%_chatPopupFadeIn{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.chat-popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;border-bottom:1px solid #e2e8f0}.chat-popup-header[_ngcontent-%COMP%]   .chat-popup-title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1e293b;margin:0}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:#f1f5f9;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#64748b}.chat-popup-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;max-height:400px}.chat-user-select[_ngcontent-%COMP%]{margin-bottom:20px}.chat-user-select[_ngcontent-%COMP%]   .chat-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#475569;margin-bottom:8px}.chat-user-select[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]{width:100%;padding:10px 14px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;color:#1e293b;background:white;cursor:pointer;transition:all .2s ease}.chat-user-select[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#10b981;box-shadow:0 0 0 3px #10b9811a}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.chat-message[_ngcontent-%COMP%]{max-width:80%;padding:12px 16px;border-radius:12px;animation:_ngcontent-%COMP%_messageFadeIn .3s ease}.chat-message.message-sent[_ngcontent-%COMP%]{align-self:flex-end;background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:#fff;border-bottom-right-radius:4px}.chat-message.message-received[_ngcontent-%COMP%]{align-self:flex-start;background:#f1f5f9;color:#1e293b;border-bottom-left-radius:4px}.chat-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{font-size:14px;margin:0 0 4px;word-wrap:break-word}.chat-message[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:11px;opacity:.7}@keyframes _ngcontent-%COMP%_messageFadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.chat-empty[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:#94a3b8}.chat-empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto 16px;opacity:.5}.chat-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.chat-popup-footer[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px 20px;border-top:1px solid #e2e8f0}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{flex:1;padding:10px 14px;border:1px solid #e2e8f0;border-radius:8px;font-size:14px;color:#1e293b}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#10b981;box-shadow:0 0 0 3px #10b9811a}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(135deg,#10b981 0%,#059669 100%);border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}.count-cards-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:18px}@media (max-width: 768px){.count-cards-row[_ngcontent-%COMP%]{display:flex;overflow-x:auto;gap:10px;padding-bottom:6px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}.count-cards-row[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.count-cards-row[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.15);border-radius:4px}}.count-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:10px;padding:14px;border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000000a;display:flex;align-items:center;gap:10px;transition:box-shadow .2s ease;position:relative}.count-card[_ngcontent-%COMP%]:hover{transform:none;box-shadow:0 2px 6px #0000000f}.count-card.clickable[_ngcontent-%COMP%]{cursor:pointer}.count-card.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-1px) scale(1.01);box-shadow:0 4px 12px #0000001a}.count-card.clickable[_ngcontent-%COMP%]:hover   .card-hover-indicator[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.count-card[_ngcontent-%COMP%]   .card-hover-indicator[_ngcontent-%COMP%]{position:absolute;right:6px;top:50%;transform:translateY(-50%) translate(-4px);opacity:0;transition:all .3s ease}.count-card[_ngcontent-%COMP%]   .card-hover-indicator[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;color:#8b5cf6}.count-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.count-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}.count-card[_ngcontent-%COMP%]   .count-card-content[_ngcontent-%COMP%]{flex:1;min-width:0}.count-card[_ngcontent-%COMP%]   .count-card-label[_ngcontent-%COMP%]{font-size:10px;color:#64748b;margin:0 0 3px;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.count-card[_ngcontent-%COMP%]   .count-card-value[_ngcontent-%COMP%]{font-size:20px;font-weight:800;color:#1e293b;margin:0 0 4px;line-height:1.2}@media (max-width: 480px){.count-card[_ngcontent-%COMP%]   .count-card-value[_ngcontent-%COMP%]{font-size:18px}}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]{display:flex;gap:6px;flex-wrap:wrap}@media (max-width: 480px){.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]{gap:4px}}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px;font-size:9px;font-weight:500}@media (max-width: 480px){.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{font-size:8px}}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item.active[_ngcontent-%COMP%]{color:#10b981}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item.inactive[_ngcontent-%COMP%]{color:#64748b}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-dot[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-dot.active[_ngcontent-%COMP%]{background:#10b981;box-shadow:0 0 3px #10b98166;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.count-card[_ngcontent-%COMP%]   .count-card-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-dot.inactive[_ngcontent-%COMP%]{background:#94a3b8}.count-card.entity-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.count-card.villager-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.count-card.event-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)}.count-card.incident-card[_ngcontent-%COMP%]   .count-card-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}"]})}}return s})();const _m=["vehicleChart"],wm=["eventsChart"],Cm=["entitiesChart"],km=["activityChart"];function Mm(s,t){if(1&s&&(l.j41(0,"div",51)(1,"div",52)(2,"div",53),l.qSk(),l.j41(3,"svg",54),l.nrm(4,"path",28),l.k0s()(),l.joV(),l.j41(5,"span",55),l.EFF(6),l.k0s()(),l.j41(7,"h3",56),l.EFF(8),l.k0s(),l.j41(9,"p",57),l.EFF(10),l.k0s(),l.j41(11,"div",58)(12,"span",59),l.EFF(13,"Upcoming"),l.k0s()()()),2&s){const e=t.$implicit;l.xc7("animation-delay",.1*t.index+"s"),l.R7$(6),l.JRh(e.time),l.R7$(2),l.JRh(e.name),l.R7$(2),l.JRh(e.description)}}let zl=(()=>{class s{constructor(e,i,n,o,r){this.router=e,this.tokenService=i,this.usersService=n,this.chatService=o,this.websocketService=r,this.userName="NA",this.userRole="NA",this.userImage="assets/people.png",this.showUserMenu=!1,this.userProfileData={userName:"NA",userRole:"VILLAGER",userImage:"assets/people.png",userId:"",latitude:"",longitude:""},this.showEntitiesDropdown=!1,this.selectedEntity=null,this.subscribedEntities=[{id:"1",name:"Primary Health Center",type:"Healthcare",villageId:"v1",ownerName:"Dr. Kumar",isOpen:!0,openingTime:"09:00 AM",closingTime:"05:00 PM",availableSlots:15},{id:"2",name:"Government School",type:"Education",villageId:"v1",ownerName:"Principal Sharma",isOpen:!0,openingTime:"08:00 AM",closingTime:"03:00 PM",availableSlots:0},{id:"3",name:"Ration Shop",type:"Essential Services",villageId:"v1",ownerName:"Mr. Patel",isOpen:!0,openingTime:"10:00 AM",closingTime:"08:00 PM",availableSlots:25},{id:"4",name:"Community Hall",type:"Public Facility",villageId:"v1",ownerName:"Village Council",isOpen:!1,openingTime:"06:00 AM",closingTime:"10:00 PM",availableSlots:5}],this.showVehicleDropdown=!1,this.vehicleTypes=["2 Wheeler","4 Wheeler","8 Wheeler","Heavy Vehicle"],this.latestEvents=[{name:"Village Cleanup Drive",time:"10:30 AM",description:"Join us this Saturday for village cleanup"},{name:"Health Camp",time:"09:15 AM",description:"Free health checkup on Oct 15"},{name:"Farmers Meeting",time:"08:00 AM",description:"Monthly farmers meeting on Oct 18"},{name:"Water Supply Update",time:"Yesterday",description:"Water supply timing changed to 6 AM - 9 AM"},{name:"New Entity Added",time:"Yesterday",description:"Community Hall added to village entities"}],this.notificationsCount=5,this.notifications=[{id:1,title:"New Entity Added",message:"Primary Health Center has been added to your village",time:"2 hours ago",read:!1},{id:2,title:"Event Reminder",message:"Village cleanup drive is tomorrow at 7 AM",time:"5 hours ago",read:!1},{id:3,title:"Subscription Update",message:"You have been subscribed to Community Hall",time:"1 day ago",read:!0},{id:4,title:"Water Supply Notice",message:"Water supply timing changed to 6 AM - 9 AM",time:"2 days ago",read:!0},{id:5,title:"Health Camp",message:"Free health checkup camp on Oct 15",time:"3 days ago",read:!0}],this.showChatPopup=!1,this.unreadMessages=3,this.selectedChatUser="",this.chatMessage="",this.chatUsers=[],this.chatMessages=[],this.currentUserId=null,this.isLoadingUsers=!1,this.isConnected=!1,this.lastSentMessage="",this.lastSentTime=0,this.showProfileModal=!1,this.currentUserProfile=null,this.activeConversationPartner=null,this.charts=[]}ngOnInit(){this.loadCurrentUser(),this.websocketService.messages$.subscribe(e=>{if(e){console.log("Villager received message:",e);const i=Date.now();if(e.content===this.lastSentMessage&&e.senderId===this.currentUserId&&i-this.lastSentTime<5e3)return void console.log("Filtering out echo message (duplicate)");if(this.shouldDisplayMessage(e)){const n={sender:e.senderId===this.currentUserId?"me":"other",content:e.content,timestamp:new Date(e.timestamp||new Date)};console.log("Adding message to chat UI:",n),this.chatMessages.push(n)}this.lastSentMessage="",this.lastSentTime=0}}),this.websocketService.connectionStatus$.subscribe(e=>{this.isConnected=e,e&&console.log("WebSocket connection established")})}ngOnDestroy(){this.charts.forEach(e=>e.destroy())}loadCurrentUser(){const e=this.tokenService.getCurrentUser();e&&e.userId&&(this.currentUserId=e.userId,this.usersService.getUserById(e.userId).subscribe(i=>{this.userName=i.name||"NA",this.userRole=i.role||"NA",this.userProfileData={userName:this.userName,userRole:this.userRole,userImage:this.userImage,userId:this.currentUserId||"",latitude:i.latitude,longitude:i.longitude}}),console.log("Current villager user loaded:",this.currentUserId))}onProfileModalOpened(e){this.currentUserProfile=e,this.showProfileModal=!0}onSubscriptionsNavigated(){this.router.navigate(["/dashboard/villager/subscriptions"])}onLogoutClicked(){this.tokenService.logout()}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}closeUserMenu(){this.showUserMenu=!1}onDocumentClick(e){e.target.closest(".user-profile-wrapper")||this.closeUserMenu()}viewProfile(){console.log("Viewing profile..."),this.closeUserMenu(),this.currentUserId&&this.usersService.getUserById(this.currentUserId).subscribe({next:e=>{this.currentUserProfile={id:e.id||this.currentUserId||"",name:e.name,email:e.email,phone:e.phone,role:e.role,village:e.village?.name||"",joinDate:e.createdDate?.toISOString()||(new Date).toISOString(),address:"",emergencyContact:"",latitude:e.latitude,longitude:e.longitude},this.showProfileModal=!0},error:e=>{console.error("Error loading user profile:",e),this.currentUserProfile={id:this.currentUserId||"",name:this.userName,email:`${this.userName.toLowerCase().replace(" ",".")}@village.local`,phone:"+91-9876543210",role:this.userRole,village:"Village Name",joinDate:(new Date).toISOString(),address:"Village Address, District",emergencyContact:"+91-9876543211",latitude:0,longitude:0},this.showProfileModal=!0}})}viewSubscriptions(){console.log("Viewing subscriptions..."),this.closeUserMenu(),this.router.navigate(["/dashboard/villager/subscriptions"])}closeProfileModal(){this.showProfileModal=!1,this.currentUserProfile=null}updateUserProfile(e){console.log("Updating user profile:",e),e.id&&this.usersService.getUserById(e.id).subscribe({next:i=>{const n={...i,name:e.name,email:e.email,phone:e.phone,role:e.role};this.usersService.updateUser(e.id,n).subscribe({next:o=>{console.log("Profile updated successfully:",o),this.userName=o.name,this.userRole=o.role,this.closeProfileModal()},error:o=>{console.error("Error updating user profile:",o)}})},error:i=>{console.error("Error getting current user data:",i)}})}deleteUserProfile(e){console.log("Deleting user profile:",e),this.closeProfileModal()}onChatToggled(e){console.log("Chat toggled:",e)}handleLogout(){this.closeUserMenu(),console.log("Logging out..."),this.tokenService.logout()}navigateToEntities(){console.log("Navigating to entities..."),this.closeUserMenu(),this.router.navigate(["/dashboard/villager/entities"])}navigateToVehicleBooking(){console.log("Navigating to vehicle booking..."),this.router.navigate(["/vehicle-booking"])}selectEntity(e){this.selectedEntity=e,this.showEntitiesDropdown=!1}closeEntityDetails(){this.selectedEntity=null}toggleVehicleDropdown(){this.showVehicleDropdown=!this.showVehicleDropdown,this.showVehicleDropdown&&(this.showEntitiesDropdown=!1)}selectVehicleType(e){console.log("Selected vehicle type:",e),this.showVehicleDropdown=!1,this.router.navigate(["/vehicle-booking"],{queryParams:{type:e}})}navigateToImageCreate(){this.router.navigate(["/images"])}navigateToComplaintCreate(){this.router.navigate(["/incidents"])}navigateToVehicles(){this.router.navigate(["/vehicles"])}navigateToEvents(){this.router.navigate(["/events"])}navigateToTemples(){this.router.navigate(["/temples"])}navigateToSchools(){this.router.navigate(["/schools"])}navigateToIncidents(){this.router.navigate(["/incidents"])}ngAfterViewInit(){setTimeout(()=>{this.initializeCharts()},100)}toggleChatPopup(){this.showChatPopup=!this.showChatPopup,this.showChatPopup&&(this.unreadMessages=0,this.currentUserId&&this.loadChatUsers(),!this.isConnected&&this.currentUserId&&(console.log("Connecting to WebSocket for chat functionality"),this.connect()))}loadChatUsers(){this.currentUserId?(this.isLoadingUsers=!0,this.usersService.getAllUsers().subscribe({next:e=>{this.chatUsers=e.filter(i=>i.id!==this.currentUserId),console.log("Chat users loaded:",this.chatUsers.length,"users"),this.isLoadingUsers=!1},error:e=>{console.error("Error loading chat users:",e),this.isLoadingUsers=!1}})):console.log("Current user not loaded yet, cannot load chat users")}loadChatMessages(){this.selectedChatUser?(this.setActiveConversation(this.selectedChatUser),console.log("Loading chat messages for user:",this.selectedChatUser),!this.isConnected&&this.currentUserId&&(console.log("Connecting to WebSocket for real-time messaging"),this.connect()),this.chatService.getChatMessages(this.selectedChatUser,this.currentUserId).subscribe({next:e=>{console.log("Received initial messages from API:",e),this.chatMessages=e.map(i=>({sender:i.senderId===this.currentUserId?"me":"other",content:i.content,timestamp:new Date(i.timestamp)})),console.log("Loaded initial chat messages:",this.chatMessages)},error:e=>{console.error("Error loading chat messages:",e)}})):(this.chatMessages=[],this.activeConversationPartner=null)}sendMessage(){if(this.chatMessage.trim()&&this.selectedChatUser&&this.currentUserId){const e=this.chatMessage.trim();this.chatMessages.push({sender:"me",content:e,timestamp:new Date}),this.lastSentMessage=e,this.lastSentTime=Date.now();const n={senderId:this.currentUserId,receiverId:this.selectedChatUser,content:e,timestamp:(new Date).toISOString(),token:this.tokenService.getToken()};console.log("Sending WebSocket message:",n),this.websocketService.sendMessage(n),this.chatMessage=""}}connect(){console.log("Connecting to WebSocket with user ID:",this.currentUserId),this.websocketService.connect(this.currentUserId)}setActiveConversation(e){this.activeConversationPartner=e,console.log("Active conversation set to:",e)}shouldDisplayMessage(e){return!!this.activeConversationPartner&&(e.senderId===this.currentUserId&&e.receiverId===this.activeConversationPartner||e.receiverId===this.currentUserId&&e.senderId===this.activeConversationPartner)}initializeCharts(){this.createVehicleChart(),this.createEventsChart(),this.createEntitiesChart(),this.createActivityChart()}createVehicleChart(){if(this.vehicleChartRef){const e=this.vehicleChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"bar",data:{labels:["2 Wheeler","4 Wheeler","8 Wheeler","Heavy"],datasets:[{label:"Bookings",data:[12,8,5,3],backgroundColor:["#3b82f6","#10b981","#f59e0b","#8b5cf6"],borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}});this.charts.push(i)}}createEventsChart(){if(this.eventsChartRef){const e=this.eventsChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Events Attended",data:[3,5,4,6,5,7],borderColor:"#8b5cf6",backgroundColor:"rgba(139, 92, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}});this.charts.push(i)}}createEntitiesChart(){if(this.entitiesChartRef){const e=this.entitiesChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"doughnut",data:{labels:["Healthcare","Education","Services","Public"],datasets:[{data:[25,30,20,25],backgroundColor:["#ef4444","#3b82f6","#10b981","#f59e0b"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom"}}}});this.charts.push(i)}}createActivityChart(){if(this.activityChartRef){const e=this.activityChartRef.nativeElement.getContext("2d"),i=new Nt(e,{type:"line",data:{labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Logins",data:[5,7,6,8,7,9,8],borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4},{label:"Activities",data:[3,5,4,6,5,7,6],borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4}]},options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0}}}});this.charts.push(i)}}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(Ce.Ix),l.rXU(Ie.B),l.rXU(mi.g),l.rXU(Ks.m),l.rXU(Js.H))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-villager"]],viewQuery:function(i,n){if(1&i&&(l.GBs(_m,5),l.GBs(wm,5),l.GBs(Cm,5),l.GBs(km,5)),2&i){let o;l.mGM(o=l.lsd())&&(n.vehicleChartRef=o.first),l.mGM(o=l.lsd())&&(n.eventsChartRef=o.first),l.mGM(o=l.lsd())&&(n.entitiesChartRef=o.first),l.mGM(o=l.lsd())&&(n.activityChartRef=o.first)}},hostBindings:function(i,n){1&i&&l.bIt("click",function(r){return n.onDocumentClick(r)},!1,l.EBC)},decls:121,vars:9,consts:[[1,"villager-dashboard"],[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-left"],[1,"dashboard-title"],[1,"dashboard-subtitle"],[1,"header-right"],[3,"userData","profileModalOpened","subscriptionsNavigated","logoutClicked"],[1,"quick-actions-section"],[1,"section-heading"],[1,"heading-icon"],[1,"actions-grid"],[1,"action-card","entities-card"],[1,"action-card-header",3,"click"],[1,"action-icon-wrapper"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"action-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"action-content"],[1,"action-title"],[1,"action-subtitle"],[1,"action-card","vehicle-card",3,"click"],[1,"action-card-header"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"action-card","images-card",3,"click"],[1,"action-icon-wrapper","images-gradient"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"action-card","events-card",3,"click"],[1,"action-icon-wrapper","events-gradient"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"action-card","temples-card",3,"click"],[1,"action-icon-wrapper","temples-gradient"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"action-card","schools-card",3,"click"],[1,"action-icon-wrapper","schools-gradient"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"],[1,"action-card","incidents-card",3,"click"],[1,"action-icon-wrapper","incidents-gradient"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"charts-section"],[1,"charts-grid"],[1,"chart-card"],[1,"chart-title"],["vehicleChart",""],["eventsChart",""],["entitiesChart",""],["activityChart",""],[1,"events-section"],[1,"events-grid"],["class","event-card",3,"animation-delay",4,"ngFor","ngForOf"],[3,"currentUserId","currentUserRole","currentUserName","chatToggled"],[3,"isVisible","userProfile","closeModal","updateProfile","deleteProfile"],[1,"event-card"],[1,"event-card-header"],[1,"event-icon"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],[1,"event-time"],[1,"event-name"],[1,"event-description"],[1,"event-footer"],[1,"event-badge"]],template:function(i,n){1&i&&(l.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),l.EFF(5,"Villager Dashboard"),l.k0s(),l.j41(6,"p",5),l.EFF(7),l.k0s()(),l.j41(8,"div",6)(9,"app-user-profile-dropdown",7),l.bIt("profileModalOpened",function(r){return n.onProfileModalOpened(r)})("subscriptionsNavigated",function(){return n.onSubscriptionsNavigated()})("logoutClicked",function(){return n.onLogoutClicked()}),l.k0s()()(),l.j41(10,"div",8)(11,"h2",9)(12,"span",10),l.EFF(13,"\u26a1"),l.k0s(),l.EFF(14," Quick Actions "),l.k0s(),l.j41(15,"div",11)(16,"div",12)(17,"div",13),l.bIt("click",function(){return n.navigateToEntities()}),l.j41(18,"div",14),l.qSk(),l.j41(19,"svg",15),l.nrm(20,"path",16),l.k0s()(),l.joV(),l.j41(21,"div",17)(22,"h3",18),l.EFF(23,"Entities"),l.k0s(),l.j41(24,"p",19),l.EFF(25),l.k0s()()()(),l.j41(26,"div",20),l.bIt("click",function(){return n.navigateToVehicles()}),l.j41(27,"div",21)(28,"div",14),l.qSk(),l.j41(29,"svg",15),l.nrm(30,"path",22),l.k0s()(),l.joV(),l.j41(31,"div",17)(32,"h3",18),l.EFF(33,"Vehicle"),l.k0s(),l.j41(34,"p",19),l.EFF(35,"Book Now"),l.k0s()()()(),l.j41(36,"div",23),l.bIt("click",function(){return n.navigateToImageCreate()}),l.j41(37,"div",21)(38,"div",24),l.qSk(),l.j41(39,"svg",15),l.nrm(40,"path",25),l.k0s()(),l.joV(),l.j41(41,"div",17)(42,"h3",18),l.EFF(43,"Images"),l.k0s(),l.j41(44,"p",19),l.EFF(45,"Upload Photos"),l.k0s()()()(),l.j41(46,"div",26),l.bIt("click",function(){return n.navigateToEvents()}),l.j41(47,"div",21)(48,"div",27),l.qSk(),l.j41(49,"svg",15),l.nrm(50,"path",28),l.k0s()(),l.joV(),l.j41(51,"div",17)(52,"h3",18),l.EFF(53,"Events"),l.k0s(),l.j41(54,"p",19),l.EFF(55,"View & Join"),l.k0s()()()(),l.j41(56,"div",29),l.bIt("click",function(){return n.navigateToTemples()}),l.j41(57,"div",21)(58,"div",30),l.qSk(),l.j41(59,"svg",15),l.nrm(60,"path",31),l.k0s()(),l.joV(),l.j41(61,"div",17)(62,"h3",18),l.EFF(63,"Temples"),l.k0s(),l.j41(64,"p",19),l.EFF(65,"Visit & Pray"),l.k0s()()()(),l.j41(66,"div",32),l.bIt("click",function(){return n.navigateToSchools()}),l.j41(67,"div",21)(68,"div",33),l.qSk(),l.j41(69,"svg",15),l.nrm(70,"path",34),l.k0s()(),l.joV(),l.j41(71,"div",17)(72,"h3",18),l.EFF(73,"Schools/Colleges"),l.k0s(),l.j41(74,"p",19),l.EFF(75,"Education Info"),l.k0s()()()(),l.j41(76,"div",35),l.bIt("click",function(){return n.navigateToIncidents()}),l.j41(77,"div",21)(78,"div",36),l.qSk(),l.j41(79,"svg",15),l.nrm(80,"path",37),l.k0s()(),l.joV(),l.j41(81,"div",17)(82,"h3",18),l.EFF(83,"Incidents"),l.k0s(),l.j41(84,"p",19),l.EFF(85,"Report & Track"),l.k0s()()()()()(),l.j41(86,"div",38)(87,"h2",9)(88,"span",10),l.EFF(89,"\u{1f4ca}"),l.k0s(),l.EFF(90," Analytics "),l.k0s(),l.j41(91,"div",39)(92,"div",40)(93,"h3",41),l.EFF(94,"Vehicle Bookings"),l.k0s(),l.nrm(95,"canvas",null,42),l.k0s(),l.j41(97,"div",40)(98,"h3",41),l.EFF(99,"Events Participation"),l.k0s(),l.nrm(100,"canvas",null,43),l.k0s(),l.j41(102,"div",40)(103,"h3",41),l.EFF(104,"Entity Usage"),l.k0s(),l.nrm(105,"canvas",null,44),l.k0s(),l.j41(107,"div",40)(108,"h3",41),l.EFF(109,"Activity Overview"),l.k0s(),l.nrm(110,"canvas",null,45),l.k0s()()(),l.j41(112,"div",46)(113,"h2",9)(114,"span",10),l.EFF(115,"\u{1f389}"),l.k0s(),l.EFF(116," Latest Events "),l.k0s(),l.j41(117,"div",47),l.DNE(118,Mm,14,5,"div",48),l.j41(119,"app-chat-widget",49),l.bIt("chatToggled",function(r){return n.onChatToggled(r)}),l.k0s(),l.j41(120,"app-profile-modal",50),l.bIt("closeModal",function(){return n.closeProfileModal()})("updateProfile",function(r){return n.updateUserProfile(r)})("deleteProfile",function(r){return n.deleteUserProfile(r)}),l.k0s()()()()()),2&i&&(l.R7$(7),l.SpI("Welcome, ",n.userName,"!"),l.R7$(2),l.Y8G("userData",n.userProfileData),l.R7$(16),l.SpI("",n.subscribedEntities.length," Available"),l.R7$(93),l.Y8G("ngForOf",n.latestEvents),l.R7$(1),l.Y8G("currentUserId",n.currentUserId||"")("currentUserRole","VILLAGER")("currentUserName",n.userName),l.R7$(1),l.Y8G("isVisible",n.showProfileModal)("userProfile",n.currentUserProfile))},dependencies:[pt.Sq,Qs,to.I,Xn],styles:[".villager-dashboard[_ngcontent-%COMP%]{min-height:100vh;background:radial-gradient(circle at 20% 80%,rgba(59,130,246,.05) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(16,185,129,.05) 0%,transparent 50%),radial-gradient(circle at 40% 40%,rgba(139,92,246,.03) 0%,transparent 50%),linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);padding-bottom:100px;position:relative}.dashboard-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:0 2rem}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:0 1rem}}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;background:white;padding:20px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.header-left[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1e293b;margin:0}.header-left[_ngcontent-%COMP%]   .dashboard-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#64748b;margin:5px 0 0}.header-right[_ngcontent-%COMP%]{position:relative;scroll-snap-align:start}.quick-actions-section[_ngcontent-%COMP%]{margin-bottom:2rem}.section-heading[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#111827;margin:0 0 1.5rem;display:flex;align-items:center;gap:.5rem}.section-heading[_ngcontent-%COMP%]   .heading-icon[_ngcontent-%COMP%]{font-size:1.5rem}.actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}@media (max-width: 640px){.actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.action-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(255,255,255,.9) 0%,rgba(248,250,252,.8) 100%);border-radius:12px;padding:2rem;box-shadow:0 2px 8px #00000014,0 1px 2px #0000000a;border:1px solid rgba(229,231,235,.8);cursor:pointer;transition:all .3s ease;text-align:center;position:relative;min-height:180px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.action-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 20px #0000001f,0 4px 8px #0000000f;border-color:#e5e7eb}.action-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{width:70px;height:70px;margin:0 auto 1.5rem;border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative}.action-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{width:36px;height:36px;color:#fff;animation:_ngcontent-%COMP%_float 4s ease-in-out infinite}.action-card[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%]   .action-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#111827;margin:0 0 .5rem}.action-card[_ngcontent-%COMP%]   .action-content[_ngcontent-%COMP%]   .action-subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0}.action-card.entities-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}.action-card.vehicle-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.action-card.images-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6 0%,#7c3aed 100%)}.action-card.complaints-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}.action-card.events-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%)}.action-card.temples-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#eab308 0%,#ca8a04 100%)}.action-card.schools-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%)}.action-card.incidents-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}.charts-section[_ngcontent-%COMP%]{margin-bottom:2rem}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:1.5rem}@media (max-width: 768px){.charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.chart-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(255,255,255,.9) 0%,rgba(248,250,252,.8) 100%);border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #00000014,0 1px 2px #0000000a;border:1px solid rgba(229,231,235,.8);transition:all .3s ease}.chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001f,0 2px 4px #0000000f}.chart-card[_ngcontent-%COMP%]   .chart-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#111827;margin:0 0 1rem}.chart-card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-height:250px}.events-section[_ngcontent-%COMP%]{margin-bottom:2rem}.events-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.5rem}@media (max-width: 768px){.events-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.event-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(255,255,255,.95) 0%,rgba(248,250,252,.9) 100%);border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #00000014,0 1px 2px #0000000a;border:1px solid rgba(229,231,235,.8);transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.event-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001f,0 2px 4px #0000000f}.event-card[_ngcontent-%COMP%]   .event-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.event-card[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#8b5cf6;border-radius:8px;display:flex;align-items:center;justify-content:center}.event-card[_ngcontent-%COMP%]   .event-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}.event-card[_ngcontent-%COMP%]   .event-time[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#8b5cf6;background:rgba(139,92,246,.1);padding:.25rem .75rem;border-radius:12px}.event-card[_ngcontent-%COMP%]   .event-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin:0 0 .5rem}.event-card[_ngcontent-%COMP%]   .event-description[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;line-height:1.5;margin:0 0 1rem}.event-card[_ngcontent-%COMP%]   .event-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.event-card[_ngcontent-%COMP%]   .event-badge[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500;color:#10b981;background:rgba(16,185,129,.1);padding:.25rem .75rem;border-radius:12px;border:1px solid rgba(16,185,129,.2)}.chat-fab[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;width:60px;height:60px;background:#8b5cf6;border:none;border-radius:50%;box-shadow:0 4px 20px #8b5cf666;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:999}.chat-fab[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 30px #8b5cf680}.chat-fab[_ngcontent-%COMP%]   .chat-icon[_ngcontent-%COMP%]{width:28px;height:28px;color:#fff}.chat-fab[_ngcontent-%COMP%]   .chat-badge[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;background:#ef4444;color:#fff;font-size:.75rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:2px solid white}@media (max-width: 768px){.chat-fab[_ngcontent-%COMP%]{bottom:20px;right:20px;width:50px;height:50px}.chat-fab[_ngcontent-%COMP%]   .chat-icon[_ngcontent-%COMP%]{width:24px;height:24px}}.chat-popup[_ngcontent-%COMP%]{position:fixed;bottom:100px;right:30px;width:380px;max-height:600px;background:white;border-radius:16px;box-shadow:0 10px 40px #0003;display:flex;flex-direction:column;z-index:1000;animation:_ngcontent-%COMP%_chatPopupFadeIn .3s ease}@media (max-width: 768px){.chat-popup[_ngcontent-%COMP%]{width:calc(100vw - 40px);right:20px;bottom:90px}}@keyframes _ngcontent-%COMP%_chatPopupFadeIn{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.chat-popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e5e7eb}.chat-popup-header[_ngcontent-%COMP%]   .chat-popup-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#111827;margin:0}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]{width:32px;height:32px;background:#f3f4f6;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb}.chat-popup-header[_ngcontent-%COMP%]   .chat-close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#6b7280}.chat-popup-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:1.5rem;max-height:400px}.chat-user-select[_ngcontent-%COMP%]{margin-bottom:1.5rem}.chat-user-select[_ngcontent-%COMP%]   .chat-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.chat-user-select[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:.875rem;color:#111827;background:white;cursor:pointer;transition:all .2s ease}.chat-user-select[_ngcontent-%COMP%]   .chat-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#8b5cf6;box-shadow:0 0 0 3px #8b5cf61a}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.chat-message[_ngcontent-%COMP%]{max-width:80%;padding:.75rem 1rem;border-radius:12px;animation:_ngcontent-%COMP%_messageFadeIn .3s ease}.chat-message.message-sent[_ngcontent-%COMP%]{align-self:flex-end;background:#8b5cf6;color:#fff;border-bottom-right-radius:4px}.chat-message.message-received[_ngcontent-%COMP%]{align-self:flex-start;background:#f3f4f6;color:#111827;border-bottom-left-radius:4px}.chat-message[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{font-size:.875rem;margin:0 0 .25rem;word-wrap:break-word}.chat-message[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7}@keyframes _ngcontent-%COMP%_messageFadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.chat-empty[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#9ca3af}.chat-empty[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto 1rem;opacity:.5}.chat-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;margin:0}.chat-popup-footer[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1rem 1.5rem;border-top:1px solid #e5e7eb}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:1px solid #d1d5db;border-radius:8px;font-size:.875rem;color:#111827}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#8b5cf6;box-shadow:0 0 0 3px #8b5cf61a}.chat-popup-footer[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:#8b5cf6;border:none;border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]:hover{background:#7c3aed}.chat-popup-footer[_ngcontent-%COMP%]   .chat-send-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff}"]})}}return s})();var ve=G(1413),Wn=G(6977),Pm=G(7967),jl=G(5627),Om=G(1825),Vl=G(1457);function Sm(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",40),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.clearSearch())}),l.qSk(),l.j41(1,"svg",5),l.nrm(2,"path",41),l.k0s()()}}function Am(s,t){if(1&s&&(l.j41(0,"div",42)(1,"span",43),l.EFF(2),l.k0s()()),2&s){const e=l.XpG();l.R7$(2),l.SpI('No services found for "',e.searchQuery,'"')}}function Em(s,t){1&s&&(l.j41(0,"span",44),l.EFF(1,"All Villages"),l.k0s())}function Im(s,t){if(1&s&&(l.j41(0,"span",44),l.EFF(1),l.k0s()),2&s){const e=l.XpG();l.R7$(1),l.JRh(e.getVillageNameById(e.selectedVillage))}}function Tm(s,t){if(1&s){const e=l.RV6();l.j41(0,"span",45),l.bIt("click",function(n){l.eBV(e);const o=l.XpG();return n.stopPropagation(),l.Njj(o.clearVillageSelection())}),l.qSk(),l.j41(1,"svg",29),l.nrm(2,"path",41),l.k0s()()}}function Rm(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",51),l.bIt("click",function(){const o=l.eBV(e).$implicit,r=l.XpG(2);return l.Njj(r.selectVillage(o.id))}),l.EFF(1),l.k0s()}if(2&s){const e=t.$implicit,i=l.XpG(2);l.AVh("active",i.selectedVillage===e.id),l.R7$(1),l.SpI(" ",e.name," ")}}function Lm(s,t){1&s&&(l.j41(0,"div",54),l.EFF(1," No villages found "),l.k0s())}function Dm(s,t){if(1&s){const e=l.RV6();l.qSk(),l.joV(),l.j41(0,"div",46)(1,"div",47),l.qSk(),l.j41(2,"svg",48),l.nrm(3,"path",20),l.k0s(),l.joV(),l.j41(4,"input",49),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.villageSearch=n)}),l.k0s()(),l.j41(5,"div",50)(6,"button",51),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.selectVillage(""))}),l.EFF(7,"All Villages"),l.k0s(),l.DNE(8,Rm,2,3,"button",52),l.DNE(9,Lm,2,0,"div",53),l.k0s()()}if(2&s){const e=l.XpG();l.R7$(4),l.Y8G("ngModel",e.villageSearch),l.R7$(2),l.AVh("active",!e.selectedVillage),l.R7$(2),l.Y8G("ngForOf",e.filteredVillagesForDropdown),l.R7$(1),l.Y8G("ngIf",0===e.filteredVillagesForDropdown.length)}}function Fm(s,t){1&s&&(l.j41(0,"span",44),l.EFF(1,"All Types"),l.k0s())}function zm(s,t){if(1&s&&(l.j41(0,"span",44),l.EFF(1),l.k0s()),2&s){const e=l.XpG();l.R7$(1),l.JRh(e.selectedEntityType)}}function jm(s,t){if(1&s){const e=l.RV6();l.j41(0,"span",45),l.bIt("click",function(n){l.eBV(e);const o=l.XpG();return n.stopPropagation(),l.Njj(o.clearEntityTypeSelection())}),l.qSk(),l.j41(1,"svg",29),l.nrm(2,"path",41),l.k0s()()}}function Vm(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",51),l.bIt("click",function(){const o=l.eBV(e).$implicit,r=l.XpG(2);return l.Njj(r.selectEntityType(o))}),l.EFF(1),l.k0s()}if(2&s){const e=t.$implicit,i=l.XpG(2);l.AVh("active",i.selectedEntityType===e),l.R7$(1),l.SpI(" ",e," ")}}function Nm(s,t){1&s&&(l.j41(0,"div",54),l.EFF(1," No types found "),l.k0s())}function Bm(s,t){if(1&s){const e=l.RV6();l.qSk(),l.joV(),l.j41(0,"div",46)(1,"div",47),l.qSk(),l.j41(2,"svg",48),l.nrm(3,"path",20),l.k0s(),l.joV(),l.j41(4,"input",55),l.bIt("ngModelChange",function(n){l.eBV(e);const o=l.XpG();return l.Njj(o.entityTypeSearch=n)}),l.k0s()(),l.j41(5,"div",50)(6,"button",51),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.selectEntityType(""))}),l.EFF(7,"All Types"),l.k0s(),l.DNE(8,Vm,2,3,"button",52),l.DNE(9,Nm,2,0,"div",53),l.k0s()()}if(2&s){const e=l.XpG();l.R7$(4),l.Y8G("ngModel",e.entityTypeSearch),l.R7$(2),l.AVh("active",!e.selectedEntityType),l.R7$(2),l.Y8G("ngForOf",e.filteredEntityTypesForDropdown),l.R7$(1),l.Y8G("ngIf",0===e.filteredEntityTypesForDropdown.length)}}function Hm(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",56),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.clearFilters())}),l.qSk(),l.j41(1,"svg",5),l.nrm(2,"path",41),l.k0s(),l.EFF(3," Clear Filters "),l.k0s()}}function Ym(s,t){1&s&&(l.j41(0,"div",57)(1,"div",58),l.nrm(2,"div",59),l.j41(3,"p",60),l.EFF(4,"Loading entities..."),l.k0s()()())}function Xm(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",61)(1,"div",62)(2,"div",63),l.qSk(),l.j41(3,"svg",5),l.nrm(4,"path",64),l.k0s()(),l.joV(),l.j41(5,"h3",65),l.EFF(6,"Failed to Load Entities"),l.k0s(),l.j41(7,"p",66),l.EFF(8),l.k0s(),l.j41(9,"button",67),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.refresh())}),l.qSk(),l.j41(10,"svg",5),l.nrm(11,"path",12),l.k0s(),l.EFF(12," Try Again "),l.k0s()()()}if(2&s){const e=l.XpG();l.R7$(8),l.JRh(e.error)}}function Wm(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",79)(1,"button",80),l.bIt("click",function(){l.eBV(e);const n=l.XpG(3);return l.Njj(n.clearFilters())}),l.qSk(),l.j41(2,"svg",5),l.nrm(3,"path",41),l.k0s(),l.EFF(4," Clear All Filters "),l.k0s(),l.joV(),l.j41(5,"button",81),l.bIt("click",function(){l.eBV(e);const n=l.XpG(3);return l.Njj(n.showFilterTips())}),l.qSk(),l.j41(6,"svg",5),l.nrm(7,"path",82),l.k0s(),l.EFF(8," Filter Tips "),l.k0s()()}}function Um(s,t){1&s&&(l.j41(0,"div",83)(1,"div",84),l.qSk(),l.j41(2,"svg",5),l.nrm(3,"path",20),l.k0s(),l.joV(),l.j41(4,"span"),l.EFF(5,"Use the search bar to find specific services"),l.k0s()(),l.j41(6,"div",84),l.qSk(),l.j41(7,"svg",5),l.nrm(8,"path",85),l.k0s(),l.joV(),l.j41(9,"span"),l.EFF(10,"Filter by village or service type to narrow results"),l.k0s()(),l.j41(11,"div",84),l.qSk(),l.j41(12,"svg",5),l.nrm(13,"path",86),l.k0s(),l.joV(),l.j41(14,"span"),l.EFF(15,"Subscribe to services you use regularly for updates"),l.k0s()()())}function Gm(s,t){if(1&s&&(l.j41(0,"div",71)(1,"div",72)(2,"div",73),l.qSk(),l.j41(3,"svg",5),l.nrm(4,"path",74),l.k0s()(),l.joV(),l.j41(5,"h3",75),l.EFF(6),l.k0s(),l.j41(7,"p",76),l.EFF(8),l.k0s(),l.DNE(9,Wm,9,0,"div",77),l.DNE(10,Um,16,0,"div",78),l.k0s()()),2&s){const e=l.XpG(2);l.R7$(6),l.JRh(e.getEmptyStateTitle()),l.R7$(2),l.SpI(" ",e.getEmptyStateMessage()," "),l.R7$(1),l.Y8G("ngIf",e.hasActiveFilters),l.R7$(1),l.Y8G("ngIf",!e.hasActiveFilters)}}function $m(s,t){1&s&&(l.qSk(),l.joV(),l.j41(0,"span"),l.EFF(1,"Subscribe"),l.k0s())}function qm(s,t){1&s&&(l.qSk(),l.joV(),l.j41(0,"span"),l.EFF(1,"Loading..."),l.k0s())}function Zm(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",120),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2).$implicit,o=l.XpG(3);return l.Njj(o.subscribeToEntity(n))}),l.qSk(),l.j41(1,"svg",5),l.nrm(2,"path",86),l.k0s(),l.DNE(3,$m,2,0,"span",121),l.DNE(4,qm,2,0,"span",121),l.k0s()}if(2&s){const e=l.XpG(2).$implicit,i=l.XpG(3);l.Y8G("disabled",i.isSubscriptionLoading(e)),l.R7$(3),l.Y8G("ngIf",!i.isSubscriptionLoading(e)),l.R7$(1),l.Y8G("ngIf",i.isSubscriptionLoading(e))}}function Km(s,t){1&s&&(l.qSk(),l.joV(),l.j41(0,"span"),l.EFF(1,"Unsubscribe"),l.k0s())}function Jm(s,t){1&s&&(l.qSk(),l.joV(),l.j41(0,"span"),l.EFF(1,"Loading..."),l.k0s())}function Qm(s,t){if(1&s){const e=l.RV6();l.j41(0,"button",122),l.bIt("click",function(){l.eBV(e);const n=l.XpG(2).$implicit,o=l.XpG(3);return l.Njj(o.unsubscribeFromEntity(n))}),l.qSk(),l.j41(1,"svg",5),l.nrm(2,"path",41),l.k0s(),l.DNE(3,Km,2,0,"span",121),l.DNE(4,Jm,2,0,"span",121),l.k0s()}if(2&s){const e=l.XpG(2).$implicit,i=l.XpG(3);l.Y8G("disabled",i.isSubscriptionLoading(e)),l.R7$(3),l.Y8G("ngIf",!i.isSubscriptionLoading(e)),l.R7$(1),l.Y8G("ngIf",i.isSubscriptionLoading(e))}}function tb(s,t){if(1&s&&(l.j41(0,"div",117),l.DNE(1,Zm,5,3,"button",118),l.DNE(2,Qm,5,3,"button",119),l.k0s()),2&s){const e=l.XpG().$implicit,i=l.XpG(3);l.R7$(1),l.Y8G("ngIf",!i.isUserSubscribed(e)),l.R7$(1),l.Y8G("ngIf",i.isUserSubscribed(e))}}function eb(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",123)(1,"button",124),l.bIt("click",function(){l.eBV(e);const n=l.XpG().$implicit,o=l.XpG(3);return l.Njj(o.editEntity(n))}),l.qSk(),l.j41(2,"svg",5),l.nrm(3,"path",125),l.k0s(),l.EFF(4," Edit "),l.k0s()()}}function ib(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",89)(1,"div",90)(2,"div",91),l.qSk(),l.j41(3,"svg",5),l.nrm(4,"path",74),l.k0s()(),l.joV(),l.j41(5,"div",92)(6,"h3",93),l.EFF(7),l.k0s(),l.j41(8,"p",94),l.EFF(9),l.k0s(),l.j41(10,"span",95),l.EFF(11),l.k0s()(),l.j41(12,"div",96)(13,"span",97),l.nrm(14,"span",98),l.EFF(15),l.k0s()()(),l.j41(16,"div",99)(17,"div",100)(18,"div",101)(19,"div",102),l.qSk(),l.j41(20,"svg",5),l.nrm(21,"path",103)(22,"path",104),l.k0s()(),l.joV(),l.j41(23,"div",105)(24,"span",106),l.EFF(25,"Village"),l.k0s(),l.j41(26,"span",107),l.EFF(27),l.k0s()()(),l.j41(28,"div",101)(29,"div",102),l.qSk(),l.j41(30,"svg",5),l.nrm(31,"path",108),l.k0s()(),l.joV(),l.j41(32,"div",105)(33,"span",106),l.EFF(34,"Hours"),l.k0s(),l.j41(35,"span",107),l.EFF(36),l.k0s()()(),l.j41(37,"div",101)(38,"div",102),l.qSk(),l.j41(39,"svg",5),l.nrm(40,"path",109),l.k0s()(),l.joV(),l.j41(41,"div",105)(42,"span",106),l.EFF(43,"Available Slots"),l.k0s(),l.j41(44,"span",110),l.EFF(45),l.k0s()()()()(),l.j41(46,"div",111),l.DNE(47,tb,3,2,"div",112),l.DNE(48,eb,5,0,"div",113),l.j41(49,"button",114),l.bIt("click",function(){const o=l.eBV(e).$implicit,r=l.XpG(3);return l.Njj(r.viewEntityDetails(o))}),l.qSk(),l.j41(50,"svg",5),l.nrm(51,"path",115)(52,"path",116),l.k0s(),l.EFF(53," View Details "),l.k0s()()()}if(2&s){const e=t.$implicit,i=t.index,n=l.XpG(3);l.xc7("animation-delay",.05*i+"s"),l.AVh("subscribed",e.isSubscribed)("owner",n.isCurrentUserOwner(e)),l.R7$(7),l.JRh(e.name),l.R7$(2),l.SpI("by ",e.owner.name,""),l.R7$(1),l.HbH(e.type.toLowerCase().replace(" ","-")),l.R7$(1),l.SpI(" ",e.type," "),l.R7$(2),l.AVh("open",e.isOpen)("closed",!e.isOpen),l.R7$(2),l.SpI(" ",e.isOpen?"Open":"Closed"," "),l.R7$(12),l.JRh(e.village.name),l.R7$(9),l.Lme("",e.openingTime," - ",e.closingTime,""),l.R7$(8),l.AVh("available",e.availableSlots>0)("full",0===e.availableSlots),l.R7$(1),l.SpI(" ",e.availableSlots," "),l.R7$(2),l.Y8G("ngIf",!n.isCurrentUserOwner(e)),l.R7$(1),l.Y8G("ngIf",n.isCurrentUserOwner(e))}}function nb(s,t){if(1&s&&(l.j41(0,"div",87),l.DNE(1,ib,54,26,"div",88),l.k0s()),2&s){const e=l.XpG(2);l.R7$(1),l.Y8G("ngForOf",e.filteredEntities)}}function sb(s,t){if(1&s&&(l.j41(0,"div",68),l.DNE(1,Gm,11,4,"div",69),l.DNE(2,nb,2,1,"div",70),l.k0s()),2&s){const e=l.XpG();l.R7$(1),l.Y8G("ngIf",0===e.filteredEntities.length),l.R7$(1),l.Y8G("ngIf",e.filteredEntities.length>0)}}let ob=(()=>{class s{constructor(e,i,n,o,r,a,c,h){this.router=e,this.http=i,this.entityService=n,this.subscriptionService=o,this.notificationService=r,this.tokenService=a,this.usersService=c,this.toast=h,this.destroy$=new ve.B,this.entities=[],this.filteredEntities=[],this.loading=!0,this.error="",this.searchQuery="",this.selectedVillage="",this.selectedEntityType="",this.showSubscribedOnly=!1,this.villages=[],this.villageDropdownOpen=!1,this.villageSearch="",this.entityTypes=["Healthcare","Education","Essential Services","Public Facility","Transportation","Recreation","Religious","Government"],this.entityTypeDropdownOpen=!1,this.entityTypeSearch="",this.userSubscriptions={},this.subscriptionLoading={},this.currentUser=null}ngOnInit(){this.loadCurrentUser(),this.loadEntities()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadCurrentUser(){const e=this.tokenService.getCurrentUser();console.log("Token user data:",e),e&&e.userId?(console.log("Loading user details for ID:",e.userId),this.usersService.getUserById(e.userId).subscribe({next:i=>{console.log("Successfully loaded current user:",i),this.currentUser=i,this.loadUserSubscriptions()},error:i=>{console.error("Error loading current user:",i),console.error("Error details:",{status:i.status,statusText:i.statusText,message:i.message,error:i.error})}})):console.warn("No token user found - user not logged in")}loadEntities(){this.loading=!0,this.error="",this.entityService.getAllEntities().subscribe({next:e=>{console.log("Entities loaded successfully from API:",JSON.stringify(e)),this.processEntitiesData(e)},error:e=>{console.error("Error loading entities from API:",e),console.log("Loading mock data for testing...")}})}processEntitiesData(e){if(console.log("Processing entities data:",e),e&&e.length>0){{this.entities=e.map(n=>({...n,isSubscribed:!1,isOpen:"OPEN"===n.status||n.active,ownerName:n.owner?.name||"Unknown Owner"}));const i={};this.entities.forEach(n=>{const o=(n?.village&&"object"==typeof n.village?n.village?.id:void 0)||("string"==typeof n?.village?n.village:void 0)||n?.villageId;o&&!i[o]&&(i[o]=(n?.village&&"object"==typeof n.village?n.village?.name:void 0)||n?.villageName||"Unknown Village")}),this.villages=Object.keys(i).map(n=>({id:n,name:i[n]})).sort((n,o)=>n.name.localeCompare(o.name))}console.log("Mapped entities:",this.entities),this.filteredEntities=[...this.entities],this.loading=!1,this.entities.forEach(i=>{this.notificationService.subscribeToEntityUpdates(i.id)}),this.currentUser?.id&&this.loadUserSubscriptions()}else console.log("No data from API, loading mock data...")}onSearchChange(){console.log("Search changed:",this.searchQuery),console.log("Current entities count:",this.entities.length),this.applyFilters()}clearSearch(){console.log("Clearing search"),this.searchQuery="",this.applyFilters()}applyFilters(){console.log("Applying filters..."),console.log("Search query:",this.searchQuery),console.log("Before filter - entities count:",this.entities.length),this.filteredEntities=this.entities.filter(e=>{const i=!this.searchQuery||e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.owner?.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.type.toLowerCase().includes(this.searchQuery.toLowerCase()),c=i&&(!this.selectedVillage||((e?.village&&"object"==typeof e.village?e.village?.id:void 0)||("string"==typeof e?.village?e.village:void 0)||e?.villageId)===this.selectedVillage)&&(!this.selectedEntityType||e.type===this.selectedEntityType)&&(!this.showSubscribedOnly||e.isSubscribed);return!i&&this.searchQuery&&console.log("Entity filtered out by search:",e.name,"Query:",this.searchQuery),c}),console.log("After filter - filtered entities count:",this.filteredEntities.length),console.log("Active filters:",{searchQuery:this.searchQuery,selectedVillage:this.selectedVillage,selectedEntityType:this.selectedEntityType,showSubscribedOnly:this.showSubscribedOnly})}onVillageFilterChange(){this.applyFilters()}get filteredVillagesForDropdown(){if(!this.villageSearch)return this.villages;const e=this.villageSearch.toLowerCase();return this.villages.filter(i=>i.name.toLowerCase().includes(e))}toggleVillageDropdown(e){this.villageDropdownOpen="boolean"==typeof e?e:!this.villageDropdownOpen}selectVillage(e){this.selectedVillage=e,this.villageDropdownOpen=!1,this.villageSearch="",this.applyFilters()}clearVillageSelection(){this.selectedVillage="",this.villageSearch="",this.applyFilters()}getVillageNameById(e){return e?this.villages.find(n=>n.id===e)?.name||"Selected":"All Villages"}onTypeFilterChange(){this.applyFilters()}get filteredEntityTypesForDropdown(){if(!this.entityTypeSearch)return this.entityTypes;const e=this.entityTypeSearch.toLowerCase();return this.entityTypes.filter(i=>i.toLowerCase().includes(e))}toggleEntityTypeDropdown(e){this.entityTypeDropdownOpen="boolean"==typeof e?e:!this.entityTypeDropdownOpen}selectEntityType(e){this.selectedEntityType=e,this.entityTypeDropdownOpen=!1,this.entityTypeSearch="",this.applyFilters()}clearEntityTypeSelection(){this.selectedEntityType="",this.entityTypeSearch="",this.applyFilters()}onSubscriptionFilterChange(){this.applyFilters()}goBack(){this.router.navigate(["/dashboard/villager"])}clearFilters(){console.log("Clearing all filters..."),console.log("Before clear - active filters:",{searchQuery:this.searchQuery,selectedVillage:this.selectedVillage,selectedEntityType:this.selectedEntityType,showSubscribedOnly:this.showSubscribedOnly,hasActiveFilters:this.hasActiveFilters}),this.selectedVillage="",this.selectedEntityType="",this.showSubscribedOnly=!1,this.searchQuery="",this.applyFilters(),console.log("After clear - active filters:",{searchQuery:this.searchQuery,selectedVillage:this.selectedVillage,selectedEntityType:this.selectedEntityType,showSubscribedOnly:this.showSubscribedOnly,hasActiveFilters:this.hasActiveFilters})}viewEntityDetails(e){console.log("Viewing entity details:",e.name)}refresh(){this.loadEntities()}isCurrentUserOwner(e){return!!this.currentUser?.id&&(e.owner?.id?e.owner.id===this.currentUser.id:!!e.owner&&e.owner===this.currentUser)}editEntity(e){this.router.navigate(["/entities/edit",e.id],{replaceUrl:!0})}subscribeToEntity(e){if(!this.currentUser?.id)return this.toast.info("Please log in to subscribe to entities"),void console.error("Cannot subscribe - no current user");console.log("Attempting to subscribe to entity:",e.id,"for user:",this.currentUser.id),this.subscriptionLoading[e.id]=!0,this.subscriptionService.subscribeToEntity(e.id,this.currentUser.id).pipe((0,Wn.Q)(this.destroy$)).subscribe({next:i=>{console.log("Subscription successful:",i),this.userSubscriptions[e.id]=!0,e.isSubscribed=!0,this.subscriptionLoading[e.id]=!1,this.toast.success(`Successfully subscribed to ${e.name}!`),this.applyFilters()},error:i=>{console.error("Error subscribing to entity:",i),console.error("Error details:",{status:i.status,statusText:i.statusText,message:i.message,error:i.error}),this.subscriptionLoading[e.id]=!1,this.toast.error(401===i.status?"Authentication failed. Please log in again.":404===i.status?"Entity not found. Please refresh and try again.":400===i.status?"Already subscribed or invalid request. Please try again.":"Failed to subscribe. Please check your connection and try again.")}})}unsubscribeFromEntity(e){if(!this.currentUser?.id)return this.toast.error("Please log in to unsubscribe from entities"),void console.error("Cannot unsubscribe - no current user");confirm(`Are you sure you want to unsubscribe from ${e.name}?`)&&(console.log("Attempting to unsubscribe from entity:",e.id,"for user:",this.currentUser.id),this.subscriptionLoading[e.id]=!0,this.subscriptionService.unsubscribeFromEntity(e.id,this.currentUser.id).pipe((0,Wn.Q)(this.destroy$)).subscribe({next:i=>{console.log("Unsubscription successful:",i),this.userSubscriptions[e.id]=!1,e.isSubscribed=!1,this.subscriptionLoading[e.id]=!1,this.applyFilters()},error:i=>{console.error("Error unsubscribing from entity:",i),console.error("Error details:",{status:i.status,statusText:i.statusText,message:i.message,error:i.error}),this.subscriptionLoading[e.id]=!1,this.toast.error(401===i.status?"Authentication failed. Please log in again.":404===i.status?"Subscription not found. Please refresh and try again.":"Failed to unsubscribe. Please check your connection and try again.")}}))}isUserSubscribed(e){return this.userSubscriptions[e.id]||!1}isSubscriptionLoading(e){return this.subscriptionLoading[e.id]||!1}loadUserSubscriptions(){this.currentUser?.id?(console.log("Loading user subscriptions for user:",this.currentUser.id),this.subscriptionService.getUserSubscriptions(this.currentUser.id).pipe((0,Wn.Q)(this.destroy$)).subscribe({next:e=>{console.log("Loaded user subscriptions:",e.length,e),this.entities.forEach(i=>{this.userSubscriptions[i.id]=!1,i.isSubscribed=!1}),e.forEach(i=>{const n=i?.entityId||i?.entity?.id,o="boolean"==typeof i?.active?i.active:"ACTIVE"===i?.status;if(!n)return void console.warn("Subscription item missing entityId:",i);this.userSubscriptions[n]=!!o;const r=this.entities.find(a=>a.id===n);r&&(r.isSubscribed=!!o)}),console.log("Updated userSubscriptions:",this.userSubscriptions),this.applyFilters()},error:e=>{console.error("Error loading user subscriptions:",e),console.error("Error details:",{status:e.status,statusText:e.statusText,message:e.message,error:e.error})}})):console.log("Cannot load user subscriptions - no current user")}get hasActiveFilters(){const e=!!(this.searchQuery||this.selectedVillage||this.selectedEntityType||this.showSubscribedOnly);return console.log("hasActiveFilters check:",{searchQuery:this.searchQuery,selectedVillage:this.selectedVillage,selectedEntityType:this.selectedEntityType,showSubscribedOnly:this.showSubscribedOnly,result:e}),e}getOpenEntitiesCount(){return this.filteredEntities.filter(e=>e.isOpen).length}getSubscribedCount(){return this.filteredEntities.filter(e=>e.isSubscribed).length}isDesktopView(){return window.innerWidth>=1024}getEmptyStateMessage(){return this.hasActiveFilters?"No services match your current filters. Try adjusting your search or filters to find what you're looking for.":"No services are available right now. Check back later or try searching in a different village."}getEmptyStateTitle(){return this.hasActiveFilters?"No Services Found":"No Services Available"}showFilterTips(){alert("\u{1f4a1} Filter Tips:\n\n\u2022 Use the search bar to find services by name\n\u2022 Filter by village to see local services\n\u2022 Filter by service type (Healthcare, Education, etc.)\n\u2022 Subscribe to services for updates\n\u2022 Clear filters to see all available services")}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(Ce.Ix),l.rXU(eo.Qq),l.rXU(Pm.Tr),l.rXU(jl.y),l.rXU(Om.m),l.rXU(Ie.B),l.rXU(mi.g),l.rXU(Ll.f))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-villager-entity-list"]],decls:64,vars:26,consts:[[1,"entity-list-container"],[1,"entity-list-header"],[1,"header-content"],[1,"header-left"],["title","Back to Dashboard",1,"back-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"header-info"],[1,"page-title"],[1,"page-subtitle"],[1,"header-actions"],[1,"refresh-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],[1,"search-filters-section"],[1,"filters-section"],[1,"filter-row"],[1,"filter-group"],[1,"filter-label"],[1,"search-input-wrapper"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"search-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search services by name...","autocomplete","off",1,"search-input",3,"ngModel","ngModelChange","input"],["class","search-clear",3,"click",4,"ngIf"],["class","search-status",4,"ngIf"],[1,"dropdown"],["type","button",1,"dropdown-control",3,"click"],["class","dropdown-value",4,"ngIf"],["class","dropdown-clear",3,"click",4,"ngIf"],[1,"dropdown-caret"],["viewBox","0 0 24 24","fill","none","stroke","currentColor"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["class","dropdown-menu",4,"ngIf"],["title","Subscribed Only",1,"filter-toggle"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"toggle-track"],[1,"toggle-thumb"],["class","clear-filters-btn",3,"click",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","entities-container",4,"ngIf"],[1,"search-clear",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"search-status"],[1,"search-status-text"],[1,"dropdown-value"],[1,"dropdown-clear",3,"click"],[1,"dropdown-menu"],[1,"dropdown-search"],["viewBox","0 0 24 24","fill","none","stroke","currentColor",1,"search-icon"],["type","text","placeholder","Search villages...","autocomplete","off",1,"dropdown-search-input",3,"ngModel","ngModelChange"],[1,"dropdown-list"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"active","click",4,"ngFor","ngForOf"],["class","dropdown-empty",4,"ngIf"],[1,"dropdown-empty"],["type","text","placeholder","Search types...","autocomplete","off",1,"dropdown-search-input",3,"ngModel","ngModelChange"],[1,"clear-filters-btn",3,"click"],[1,"loading-state"],[1,"loading-content"],[1,"loading-spinner"],[1,"loading-text"],[1,"error-state"],[1,"error-content"],[1,"error-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"error-title"],[1,"error-message"],[1,"retry-btn",3,"click"],[1,"entities-container"],["class","empty-state",4,"ngIf"],["class","entities-grid",4,"ngIf"],[1,"empty-state"],[1,"empty-content"],[1,"empty-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"empty-title"],[1,"empty-message"],["class","empty-actions",4,"ngIf"],["class","empty-tips",4,"ngIf"],[1,"empty-actions"],[1,"empty-action-btn","primary",3,"click"],[1,"empty-action-btn","secondary",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"empty-tips"],[1,"tip-item"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-5 5-5-5h5V12h-5l5-5 5 5h-5v5zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"],[1,"entities-grid"],["class","entity-card",3,"subscribed","owner","animation-delay",4,"ngFor","ngForOf"],[1,"entity-card"],[1,"card-header"],[1,"entity-avatar"],[1,"entity-info"],[1,"entity-name"],[1,"entity-owner"],[1,"entity-type-badge"],[1,"card-status"],[1,"status-badge"],[1,"status-dot"],[1,"card-content"],[1,"entity-details"],[1,"detail-item"],[1,"detail-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"detail-text"],[1,"detail-label"],[1,"detail-value"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"],[1,"detail-value","slots-count"],[1,"card-actions"],["class","subscription-section",4,"ngIf"],["class","owner-actions",4,"ngIf"],[1,"action-btn","view-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"],[1,"subscription-section"],["class","action-btn subscribe-btn",3,"disabled","click",4,"ngIf"],["class","action-btn unsubscribe-btn",3,"disabled","click",4,"ngIf"],[1,"action-btn","subscribe-btn",3,"disabled","click"],[4,"ngIf"],[1,"action-btn","unsubscribe-btn",3,"disabled","click"],[1,"owner-actions"],[1,"action-btn","edit-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"]],template:function(i,n){1&i&&(l.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),l.bIt("click",function(){return n.goBack()}),l.qSk(),l.j41(5,"svg",5),l.nrm(6,"path",6),l.k0s()(),l.joV(),l.j41(7,"div",7)(8,"h1",8),l.EFF(9,"Services"),l.k0s(),l.j41(10,"p",9),l.EFF(11,"Find what you need"),l.k0s()()(),l.j41(12,"div",10),l.nrm(13,"app-notification-bell"),l.j41(14,"button",11),l.bIt("click",function(){return n.refresh()}),l.qSk(),l.j41(15,"svg",5),l.nrm(16,"path",12),l.k0s(),l.joV(),l.j41(17,"span"),l.EFF(18,"Refresh"),l.k0s()()()()(),l.j41(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"label",17),l.EFF(24,"Search"),l.k0s(),l.j41(25,"div",18),l.qSk(),l.j41(26,"svg",19),l.nrm(27,"path",20),l.k0s(),l.joV(),l.j41(28,"input",21),l.bIt("ngModelChange",function(r){return n.searchQuery=r})("input",function(){return n.onSearchChange()}),l.k0s(),l.DNE(29,Sm,3,0,"button",22),l.DNE(30,Am,3,1,"div",23),l.k0s()(),l.j41(31,"div",16)(32,"label",17),l.EFF(33,"Village"),l.k0s(),l.j41(34,"div",24)(35,"button",25),l.bIt("click",function(){return n.toggleVillageDropdown()}),l.DNE(36,Em,2,0,"span",26),l.DNE(37,Im,2,1,"span",26),l.DNE(38,Tm,3,0,"span",27),l.j41(39,"span",28),l.qSk(),l.j41(40,"svg",29),l.nrm(41,"path",30),l.k0s()()(),l.DNE(42,Dm,10,5,"div",31),l.k0s()(),l.joV(),l.j41(43,"div",16)(44,"label",17),l.EFF(45,"Entity Type"),l.k0s(),l.j41(46,"div",24)(47,"button",25),l.bIt("click",function(){return n.toggleEntityTypeDropdown()}),l.DNE(48,Fm,2,0,"span",26),l.DNE(49,zm,2,1,"span",26),l.DNE(50,jm,3,0,"span",27),l.j41(51,"span",28),l.qSk(),l.j41(52,"svg",29),l.nrm(53,"path",30),l.k0s()()(),l.DNE(54,Bm,10,5,"div",31),l.k0s()(),l.joV(),l.j41(55,"div",16)(56,"label",32)(57,"input",33),l.bIt("ngModelChange",function(r){return n.showSubscribedOnly=r})("change",function(){return n.onSubscriptionFilterChange()}),l.k0s(),l.j41(58,"span",34),l.nrm(59,"span",35),l.k0s()()(),l.DNE(60,Hm,4,0,"button",36),l.k0s()()(),l.DNE(61,Ym,5,0,"div",37),l.DNE(62,Xm,13,1,"div",38),l.DNE(63,sb,3,2,"div",39),l.k0s()),2&i&&(l.R7$(25),l.AVh("search-active",n.searchQuery),l.R7$(3),l.Y8G("ngModel",n.searchQuery),l.R7$(1),l.Y8G("ngIf",n.searchQuery),l.R7$(1),l.Y8G("ngIf",n.searchQuery&&0===n.filteredEntities.length),l.R7$(4),l.AVh("open",n.villageDropdownOpen),l.R7$(2),l.Y8G("ngIf",!n.selectedVillage),l.R7$(1),l.Y8G("ngIf",n.selectedVillage),l.R7$(1),l.Y8G("ngIf",n.selectedVillage),l.R7$(1),l.AVh("rotate",n.villageDropdownOpen),l.R7$(3),l.Y8G("ngIf",n.villageDropdownOpen),l.R7$(4),l.AVh("open",n.entityTypeDropdownOpen),l.R7$(2),l.Y8G("ngIf",!n.selectedEntityType),l.R7$(1),l.Y8G("ngIf",n.selectedEntityType),l.R7$(1),l.Y8G("ngIf",n.selectedEntityType),l.R7$(1),l.AVh("rotate",n.entityTypeDropdownOpen),l.R7$(3),l.Y8G("ngIf",n.entityTypeDropdownOpen),l.R7$(3),l.Y8G("ngModel",n.showSubscribedOnly),l.R7$(3),l.Y8G("ngIf",n.hasActiveFilters),l.R7$(1),l.Y8G("ngIf",n.loading),l.R7$(1),l.Y8G("ngIf",n.error&&!n.loading),l.R7$(1),l.Y8G("ngIf",!n.loading&&!n.error))},dependencies:[pt.Sq,pt.bT,Vl.w,qt.me,qt.Zm,qt.BC,qt.vS],styles:['.entity-list-container[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif;background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 25%,#e2e8f0 50%,#f1f5f9 75%,#f8fafc 100%),radial-gradient(circle at 20% 20%,rgba(139,92,246,.08) 0%,transparent 50%),radial-gradient(circle at 80% 80%,rgba(16,185,129,.08) 0%,transparent 50%),radial-gradient(circle at 40% 60%,rgba(245,158,11,.05) 0%,transparent 50%);background-size:400% 400%,100% 100%,100% 100%,100% 100%;animation:_ngcontent-%COMP%_gradientShift 15s ease infinite;min-height:100vh;padding:1rem;position:relative}.entity-list-container[_ngcontent-%COMP%]:before{content:"";position:fixed;inset:0;background:radial-gradient(circle at 25% 25%,rgba(139,92,246,.03) 0%,transparent 50%),radial-gradient(circle at 75% 75%,rgba(16,185,129,.03) 0%,transparent 50%),radial-gradient(circle at 50% 10%,rgba(245,158,11,.02) 0%,transparent 50%),radial-gradient(circle at 10% 50%,rgba(239,68,68,.02) 0%,transparent 50%),radial-gradient(circle at 90% 50%,rgba(59,130,246,.02) 0%,transparent 50%);z-index:-1;pointer-events:none}.entity-list-container[_ngcontent-%COMP%]:after{content:"";position:fixed;inset:0;background:url(\'data:image/svg+xml,<svg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><g fill="%238b5cf6" fill-opacity="0.02"><circle cx="30" cy="30" r="2"/></g></svg>\');z-index:-1;pointer-events:none;animation:float 20s ease-in-out infinite}.entity-list-header[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;border:1px solid rgba(255,255,255,.8)}.entity-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{width:44px;height:44px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border:none;border-radius:12px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #8b5cf633;display:flex;align-items:center;justify-content:center;flex-shrink:0}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #8b5cf64d;background:linear-gradient(135deg,#7c3aed,#6d28d9)}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;width:16px;height:16px;color:#64748b;z-index:1}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:1rem 1rem 1rem 2.75rem}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{min-width:0;flex:1}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:#0f172a;margin:0;line-height:1.2;background:linear-gradient(135deg,#0f172a,#334155);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#64748b;margin:.25rem 0 0;font-weight:400;line-height:1.5}.entity-list-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-shrink:0}.entity-list-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border:none;border-radius:12px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #8b5cf633}.entity-list-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #8b5cf64d;background:linear-gradient(135deg,#7c3aed,#6d28d9)}.entity-list-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.entity-list-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .notification-bell[_ngcontent-%COMP%]{width:44px;height:44px;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-radius:12px;display:flex;align-items:center;justify-content:center;color:#64748b;cursor:pointer;transition:all .2s ease;border:1px solid rgba(226,232,240,.8)}.entity-list-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .notification-bell[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e2e8f0,#cbd5e1);transform:translateY(-1px);box-shadow:0 4px 8px #64748b26}@media (max-width: 640px){.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%], .search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{width:14px;height:14px}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%], .search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding-left:2.5rem}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.85rem}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{min-width:0;width:100%}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%], .search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{width:100%}}.search-filters-section[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;border:1px solid rgba(255,255,255,.8)}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{margin-bottom:1.5rem}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper.search-active[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{color:#8b5cf6}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper.search-active[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{border-color:#8b5cf6;box-shadow:0 0 0 3px #8b5cf61a}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;width:16px;height:16px;color:#64748b;z-index:1;transition:color .2s ease}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:1rem 1rem 1rem 2.75rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.875rem;background:white;transition:all .2s ease;font-weight:500}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8;font-weight:400}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#8b5cf6;background:white;box-shadow:0 0 0 3px #8b5cf61a;transform:translateY(-1px)}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-clear[_ngcontent-%COMP%]{position:absolute;right:1rem;background:none;border:none;color:#64748b;cursor:pointer;padding:.5rem;border-radius:8px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-clear[_ngcontent-%COMP%]:hover{color:#8b5cf6;background:rgba(139,92,246,.1);transform:scale(1.1)}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-clear[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-status[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:linear-gradient(135deg,#fef2f2,#fee2e2);border:1px solid #fecaca;border-radius:8px;padding:.75rem 1rem;margin-top:.5rem;text-align:center;animation:_ngcontent-%COMP%_slideDown .2s ease}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-status[_ngcontent-%COMP%]   .search-status-text[_ngcontent-%COMP%]{font-size:.875rem;color:#dc2626;font-weight:500}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;align-items:end}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{flex:1;min-width:200px}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:600;color:#334155;margin-bottom:.5rem}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.875rem;background:white;transition:all .2s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:.9rem;width:16px;height:16px;color:#64748b;z-index:1}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;border:2px solid #e2e8f0;border-radius:12px;font-size:.875rem;background:white;transition:all .2s ease;font-weight:500}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{color:#94a3b8;font-weight:400}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .search-input-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a;background:white}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]{position:relative;width:100%}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown.open[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem .75rem 1rem;border:2px solid #e2e8f0;border-radius:12px;background:#fff;font-size:.875rem;color:#0f172a;font-weight:500;display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:all .2s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]:hover{border-color:#cbd5e1}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]   .dropdown-value[_ngcontent-%COMP%]{flex:1;text-align:left}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]   .dropdown-clear[_ngcontent-%COMP%]{margin-right:2rem;width:28px;height:28px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;color:#64748b;transition:all .2s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]   .dropdown-clear[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#ef4444}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]   .dropdown-clear[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]   .dropdown-caret[_ngcontent-%COMP%]{position:absolute;right:.75rem;top:50%;transform:translateY(-50%);color:#64748b;transition:transform .2s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]   .dropdown-caret.rotate[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-control[_ngcontent-%COMP%]   .dropdown-caret[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:calc(100% + 8px);background:#fff;border:1px solid #e2e8f0;border-radius:12px;box-shadow:0 12px 30px #0f172a1f;z-index:20;overflow:hidden;animation:_ngcontent-%COMP%_slideDown .15s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-search[_ngcontent-%COMP%]{position:relative;padding:.5rem .75rem;border-bottom:1px solid #f1f5f9}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-search[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:16px;height:16px;color:#94a3b8}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-search[_ngcontent-%COMP%]   .dropdown-search-input[_ngcontent-%COMP%]{width:100%;padding:.6rem .75rem .6rem 2.2rem;border:2px solid #e2e8f0;border-radius:10px;font-size:.85rem;transition:all .2s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-search[_ngcontent-%COMP%]   .dropdown-search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#8b5cf6;box-shadow:0 0 0 3px #8b5cf61a}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]{max-height:260px;overflow-y:auto}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{width:100%;padding:.65rem .9rem;background:transparent;border:none;text-align:left;font-size:.9rem;color:#334155;cursor:pointer;transition:all .15s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]   .dropdown-item.active[_ngcontent-%COMP%]{background:#eef2ff;color:#4338ca;font-weight:700}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .dropdown[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   .dropdown-list[_ngcontent-%COMP%]   .dropdown-empty[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.85rem;color:#64748b;text-align:center}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.75rem;cursor:pointer;background:#fff;border:2px solid #e2e8f0;border-radius:12px;min-height:48px;padding:.5rem .75rem;transition:all .2s ease}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]:hover{border-color:#cbd5e1}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]:focus-within{box-shadow:0 0 0 3px #3b82f61a;border-color:#3b82f6}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]{width:48px;height:24px;background:#cbd5e1;border-radius:12px;position:relative;transition:all .2s ease;margin:0}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]   .toggle-track[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{width:20px;height:20px;background:white;border-radius:50%;position:absolute;top:2px;left:2px;transition:all .2s ease;box-shadow:0 2px 4px #0003}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]   .toggle-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#334155}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .toggle-track[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]   .filter-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .toggle-track[_ngcontent-%COMP%]   .toggle-thumb[_ngcontent-%COMP%]{transform:translate(24px)}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filters-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border:none;border-radius:12px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px #8b5cf633}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filters-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #8b5cf64d;background:linear-gradient(135deg,#7c3aed,#6d28d9)}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filters-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:3rem;text-align:center;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;border:1px solid rgba(255,255,255,.8)}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin:0 auto 1rem;display:flex;align-items:center;justify-content:center;border-radius:50%}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{border:3px solid #e2e8f0;border-top:3px solid #3b82f6;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fee2e2,#fecaca);color:#dc2626}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#0f172a;margin:0 0 .5rem}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1.5rem}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%], .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:12px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;display:inline-flex;align-items:center;gap:.5rem;box-shadow:0 2px 4px #8b5cf633}.loading-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover, .loading-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover, .error-state[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .retry-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #8b5cf64d;background:linear-gradient(135deg,#7c3aed,#6d28d9)}.results-header[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;border:1px solid rgba(255,255,255,.8)}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;padding:1rem}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.25rem;text-align:center;min-width:70px}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:800;line-height:1}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number.primary[_ngcontent-%COMP%]{color:#3b82f6}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number.success[_ngcontent-%COMP%]{color:#10b981}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number.warning[_ngcontent-%COMP%]{color:#f59e0b}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-divider[_ngcontent-%COMP%]{width:1px;height:28px;background:#e2e8f0}.results-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{display:flex;gap:.5rem}.results-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]{width:40px;height:40px;background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#64748b;cursor:pointer;transition:all .2s ease}.results-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]:hover{background:#f1f5f9;border-color:#cbd5e1;transform:translateY(-1px);box-shadow:0 4px 8px #64748b26}.results-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .view-toggle-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border-color:#3b82f6}.results-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]   .view-toggle-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{background:white;border-radius:16px;padding:3rem;text-align:center;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;border:1px solid rgba(255,255,255,.8)}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]{max-width:500px;margin:0 auto}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#f1f5f9,#e2e8f0);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#64748b;margin:0 auto 1.5rem}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#0f172a;margin:0 0 1rem;background:linear-gradient(135deg,#0f172a,#334155);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{color:#64748b;margin:0 0 2rem;font-size:1rem;line-height:1.6}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;margin-bottom:2rem}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .empty-action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 1.5rem;border:none;border-radius:12px;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s ease}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .empty-action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;box-shadow:0 2px 4px #8b5cf633}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .empty-action-btn.primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #8b5cf64d;background:linear-gradient(135deg,#7c3aed,#6d28d9)}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .empty-action-btn.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);color:#334155;border:1px solid #e2e8f0;box-shadow:0 2px 4px #3341551a}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .empty-action-btn.secondary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 8px #33415526;background:linear-gradient(135deg,#e2e8f0,#cbd5e1)}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .empty-action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-tips[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;text-align:left;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:12px;padding:1.5rem;border:1px solid rgba(226,232,240,.8)}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-tips[_ngcontent-%COMP%]   .tip-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-tips[_ngcontent-%COMP%]   .tip-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#3b82f6;flex-shrink:0;margin-top:.125rem}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-tips[_ngcontent-%COMP%]   .tip-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;color:#475569;line-height:1.5}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.5rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]{background:white;border-radius:20px;overflow:hidden;box-shadow:0 8px 25px -8px #0000001a,0 4px 10px -5px #0000000a;border:1px solid rgba(255,255,255,.9);transition:all .3s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_cardFadeIn .5s ease forwards;position:relative}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.02);box-shadow:0 20px 40px -12px #00000026,0 8px 20px -5px #00000014}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card.subscribed[_ngcontent-%COMP%]{border-left:5px solid #10b981;box-shadow:0 8px 25px -8px #10b98126,0 4px 10px -5px #10b98114}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card.owner[_ngcontent-%COMP%]{border-left:5px solid #f59e0b;box-shadow:0 8px 25px -8px #f59e0b26,0 4px 10px -5px #f59e0b14}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1.5rem;background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);border-bottom:1px solid rgba(226,232,240,.8);position:relative}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#8b5cf6,#7c3aed,#10b981);border-radius:20px 20px 0 0}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-avatar[_ngcontent-%COMP%]{width:60px;height:60px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border-radius:18px;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-bottom:1rem;box-shadow:0 8px 20px #8b5cf666;border:4px solid white;position:relative}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-avatar[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:-2px;border-radius:20px;background:linear-gradient(135deg,rgba(139,92,246,.3),rgba(124,58,237,.3));z-index:-1}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]{flex:1;min-width:0}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-name[_ngcontent-%COMP%]{font-size:1.375rem;font-weight:800;color:#0f172a;margin:0 0 .5rem;line-height:1.2;letter-spacing:-.025em;text-shadow:0 1px 2px rgba(0,0,0,.05)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-owner[_ngcontent-%COMP%]{font-size:.9rem;color:#64748b;margin:0 0 1rem;font-weight:600}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.5rem 1rem;border-radius:25px;font-size:.75rem;font-weight:800;text-transform:uppercase;letter-spacing:.05em;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 12px #00000026;border:1px solid rgba(255,255,255,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.healthcare[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(220,252,231,.95),rgba(187,247,208,.95));color:#166534;border:1px solid rgba(16,185,129,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.education[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(219,234,254,.95),rgba(191,219,254,.95));color:#1e40af;border:1px solid rgba(59,130,246,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.essential-services[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(254,243,199,.95),rgba(253,230,138,.95));color:#92400e;border:1px solid rgba(245,158,11,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.public-facility[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(243,244,246,.95),rgba(229,231,235,.95));color:#475569;border:1px solid rgba(107,114,128,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.religious[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(252,231,243,.95),rgba(249,168,212,.95));color:#be185d;border:1px solid rgba(190,24,93,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.transportation[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(224,242,254,.95),rgba(179,229,252,.95));color:#0277bd;border:1px solid rgba(2,119,189,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.government[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(237,233,254,.95),rgba(221,214,254,.95));color:#7c3aed;border:1px solid rgba(124,58,237,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-type-badge.recreation[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(236,253,245,.95),rgba(209,250,229,.95));color:#065f46;border:1px solid rgba(6,95,70,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]{position:absolute;top:1.25rem;right:1.25rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:25px;font-size:.75rem;font-weight:800;text-transform:uppercase;letter-spacing:.05em;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 12px #00000026;border:1px solid rgba(255,255,255,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{width:8px;height:8px;border-radius:50%;background:currentColor;animation:pulse 2s infinite}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge.open[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(220,252,231,.95),rgba(187,247,208,.95));color:#166534;border:1px solid rgba(16,185,129,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge.open[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#10b981;animation:pulse-green 2s infinite}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge.closed[_ngcontent-%COMP%]{background:linear-gradient(135deg,rgba(254,226,226,.95),rgba(254,202,202,.95));color:#991b1b;border:1px solid rgba(239,68,68,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .card-status[_ngcontent-%COMP%]   .status-badge.closed[_ngcontent-%COMP%]   .status-dot[_ngcontent-%COMP%]{background:#ef4444}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1.5rem;background:white}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1rem;background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-radius:14px;border:1px solid rgba(226,232,240,.8);transition:all .3s ease;position:relative}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,#8b5cf6,transparent);opacity:0;transition:opacity .3s ease}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f1f5f9,#e2e8f0);transform:translate(4px);box-shadow:0 4px 12px #8b5cf626}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:hover:before{opacity:1}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{width:22px;height:22px;color:#64748b;flex-shrink:0;margin-top:.125rem;background:white;border-radius:8px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 4px #0000000d}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]{flex:1;min-width:0}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{display:block;font-size:.7rem;font-weight:800;color:#64748b;text-transform:uppercase;letter-spacing:.05em;margin-bottom:.375rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#334155;font-weight:700}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]   .detail-value.slots-count.available[_ngcontent-%COMP%]{color:#10b981}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-text[_ngcontent-%COMP%]   .detail-value.slots-count.full[_ngcontent-%COMP%]{color:#ef4444}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:1.25rem 1.5rem 1.5rem;background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);border-top:1px solid rgba(226,232,240,.8);display:flex;flex-wrap:wrap;gap:.75rem;align-items:center}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .subscription-section[_ngcontent-%COMP%], .entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .owner-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex:1}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border:none;border-radius:14px;font-size:.875rem;font-weight:700;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);flex:1;justify-content:center;min-height:48px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 4px 12px #0000001a;position:relative;overflow:hidden}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px) scale(1.05);box-shadow:0 12px 24px #00000026}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.subscribe-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border:1px solid rgba(139,92,246,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.subscribe-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#7c3aed,#6d28d9);box-shadow:0 12px 24px #8b5cf666}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.unsubscribe-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);color:#fff;border:1px solid rgba(239,68,68,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.unsubscribe-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#dc2626,#b91c1c);box-shadow:0 12px 24px #ef444466}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:1px solid rgba(245,158,11,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.edit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#d97706,#b45309);box-shadow:0 12px 24px #f59e0b66}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#7c3aed);color:#fff;border:1px solid rgba(139,92,246,.3)}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn.view-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#7c3aed,#6d28d9);box-shadow:0 12px 24px #8b5cf666}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_cardFadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%,0 0,0 0,0 0}50%{background-position:100% 50%,0 0,0 0,0 0}to{background-position:0% 50%,0 0,0 0,0 0}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.entity-list-container[_ngcontent-%COMP%]{padding:.75rem}.entity-list-header[_ngcontent-%COMP%]{padding:1rem}.entity-list-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;text-align:center}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;width:100%}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{text-align:center}.entity-list-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.entity-list-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{justify-content:center;width:100%}.search-filters-section[_ngcontent-%COMP%]{padding:1rem}.search-filters-section[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{margin-bottom:1rem}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .filter-group[_ngcontent-%COMP%]{min-width:auto}.search-filters-section[_ngcontent-%COMP%]   .filters-section[_ngcontent-%COMP%]   .filter-row[_ngcontent-%COMP%]   .clear-filters-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.results-header[_ngcontent-%COMP%]{padding:1rem}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:1rem}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]{padding:.75rem;gap:.75rem}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{min-width:60px}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:1.125rem}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.7rem}.results-header[_ngcontent-%COMP%]   .results-info[_ngcontent-%COMP%]   .results-stats[_ngcontent-%COMP%]   .stats-container[_ngcontent-%COMP%]   .stat-divider[_ngcontent-%COMP%]{height:24px}.results-header[_ngcontent-%COMP%]   .view-toggle[_ngcontent-%COMP%]{order:-1;align-self:center}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:2rem 1rem}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:64px;height:64px}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{font-size:1.25rem}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-actions[_ngcontent-%COMP%]   .empty-action-btn[_ngcontent-%COMP%]{width:100%;max-width:280px;justify-content:center}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .search-status[_ngcontent-%COMP%]{padding:.5rem .75rem}.entities-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .search-status[_ngcontent-%COMP%]   .search-status-text[_ngcontent-%COMP%]{font-size:.8rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:1rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-avatar[_ngcontent-%COMP%]{width:40px;height:40px;margin-bottom:.75rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .entity-info[_ngcontent-%COMP%]   .entity-name[_ngcontent-%COMP%]{font-size:1rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{padding:1rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{gap:.5rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .entity-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-icon[_ngcontent-%COMP%]{width:18px;height:18px}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]{padding:.75rem 1rem 1rem;flex-direction:column}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .subscription-section[_ngcontent-%COMP%], .entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .owner-actions[_ngcontent-%COMP%]{width:100%;justify-content:center}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .subscription-section[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%], .entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]   .entity-card[_ngcontent-%COMP%]   .card-actions[_ngcontent-%COMP%]   .owner-actions[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:none;min-width:120px}}@media (min-width: 641px) and (max-width: 1023px){.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}}@media (min-width: 1024px){.entity-list-container[_ngcontent-%COMP%]{padding:1.5rem}.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(350px,1fr))}}@media (min-width: 1280px){.entities-container[_ngcontent-%COMP%]   .entities-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(380px,1fr))}}']})}}return s})();function rb(s,t){1&s&&l.nrm(0,"app-super-admin")}function ab(s,t){1&s&&l.nrm(0,"app-village-admin")}function lb(s,t){1&s&&l.nrm(0,"app-villager")}let cb=(()=>{class s{constructor(e){this.tokenService=e,this.role=""}ngOnInit(){this.role=this.tokenService.getUserRole()}ngAfterViewInit(){this.setupSideMenuActivation(),this.setupSidebarToggle(),this.setupSearchToggle(),this.setupInitialResponsiveState(),this.setupSwitchMode()}setupSideMenuActivation(){const e=document.querySelectorAll("#sidebar .side-menu.top li a");e.forEach(i=>{const n=i.parentElement;i.addEventListener("click",()=>{e.forEach(o=>{o.parentElement?.classList.remove("active")}),n.classList.add("active")})})}setupSidebarToggle(){const e=document.querySelector("#content nav .bx.bx-menu"),i=document.getElementById("sidebar");e?.addEventListener("click",()=>{i?.classList.toggle("hide")})}setupSearchToggle(){const e=document.querySelector("#content nav form .form-input button"),i=document.querySelector("#content nav form .form-input button .bx"),n=document.querySelector("#content nav form");e?.addEventListener("click",o=>{window.innerWidth<576&&(o.preventDefault(),n?.classList.toggle("show"),n?.classList.contains("show")?i?.classList.replace("bx-search","bx-x"):i?.classList.replace("bx-x","bx-search"))})}setupInitialResponsiveState(){const e=document.getElementById("sidebar"),i=document.querySelector("#content nav form .form-input button .bx"),n=document.querySelector("#content nav form");window.innerWidth<768?e?.classList.add("hide"):window.innerWidth>576&&(i?.classList.replace("bx-x","bx-search"),n?.classList.remove("show"))}onResize(e){const i=document.querySelector("#content nav form .form-input button .bx"),n=document.querySelector("#content nav form");window.innerWidth>576&&(i?.classList.replace("bx-x","bx-search"),n?.classList.remove("show"))}setupSwitchMode(){document.getElementById("switch-mode")?.addEventListener("change",function(){this.checked?document.body.classList.add("dark"):document.body.classList.remove("dark")})}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(Ie.B))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-dashboard-landing"]],hostBindings:function(i,n){1&i&&l.bIt("resize",function(r){return n.onResize(r)},!1,l.tSv)},decls:6,vars:3,consts:[[1,"dashboard-layout"],[1,"dashboard-body"],[4,"ngIf"]],template:function(i,n){1&i&&(l.j41(0,"div",0)(1,"main",1),l.qex(2),l.DNE(3,rb,1,0,"app-super-admin",2),l.DNE(4,ab,1,0,"app-village-admin",2),l.DNE(5,lb,1,0,"app-villager",2),l.bVm(),l.k0s()()),2&i&&(l.R7$(3),l.Y8G("ngIf","SUPER_ADMIN"==n.role),l.R7$(1),l.Y8G("ngIf","VILLAGE_ADMIN"==n.role),l.R7$(1),l.Y8G("ngIf","VILLAGER"==n.role))},dependencies:[pt.bT,Dl,Fl,zl],encapsulation:2})}}return s})();function hb(s,t){1&s&&(l.j41(0,"div",16),l.nrm(1,"div",17),l.j41(2,"p"),l.EFF(3,"Loading your subscriptions..."),l.k0s()())}function db(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",18)(1,"div",19),l.EFF(2,"\u26a0\ufe0f"),l.k0s(),l.j41(3,"p",20),l.EFF(4),l.k0s(),l.j41(5,"button",21),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.loadUserSubscriptions())}),l.EFF(6,"Try Again"),l.k0s()()}if(2&s){const e=l.XpG();l.R7$(4),l.JRh(e.error)}}function gb(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",22)(1,"div",23),l.EFF(2,"\u{1f4ed}"),l.k0s(),l.j41(3,"h3"),l.EFF(4,"No Subscriptions Yet"),l.k0s(),l.j41(5,"p"),l.EFF(6,"You haven't subscribed to any village entities or services yet."),l.k0s(),l.j41(7,"button",24),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.gotoEntities())}),l.EFF(8,"Discover Entities"),l.k0s()()}}function ub(s,t){if(1&s&&(l.j41(0,"a",69),l.qSk(),l.j41(1,"svg",56),l.nrm(2,"path",70),l.k0s(),l.joV(),l.j41(3,"span"),l.EFF(4),l.k0s()()),2&s){const e=l.XpG(2).$implicit;l.Y8G("href","tel:"+e.entity.owner.contactNumber,l.B4B),l.R7$(4),l.JRh(e.entity.owner.contactNumber)}}function pb(s,t){if(1&s&&(l.j41(0,"a",69),l.qSk(),l.j41(1,"svg",56),l.nrm(2,"path",71),l.k0s(),l.joV(),l.j41(3,"span"),l.EFF(4),l.k0s()()),2&s){const e=l.XpG(2).$implicit;l.Y8G("href","mailto:"+e.entity.owner.email,l.B4B),l.R7$(4),l.JRh(e.entity.owner.email)}}function fb(s,t){if(1&s&&(l.j41(0,"div",47)(1,"h4",62),l.qSk(),l.j41(2,"svg",63),l.nrm(3,"path",64),l.k0s(),l.EFF(4," Contact Information "),l.k0s(),l.joV(),l.j41(5,"div",48)(6,"div",65)(7,"div",66),l.qSk(),l.j41(8,"svg",56),l.nrm(9,"path",64),l.k0s(),l.joV(),l.j41(10,"span"),l.EFF(11),l.k0s()(),l.j41(12,"div",67),l.DNE(13,ub,5,2,"a",68),l.DNE(14,pb,5,2,"a",68),l.k0s()()()()),2&s){const e=l.XpG().$implicit;l.R7$(11),l.JRh(e.entity.owner.name||"N/A"),l.R7$(2),l.Y8G("ngIf",e.entity.owner.contactNumber),l.R7$(1),l.Y8G("ngIf",e.entity.owner.email)}}function mb(s,t){if(1&s&&(l.j41(0,"div",47)(1,"h4",62),l.qSk(),l.j41(2,"svg",63),l.nrm(3,"path",72),l.k0s(),l.EFF(4," Business Hours "),l.k0s(),l.joV(),l.j41(5,"div",48)(6,"div",49)(7,"div",51),l.qSk(),l.j41(8,"svg",56),l.nrm(9,"path",72),l.k0s(),l.joV(),l.j41(10,"div",73)(11,"span",74),l.EFF(12),l.k0s(),l.j41(13,"span",75),l.EFF(14,"IST"),l.k0s()()()()()()),2&s){const e=l.XpG().$implicit;l.R7$(12),l.Lme("",e.entity.openingTime||"N/A"," - ",e.entity.closingTime||"N/A","")}}function bb(s,t){if(1&s&&(l.j41(0,"div",51),l.qSk(),l.j41(1,"svg",56),l.nrm(2,"path",76)(3,"path",77),l.k0s(),l.joV(),l.j41(4,"span",79),l.EFF(5),l.k0s()()),2&s){const e=l.XpG(2).$implicit;l.R7$(5),l.JRh(e.entity.address)}}function xb(s,t){if(1&s&&(l.j41(0,"div",47)(1,"h4",62),l.qSk(),l.j41(2,"svg",63),l.nrm(3,"path",76)(4,"path",77),l.k0s(),l.EFF(5," Location "),l.k0s(),l.joV(),l.j41(6,"div",48)(7,"div",49)(8,"div",51),l.qSk(),l.j41(9,"svg",56),l.nrm(10,"path",45),l.k0s(),l.joV(),l.j41(11,"span"),l.EFF(12),l.k0s()(),l.DNE(13,bb,6,1,"div",78),l.k0s()()()),2&s){const e=l.XpG().$implicit;l.R7$(12),l.JRh(e.entity.villageName||"N/A"),l.R7$(1),l.Y8G("ngIf",null==e.entity?null:e.entity.address)}}function vb(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",35)(1,"div",36)(2,"div",37)(3,"span",38),l.EFF(4),l.k0s()(),l.j41(5,"div",39)(6,"div",40)(7,"h3",41),l.EFF(8),l.k0s(),l.j41(9,"span",42),l.EFF(10),l.k0s()(),l.j41(11,"div",43),l.qSk(),l.j41(12,"svg",44),l.nrm(13,"path",45),l.k0s(),l.EFF(14),l.nI1(15,"titlecase"),l.k0s()()(),l.joV(),l.j41(16,"div",46)(17,"div",47)(18,"div",48)(19,"div",49)(20,"span",50),l.EFF(21,"Status"),l.k0s(),l.j41(22,"div",51)(23,"span",52),l.EFF(24),l.k0s()()()()(),l.DNE(25,fb,15,3,"div",53),l.DNE(26,mb,15,2,"div",53),l.DNE(27,xb,14,2,"div",53),l.k0s(),l.j41(28,"div",54)(29,"div",55),l.qSk(),l.j41(30,"svg",56),l.nrm(31,"path",57),l.k0s(),l.joV(),l.j41(32,"span"),l.EFF(33),l.k0s()(),l.j41(34,"div",58)(35,"button",59),l.bIt("click",function(){const o=l.eBV(e).$implicit,r=l.XpG(3);return l.Njj(r.toggleSubscription(o))}),l.j41(36,"span",60),l.EFF(37),l.k0s(),l.EFF(38),l.k0s(),l.j41(39,"button",61),l.bIt("click",function(){l.eBV(e);const n=l.XpG(3);return l.Njj(n.loadUserSubscriptions())}),l.j41(40,"span",60),l.EFF(41,"\u21bb"),l.k0s()()()()()}if(2&s){const e=t.$implicit,i=l.XpG(3);l.AVh("inactive",!e.active),l.R7$(4),l.JRh(i.getTypeIcon(e.entity.type)),l.R7$(3),l.Y8G("title",e.entity.name),l.R7$(1),l.JRh(e.entity.name),l.R7$(1),l.AVh("active",e.active),l.R7$(1),l.SpI(" ",i.getStatusText(e)," "),l.R7$(4),l.SpI(" ",l.bMT(15,21,e.entity.type)," "),l.R7$(9),l.AVh("active","OPEN"===((null==e.entity?null:e.entity.status)||"").toUpperCase()),l.R7$(1),l.SpI(" ",(null==e.entity?null:e.entity.status)||"N/A"," "),l.R7$(1),l.Y8G("ngIf",null==e.entity?null:e.entity.owner),l.R7$(1),l.Y8G("ngIf",(null==e.entity?null:e.entity.openingTime)||(null==e.entity?null:e.entity.closingTime)),l.R7$(1),l.Y8G("ngIf",(null==e.entity?null:e.entity.address)||(null==e.entity?null:e.entity.villageName)),l.R7$(6),l.SpI("Subscribed on ",i.formatDate(e.subscribedAt),""),l.R7$(2),l.AVh("danger",e.active),l.Y8G("disabled",!e.active),l.R7$(2),l.JRh(e.active?"\xd7":"+"),l.R7$(1),l.SpI(" ",e.active?"Unsubscribe":"Subscribed"," ")}}function yb(s,t){if(1&s&&(l.j41(0,"div",27)(1,"div",28)(2,"div",29)(3,"span",30),l.EFF(4),l.k0s(),l.j41(5,"h2",31),l.EFF(6),l.nI1(7,"titlecase"),l.k0s(),l.j41(8,"span",32),l.EFF(9),l.k0s()()(),l.j41(10,"div",33),l.DNE(11,vb,42,23,"div",34),l.k0s()()),2&s){const e=t.$implicit,i=l.XpG(2);l.R7$(4),l.JRh(i.getTypeIcon(e)),l.R7$(2),l.JRh(l.bMT(7,4,e)),l.R7$(3),l.JRh(i.getSubscriptionsByType(e).length),l.R7$(2),l.Y8G("ngForOf",i.getSubscriptionsByType(e))}}function _b(s,t){if(1&s&&(l.j41(0,"div",25),l.DNE(1,yb,12,6,"div",26),l.k0s()),2&s){const e=l.XpG();l.R7$(1),l.Y8G("ngForOf",e.getEntityTypes())}}function wb(s,t){if(1&s){const e=l.RV6();l.j41(0,"div",80),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.closeUnsubscribeConfirm())}),l.j41(1,"div",81),l.bIt("click",function(n){return n.stopPropagation()}),l.j41(2,"div",82)(3,"h3"),l.EFF(4,"Confirm Unsubscribe"),l.k0s(),l.j41(5,"button",83),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.closeUnsubscribeConfirm())}),l.qSk(),l.j41(6,"svg",84),l.nrm(7,"path",85),l.k0s()()(),l.joV(),l.j41(8,"div",86)(9,"p"),l.EFF(10,"Are you sure you want to unsubscribe from "),l.j41(11,"strong"),l.EFF(12),l.k0s(),l.EFF(13,"?"),l.k0s(),l.j41(14,"p",87),l.EFF(15,"You will no longer receive updates or notifications from this entity."),l.k0s()(),l.j41(16,"div",88)(17,"button",89),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.closeUnsubscribeConfirm())}),l.EFF(18,"Cancel"),l.k0s(),l.j41(19,"button",90),l.bIt("click",function(){l.eBV(e);const n=l.XpG();return l.Njj(n.confirmUnsubscribe())}),l.EFF(20,"Unsubscribe"),l.k0s()()()()}if(2&s){const e=l.XpG();l.R7$(12),l.JRh(null==e.subscriptionToUnsubscribe?null:e.subscriptionToUnsubscribe.entity.name)}}let io=(()=>{class s{constructor(e,i,n,o){this.router=e,this.http=i,this.tokenService=n,this.subscriptionService=o,this.userSubscriptions=[],this.subscribedEntities=[],this.showUnsubscribeConfirm=!1,this.subscriptionToUnsubscribe=null,this.isLoading=!1,this.error=null}ngOnInit(){this.loadUserSubscriptions()}loadUserSubscriptions(){this.isLoading=!0,this.error=null;const e=this.tokenService.getCurrentUser();if(!e||!e.userId)return this.error="User not authenticated. Please log in again.",void(this.isLoading=!1);this.subscriptionService.getUserSubscriptions(e.userId).subscribe({next:i=>{console.log("User subscriptions:",JSON.stringify(i)),this.userSubscriptions=i,this.subscribedEntities=i.map(n=>({id:n.entityId,name:n.entityName,type:n.entityType,subscriptionType:n.subscriptionType,subscribedAt:n.subscribedAt,active:n.active})),this.isLoading=!1},error:i=>{console.error("Error loading user subscriptions:",i),this.error="Failed to load your subscriptions. Please try again later.",this.isLoading=!1}})}toggleSubscription(e){e.active?(this.subscriptionToUnsubscribe=e,this.showUnsubscribeConfirm=!0):this.subscribeToEntity(e.entity.id,e.entity.name)}subscribeToEntity(e,i){const n=this.tokenService.getCurrentUser();n&&n.userId?this.subscriptionService.subscribeToEntity(e,n.userId).subscribe({next:o=>{console.log(`Subscribed to ${i}`),this.loadUserSubscriptions()},error:o=>{console.error("Error subscribing to entity:",o),this.error="Failed to subscribe. Please try again later."}}):this.error="User not authenticated. Please log in again."}confirmUnsubscribe(){if(this.subscriptionToUnsubscribe){const e=this.tokenService.getCurrentUser();if(!e||!e.userId)return void(this.error="User not authenticated. Please log in again.");this.subscriptionService.unsubscribeFromEntity(this.subscriptionToUnsubscribe.entity.id,e.userId).subscribe({next:()=>{console.log(`Unsubscribed from ${this.subscriptionToUnsubscribe.entity.name}`),this.loadUserSubscriptions(),this.closeUnsubscribeConfirm()},error:i=>{console.error("Error unsubscribing from entity:",i),this.error="Failed to unsubscribe. Please try again later."}})}}closeUnsubscribeConfirm(){this.showUnsubscribeConfirm=!1,this.subscriptionToUnsubscribe=null}getStatusBadgeClass(e){return e.active?"status-active":"status-inactive"}getStatusText(e){return e.active?"Active":"Inactive"}gotoEntities(){this.router.navigate(["/dashboard/villager/entities"])}goBack(){this.router.navigate(["/dashboard"])}getEntityTypes(){return[...new Set(this.userSubscriptions.map(i=>i.entity.type))]}getSubscriptionsByType(e){return this.userSubscriptions.filter(i=>i.entity.type===e)}getTypeIcon(e){return{MRO_OFFICE:"\u{1f3db}\ufe0f",HEALTHCARE:"\u{1f3e5}",EDUCATION:"\u{1f393}",SERVICES:"\u{1f527}",PUBLIC:"\u{1f3db}\ufe0f",COMMERCIAL:"\u{1f3ea}",RELIGIOUS:"\u26ea",GOVERNMENT:"\u{1f3db}\ufe0f"}[e]||"\u{1f3e2}"}formatDate(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return e}}static{this.\u0275fac=function(i){return new(i||s)(l.rXU(Ce.Ix),l.rXU(eo.Qq),l.rXU(Ie.B),l.rXU(jl.y))}}static{this.\u0275cmp=l.VBU({type:s,selectors:[["app-subscriptions"]],standalone:!0,features:[l.aNF],decls:26,vars:7,consts:[[1,"subscriptions-page"],[1,"page-header"],[1,"header-content"],[1,"header-text"],[1,"page-title"],[1,"title-icon"],[1,"page-subtitle"],[1,"header-stats"],[1,"stat-badge"],[1,"stat-number"],[1,"stat-label"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","empty-container",4,"ngIf"],["class","subscriptions-content",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"error-container"],[1,"error-icon"],[1,"error-message"],[1,"retry-button",3,"click"],[1,"empty-container"],[1,"empty-icon"],[1,"discover-btn",3,"click"],[1,"subscriptions-content"],["class","category-section",4,"ngFor","ngForOf"],[1,"category-section"],[1,"category-header"],[1,"category-info"],[1,"category-icon"],[1,"category-title"],[1,"category-count"],[1,"subscriptions-grid"],["class","subscription-card",3,"inactive",4,"ngFor","ngForOf"],[1,"subscription-card"],[1,"card-header"],[1,"entity-avatar"],[1,"avatar-icon"],[1,"entity-info"],[1,"entity-title-row"],[1,"entity-name",3,"title"],[1,"status-badge"],[1,"entity-type"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"meta-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"card-body"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"status-tag"],["class","info-section",4,"ngIf"],[1,"card-footer"],[1,"subscription-date"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"info-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"action-buttons"],[1,"action-btn","primary",3,"disabled","click"],[1,"btn-icon"],["title","Refresh",1,"action-btn","secondary",3,"click"],[1,"section-title"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"section-icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"info-item","owner-info"],[1,"owner-name"],[1,"owner-contact"],["class","contact-link",3,"href",4,"ngIf"],[1,"contact-link",3,"href"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"hours-text"],[1,"time-slot"],[1,"timezone"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],["class","info-value",4,"ngIf"],[1,"truncate"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"modal-close",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"modal-body"],[1,"warning-text"],[1,"modal-footer"],[1,"btn-secondary",3,"click"],[1,"btn-danger",3,"click"]],template:function(i,n){1&i&&(l.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"span",5),l.EFF(6,"\u{1f4cb}"),l.k0s(),l.EFF(7," My Subscriptions "),l.k0s(),l.j41(8,"p",6),l.EFF(9,"Manage your subscriptions to village entities and services"),l.k0s()(),l.j41(10,"div",7)(11,"div",8)(12,"span",9),l.EFF(13),l.k0s(),l.j41(14,"span",10),l.EFF(15,"Active"),l.k0s()(),l.j41(16,"div",8)(17,"span",9),l.EFF(18),l.k0s(),l.j41(19,"span",10),l.EFF(20,"Categories"),l.k0s()()()()(),l.DNE(21,hb,4,0,"div",11),l.DNE(22,db,7,1,"div",12),l.DNE(23,gb,9,0,"div",13),l.DNE(24,_b,2,1,"div",14),l.DNE(25,wb,21,1,"div",15),l.k0s()),2&i&&(l.R7$(13),l.JRh(n.userSubscriptions.length),l.R7$(5),l.JRh(n.getEntityTypes().length),l.R7$(3),l.Y8G("ngIf",n.isLoading),l.R7$(1),l.Y8G("ngIf",n.error),l.R7$(1),l.Y8G("ngIf",!n.isLoading&&!n.error&&0===n.userSubscriptions.length),l.R7$(1),l.Y8G("ngIf",!n.isLoading&&!n.error&&n.userSubscriptions.length>0),l.R7$(1),l.Y8G("ngIf",n.showUnsubscribeConfirm))},dependencies:[pt.MD,pt.Sq,pt.bT,pt.PV,qt.YN],styles:['.subscriptions-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.truncate[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.75rem;background:rgba(255,255,255,.85);border:1px solid rgba(229,231,235,.8);border-radius:16px;padding:2rem;box-shadow:0 8px 24px #11182714;margin:1rem 0}.loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #e5e7eb;border-top-color:#6366f1;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.retry-button[_ngcontent-%COMP%], .discover-btn[_ngcontent-%COMP%]{padding:.6rem 1rem;border-radius:10px;border:1px solid #e5e7eb;background:white;font-weight:600;color:#374151;cursor:pointer;transition:all .2s ease}.retry-button[_ngcontent-%COMP%]:hover, .discover-btn[_ngcontent-%COMP%]:hover{background:#f9fafb;transform:translateY(-1px)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(15,23,42,.45);display:flex;align-items:center;justify-content:center;padding:1rem;z-index:50}.modal-content[_ngcontent-%COMP%]{background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(229,231,235,.8);border-radius:16px;width:100%;max-width:440px;box-shadow:0 20px 40px #02061733}.modal-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;border-bottom:1px solid #eef2f7}.modal-body[_ngcontent-%COMP%]{padding:1rem 1.25rem}.warning-text[_ngcontent-%COMP%]{color:#b45309}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;padding:.75rem 1.25rem 1.25rem}.modal-close[_ngcontent-%COMP%]{border:none;background:transparent;cursor:pointer;padding:.25rem}.btn-secondary[_ngcontent-%COMP%]{border:1px solid #e5e7eb;background:white;color:#374151;padding:.6rem 1rem;border-radius:10px;font-weight:600}.btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff;border:none;padding:.6rem 1rem;border-radius:10px;font-weight:600}.subscriptions-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1.25rem;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:radial-gradient(circle at 20% 80%,rgba(59,130,246,.06) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(139,92,246,.06) 0%,transparent 50%),linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);min-height:100vh}.page-header[_ngcontent-%COMP%]{background:rgba(255,255,255,.85);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:20px;padding:1.5rem 1.75rem;margin-bottom:1.5rem;box-shadow:0 8px 24px #11182714,0 2px 6px #1118270f;border:1px solid rgba(229,231,235,.8)}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.5rem;font-weight:700;color:#111827}.page-header[_ngcontent-%COMP%]   .header-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem}.page-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;color:#111827;display:flex;align-items:center;gap:.75rem;background:linear-gradient(90deg,#6366f1 0%,#8b5cf6 50%,#3b82f6 100%);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1.5rem;flex-wrap:wrap}.header-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.stat-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;background:rgba(99,102,241,.08);border:1px solid rgba(99,102,241,.25);color:#4338ca;padding:.5rem .75rem;border-radius:999px;transition:transform .2s ease,box-shadow .2s ease;box-shadow:0 2px 6px #6366f11a}.stat-badge[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-weight:700;font-size:.95rem}.stat-badge[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-weight:600;font-size:.8rem;color:#4b5563}.stat-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 18px #6366f12e}.page-subtitle[_ngcontent-%COMP%]{margin:.5rem 0 0;color:#6b7280;font-size:1rem;line-height:1.5;max-width:800px}.title-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#6366f1}.subscriptions-content[_ngcontent-%COMP%]{margin-top:1.5rem;padding-bottom:2rem}.category-section[_ngcontent-%COMP%]{margin-bottom:2rem}.category-section[_ngcontent-%COMP%]:last-child{margin-bottom:1rem}.category-header[_ngcontent-%COMP%]{padding-bottom:.75rem;margin-bottom:1rem;border-bottom:2px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.category-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.category-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:#6366f1;display:flex;align-items:center}.category-title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#111827;display:flex;align-items:center;gap:.5rem}.category-count[_ngcontent-%COMP%]{padding:.25rem .75rem;font-size:.75rem;font-weight:600;color:#4b5563;background:#f3f4f6;border:1px solid #e5e7eb;border-radius:999px;margin-left:.5rem;display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px}.subscriptions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1.25rem 1.25rem;padding:.5rem;margin:0;list-style:none}.subscription-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.92);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 6px 18px #11182714,0 1px 3px #1118270f;overflow:hidden;transition:transform .25s ease,box-shadow .25s ease,border-image-source .25s ease;border:1px solid transparent;border-image:linear-gradient(90deg,#e5e7eb,#dbeafe,#ede9fe) 1;position:relative;display:flex;flex-direction:column;height:100%}.subscription-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#6366f1,#8b5cf6,#3b82f6);opacity:.9}.subscription-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.015) rotate(-.3deg);box-shadow:0 16px 32px #11182724,0 6px 10px #11182714;border-image-source:linear-gradient(90deg,#6366f1,#8b5cf6,#3b82f6)}.subscription-card.inactive[_ngcontent-%COMP%]{opacity:.7}.card-header[_ngcontent-%COMP%]{padding:1.25rem 1.25rem 1rem;border-bottom:1px solid #eef2f7;position:relative;z-index:1;background:white;display:flex;align-items:center;gap:1rem}.entity-avatar[_ngcontent-%COMP%]{flex-shrink:0;width:52px;height:52px;border-radius:14px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#f0f9ff 0%,#e0f2fe 100%);color:#0369a1;font-size:26px;font-weight:600;box-shadow:0 4px 12px #0369a12e;border:2px solid #fff;transition:transform .25s ease,box-shadow .25s ease}.subscription-card[_ngcontent-%COMP%]:hover   .entity-avatar[_ngcontent-%COMP%]{transform:translateY(-2px) scale(1.05);box-shadow:0 10px 20px #0369a138}.entity-info[_ngcontent-%COMP%]{flex:1;min-width:0}.entity-title-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem}.entity-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#111827;margin:0;line-height:1.3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;min-width:0}.entity-title-row[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{flex-shrink:0;white-space:nowrap}.entity-type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.8rem;color:#6b7280;margin-top:4px}.entity-type[_ngcontent-%COMP%]   .meta-icon[_ngcontent-%COMP%]{width:14px;height:14px;flex-shrink:0}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:.75rem;font-weight:500;display:inline-flex;align-items:center;gap:6px;white-space:nowrap}.status-badge.active[_ngcontent-%COMP%]{background:#e6f7ee;color:#0d6832}.status-badge.active[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;background:#10b981}.status-badge[_ngcontent-%COMP%]:not(.active){background:#fee2e2;color:#991b1b}.status-badge[_ngcontent-%COMP%]:not(.active):before{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;background:#ef4444}.status-badge.open[_ngcontent-%COMP%]{background:#e6f7ee;color:#0d6832}.status-badge.open[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;background:#10b981}.status-badge.closed[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.status-badge.closed[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:8px;border-radius:50%;background:#ef4444}.card-body[_ngcontent-%COMP%]{padding:1.25rem 1.25rem 1rem;flex:1;display:flex;flex-direction:column;gap:1.25rem}.info-section[_ngcontent-%COMP%]:not(:last-child){padding-bottom:1.25rem;border-bottom:1px solid #f3f4f6}.info-section[_ngcontent-%COMP%]:last-child{margin-bottom:.5rem}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.85rem;font-weight:600;color:#4b5563;margin:0 0 12px}.section-title[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0;stroke-width:2}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:.75rem}@media (min-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr));gap:.9rem 1.25rem}}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;min-width:0}.info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500}.info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:.9rem;color:#111827;font-weight:500;line-height:1.4;min-width:0}.info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0;color:#6b7280;stroke-width:2}.info-item[_ngcontent-%COMP%]   .status-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em}.info-item[_ngcontent-%COMP%]   .status-tag.active[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.info-item[_ngcontent-%COMP%]   .status-tag[_ngcontent-%COMP%]:not(.active){background-color:#fee2e2;color:#991b1b}.info-item.owner-info[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500;margin-bottom:6px}.info-item.owner-info[_ngcontent-%COMP%]   .owner-name[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.info-item.owner-info[_ngcontent-%COMP%]   .owner-contact[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.info-item.owner-info[_ngcontent-%COMP%]   .owner-contact[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#4b5563;text-decoration:none;font-size:.9rem;transition:color .2s}.info-item.owner-info[_ngcontent-%COMP%]   .owner-contact[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]:hover{color:#3b82f6;text-decoration:underline}.info-item.owner-info[_ngcontent-%COMP%]   .owner-contact[_ngcontent-%COMP%]   .contact-link[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;flex-shrink:0}.info-item[_ngcontent-%COMP%]   .hours-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.info-item[_ngcontent-%COMP%]   .hours-text[_ngcontent-%COMP%]   .time-slot[_ngcontent-%COMP%]{font-weight:500}.info-item[_ngcontent-%COMP%]   .hours-text[_ngcontent-%COMP%]   .timezone[_ngcontent-%COMP%]{font-size:.8em;color:#6b7280;background:#f3f4f6;padding:1px 6px;border-radius:4px;font-weight:500}.card-footer[_ngcontent-%COMP%]{padding:.85rem 1.25rem 1.25rem;margin-top:auto;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(180deg,#f9fafb,#f3f4f6);border-top:1px solid #eef2f7}.card-footer[_ngcontent-%COMP%]   .subscription-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:.8rem;color:#6b7280;flex:1;min-width:0}.card-footer[_ngcontent-%COMP%]   .subscription-date[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;flex-shrink:0}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:stretch}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.5rem 1rem;border:none;border-radius:6px;font-size:.85rem;font-weight:500;cursor:pointer;transition:all .2s ease;gap:6px;min-height:38px;white-space:nowrap}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   .btn-icon[_ngcontent-%COMP%]{font-size:1.1em;line-height:1}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#6366f1,#8b5cf6);color:#fff;box-shadow:0 6px 16px #6366f147}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#4f46e5,#7c3aed);transform:translateY(-1px);box-shadow:0 10px 22px #6366f161}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary.danger[_ngcontent-%COMP%]{background:#ef4444}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.primary.danger[_ngcontent-%COMP%]:hover{background:#dc2626}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]{background:white;border:1px solid #e5e7eb;color:#4b5563}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.secondary[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#cbd5e1;transform:translateY(-1px);box-shadow:0 6px 14px #11182714}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}@media (max-width: 768px){.subscriptions-page[_ngcontent-%COMP%]{padding:.75rem}.page-header[_ngcontent-%COMP%]{padding:1rem 1.1rem;border-radius:16px}.subscription-card[_ngcontent-%COMP%]{border-radius:14px}.entity-avatar[_ngcontent-%COMP%]{width:44px;height:44px;font-size:22px}.entity-name[_ngcontent-%COMP%]{font-size:1rem}.card-body[_ngcontent-%COMP%]{padding:1rem}.subscriptions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem}.section-title[_ngcontent-%COMP%]{font-size:.8rem;margin-bottom:10px}.info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{font-size:.85rem}.card-footer[_ngcontent-%COMP%]{padding:.75rem 1rem;flex-direction:column;gap:.75rem;align-items:stretch}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.card-footer[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{flex:1;min-width:120px;font-size:.8rem;padding:.5rem .75rem}}']})}}return s})();const Cb=[{path:"",component:cb},{path:"super-admin",component:Dl,canActivate:[ai.K],data:{role:"SUPER_ADMIN"}},{path:"village-admin",component:Fl,canActivate:[ai.K],data:{role:"VILLAGE_ADMIN"}},{path:"villager",children:[{path:"",component:zl,canActivate:[ai.K],data:{role:"VILLAGER"}},{path:"entities",component:ob,canActivate:[ai.K],data:{role:"VILLAGER"}},{path:"subscriptions",component:io,canActivate:[ai.K],data:{role:"VILLAGER"}}]},{path:"subscriptions",component:io,canActivate:[ai.K],data:{roles:["VILLAGER","VILLAGE_ADMIN","SUPER_ADMIN"]}}];let kb=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({imports:[Ce.iI.forChild(Cb),Ce.iI]})}}return s})();var Mb=G(401),ne=G(6860),Pb=G(6755),_t=G(4085),Ob=G(7673),no=G(1985),Nl=G(8750),Sb=G(1397),Ab=G(7441),qe=G(8071),Eb=G(6450);const Ib=["addListener","removeListener"],Tb=["addEventListener","removeEventListener"],Rb=["on","off"];function so(s,t,e,i){if((0,qe.T)(e)&&(i=e,e=void 0),i)return so(s,t,e).pipe((0,Eb.I)(i));const[n,o]=function Fb(s){return(0,qe.T)(s.addEventListener)&&(0,qe.T)(s.removeEventListener)}(s)?Tb.map(r=>a=>s[r](t,a,e)):function Lb(s){return(0,qe.T)(s.addListener)&&(0,qe.T)(s.removeListener)}(s)?Ib.map(Bl(s,t)):function Db(s){return(0,qe.T)(s.on)&&(0,qe.T)(s.off)}(s)?Rb.map(Bl(s,t)):[];if(!n&&(0,Ab.X)(s))return(0,Sb.Z)(r=>so(r,t,e))((0,Nl.Tg)(s));if(!n)throw new TypeError("Invalid event target");return new no.c(r=>{const a=(...c)=>r.next(1<c.length?c:c[0]);return n(a),()=>o(a)})}function Bl(s,t){return e=>i=>s[e](t,i)}var Hl=G(6780),oo=G(8359);const qi={schedule(s){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=qi;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const n=t(o=>{e=void 0,s(o)});return new oo.yU(()=>e?.(n))},requestAnimationFrame(...s){const{delegate:t}=qi;return(t?.requestAnimationFrame||requestAnimationFrame)(...s)},cancelAnimationFrame(...s){const{delegate:t}=qi;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...s)},delegate:void 0};var Yl=G(3604);new class jb extends Yl.q{flush(t){let e;this._active=!0,t?e=t.id:(e=this._scheduled,this._scheduled=void 0);const{actions:i}=this;let n;t=t||i.shift();do{if(n=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,n){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw n}}}(class zb extends Hl.R{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=qi.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){var n;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&e===t._scheduled&&(null===(n=o[o.length-1])||void 0===n?void 0:n.id)!==e&&(qi.cancelAnimationFrame(e),t._scheduled=void 0)}});let ro,Nb=1;const Un={};function Xl(s){return s in Un&&(delete Un[s],!0)}const Bb={setImmediate(s){const t=Nb++;return Un[t]=!0,ro||(ro=Promise.resolve()),ro.then(()=>Xl(t)&&s()),t},clearImmediate(s){Xl(s)}},{setImmediate:Hb,clearImmediate:Yb}=Bb,Gn={setImmediate(...s){const{delegate:t}=Gn;return(t?.setImmediate||Hb)(...s)},clearImmediate(s){const{delegate:t}=Gn;return(t?.clearImmediate||Yb)(s)},delegate:void 0};new class Wb extends Yl.q{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let n;t=t||i.shift();do{if(n=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,n){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw n}}}(class Xb extends Hl.R{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Gn.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){var n;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(t,e,i);const{actions:o}=t;null!=e&&(null===(n=o[o.length-1])||void 0===n?void 0:n.id)!==e&&(Gn.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}});var Wl=G(3236),Ub=G(9974),Ul=G(4360),$b=G(9470);function Gl(s,t=Wl.E){return function Gb(s){return(0,Ub.N)((t,e)=>{let i=!1,n=null,o=null,r=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const h=n;n=null,e.next(h)}r&&e.complete()},c=()=>{o=null,r&&e.complete()};t.subscribe((0,Ul._)(e,h=>{i=!0,n=h,o||(0,Nl.Tg)(s(h)).subscribe(o=(0,Ul._)(e,a,c))},()=>{r=!0,(!i||!o||o.closed)&&e.complete()}))})}(()=>function Zb(s=0,t,e=Wl.b){let i=-1;return null!=t&&((0,$b.m)(t)?e=t:i=t),new no.c(n=>{let o=function qb(s){return s instanceof Date&&!isNaN(s)}(s)?+s-e.now():s;o<0&&(o=0);let r=0;return e.schedule(function(){n.closed||(n.next(r++),0<=i?this.schedule(void 0,i):n.complete())},o)})}(s,t))}var $l=G(5964),$n=G(8203);let Jb=(()=>{class s{constructor(e,i,n){this._ngZone=e,this._platform=i,this._scrolled=new ve.B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new no.c(i=>{this._globalSubscription||this._addGlobalListener();const n=e>0?this._scrolled.pipe(Gl(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Ob.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const n=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe((0,$l.p)(o=>!o||n.indexOf(o)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((n,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let n=(0,_t.i8)(i),o=e.getElementRef().nativeElement;do{if(n==o)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>so(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(l.SKi),l.KVO(ne.OD),l.KVO(pt.qQ,8))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),ql=(()=>{class s{constructor(e,i,n){this._platform=e,this._change=new ve.B,this._changeListener=o=>{this._change.next(o)},this._document=n,i.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+i,height:n,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),n=e.documentElement,o=n.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||i.scrollY||n.scrollTop||0,left:-o.left||e.body.scrollLeft||i.scrollX||n.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(Gl(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(ne.OD),l.KVO(l.SKi),l.KVO(pt.qQ,8))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),lo=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({})}}return s})(),Zl=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({imports:[$n.jI,lo,$n.jI,lo]})}}return s})();var t0=G(6697);class co{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class e0 extends co{constructor(t,e,i,n,o){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=n,this.projectableNodes=o}}class n0 extends co{constructor(t,e,i,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class s0 extends co{constructor(t){super(),this.element=t instanceof l.aKT?t.nativeElement:t}}class o0{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof e0?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof n0?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof s0?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class r0 extends o0{constructor(t,e,i,n,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=n,this.attachDomPortal=r=>{const a=r.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=r,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>n.destroy())):(n=i.create(t.injector||this._defaultInjector||l.zZn.NULL),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(n=>this.outletElement.appendChild(n)),i.detectChanges(),this.setDisposeFn(()=>{let n=e.indexOf(i);-1!==n&&e.remove(n)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let a0=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({})}}return s})();var l0=G(7786);const Kl=(0,ne.CZ)();class c0{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=(0,_t.a1)(-this._previousScrollPosition.left),t.style.top=(0,_t.a1)(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,n=this._document.body.style,o=i.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Kl&&(i.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Kl&&(i.scrollBehavior=o,n.scrollBehavior=r)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class h0{constructor(t,e,i,n){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=n,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe((0,$l.p)(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Jl{enable(){}disable(){}attach(){}}function ho(s,t){return t.some(e=>s.bottom<e.top||s.top>e.bottom||s.right<e.left||s.left>e.right)}function Ql(s,t){return t.some(e=>s.top<e.top||s.bottom>e.bottom||s.left<e.left||s.right>e.right)}class d0{constructor(t,e,i,n){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=n,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:n}=this._viewportRuler.getViewportSize();ho(e,[{width:i,height:n,bottom:n,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let g0=(()=>{class s{constructor(e,i,n,o){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=n,this.noop=()=>new Jl,this.close=r=>new h0(this._scrollDispatcher,this._ngZone,this._viewportRuler,r),this.block=()=>new c0(this._viewportRuler,this._document),this.reposition=r=>new d0(this._scrollDispatcher,this._viewportRuler,this._ngZone,r),this._document=o}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(Jb),l.KVO(ql),l.KVO(l.SKi),l.KVO(pt.qQ))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();class u0{constructor(t){if(this.scrollStrategy=new Jl,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class p0{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let tc=(()=>{class s{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(pt.qQ))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),f0=(()=>{class s extends tc{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=n=>{const o=this._attachedOverlays;for(let r=o.length-1;r>-1;r--)if(o[r]._keydownEvents.observers.length>0){const a=o[r]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(n)):a.next(n);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(pt.qQ),l.KVO(l.SKi,8))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),m0=(()=>{class s extends tc{constructor(e,i,n){super(e),this._platform=i,this._ngZone=n,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=(0,ne.Fb)(o)},this._clickListener=o=>{const r=(0,ne.Fb)(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let h=c.length-1;h>-1;h--){const d=c[h];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(r)||d.overlayElement.contains(a))break;const g=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>g.next(o)):g.next(o)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(pt.qQ),l.KVO(ne.OD),l.KVO(l.SKi,8))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),ec=(()=>{class s{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||(0,ne.v8)()){const n=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<n.length;o++)n[o].remove()}const i=this._document.createElement("div");i.classList.add(e),(0,ne.v8)()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(pt.qQ),l.KVO(ne.OD))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();class b0{constructor(t,e,i,n,o,r,a,c,h,d=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=n,this._ngZone=o,this._keyboardDispatcher=r,this._document=a,this._location=c,this._outsideClickDispatcher=h,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new ve.B,this._attachments=new ve.B,this._detachments=new ve.B,this._locationChanges=oo.yU.EMPTY,this._backdropClickHandler=g=>this._backdropClick.next(g),this._backdropTransitionendHandler=g=>{this._disposeBackdrop(g.target)},this._keydownEvents=new ve.B,this._outsidePointerEvents=new ve.B,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,t0.s)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=(0,_t.a1)(this._config.width),t.height=(0,_t.a1)(this._config.height),t.minWidth=(0,_t.a1)(this._config.minWidth),t.minHeight=(0,_t.a1)(this._config.minHeight),t.maxWidth=(0,_t.a1)(this._config.maxWidth),t.maxHeight=(0,_t.a1)(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const n=(0,_t.FG)(e||[]).filter(o=>!!o);n.length&&(i?t.classList.add(...n):t.classList.remove(...n))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe((0,Wn.Q)((0,l0.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const ic="cdk-overlay-connected-position-bounding-box",x0=/([A-Za-z%]+)$/;class v0{get positions(){return this._preferredPositions}constructor(t,e,i,n,o){this._viewportRuler=e,this._document=i,this._platform=n,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ve.B,this._resizeSubscription=oo.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(ic),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,n=this._containerRect,o=[];let r;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,n,a),h=this._getOverlayPoint(c,e,a),d=this._getOverlayFit(h,e,i,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(d,h,i)?o.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!r||r.overlayFit.visibleArea<d.visibleArea)&&(r={overlayFit:d,overlayPoint:h,originPoint:c,position:a,overlayRect:e})}if(o.length){let a=null,c=-1;for(const h of o){const d=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);d>c&&(c=d,a=h)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ze(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ic),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let n,o;if("center"==i.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;n="start"==i.originX?r:a}return e.left<0&&(n-=e.left),o="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:n,y:o}}_getOverlayPoint(t,e,i){let n,o;return n="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+n,y:t.y+o}}_getOverlayFit(t,e,i,n){const o=sc(e);let{x:r,y:a}=t,c=this._getOffset(n,"x"),h=this._getOffset(n,"y");c&&(r+=c),h&&(a+=h);let u=0-a,p=a+o.height-i.height,m=this._subtractOverflows(o.width,0-r,r+o.width-i.width),f=this._subtractOverflows(o.height,u,p),b=m*f;return{visibleArea:b,isCompletelyWithinViewport:o.width*o.height===b,fitsInViewportVertically:f===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const n=i.bottom-e.y,o=i.right-e.x,r=nc(this._overlayRef.getConfig().minHeight),a=nc(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=r&&r<=n)&&(t.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const n=sc(e),o=this._viewportRect,r=Math.max(t.x+n.width-o.width,0),a=Math.max(t.y+n.height-o.height,0),c=Math.max(o.top-i.top-t.y,0),h=Math.max(o.left-i.left-t.x,0);let d=0,g=0;return d=n.width<=o.width?h||-r:t.x<this._viewportMargin?o.left-i.left-t.x:0,g=n.height<=o.height?c||-a:t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:d,y:g},{x:t.x+d,y:t.y+g}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),n=new p0(t,i);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,n=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,n=this._isRtl();let o,r,a,d,g,u;if("top"===e.overlayY)r=t.y,o=i.height-r+this._viewportMargin;else if("bottom"===e.overlayY)a=i.height-t.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const p=Math.min(i.bottom-t.y+i.top,t.y),m=this._lastBoundingBoxSize.height;o=2*p,r=t.y-p,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(r=t.y-m/2)}if("end"===e.overlayX&&!n||"start"===e.overlayX&&n)u=i.width-t.x+this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!n||"end"===e.overlayX&&n)g=t.x,d=i.right-t.x;else{const p=Math.min(i.right-t.x+i.left,t.x),m=this._lastBoundingBoxSize.width;d=2*p,g=t.x-p,d>m&&!this._isInitialRender&&!this._growAfterOpen&&(g=t.x-m/2)}return{top:r,left:g,bottom:a,right:u,width:d,height:o}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;n.height=(0,_t.a1)(i.height),n.top=(0,_t.a1)(i.top),n.bottom=(0,_t.a1)(i.bottom),n.width=(0,_t.a1)(i.width),n.left=(0,_t.a1)(i.left),n.right=(0,_t.a1)(i.right),n.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",n.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(n.maxHeight=(0,_t.a1)(o)),r&&(n.maxWidth=(0,_t.a1)(r))}this._lastBoundingBoxSize=i,Ze(this._boundingBox.style,n)}_resetBoundingBoxStyles(){Ze(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ze(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},n=this._hasExactPosition(),o=this._hasFlexibleDimensions,r=this._overlayRef.getConfig();if(n){const d=this._viewportRuler.getViewportScrollPosition();Ze(i,this._getExactOverlayY(e,t,d)),Ze(i,this._getExactOverlayX(e,t,d))}else i.position="static";let a="",c=this._getOffset(e,"x"),h=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),h&&(a+=`translateY(${h}px)`),i.transform=a.trim(),r.maxHeight&&(n?i.maxHeight=(0,_t.a1)(r.maxHeight):o&&(i.maxHeight="")),r.maxWidth&&(n?i.maxWidth=(0,_t.a1)(r.maxWidth):o&&(i.maxWidth="")),Ze(this._pane.style,i)}_getExactOverlayY(t,e,i){let n={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===t.overlayY?n.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":n.top=(0,_t.a1)(o.y),n}_getExactOverlayX(t,e,i){let r,n={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?n.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":n.left=(0,_t.a1)(o.x),n}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Ql(t,i),isOriginOutsideView:ho(t,i),isOverlayClipped:Ql(e,i),isOverlayOutsideView:ho(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,n)=>i-Math.max(n,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&(0,_t.FG)(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof l.aKT)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Ze(s,t){for(let e in t)t.hasOwnProperty(e)&&(s[e]=t[e]);return s}function nc(s){if("number"!=typeof s&&null!=s){const[t,e]=s.split(x0);return e&&"px"!==e?null:parseFloat(t)}return s||null}function sc(s){return{top:Math.floor(s.top),right:Math.floor(s.right),bottom:Math.floor(s.bottom),left:Math.floor(s.left),width:Math.floor(s.width),height:Math.floor(s.height)}}const oc="cdk-global-overlay-wrapper";class y0{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(oc),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:o,maxWidth:r,maxHeight:a}=i,c=!("100%"!==n&&"100vw"!==n||r&&"100%"!==r&&"100vw"!==r),h=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,g=this._xOffset,u="rtl"===this._overlayRef.getConfig().direction;let p="",m="",f="";c?f="flex-start":"center"===d?(f="center",u?m=g:p=g):u?"left"===d||"end"===d?(f="flex-end",p=g):("right"===d||"start"===d)&&(f="flex-start",m=g):"left"===d||"start"===d?(f="flex-start",p=g):("right"===d||"end"===d)&&(f="flex-end",m=g),t.position=this._cssPosition,t.marginLeft=c?"0":p,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":m,e.justifyContent=f,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(oc),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let _0=(()=>{class s{constructor(e,i,n,o){this._viewportRuler=e,this._document=i,this._platform=n,this._overlayContainer=o}global(){return new y0}flexibleConnectedTo(e){return new v0(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(ql),l.KVO(pt.qQ),l.KVO(ne.OD),l.KVO(ec))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),w0=0,go=(()=>{class s{constructor(e,i,n,o,r,a,c,h,d,g,u,p){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=n,this._positionBuilder=o,this._keyboardDispatcher=r,this._injector=a,this._ngZone=c,this._document=h,this._directionality=d,this._location=g,this._outsideClickDispatcher=u,this._animationsModuleType=p}create(e){const i=this._createHostElement(),n=this._createPaneElement(i),o=this._createPortalOutlet(n),r=new u0(e);return r.direction=r.direction||this._directionality.value,new b0(o,i,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+w0++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(l.o8S)),new r0(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(i){return new(i||s)(l.KVO(g0),l.KVO(ec),l.KVO(l.OM3),l.KVO(_0),l.KVO(f0),l.KVO(l.zZn),l.KVO(l.SKi),l.KVO(pt.qQ),l.KVO($n.dS),l.KVO(pt.aZ),l.KVO(m0),l.KVO(l.bc$,8))}}static{this.\u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const M0={provide:new l.nKC("cdk-connected-overlay-scroll-strategy"),deps:[go],useFactory:function k0(s){return()=>s.scrollStrategies.reposition()}};let P0=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({providers:[go,M0],imports:[$n.jI,a0,Zl,Zl]})}}return s})();var uo=G(6600);const E0={provide:new l.nKC("mat-tooltip-scroll-strategy"),deps:[go],useFactory:function A0(s){return()=>s.scrollStrategies.reposition({scrollThrottle:20})}};let T0=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({providers:[E0],imports:[Pb.Pd,pt.MD,P0,uo.yE,uo.yE,lo]})}}return s})(),L0=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({imports:[uo.yE]})}}return s})();function po(s,t){(null==t||t>s.length)&&(t=s.length);for(var e=0,i=Array(t);e<t;e++)i[e]=s[e];return i}function rc(s){if(void 0===s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function N(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function ac(s,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,dc(i.key),i)}}function B(s,t,e){return t&&ac(s.prototype,t),e&&ac(s,e),Object.defineProperty(s,"prototype",{writable:!1}),s}function Zi(s,t){var e=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!e){if(Array.isArray(s)||(e=mo(s))||t&&s&&"number"==typeof s.length){e&&(s=e);var i=0,n=function(){};return{s:n,n:function(){return i>=s.length?{done:!0}:{done:!1,value:s[i++]}},e:function(c){throw c},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){e=e.call(s)},n:function(){var c=e.next();return r=c.done,c},e:function(c){a=!0,o=c},f:function(){try{r||null==e.return||e.return()}finally{if(a)throw o}}}}function Ki(s){var t=lc();return function(){var e,i=Zn(s);if(t){var n=Zn(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return function(o,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return rc(o)}(this,e)}}function qn(s,t,e){return(t=dc(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}function Zn(s){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(s)}function Ji(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&fo(s,t)}function lc(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lc=function(){return!!s})()}function cc(s,t){var e=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),e.push.apply(e,i)}return e}function z(s){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(e),!0).forEach(function(i){qn(s,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(e)):cc(Object(e)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(e,i))})}return s}function fo(s,t){return(fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e})(s,t)}function hc(s,t){return function(e){if(Array.isArray(e))return e}(s)||function(e,i){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,c,h=[],d=!0,g=!1;try{if(a=(n=n.call(e)).next,0===i){if(Object(n)!==n)return;d=!1}else for(;!(d=(o=a.call(n)).done)&&(h.push(o.value),h.length!==i);d=!0);}catch(u){g=!0,r=u}finally{try{if(!d&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(g)throw r}}return h}}(s,t)||mo(s,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(s){return function(t){if(Array.isArray(t))return po(t)}(s)||function(t){if(typeof Symbol<"u"&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(s)||mo(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dc(s){var t=function(e,i){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(s);return"symbol"==typeof t?t:t+""}function Bt(s){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(s)}function mo(s,t){if(s){if("string"==typeof s)return po(s,t);var e={}.toString.call(s).slice(8,-1);return"Object"===e&&s.constructor&&(e=s.constructor.name),"Map"===e||"Set"===e?Array.from(s):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?po(s,t):void 0}}var A=function(){function s(){N(this,s)}return B(s,[{key:"shadeRGBColor",value:function(t,e){var i=e.split(","),n=t<0?0:255,o=t<0?-1*t:t,r=parseInt(i[0].slice(4),10),a=parseInt(i[1],10),c=parseInt(i[2],10);return"rgb("+(Math.round((n-r)*o)+r)+","+(Math.round((n-a)*o)+a)+","+(Math.round((n-c)*o)+c)+")"}},{key:"shadeHexColor",value:function(t,e){var i=parseInt(e.slice(1),16),n=t<0?0:255,o=t<0?-1*t:t,r=i>>16,a=i>>8&255,c=255&i;return"#"+(16777216+65536*(Math.round((n-r)*o)+r)+256*(Math.round((n-a)*o)+a)+(Math.round((n-c)*o)+c)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,e){return s.isColorHex(e)?this.shadeHexColor(t,e):this.shadeRGBColor(t,e)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===Bt(t)&&!Array.isArray(t)&&null!=t}},{key:"is",value:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"listToArray",value:function(t){var e,i=[];for(e=0;e<t.length;e++)i[e]=t[e];return i}},{key:"extend",value:function(t,e){var i=this;"function"!=typeof Object.assign&&(Object.assign=function(o){if(null==o)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(o),a=1;a<arguments.length;a++){var c=arguments[a];if(null!=c)for(var h in c)c.hasOwnProperty(h)&&(r[h]=c[h])}return r});var n=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach(function(o){i.isObject(e[o])&&o in t?n[o]=i.extend(t[o],e[o]):Object.assign(n,qn({},o,e[o]))}),n}},{key:"extendArray",value:function(t,e){var i=[];return t.map(function(n){i.push(s.extend(e,n))}),i}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===t||"object"!==Bt(t))return t;if(i.has(t))return i.get(t);if(Array.isArray(t)){i.set(t,e=[]);for(var n=0;n<t.length;n++)e[n]=this.clone(t[n],i)}else if(t instanceof Date)e=new Date(t.getTime());else for(var o in i.set(t,e={}),t)t.hasOwnProperty(o)&&(e[o]=this.clone(t[o],i));return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return"number"==typeof t||null===t?t:parseFloat(t)}},{key:"stripNumber",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(t)?t:parseFloat(t.toPrecision(e))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){return t.toString().includes("e")?Math.round(t):t}},{key:"elementExists",value:function(t){return!(!t||!t.isConnected)}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),i=t.clientHeight,n=t.clientWidth;return i-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[n-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),i]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce(function(e,i){return Array.isArray(i)&&(i=i.reduce(function(n,o){return n.length>o.length?n:o})),e.length>i.length?e:i},0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var i=t.replace("#","");i=i.match(new RegExp("(.{"+i.length/3+"})","g"));for(var n=0;n<i.length;n++)i[n]=parseInt(1===i[n].length?i[n]+i[n]:i[n],16);return void 0!==e&&i.push(e),"rgba("+i.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var i=[],n=2*Math.PI/e,o=0;o<e;o++){var r={};r.x=t*Math.sin(o*n),r.y=-t*Math.cos(o*n),i.push(r)}return i}},{key:"polarToCartesian",value:function(t,e,i,n){var o=(n-90)*Math.PI/180;return{x:t+i*Math.cos(o),y:e+i*Math.sin(o)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return t.toString().slice().replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,i){if(i>=t.length)for(var n=i-t.length+1;n--;)t.push(void 0);return t.splice(i,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style.key=e[i])}},{key:"preciseAddition",value:function(t,e){var i=(String(t).split(".")[1]||"").length,n=(String(e).split(".")[1]||"").length,o=Math.pow(10,Math.max(i,n));return(Math.round(t*o)+Math.round(e*o))/o}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isMsEdge",value:function(){var t=window.navigator.userAgent,e=t.indexOf("Edge/");return e>0&&parseInt(t.substring(e+5,t.indexOf(".",e)),10)}},{key:"getGCD",value:function(t,e){var n=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(t,e))));for(t=Math.round(Math.abs(t)*n),e=Math.round(Math.abs(e)*n);e;){var o=e;e=t%e,t=o}return t/n}},{key:"getPrimeFactors",value:function(t){for(var e=[],i=2;t>=2;)t%i==0?(e.push(i),t/=i):i++;return e}},{key:"mod",value:function(t,e){var n=Math.pow(10,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:7)-Math.floor(Math.log10(Math.max(t,e))));return(t=Math.round(Math.abs(t)*n))%(e=Math.round(Math.abs(e)*n))/n}}]),s}(),bi=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"animateLine",value:function(t,e,i,n){t.attr(e).animate(n).attr(i)}},{key:"animateMarker",value:function(t,e,i,n){t.attr({opacity:0}).animate(e).attr({opacity:1}).after(function(){n()})}},{key:"animateRect",value:function(t,e,i,n,o){t.attr(e).animate(n).attr(i).after(function(){return o()})}},{key:"animatePathsGradually",value:function(t){var d=this.w,g=0;d.config.chart.animations.animateGradually.enabled&&(g=d.config.chart.animations.animateGradually.delay),d.config.chart.animations.dynamicAnimation.enabled&&d.globals.dataChanged&&"bar"!==d.config.chart.type&&(g=0),this.morphSVG(t.el,t.realIndex,t.j,"line"!==d.config.chart.type||d.globals.comboCharts?t.fill:"stroke",t.pathFrom,t.pathTo,t.speed,t.delay*g)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(t){var e=t.el;e.classList.remove("apexcharts-element-hidden"),e.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,i,n,o,r,a,c){var h=this,d=this.w;o||(o=t.attr("pathFrom")),r||(r=t.attr("pathTo"));var g=function(u){return"radar"===d.config.chart.type&&(a=1),"M 0 ".concat(d.globals.gridHeight)};(!o||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=g()),(!r.trim()||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=g()),d.globals.shouldAnimate||(a=1),t.plot(o).animate(1,c).plot(o).animate(a,c).plot(r).after(function(){A.isNumber(i)?i===d.globals.series[d.globals.maxValsInArrayIndex].length-2&&d.globals.shouldAnimate&&h.animationCompleted(t):"none"!==n&&d.globals.shouldAnimate&&(!d.globals.comboCharts&&e===d.globals.series.length-1||d.globals.comboCharts)&&h.animationCompleted(t),h.showDelayedElements()})}}]),s}();const bo={},gc=[];function J(s,t){if(Array.isArray(s))for(const e of s)J(e,t);else if("object"!=typeof s)uc(Object.getOwnPropertyNames(t)),bo[s]=Object.assign(bo[s]||{},t);else for(const e in s)J(e,s[e])}function Gt(s){return bo[s]||{}}function uc(s){gc.push(...s)}function xo(s,t){let e;const i=s.length,n=[];for(e=0;e<i;e++)n.push(t(s[e]));return n}function vo(s){return s%360*Math.PI/180}function xi(s){return s.charAt(0).toUpperCase()+s.slice(1)}function vi(s,t,e,i){return null!=t&&null!=e||(i=i||s.bbox(),null==t?t=i.width/i.height*e:null==e&&(e=i.height/i.width*t)),{width:t,height:e}}function yo(s,t){const e=s.origin;let i=null!=s.ox?s.ox:null!=s.originX?s.originX:"center",n=null!=s.oy?s.oy:null!=s.originY?s.originY:"center";null!=e&&([i,n]=Array.isArray(e)?e:"object"==typeof e?[e.x,e.y]:[e,e]);const o="string"==typeof i,r="string"==typeof n;if(o||r){const{height:a,width:c,x:h,y:d}=t.bbox();o&&(i=i.includes("left")?h:i.includes("right")?h+c:h+c/2),r&&(n=n.includes("top")?d:n.includes("bottom")?d+a:d+a/2)}return[i,n]}const D0=new Set(["desc","metadata","title"]),_o=s=>D0.has(s.nodeName),pc=(s,t,e={})=>{const i={...t};for(const n in i)i[n].valueOf()===e[n]&&delete i[n];Object.keys(i).length?s.node.setAttribute("data-svgjs",JSON.stringify(i)):(s.node.removeAttribute("data-svgjs"),s.node.removeAttribute("svgjs:data"))},wo="http://www.w3.org/2000/svg",Co="http://www.w3.org/2000/xmlns/",yi="http://www.w3.org/1999/xlink",nt={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function Qi(){return nt.window}let ko=class{};const Ke={},Mo="___SYMBOL___ROOT___";function tn(s,t=wo){return nt.document.createElementNS(t,s)}function Ht(s,t=!1){if(s instanceof ko)return s;if("object"==typeof s)return Po(s);if(null==s)return new Ke[Mo];if("string"==typeof s&&"<"!==s.charAt(0))return Po(nt.document.querySelector(s));const e=t?nt.document.createElement("div"):tn("svg");return e.innerHTML=s,s=Po(e.firstChild),e.removeChild(e.firstChild),s}function gt(s,t){return t&&(t instanceof nt.window.Node||t.ownerDocument&&t instanceof t.ownerDocument.defaultView.Node)?t:tn(s)}function Jt(s){if(!s)return null;if(s.instance instanceof ko)return s.instance;if("#document-fragment"===s.nodeName)return new Ke.Fragment(s);let t=xi(s.nodeName||"Dom");return"LinearGradient"===t||"RadialGradient"===t?t="Gradient":Ke[t]||(t="Dom"),new Ke[t](s)}let Po=Jt;function st(s,t=s.name,e=!1){return Ke[t]=s,e&&(Ke[Mo]=s),uc(Object.getOwnPropertyNames(s.prototype)),s}let F0=1e3;function fc(s){return"Svgjs"+xi(s)+F0++}function mc(s){for(let t=s.children.length-1;t>=0;t--)mc(s.children[t]);return s.id&&(s.id=fc(s.nodeName)),s}function U(s,t){let e,i;for(i=(s=Array.isArray(s)?s:[s]).length-1;i>=0;i--)for(e in t)s[i].prototype[e]=t[e]}function ut(s){return function(...t){const e=t[t.length-1];return!e||e.constructor!==Object||e instanceof Array?s.apply(this,t):s.apply(this,t.slice(0,-1)).attr(e)}}J("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){const s=this.position();return this.parent().add(this.remove(),s+1),this},backward:function(){const s=this.position();return this.parent().add(this.remove(),s?s-1:0),this},front:function(){return this.parent().add(this.remove()),this},back:function(){return this.parent().add(this.remove(),0),this},before:function(s){(s=Ht(s)).remove();const t=this.position();return this.parent().add(s,t),this},after:function(s){(s=Ht(s)).remove();const t=this.position();return this.parent().add(s,t+1),this},insertBefore:function(s){return(s=Ht(s)).before(this),this},insertAfter:function(s){return(s=Ht(s)).after(this),this}});const bc=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,z0=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,j0=/rgb\((\d+),(\d+),(\d+)\)/,V0=/(#[a-z_][a-z0-9\-_]*)/i,N0=/\)\s*,?\s*/,B0=/\s/g,xc=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,vc=/^rgb\(/,yc=/^(\s+)?$/,_c=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,H0=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,ye=/[\s,]+/,Oo=/[MLHVCSQTAZ]/i;function Y0(s){const t=Math.round(s),e=Math.max(0,Math.min(255,t)).toString(16);return 1===e.length?"0"+e:e}function _i(s,t){for(let e=t.length;e--;)if(null==s[t[e]])return!1;return!0}function So(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+6*(t-s)*e:e<.5?t:e<2/3?s+(t-s)*(2/3-e)*6:s}J("Dom",{classes:function(){const s=this.attr("class");return null==s?[]:s.trim().split(ye)},hasClass:function(s){return-1!==this.classes().indexOf(s)},addClass:function(s){if(!this.hasClass(s)){const t=this.classes();t.push(s),this.attr("class",t.join(" "))}return this},removeClass:function(s){return this.hasClass(s)&&this.attr("class",this.classes().filter(function(t){return t!==s}).join(" ")),this},toggleClass:function(s){return this.hasClass(s)?this.removeClass(s):this.addClass(s)}}),J("Dom",{css:function(s,t){const e={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter(function(i){return!!i.length}).forEach(function(i){const n=i.split(/\s*:\s*/);e[n[0]]=n[1]}),e;if(arguments.length<2){if(Array.isArray(s)){for(const i of s)e[i]=this.node.style.getPropertyValue(i);return e}if("string"==typeof s)return this.node.style.getPropertyValue(s);if("object"==typeof s)for(const i in s)this.node.style.setProperty(i,null==s[i]||yc.test(s[i])?"":s[i])}return 2===arguments.length&&this.node.style.setProperty(s,null==t||yc.test(t)?"":t),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),J("Dom",{data:function(s,t,e){if(null==s)return this.data(xo(function(i,n){let o;const r=i.length,a=[];for(o=0;o<r;o++)n(i[o])&&a.push(i[o]);return a}(this.node.attributes,i=>0===i.nodeName.indexOf("data-")),i=>i.nodeName.slice(5)));if(s instanceof Array){const i={};for(const n of s)i[n]=this.data(n);return i}if("object"==typeof s)for(t in s)this.data(t,s[t]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+s))}catch{return this.attr("data-"+s)}else this.attr("data-"+s,null===t?null:!0===e||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this}}),J("Dom",{remember:function(s,t){if("object"==typeof arguments[0])for(const e in s)this.remember(e,s[e]);else{if(1===arguments.length)return this.memory()[s];this.memory()[s]=t}return this},forget:function(){if(0===arguments.length)this._memory={};else for(let s=arguments.length-1;s>=0;s--)delete this.memory()[arguments[s]];return this},memory:function(){return this._memory=this._memory||{}}});class dt{constructor(...t){this.init(...t)}static isColor(t){return t&&(t instanceof dt||this.isRgb(t)||this.test(t))}static isRgb(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}static random(t="vibrant",e){const{random:i,round:n,sin:o,PI:r}=Math;if("vibrant"===t){const a=24*i()+57,c=38*i()+45,h=360*i();return new dt(a,c,h,"lch")}if("sine"===t){const a=n(80*o(2*r*(e=e??i())/.5+.01)+150),c=n(50*o(2*r*e/.5+4.6)+200),h=n(100*o(2*r*e/.5+2.3)+150);return new dt(a,c,h)}if("pastel"===t){const a=8*i()+86,c=17*i()+9,h=360*i();return new dt(a,c,h,"lch")}if("dark"===t){const a=10+10*i(),c=50*i()+86,h=360*i();return new dt(a,c,h,"lch")}if("rgb"===t){const a=255*i(),c=255*i(),h=255*i();return new dt(a,c,h)}if("lab"===t){const a=100*i(),c=256*i()-128,h=256*i()-128;return new dt(a,c,h,"lab")}if("grey"===t){const a=255*i();return new dt(a,a,a)}throw new Error("Unsupported random color mode")}static test(t){return"string"==typeof t&&(xc.test(t)||vc.test(t))}cmyk(){const{_a:t,_b:e,_c:i}=this.rgb(),[n,o,r]=[t,e,i].map(c=>c/255),a=Math.min(1-n,1-o,1-r);return 1===a?new dt(0,0,0,1,"cmyk"):new dt((1-n-a)/(1-a),(1-o-a)/(1-a),(1-r-a)/(1-a),a,"cmyk")}hsl(){const{_a:t,_b:e,_c:i}=this.rgb(),[n,o,r]=[t,e,i].map(u=>u/255),a=Math.max(n,o,r),c=Math.min(n,o,r),h=(a+c)/2,d=a===c,g=a-c;return new dt(360*(d?0:a===n?((o-r)/g+(o<r?6:0))/6:a===o?((r-n)/g+2)/6:a===r?((n-o)/g+4)/6:0),100*(d?0:h>.5?g/(2-a-c):g/(a+c)),100*h,"hsl")}init(t=0,e=0,i=0,n=0,o="rgb"){if(t=t||0,this.space)for(const g in this.space)delete this[this.space[g]];if("number"==typeof t)o="string"==typeof n?n:o,n="string"==typeof n?0:n,Object.assign(this,{_a:t,_b:e,_c:i,_d:n,space:o});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){const g=function(u,p){const m=_i(u,"rgb")?{_a:u.r,_b:u.g,_c:u.b,_d:0,space:"rgb"}:_i(u,"xyz")?{_a:u.x,_b:u.y,_c:u.z,_d:0,space:"xyz"}:_i(u,"hsl")?{_a:u.h,_b:u.s,_c:u.l,_d:0,space:"hsl"}:_i(u,"lab")?{_a:u.l,_b:u.a,_c:u.b,_d:0,space:"lab"}:_i(u,"lch")?{_a:u.l,_b:u.c,_c:u.h,_d:0,space:"lch"}:_i(u,"cmyk")?{_a:u.c,_b:u.m,_c:u.y,_d:u.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return m.space=p||m.space,m}(t,e);Object.assign(this,g)}else if("string"==typeof t)if(vc.test(t)){const g=t.replace(B0,""),[u,p,m]=j0.exec(g).slice(1,4).map(f=>parseInt(f));Object.assign(this,{_a:u,_b:p,_c:m,_d:0,space:"rgb"})}else{if(!xc.test(t))throw Error("Unsupported string format, can't construct Color");{const g=f=>parseInt(f,16),[,u,p,m]=z0.exec((f=t,4===f.length?["#",f.substring(1,2),f.substring(1,2),f.substring(2,3),f.substring(2,3),f.substring(3,4),f.substring(3,4)].join(""):f)).map(g);Object.assign(this,{_a:u,_b:p,_c:m,_d:0,space:"rgb"})}}var f;const{_a:r,_b:a,_c:c,_d:h}=this;Object.assign(this,"rgb"===this.space?{r,g:a,b:c}:"xyz"===this.space?{x:r,y:a,z:c}:"hsl"===this.space?{h:r,s:a,l:c}:"lab"===this.space?{l:r,a,b:c}:"lch"===this.space?{l:r,c:a,h:c}:"cmyk"===this.space?{c:r,m:a,y:c,k:h}:{})}lab(){const{x:t,y:e,z:i}=this.xyz();return new dt(116*e-16,500*(t-e),200*(e-i),"lab")}lch(){const{l:t,a:e,b:i}=this.lab(),n=Math.sqrt(e**2+i**2);let o=180*Math.atan2(i,e)/Math.PI;return o<0&&(o*=-1,o=360-o),new dt(t,n,o,"lch")}rgb(){if("rgb"===this.space)return this;if("lab"===(t=this.space)||"xyz"===t||"lch"===t){let{x:e,y:i,z:n}=this;if("lab"===this.space||"lch"===this.space){let{l:p,a:m,b:f}=this;if("lch"===this.space){const{c:k,h:C}=this,M=Math.PI/180;m=k*Math.cos(M*C),f=k*Math.sin(M*C)}const b=(p+16)/116,x=m/500+b,v=b-f/200,_=16/116,w=.008856,y=7.787;e=.95047*(x**3>w?x**3:(x-_)/y),i=1*(b**3>w?b**3:(b-_)/y),n=1.08883*(v**3>w?v**3:(v-_)/y)}const o=3.2406*e+-1.5372*i+-.4986*n,r=-.9689*e+1.8758*i+.0415*n,a=.0557*e+-.204*i+1.057*n,c=Math.pow,h=.0031308,d=o>h?1.055*c(o,1/2.4)-.055:12.92*o,g=r>h?1.055*c(r,1/2.4)-.055:12.92*r,u=a>h?1.055*c(a,1/2.4)-.055:12.92*a;return new dt(255*d,255*g,255*u)}if("hsl"===this.space){let{h:e,s:i,l:n}=this;if(e/=360,i/=100,n/=100,0===i)return n*=255,new dt(n,n,n);const o=n<.5?n*(1+i):n+i-n*i,r=2*n-o,a=255*So(r,o,e+1/3),c=255*So(r,o,e),h=255*So(r,o,e-1/3);return new dt(a,c,h)}if("cmyk"===this.space){const{c:e,m:i,y:n,k:o}=this,r=255*(1-Math.min(1,e*(1-o)+o)),a=255*(1-Math.min(1,i*(1-o)+o)),c=255*(1-Math.min(1,n*(1-o)+o));return new dt(r,a,c)}return this;var t}toArray(){const{_a:t,_b:e,_c:i,_d:n,space:o}=this;return[t,e,i,n,o]}toHex(){const[t,e,i]=this._clamped().map(Y0);return`#${t}${e}${i}`}toRgb(){const[t,e,i]=this._clamped();return`rgb(${t},${e},${i})`}toString(){return this.toHex()}xyz(){const{_a:t,_b:e,_c:i}=this.rgb(),[n,o,r]=[t,e,i].map(b=>b/255),a=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,c=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,h=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,d=(.4124*a+.3576*c+.1805*h)/.95047,g=(.2126*a+.7152*c+.0722*h)/1,u=(.0193*a+.1192*c+.9505*h)/1.08883,p=d>.008856?Math.pow(d,1/3):7.787*d+16/116,m=g>.008856?Math.pow(g,1/3):7.787*g+16/116,f=u>.008856?Math.pow(u,1/3):7.787*u+16/116;return new dt(p,m,f,"xyz")}_clamped(){const{_a:t,_b:e,_c:i}=this.rgb(),{max:n,min:o,round:r}=Math;return[t,e,i].map(a=>n(0,o(r(a),255)))}}class at{constructor(...t){this.init(...t)}clone(){return new at(this)}init(t,e){const o=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==o.x?0:o.x,this.y=null==o.y?0:o.y,this}toArray(){return[this.x,this.y]}transform(t){return this.clone().transformO(t)}transformO(t){W.isMatrixLike(t)||(t=new W(t));const{x:e,y:i}=this;return this.x=t.a*e+t.c*i+t.e,this.y=t.b*e+t.d*i+t.f,this}}function wi(s,t,e){return Math.abs(t-s)<(e||1e-6)}class W{constructor(...t){this.init(...t)}static formatTransforms(t){const e="both"===t.flip||!0===t.flip,i=t.flip&&(e||"x"===t.flip)?-1:1,n=t.flip&&(e||"y"===t.flip)?-1:1,o=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,r=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*i:isFinite(t.scale)?t.scale*i:isFinite(t.scaleX)?t.scaleX*i:i,c=t.scale&&t.scale.length?t.scale[1]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleY)?t.scaleY*n:n,h=t.shear||0,d=t.rotate||t.theta||0,g=new at(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),u=g.x,p=g.y,m=new at(t.position||t.px||t.positionX||NaN,t.py||t.positionY||NaN),f=m.x,b=m.y,x=new at(t.translate||t.tx||t.translateX,t.ty||t.translateY),v=x.x,_=x.y,w=new at(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:a,scaleY:c,skewX:o,skewY:r,shear:h,theta:d,rx:w.x,ry:w.y,tx:v,ty:_,ox:u,oy:p,px:f,py:b}}static fromArray(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}static isMatrixLike(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}static matrixMultiply(t,e,i){const o=t.b*e.a+t.d*e.b,r=t.a*e.c+t.c*e.d,a=t.b*e.c+t.d*e.d,c=t.e+t.a*e.e+t.c*e.f,h=t.f+t.b*e.e+t.d*e.f;return i.a=t.a*e.a+t.c*e.b,i.b=o,i.c=r,i.d=a,i.e=c,i.f=h,i}around(t,e,i){return this.clone().aroundO(t,e,i)}aroundO(t,e,i){const n=t||0,o=e||0;return this.translateO(-n,-o).lmultiplyO(i).translateO(n,o)}clone(){return new W(this)}decompose(t=0,e=0){const i=this.a,n=this.b,o=this.c,r=this.d,a=this.e,c=this.f,h=i*r-n*o,d=h>0?1:-1,g=d*Math.sqrt(i*i+n*n),u=Math.atan2(d*n,d*i),p=180/Math.PI*u,m=Math.cos(u),f=Math.sin(u),b=(i*o+n*r)/h,x=o*g/(b*i-n)||r*g/(b*n+i);return{scaleX:g,scaleY:x,shear:b,rotate:p,translateX:a-t+t*m*g+e*(b*m*g-f*x),translateY:c-e+t*f*g+e*(b*f*g+m*x),originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(t){if(t===this)return!0;const e=new W(t);return wi(this.a,e.a)&&wi(this.b,e.b)&&wi(this.c,e.c)&&wi(this.d,e.d)&&wi(this.e,e.e)&&wi(this.f,e.f)}flip(t,e){return this.clone().flipO(t,e)}flipO(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}init(t){const e=W.fromArray([1,0,0,1,0,0]);return t=t instanceof Tt?t.matrixify():"string"==typeof t?W.fromArray(t.split(ye).map(parseFloat)):Array.isArray(t)?W.fromArray(t):"object"==typeof t&&W.isMatrixLike(t)?t:"object"==typeof t?(new W).transform(t):6===arguments.length?W.fromArray([].slice.call(arguments)):e,this.a=null!=t.a?t.a:e.a,this.b=null!=t.b?t.b:e.b,this.c=null!=t.c?t.c:e.c,this.d=null!=t.d?t.d:e.d,this.e=null!=t.e?t.e:e.e,this.f=null!=t.f?t.f:e.f,this}inverse(){return this.clone().inverseO()}inverseO(){const t=this.a,e=this.b,i=this.c,n=this.d,o=this.e,r=this.f,a=t*n-e*i;if(!a)throw new Error("Cannot invert "+this);const c=n/a,h=-e/a,d=-i/a,g=t/a,u=-(c*o+d*r),p=-(h*o+g*r);return this.a=c,this.b=h,this.c=d,this.d=g,this.e=u,this.f=p,this}lmultiply(t){return this.clone().lmultiplyO(t)}lmultiplyO(t){const e=t instanceof W?t:new W(t);return W.matrixMultiply(e,this,this)}multiply(t){return this.clone().multiplyO(t)}multiplyO(t){const e=t instanceof W?t:new W(t);return W.matrixMultiply(this,e,this)}rotate(t,e,i){return this.clone().rotateO(t,e,i)}rotateO(t,e=0,i=0){t=vo(t);const n=Math.cos(t),o=Math.sin(t),{a:r,b:a,c,d:h,e:d,f:g}=this;return this.a=r*n-a*o,this.b=a*n+r*o,this.c=c*n-h*o,this.d=h*n+c*o,this.e=d*n-g*o+i*o-e*n+e,this.f=g*n+d*o-e*o-i*n+i,this}scale(){return this.clone().scaleO(...arguments)}scaleO(t,e=t,i=0,n=0){3===arguments.length&&(n=i,i=e,e=t);const{a:o,b:r,c:a,d:c,e:h,f:d}=this;return this.a=o*t,this.b=r*e,this.c=a*t,this.d=c*e,this.e=h*t-i*t+i,this.f=d*e-n*e+n,this}shear(t,e,i){return this.clone().shearO(t,e,i)}shearO(t,e=0,i=0){const{a:n,b:o,c:r,d:a,e:c,f:h}=this;return this.a=n+o*t,this.c=r+a*t,this.e=c+h*t-i*t,this}skew(){return this.clone().skewO(...arguments)}skewO(t,e=t,i=0,n=0){3===arguments.length&&(n=i,i=e,e=t),t=vo(t),e=vo(e);const o=Math.tan(t),r=Math.tan(e),{a,b:c,c:h,d,e:g,f:u}=this;return this.a=a+c*o,this.b=c+a*r,this.c=h+d*o,this.d=d+h*r,this.e=g+u*o-n*o,this.f=u+g*r-i*r,this}skewX(t,e,i){return this.skew(t,0,e,i)}skewY(t,e,i){return this.skew(0,t,e,i)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(t){if(W.isMatrixLike(t))return new W(t).multiplyO(this);const e=W.formatTransforms(t),{x:i,y:n}=new at(e.ox,e.oy).transform(this),o=(new W).translateO(e.rx,e.ry).lmultiplyO(this).translateO(-i,-n).scaleO(e.scaleX,e.scaleY).skewO(e.skewX,e.skewY).shearO(e.shear).rotateO(e.theta).translateO(i,n);if(isFinite(e.px)||isFinite(e.py)){const r=new at(i,n).transform(o),a=isFinite(e.px)?e.px-r.x:0,c=isFinite(e.py)?e.py-r.y:0;o.translateO(a,c)}return o.translateO(e.tx,e.ty),o}translate(t,e){return this.clone().translateO(t,e)}translateO(t,e){return this.e+=t||0,this.f+=e||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function Te(){if(!Te.nodes){const s=Ht().size(2,0);s.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),s.attr("focusable","false"),s.attr("aria-hidden","true");const t=s.path().node;Te.nodes={svg:s,path:t}}return Te.nodes.svg.node.parentNode||Te.nodes.svg.addTo(nt.document.body||nt.document.documentElement),Te.nodes}function wc(s){return!(s.width||s.height||s.x||s.y)}st(W,"Matrix");class Ct{constructor(...t){this.init(...t)}addOffset(){return this.x+=nt.window.pageXOffset,this.y+=nt.window.pageYOffset,new Ct(this)}init(t){return t="string"==typeof t?t.split(ye).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return wc(this)}merge(t){const e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width)-e,o=Math.max(this.y+this.height,t.y+t.height)-i;return new Ct(e,i,n,o)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(t){t instanceof W||(t=new W(t));let e=1/0,i=-1/0,n=1/0,o=-1/0;return[new at(this.x,this.y),new at(this.x2,this.y),new at(this.x,this.y2),new at(this.x2,this.y2)].forEach(function(r){r=r.transform(t),e=Math.min(e,r.x),i=Math.max(i,r.x),n=Math.min(n,r.y),o=Math.max(o,r.y)}),new Ct(e,n,i-e,o-n)}}function Cc(s,t,e){let i;try{if(i=t(s.node),wc(i)&&(n=s.node)!==nt.document&&!(nt.document.documentElement.contains||function(o){for(;o.parentNode;)o=o.parentNode;return o===nt.document}).call(nt.document.documentElement,n))throw new Error("Element not in the dom")}catch{i=e(s)}var n;return i}J({viewbox:{viewbox(s,t,e,i){return null==s?new Ct(this.attr("viewBox")):this.attr("viewBox",new Ct(s,t,e,i))},zoom(s,t){let{width:e,height:i}=this.attr(["width","height"]);if((e||i)&&"string"!=typeof e&&"string"!=typeof i||(e=this.node.clientWidth,i=this.node.clientHeight),!e||!i)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),o=e/n.width,r=i/n.height,a=Math.min(o,r);if(null==s)return a;let c=a/s;c===1/0&&(c=Number.MAX_SAFE_INTEGER/100),t=t||new at(e/2/o+n.x,i/2/r+n.y);const h=new Ct(n).transform(new W({scale:c,origin:t}));return this.viewbox(h)}}}),st(Ct,"Box");class Je extends Array{constructor(t=[],...e){if(super(t,...e),"number"==typeof t)return this;this.length=0,this.push(...t)}}U([Je],{each(s,...t){return this.map("function"==typeof s?(e,i,n)=>s.call(e,e,i,n):e=>e[s](...t))},toArray(){return Array.prototype.concat.apply([],this)}});const X0=["toArray","constructor","each"];function Qe(s,t){return new Je(xo((t||nt.document).querySelectorAll(s),function(e){return Jt(e)}))}Je.extend=function(s){s=s.reduce((t,e)=>(X0.includes(e)||"_"===e[0]||(e in Array.prototype&&(t["$"+e]=Array.prototype[e]),t[e]=function(...i){return this.each(e,...i)}),t),{}),U([Je],s)};let W0=0;const kc={};function Mc(s){let t=s.getEventHolder();return t===nt.window&&(t=kc),t.events||(t.events={}),t.events}function Ao(s){return s.getEventTarget()}function _e(s,t,e,i,n){const o=e.bind(i||s),r=Ht(s),a=Mc(r),c=Ao(r);t=Array.isArray(t)?t:t.split(ye),e._svgjsListenerId||(e._svgjsListenerId=++W0),t.forEach(function(h){const d=h.split(".")[0],g=h.split(".")[1]||"*";a[d]=a[d]||{},a[d][g]=a[d][g]||{},a[d][g][e._svgjsListenerId]=o,c.addEventListener(d,o,n||!1)})}function Qt(s,t,e,i){const n=Ht(s),o=Mc(n),r=Ao(n);("function"!=typeof e||(e=e._svgjsListenerId))&&(t=Array.isArray(t)?t:(t||"").split(ye)).forEach(function(a){const c=a&&a.split(".")[0],h=a&&a.split(".")[1];let d,g;if(e)o[c]&&o[c][h||"*"]&&(r.removeEventListener(c,o[c][h||"*"][e],i||!1),delete o[c][h||"*"][e]);else if(c&&h){if(o[c]&&o[c][h]){for(g in o[c][h])Qt(r,[c,h].join("."),g);delete o[c][h]}}else if(h)for(a in o)for(d in o[a])h===d&&Qt(r,[a,h].join("."));else if(c){if(o[c]){for(d in o[c])Qt(r,[c,d].join("."));delete o[c]}}else{for(a in o)Qt(r,a);!function(u){let p=u.getEventHolder();p===nt.window&&(p=kc),p.events&&(p.events={})}(n)}})}class en extends ko{addEventListener(){}dispatch(t,e,i){return function(n,o,r,a){const c=Ao(n);return o instanceof nt.window.Event||(o=new nt.window.CustomEvent(o,{detail:r,cancelable:!0,...a})),c.dispatchEvent(o),o}(this,t,e,i)}dispatchEvent(t){const e=this.getEventHolder().events;if(!e)return!0;const i=e[t.type];for(const n in i)for(const o in i[n])i[n][o](t);return!t.defaultPrevented}fire(t,e,i){return this.dispatch(t,e,i),this}getEventHolder(){return this}getEventTarget(){return this}off(t,e,i){return Qt(this,t,e,i),this}on(t,e,i,n){return _e(this,t,e,i,n),this}removeEventListener(){}}function Pc(){}st(en,"EventTarget");const $0={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class ti extends Array{constructor(...t){super(...t),this.init(...t)}clone(){return new this.constructor(this)}init(t){return"number"==typeof t||(this.length=0,this.push(...this.parse(t))),this}parse(t=[]){return t instanceof Array?t:t.trim().split(ye).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const t=[];return t.push(...this),t}}class Z{constructor(...t){this.init(...t)}convert(t){return new Z(this.value,t)}divide(t){return t=new Z(t),new Z(this/t,this.unit||t.unit)}init(t,e){return e=Array.isArray(t)?t[1]:e,t=Array.isArray(t)?t[0]:t,this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(bc))&&(this.value=parseFloat(e[1]),"%"===e[5]?this.value/=100:"s"===e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof Z&&(this.value=t.valueOf(),this.unit=t.unit),this}minus(t){return t=new Z(t),new Z(this-t,this.unit||t.unit)}plus(t){return t=new Z(t),new Z(this+t,this.unit||t.unit)}times(t){return t=new Z(t),new Z(this*t,this.unit||t.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const q0=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Oc=[];class Re extends en{constructor(t,e){super(),this.node=t,this.type=t.nodeName,e&&t!==e&&this.attr(e)}add(t,e){return(t=Ht(t)).removeNamespace&&this.node instanceof nt.window.SVGElement&&t.removeNamespace(),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}addTo(t,e){return Ht(t).put(this,e)}children(){return new Je(xo(this.node.children,function(t){return Jt(t)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(t=!0,e=!0){this.writeDataToDom();let i=this.node.cloneNode(t);return e&&(i=mc(i)),new this.constructor(i)}each(t,e){const i=this.children();let n,o;for(n=0,o=i.length;n<o;n++)t.apply(i[n],[n,i]),e&&i[n].each(t,e);return this}element(t,e){return this.put(new Re(tn(t),e))}first(){return Jt(this.node.firstChild)}get(t){return Jt(this.node.childNodes[t])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(t){return this.index(t)>=0}html(t,e){return this.xml(t,e,"http://www.w3.org/1999/xhtml")}id(t){return void 0!==t||this.node.id||(this.node.id=fc(this.type)),this.attr("id",t)}index(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}last(){return Jt(this.node.lastChild)}matches(t){const e=this.node,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,t)}parent(t){let e=this;if(!e.node.parentNode)return null;if(e=Jt(e.node.parentNode),!t)return e;do{if("string"==typeof t?e.matches(t):e instanceof t)return e}while(e=Jt(e.node.parentNode));return e}put(t,e){return t=Ht(t),this.add(t,e),t}putIn(t,e){return Ht(t).add(this,e)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(t){return this.node.removeChild(t.node),this}replace(t){return t=Ht(t),this.node.parentNode&&this.node.parentNode.replaceChild(t.node,this.node),t}round(t=2,e=null){const i=10**t,n=this.attr(e);for(const o in n)"number"==typeof n[o]&&(n[o]=Math.round(n[o]*i)/i);return this.attr(n),this}svg(t,e){return this.xml(t,e,wo)}toString(){return this.id()}words(t){return this.node.textContent=t,this}wrap(t){const e=this.parent();if(!e)return this.addTo(t);const i=e.index(this);return e.put(t,i).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();let a=this;if(null!=t){if(a=Jt(a.node.cloneNode(!0)),e){const c=t(a);if(a=c||a,!1===c)return""}a.each(function(){const c=t(this),h=c||this;!1===c?this.remove():c&&this!==h&&this.replace(h)},!0)}return e?a.node.outerHTML:a.node.innerHTML}e=null!=e&&e;const n=tn("wrapper",i),o=nt.document.createDocumentFragment();n.innerHTML=t;for(let a=n.children.length;a--;)o.appendChild(n.firstElementChild);const r=this.parent();return e?this.replace(o)&&r:this.add(o)}}U(Re,{attr:function(s,t,e){if(null==s){s={},t=this.node.attributes;for(const i of t)s[i.nodeName]=_c.test(i.nodeValue)?parseFloat(i.nodeValue):i.nodeValue;return s}if(s instanceof Array)return s.reduce((i,n)=>(i[n]=this.attr(n),i),{});if("object"==typeof s&&s.constructor===Object)for(t in s)this.attr(t,s[t]);else if(null===t)this.node.removeAttribute(s);else{if(null==t)return null==(t=this.node.getAttribute(s))?$0[s]:_c.test(t)?parseFloat(t):t;"number"==typeof(t=Oc.reduce((i,n)=>n(s,i,this),t))?t=new Z(t):q0.has(s)&&dt.isColor(t)?t=new dt(t):t.constructor===Array&&(t=new ti(t)),"leading"===s?this.leading&&this.leading(t):"string"==typeof e?this.node.setAttributeNS(e,s,t.toString()):this.node.setAttribute(s,t.toString()),!this.rebuild||"font-size"!==s&&"x"!==s||this.rebuild()}return this},find:function(s){return Qe(s,this.node)},findOne:function(s){return Jt(this.node.querySelector(s))}}),st(Re,"Dom");let Tt=class extends Re{constructor(s,t){super(s,t),this.dom={},this.node.instance=this,(s.hasAttribute("data-svgjs")||s.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(s.getAttribute("data-svgjs"))??JSON.parse(s.getAttribute("svgjs:data"))??{})}center(s,t){return this.cx(s).cy(t)}cx(s){return null==s?this.x()+this.width()/2:this.x(s-this.width()/2)}cy(s){return null==s?this.y()+this.height()/2:this.y(s-this.height()/2)}defs(){const s=this.root();return s&&s.defs()}dmove(s,t){return this.dx(s).dy(t)}dx(s=0){return this.x(new Z(s).plus(this.x()))}dy(s=0){return this.y(new Z(s).plus(this.y()))}getEventHolder(){return this}height(s){return this.attr("height",s)}move(s,t){return this.x(s).y(t)}parents(s=this.root()){const t="string"==typeof s;t||(s=Ht(s));const e=new Je;let i=this;for(;(i=i.parent())&&i.node!==nt.document&&"#document-fragment"!==i.nodeName&&(e.push(i),t||i.node!==s.node)&&(!t||!i.matches(s));)if(i.node===this.root().node)return null;return e}reference(s){if(!(s=this.attr(s)))return null;const t=(s+"").match(V0);return t?Ht(t[1]):null}root(){const s=this.parent(Ke[Mo]);return s&&s.root()}setData(s){return this.dom=s,this}size(s,t){const e=vi(this,s,t);return this.width(new Z(e.width)).height(new Z(e.height))}width(s){return this.attr("width",s)}writeDataToDom(){return pc(this,this.dom),super.writeDataToDom()}x(s){return this.attr("x",s)}y(s){return this.attr("y",s)}};U(Tt,{bbox:function(){const s=Cc(this,t=>t.getBBox(),t=>{try{const e=t.clone().addTo(Te().svg).show(),i=e.node.getBBox();return e.remove(),i}catch(e){throw new Error(`Getting bbox of element "${t.node.nodeName}" is not possible: ${e.toString()}`)}});return new Ct(s)},rbox:function(s){const t=Cc(this,i=>i.getBoundingClientRect(),i=>{throw new Error(`Getting rbox of element "${i.node.nodeName}" is not possible`)}),e=new Ct(t);return s?e.transform(s.screenCTM().inverseO()):e.addOffset()},inside:function(s,t){const e=this.bbox();return s>e.x&&t>e.y&&s<e.x+e.width&&t<e.y+e.height},point:function(s,t){return new at(s,t).transformO(this.screenCTM().inverseO())},ctm:function(){return new W(this.node.getCTM())},screenCTM:function(){try{if("function"==typeof this.isRoot&&!this.isRoot()){const s=this.rect(1,1),t=s.node.getScreenCTM();return s.remove(),new W(t)}return new W(this.node.getScreenCTM())}catch{return console.warn(`Cannot get CTM from SVG node ${this.node.nodeName}. Is the element rendered?`),new W}}}),st(Tt,"Element");const nn={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(s,t){return"color"===t?s:s+"-"+t}};["fill","stroke"].forEach(function(s){const t={};let e;t[s]=function(i){if(void 0===i)return this.attr(s);if("string"==typeof i||i instanceof dt||dt.isRgb(i)||i instanceof Tt)this.attr(s,i);else for(e=nn[s].length-1;e>=0;e--)null!=i[nn[s][e]]&&this.attr(nn.prefix(s,nn[s][e]),i[nn[s][e]]);return this},J(["Element","Runner"],t)}),J(["Element","Runner"],{matrix:function(s,t,e,i,n,o){return null==s?new W(this):this.attr("transform",new W(s,t,e,i,n,o))},rotate:function(s,t,e){return this.transform({rotate:s,ox:t,oy:e},!0)},skew:function(s,t,e,i){return this.transform(1===arguments.length||3===arguments.length?{skew:s,ox:t,oy:e}:{skew:[s,t],ox:e,oy:i},!0)},shear:function(s,t,e){return this.transform({shear:s,ox:t,oy:e},!0)},scale:function(s,t,e,i){return this.transform(1===arguments.length||3===arguments.length?{scale:s,ox:t,oy:e}:{scale:[s,t],ox:e,oy:i},!0)},translate:function(s,t){return this.transform({translate:[s,t]},!0)},relative:function(s,t){return this.transform({relative:[s,t]},!0)},flip:function(s="both",t="center"){return-1==="xybothtrue".indexOf(s)&&(t=s,s="both"),this.transform({flip:s,origin:t},!0)},opacity:function(s){return this.attr("opacity",s)}}),J("radius",{radius:function(s,t=s){return"radialGradient"===(this._element||this).type?this.attr("r",new Z(s)):this.rx(s).ry(t)}}),J("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(s){return new at(this.node.getPointAtLength(s))}}),J(["Element","Runner"],{font:function(s,t){if("object"==typeof s){for(t in s)this.font(t,s[t]);return this}return"leading"===s?this.leading(t):this.attr("anchor"===s?"text-anchor":"size"===s||"family"===s||"weight"===s||"stretch"===s||"variant"===s||"style"===s?"font-"+s:s,t)}}),J("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(s,t){return s[t]=function(e){return null===e?this.off(t):this.on(t,e),this},s},{})),J("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(N0).slice(0,-1).map(function(t){const e=t.trim().split("(");return[e[0],e[1].split(ye).map(function(i){return parseFloat(i)})]}).reverse().reduce(function(t,e){return"matrix"===e[0]?t.lmultiply(W.fromArray(e[1])):t[e[0]].apply(t,e[1])},new W)},toParent:function(s,t){if(this===s)return this;if(_o(this.node))return this.addTo(s,t);const e=this.screenCTM(),i=s.screenCTM().inverse();return this.addTo(s,t).untransform().transform(i.multiply(e)),this},toRoot:function(s){return this.toParent(this.root(),s)},transform:function(s,t){if(null==s||"string"==typeof s){const i=new W(this).decompose();return null==s?i:i[s]}W.isMatrixLike(s)||(s={...s,origin:yo(s,this)});const e=new W(!0===t?this:t||!1).transform(s);return this.attr("transform",e)}});class Yt extends Tt{flatten(){return this.each(function(){if(this instanceof Yt)return this.flatten().ungroup()}),this}ungroup(t=this.parent(),e=t.index(this)){return e=-1===e?t.children().length:e,this.each(function(i,n){return n[n.length-i-1].toParent(t,e)}),this.remove()}}st(Yt,"Container");class Kn extends Yt{constructor(t,e=t){super(gt("defs",t),e)}flatten(){return this}ungroup(){return this}}st(Kn,"Defs");class Zt extends Tt{}function Io(s){return this.attr("rx",s)}function To(s){return this.attr("ry",s)}function Sc(s){return null==s?this.cx()-this.rx():this.cx(s+this.rx())}function Ac(s){return null==s?this.cy()-this.ry():this.cy(s+this.ry())}function Ec(s){return this.attr("cx",s)}function Ic(s){return this.attr("cy",s)}function Tc(s){return null==s?2*this.rx():this.rx(new Z(s).divide(2))}function Rc(s){return null==s?2*this.ry():this.ry(new Z(s).divide(2))}st(Zt,"Shape");var Z0=Object.freeze({__proto__:null,cx:Ec,cy:Ic,height:Rc,rx:Io,ry:To,width:Tc,x:Sc,y:Ac});class Jn extends Zt{constructor(t,e=t){super(gt("ellipse",t),e)}size(t,e){const i=vi(this,t,e);return this.rx(new Z(i.width).divide(2)).ry(new Z(i.height).divide(2))}}U(Jn,Z0),J("Container",{ellipse:ut(function(s=0,t=s){return this.put(new Jn).size(s,t).move(0,0)})}),st(Jn,"Ellipse");class Lc extends Re{constructor(t=nt.document.createDocumentFragment()){super(t)}xml(t,e,i){if("boolean"==typeof t&&(i=e,e=t,t=null),null==t||"function"==typeof t){const n=new Re(tn("wrapper",i));return n.add(this.node.cloneNode(!0)),n.xml(!1,i)}return super.xml(t,!1,i)}}function Dc(s,t){return this.attr("radialGradient"===(this._element||this).type?{fx:new Z(s),fy:new Z(t)}:{x1:new Z(s),y1:new Z(t)})}function Fc(s,t){return this.attr("radialGradient"===(this._element||this).type?{cx:new Z(s),cy:new Z(t)}:{x2:new Z(s),y2:new Z(t)})}st(Lc,"Fragment");var K0=Object.freeze({__proto__:null,from:Dc,to:Fc});class sn extends Yt{constructor(t,e){super(gt(t+"Gradient","string"==typeof t?null:t),e)}attr(t,e,i){return"transform"===t&&(t="gradientTransform"),super.attr(t,e,i)}bbox(){return new Ct}targets(){return Qe("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}U(sn,K0),J({Container:{gradient(...s){return this.defs().gradient(...s)}},Defs:{gradient:ut(function(s,t){return this.put(new sn(s)).update(t)})}}),st(sn,"Gradient");class on extends Yt{constructor(t,e=t){super(gt("pattern",t),e)}attr(t,e,i){return"transform"===t&&(t="patternTransform"),super.attr(t,e,i)}bbox(){return new Ct}targets(){return Qe("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}url(){return"url(#"+this.id()+")"}}J({Container:{pattern(...s){return this.defs().pattern(...s)}},Defs:{pattern:ut(function(s,t,e){return this.put(new on).update(e).attr({x:0,y:0,width:s,height:t,patternUnits:"userSpaceOnUse"})})}}),st(on,"Pattern");let Qn=class extends Zt{constructor(s,t=s){super(gt("image",s),t)}load(s,t){if(!s)return this;const e=new nt.window.Image;return _e(e,"load",function(i){const n=this.parent(on);0===this.width()&&0===this.height()&&this.size(e.width,e.height),n instanceof on&&0===n.width()&&0===n.height()&&n.size(this.width(),this.height()),"function"==typeof t&&t.call(this,i)},this),_e(e,"load error",function(){Qt(e)}),this.attr("href",e.src=s,yi)}};Oc.push(function(s,t,e){return"fill"!==s&&"stroke"!==s||H0.test(t)&&(t=e.root().defs().image(t)),t instanceof Qn&&(t=e.root().defs().pattern(0,0,i=>{i.add(t)})),t}),J({Container:{image:ut(function(s,t){return this.put(new Qn).size(0,0).load(s,t)})}}),st(Qn,"Image");class Le extends ti{bbox(){let t=-1/0,e=-1/0,i=1/0,n=1/0;return this.forEach(function(o){t=Math.max(o[0],t),e=Math.max(o[1],e),i=Math.min(o[0],i),n=Math.min(o[1],n)}),new Ct(i,n,t-i,e-n)}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+t,this[n][1]+e];return this}parse(t=[0,0]){const e=[];(t=t instanceof Array?Array.prototype.concat.apply([],t):t.trim().split(ye).map(parseFloat)).length%2!=0&&t.pop();for(let i=0,n=t.length;i<n;i+=2)e.push([t[i],t[i+1]]);return e}size(t,e){let i;const n=this.bbox();for(i=this.length-1;i>=0;i--)n.width&&(this[i][0]=(this[i][0]-n.x)*t/n.width+n.x),n.height&&(this[i][1]=(this[i][1]-n.y)*e/n.height+n.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const t=[];for(let e=0,i=this.length;e<i;e++)t.push(this[e].join(","));return t.join(" ")}transform(t){return this.clone().transformO(t)}transformO(t){W.isMatrixLike(t)||(t=new W(t));for(let e=this.length;e--;){const[i,n]=this[e];this[e][0]=t.a*i+t.c*n+t.e,this[e][1]=t.b*i+t.d*n+t.f}return this}}var Ro=Object.freeze({__proto__:null,MorphArray:Le,height:function(s){const t=this.bbox();return null==s?t.height:this.size(t.width,s)},width:function(s){const t=this.bbox();return null==s?t.width:this.size(s,t.height)},x:function(s){return null==s?this.bbox().x:this.move(s,this.bbox().y)},y:function(s){return null==s?this.bbox().y:this.move(this.bbox().x,s)}});let ei=class extends Zt{constructor(s,t=s){super(gt("line",s),t)}array(){return new Le([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(s,t){return this.attr(this.array().move(s,t).toLine())}plot(s,t,e,i){return null==s?this.array():(s=void 0!==t?{x1:s,y1:t,x2:e,y2:i}:new Le(s).toLine(),this.attr(s))}size(s,t){const e=vi(this,s,t);return this.attr(this.array().size(e.width,e.height).toLine())}};U(ei,Ro),J({Container:{line:ut(function(...s){return ei.prototype.plot.apply(this.put(new ei),null!=s[0]?s:[0,0,0,0])})}}),st(ei,"Line");let ts=class extends Yt{constructor(s,t=s){super(gt("marker",s),t)}height(s){return this.attr("markerHeight",s)}orient(s){return this.attr("orient",s)}ref(s,t){return this.attr("refX",s).attr("refY",t)}toString(){return"url(#"+this.id()+")"}update(s){return this.clear(),"function"==typeof s&&s.call(this,this),this}width(s){return this.attr("markerWidth",s)}};function Ci(s,t){return function(e){return null==e?this[s]:(this[s]=e,t&&t.call(this),this)}}J({Container:{marker(...s){return this.defs().marker(...s)}},Defs:{marker:ut(function(s,t,e){return this.put(new ts).size(s,t).ref(s/2,t/2).viewbox(0,0,s,t).attr("orient","auto").update(e)})},marker:{marker(s,t,e,i){let n=["marker"];return"all"!==s&&n.push(s),n=n.join("-"),s=arguments[1]instanceof ts?arguments[1]:this.defs().marker(t,e,i),this.attr(n,s)}}}),st(ts,"Marker");const J0={"-":function(s){return s},"<>":function(s){return-Math.cos(s*Math.PI)/2+.5},">":function(s){return Math.sin(s*Math.PI/2)},"<":function(s){return 1-Math.cos(s*Math.PI/2)},bezier:function(s,t,e,i){return function(n){return n<0?s>0?t/s*n:e>0?i/e*n:0:n>1?e<1?(1-i)/(1-e)*n+(i-e)/(1-e):s<1?(1-t)/(1-s)*n+(t-s)/(1-s):1:3*n*(1-n)**2*t+3*n**2*(1-n)*i+n**3}},steps:function(s,t="end"){t=t.split("-").reverse()[0];let e=s;return"none"===t?--e:"both"===t&&++e,(i,n=!1)=>{let o=Math.floor(i*s);const r=i*o%1==0;return"start"!==t&&"both"!==t||++o,n&&r&&--o,i>=0&&o<0&&(o=0),i<=1&&o>e&&(o=e),o/e}}};class Lo{done(){return!1}}class Do extends Lo{constructor(t=">"){super(),this.ease=J0[t]||t}step(t,e,i){return"number"!=typeof t?i<1?t:e:t+(e-t)*this.ease(i)}}class es extends Lo{constructor(t){super(),this.stepper=t}done(t){return t.done}step(t,e,i,n){return this.stepper(t,e,i,n)}}function jc(){const s=(this._duration||500)/1e3,e=Math.PI,i=Math.log((this._overshoot||0)/100+1e-10),n=-i/Math.sqrt(e*e+i*i),o=3.9/(n*s);this.d=2*n*o,this.k=o*o}U(class extends es{constructor(s=500,t=0){super(),this.duration(s).overshoot(t)}step(s,t,e,i){if("string"==typeof s)return s;if(i.done=e===1/0,e===1/0)return t;if(0===e)return s;e>100&&(e=16);const n=i.velocity||0,o=-this.d*n-this.k*(s-t),r=s+n*(e/=1e3)+o*e*e/2;return i.velocity=n+o*e,i.done=Math.abs(t-r)+Math.abs(n)<.002,i.done?t:r}},{duration:Ci("_duration",jc),overshoot:Ci("_overshoot",jc)}),U(class extends es{constructor(s=.1,t=.01,e=0,i=1e3){super(),this.p(s).i(t).d(e).windup(i)}step(s,t,e,i){if("string"==typeof s)return s;if(i.done=e===1/0,e===1/0)return t;if(0===e)return s;const n=t-s;let o=(i.integral||0)+n*e;const r=(n-(i.error||0))/e,a=this._windup;return!1!==a&&(o=Math.max(-a,Math.min(o,a))),i.error=n,i.integral=o,i.done=Math.abs(n)<.001,i.done?t:s+(this.P*n+this.I*o+this.D*r)}},{windup:Ci("_windup"),p:Ci("P"),i:Ci("I"),d:Ci("D")});const Q0={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Fo={M:function(s,t,e){return t.x=e.x=s[0],t.y=e.y=s[1],["M",t.x,t.y]},L:function(s,t){return t.x=s[0],t.y=s[1],["L",s[0],s[1]]},H:function(s,t){return t.x=s[0],["H",s[0]]},V:function(s,t){return t.y=s[0],["V",s[0]]},C:function(s,t){return t.x=s[4],t.y=s[5],["C",s[0],s[1],s[2],s[3],s[4],s[5]]},S:function(s,t){return t.x=s[2],t.y=s[3],["S",s[0],s[1],s[2],s[3]]},Q:function(s,t){return t.x=s[2],t.y=s[3],["Q",s[0],s[1],s[2],s[3]]},T:function(s,t){return t.x=s[0],t.y=s[1],["T",s[0],s[1]]},Z:function(s,t,e){return t.x=e.x,t.y=e.y,["Z"]},A:function(s,t){return t.x=s[5],t.y=s[6],["A",s[0],s[1],s[2],s[3],s[4],s[5],s[6]]}},zo="mlhvqtcsaz".split("");for(let s=0,t=zo.length;s<t;++s)Fo[zo[s]]=function(e){return function(i,n,o){if("H"===e)i[0]=i[0]+n.x;else if("V"===e)i[0]=i[0]+n.y;else if("A"===e)i[5]=i[5]+n.x,i[6]=i[6]+n.y;else for(let r=0,a=i.length;r<a;++r)i[r]=i[r]+(r%2?n.y:n.x);return Fo[e](i,n,o)}}(zo[s].toUpperCase());function jo(s){return s.segment.length&&s.segment.length-1===Q0[s.segment[0].toUpperCase()]}function tx(s,t){s.inNumber&&ii(s,!1);const e=Oo.test(t);if(e)s.segment=[t];else{const i=s.lastCommand,n=i.toLowerCase();s.segment=["m"===n?i===n?"l":"L":i]}return s.inSegment=!0,s.lastCommand=s.segment[0],e}function ii(s,t){if(!s.inNumber)throw new Error("Parser Error");s.number&&s.segment.push(parseFloat(s.number)),s.inNumber=t,s.number="",s.pointSeen=!1,s.hasExponent=!1,jo(s)&&Vo(s)}function Vo(s){var t;s.inSegment=!1,s.absolute&&(s.segment=Fo[(t=s).segment[0]](t.segment.slice(1),t.p,t.p0)),s.segments.push(s.segment)}function ex(s){if(!s.segment.length)return!1;const t="A"===s.segment[0].toUpperCase(),e=s.segment.length;return t&&(4===e||5===e)}const nx=new Set([" ",",","\t","\n","\r","\f"]);class se extends ti{bbox(){return Te().path.setAttribute("d",this.toString()),new Ct(Te.nodes.path.getBBox())}move(t,e){const i=this.bbox();if(t-=i.x,e-=i.y,!isNaN(t)&&!isNaN(e))for(let n,o=this.length-1;o>=0;o--)n=this[o][0],"M"===n||"L"===n||"T"===n?(this[o][1]+=t,this[o][2]+=e):"H"===n?this[o][1]+=t:"V"===n?this[o][1]+=e:"C"===n||"S"===n||"Q"===n?(this[o][1]+=t,this[o][2]+=e,this[o][3]+=t,this[o][4]+=e,"C"===n&&(this[o][5]+=t,this[o][6]+=e)):"A"===n&&(this[o][6]+=t,this[o][7]+=e);return this}parse(t="M0 0"){return Array.isArray(t)&&(t=Array.prototype.concat.apply([],t).toString()),function(e,i=!0){let n=0,o="";const r={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:i,p0:new at,p:new at};for(;r.lastToken=o,o=e.charAt(n++);)if(r.inSegment||!tx(r,o))if("."!==o)if(isNaN(parseInt(o)))if(nx.has(o))r.inNumber&&ii(r,!1);else if("-"!==o&&"+"!==o)if("E"!==o.toUpperCase()){if(Oo.test(o)){if(r.inNumber)ii(r,!1);else{if(!jo(r))throw new Error("parser Error");Vo(r)}--n}}else r.number+=o,r.hasExponent=!0;else{if(r.inNumber&&"E"!==r.lastToken.toUpperCase()){ii(r,!1),--n;continue}r.number+=o,r.inNumber=!0}else{if("0"===r.number||ex(r)){r.inNumber=!0,r.number=o,ii(r,!0);continue}r.inNumber=!0,r.number+=o}else{if(r.pointSeen||r.hasExponent){ii(r,!1),--n;continue}r.inNumber=!0,r.pointSeen=!0,r.number+=o}return r.inNumber&&ii(r,!1),r.inSegment&&jo(r)&&Vo(r),r.segments}(t)}size(t,e){const i=this.bbox();let n,o;for(i.width=0===i.width?1:i.width,i.height=0===i.height?1:i.height,n=this.length-1;n>=0;n--)o=this[n][0],"M"===o||"L"===o||"T"===o?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y):"H"===o?this[n][1]=(this[n][1]-i.x)*t/i.width+i.x:"V"===o?this[n][1]=(this[n][1]-i.y)*e/i.height+i.y:"C"===o||"S"===o||"Q"===o?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y,this[n][3]=(this[n][3]-i.x)*t/i.width+i.x,this[n][4]=(this[n][4]-i.y)*e/i.height+i.y,"C"===o&&(this[n][5]=(this[n][5]-i.x)*t/i.width+i.x,this[n][6]=(this[n][6]-i.y)*e/i.height+i.y)):"A"===o&&(this[n][1]=this[n][1]*t/i.width,this[n][2]=this[n][2]*e/i.height,this[n][6]=(this[n][6]-i.x)*t/i.width+i.x,this[n][7]=(this[n][7]-i.y)*e/i.height+i.y);return this}toString(){return function(t){let e="";for(let i=0,n=t.length;i<n;i++)e+=t[i][0],null!=t[i][1]&&(e+=t[i][1],null!=t[i][2]&&(e+=" ",e+=t[i][2],null!=t[i][3]&&(e+=" ",e+=t[i][3],e+=" ",e+=t[i][4],null!=t[i][5]&&(e+=" ",e+=t[i][5],e+=" ",e+=t[i][6],null!=t[i][7]&&(e+=" ",e+=t[i][7])))));return e+" "}(this)}}const Vc=s=>{const t=typeof s;return"number"===t?Z:"string"===t?dt.isColor(s)?dt:ye.test(s)?Oo.test(s)?se:ti:bc.test(s)?Z:No:Bo.indexOf(s.constructor)>-1?s.constructor:Array.isArray(s)?ti:"object"===t?rn:No};class ni{constructor(t){this._stepper=t||new Do("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(t){return this._morphObj.morph(this._from,this._to,t,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(t,e){return t&&e},!0)}from(t){return null==t?this._from:(this._from=this._set(t),this)}stepper(t){return null==t?this._stepper:(this._stepper=t,this)}to(t){return null==t?this._to:(this._to=this._set(t),this)}type(t){return null==t?this._type:(this._type=t,this)}_set(t){this._type||this.type(Vc(t));let e=new this._type(t);return this._type===dt&&(e=this._to?e[this._to[4]]():this._from?e[this._from[4]]():e),this._type===rn&&(e=this._to?e.align(this._to):this._from?e.align(this._from):e),e=e.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(e.length)).map(Object).map(function(i){return i.done=!0,i}),e}}class No{constructor(...t){this.init(...t)}init(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}toArray(){return[this.value]}valueOf(){return this.value}}let Nc=(()=>{class s{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,s.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}return s.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0},s})();const sx=(s,t)=>s[0]<t[0]?-1:s[0]>t[0]?1:0;class rn{constructor(...t){this.init(...t)}align(t){const e=this.values;for(let i=0,n=e.length;i<n;++i){if(e[i+1]===t[i+1]){if(e[i+1]===dt&&t[i+7]!==e[i+7]){const a=t[i+7],c=new dt(this.values.splice(i+3,5))[a]().toArray();this.values.splice(i+3,0,...c)}i+=e[i+2]+2;continue}if(!t[i+1])return this;const o=(new t[i+1]).toArray();e.splice(i,e[i+2]+3,t[i],t[i+1],t[i+2],...o),i+=e[i+2]+2}return this}init(t){if(this.values=[],Array.isArray(t))return void(this.values=t.slice());t=t||{};const e=[];for(const i in t){const n=Vc(t[i]),o=new n(t[i]).toArray();e.push([i,n,o.length,...o])}return e.sort(sx),this.values=e.reduce((i,n)=>i.concat(n),[]),this}toArray(){return this.values}valueOf(){const t={},e=this.values;for(;e.length;){const i=e.shift(),n=e.shift(),o=e.shift(),r=e.splice(0,o);t[i]=new n(r)}return t}}const Bo=[No,Nc,rn];class ki extends Zt{constructor(t,e=t){super(gt("path",t),e)}array(){return this._array||(this._array=new se(this.attr("d")))}clear(){return delete this._array,this}height(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}move(t,e){return this.attr("d",this.array().move(t,e))}plot(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new se(t))}size(t,e){const i=vi(this,t,e);return this.attr("d",this.array().size(i.width,i.height))}width(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}x(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}y(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}}ki.prototype.MorphArray=se,J({Container:{path:ut(function(s){return this.put(new ki).plot(s||new se)})}}),st(ki,"Path");var Bc=Object.freeze({__proto__:null,array:function(){return this._array||(this._array=new Le(this.attr("points")))},clear:function(){return delete this._array,this},move:function(s,t){return this.attr("points",this.array().move(s,t))},plot:function(s){return null==s?this.array():this.clear().attr("points","string"==typeof s?s:this._array=new Le(s))},size:function(s,t){const e=vi(this,s,t);return this.attr("points",this.array().size(e.width,e.height))}});class si extends Zt{constructor(t,e=t){super(gt("polygon",t),e)}}J({Container:{polygon:ut(function(s){return this.put(new si).plot(s||new Le)})}}),U(si,Ro),U(si,Bc),st(si,"Polygon");class oi extends Zt{constructor(t,e=t){super(gt("polyline",t),e)}}J({Container:{polyline:ut(function(s){return this.put(new oi).plot(s||new Le)})}}),U(oi,Ro),U(oi,Bc),st(oi,"Polyline");class is extends Zt{constructor(t,e=t){super(gt("rect",t),e)}}U(is,{rx:Io,ry:To}),J({Container:{rect:ut(function(s,t){return this.put(new is).size(s,t)})}}),st(is,"Rect");class Ho{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(t){const e=void 0!==t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}remove(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}shift(){const t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}}const lt={nextDraw:null,frames:new Ho,timeouts:new Ho,immediates:new Ho,timer:()=>nt.window.performance||nt.window.Date,transforms:[],frame(s){const t=lt.frames.push({run:s});return null===lt.nextDraw&&(lt.nextDraw=nt.window.requestAnimationFrame(lt._draw)),t},timeout(s,t){t=t||0;const e=lt.timer().now()+t,i=lt.timeouts.push({run:s,time:e});return null===lt.nextDraw&&(lt.nextDraw=nt.window.requestAnimationFrame(lt._draw)),i},immediate(s){const t=lt.immediates.push(s);return null===lt.nextDraw&&(lt.nextDraw=nt.window.requestAnimationFrame(lt._draw)),t},cancelFrame(s){null!=s&&lt.frames.remove(s)},clearTimeout(s){null!=s&&lt.timeouts.remove(s)},cancelImmediate(s){null!=s&&lt.immediates.remove(s)},_draw(s){let t=null;const e=lt.timeouts.last();for(;(t=lt.timeouts.shift())&&(s>=t.time?t.run():lt.timeouts.push(t),t!==e););let i=null;const n=lt.frames.last();for(;i!==n&&(i=lt.frames.shift());)i.run(s);let o=null;for(;o=lt.immediates.shift();)o();lt.nextDraw=lt.timeouts.first()||lt.frames.first()?nt.window.requestAnimationFrame(lt._draw):null}},ox=function(s){const t=s.start,e=s.runner.duration();return{start:t,duration:e,end:t+e,runner:s.runner}},rx=function(){const s=nt.window;return(s.performance||s.Date).now()};class Hc extends en{constructor(t=rx){super(),this._timeSource=t,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const t=this.getLastRunnerInfo(),e=t?t.runner.duration():0;return(t?t.start:this._time)+e}getEndTimeOfTimeline(){const t=this._runners.map(e=>e.start+e.runner.duration());return Math.max(0,...t)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(t){return this._runners[this._runnerIds.indexOf(t)]||null}pause(){return this._paused=!0,this._continue()}persist(t){return null==t?this._persist:(this._persist=t,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(t){const e=this.speed();if(null==t)return this.speed(-e);const i=Math.abs(e);return this.speed(t?-i:i)}schedule(t,e,i){if(null==t)return this._runners.map(ox);let n=0;const o=this.getEndTime();if(e=e||0,null==i||"last"===i||"after"===i)n=o;else if("absolute"===i||"start"===i)n=e,e=0;else if("now"===i)n=this._time;else if("relative"===i){const c=this.getRunnerInfoById(t.id);c&&(n=c.start+e,e=0)}else{if("with-last"!==i)throw new Error('Invalid value for the "when" parameter');{const c=this.getLastRunnerInfo();n=c?c.start:this._time}}t.unschedule(),t.timeline(this);const r=t.persist(),a={persist:null===r?this._persist:r,start:n+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(a),this._runners.sort((c,h)=>c.start-h.start),this._runnerIds=this._runners.map(c=>c.runner.id),this.updateTime()._continue(),this}seek(t){return this.time(this._time+t)}source(t){return null==t?this._timeSource:(this._timeSource=t,this)}speed(t){return null==t?this._speed:(this._speed=t,this)}stop(){return this.time(0),this.pause()}time(t){return null==t?this._time:(this._time=t,this._continue(!0))}unschedule(t){const e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(t=!1){return lt.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=lt.frame(this._step)),this)}_stepFn(t=!1){const e=this._timeSource();let i=e-this._lastSourceTime;t&&(i=0);const n=this._speed*i+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let r=this._runners.length;r--;){const a=this._runners[r];this._time-a.start<=0&&a.runner.reset()}let o=!1;for(let r=0,a=this._runners.length;r<a;r++){const c=this._runners[r],h=c.runner;let d=n;const g=this._time-c.start;g<=0?o=!0:(g<d&&(d=g),h.active()&&(h.step(d).done?!0!==c.persist&&h.duration()-h.time()+this._time+c.persist<this._time&&(h.unschedule(),--r,--a):o=!0))}return o&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}J({Element:{timeline:function(s){return null==s?(this._timeline=this._timeline||new Hc,this._timeline):(this._timeline=s,this)}}});let De=(()=>{class s extends en{constructor(e){super(),this.id=s.id++,e="function"==typeof(e=e??400)?new es(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration="number"==typeof e&&e,this._isDeclarative=e instanceof es,this._stepper=this._isDeclarative?e:new Do,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new W,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=!!this._isDeclarative||null}static sanitise(e,i,n){let o=1,r=!1,a=0;return i=i??0,n=n||"last","object"!=typeof(e=e??400)||e instanceof Lo||(i=e.delay??i,n=e.when??n,r=e.swing||r,o=e.times??o,a=e.wait??a,e=e.duration??400),{duration:e,delay:i,swing:r,times:o,wait:a,when:n}}active(e){return null==e?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,i,n){const o=s.sanitise(e,i,n),r=new s(o.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(o).schedule(o.delay,o.when)}clearTransform(){return this.transforms=new W,this}clearTransformsFromQueue(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new Do(e),this}element(e){return null==e?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,i,n){return"object"==typeof e&&(i=e.swing,n=e.wait,e=e.times),this._times=e||1/0,this._swing=i||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}loops(e){const i=this._duration+this._wait;if(null==e){const r=Math.floor(this._time/i);return Math.min(r+(this._time-r*i)/this._duration,this._times)}const n=e%1,o=i*Math.floor(e)+this._duration*n;return this.time(o)}persist(e){return null==e?this._persist:(this._persist=e,this)}position(e){const i=this._time,n=this._duration,o=this._wait,a=this._swing,c=this._reverse;let h;if(null==e){const u=function(m){const f=a*Math.floor(m%(2*(o+n))/(o+n)),b=f&&!c||!f&&c,x=Math.pow(-1,b)*(m%(o+n))/n+b;return Math.max(Math.min(x,1),0)},p=this._times*(o+n)-o;return h=i<=0?Math.round(u(1e-5)):i<p?u(i):Math.round(u(p-1e-5)),h}const d=Math.floor(this.loops()),g=a&&d%2==0;return h=d+(g&&!c||c&&g?e:1-e),this.loops(h)}progress(e){return null==e?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,i,n,o){return this._queue.push({initialiser:e||Pc,runner:i||Pc,retarget:n,isTransform:o,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted||(this.time(0),this._reseted=!0),this}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,i,n){if(e instanceof Hc||(n=i,i=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,i,n),this}step(e){if(!this.enabled)return this;this._time+=e=e??16;const i=this.position(),n=this._lastPosition!==i&&this._time>=0;this._lastPosition=i;const o=this.duration(),r=this._lastTime<=0&&this._time>0,a=this._lastTime<o&&this._time>=o;this._lastTime=this._time,r&&this.fire("start",this);const c=this._isDeclarative;this.done=!c&&!a&&this._time>=o,this._reseted=!1;let h=!1;return(n||c)&&(this._initialise(n),this.transforms=new W,h=this._run(c?e:i),this.fire("step",this)),this.done=this.done||h&&c,a&&this.fire("finished",this),this}time(e){return null==e?this._time:(this.step(e-this._time),this)}timeline(e){return void 0===e?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(e||this._isDeclarative)for(let i=0,n=this._queue.length;i<n;++i){const o=this._queue[i],r=this._isDeclarative||!o.initialised&&e;e=!o.finished,r&&e&&(o.initialiser.call(this),o.initialised=!0)}}_rememberMorpher(e,i){if(this._history[e]={morpher:i,caller:this._queue[this._queue.length-1]},this._isDeclarative){const n=this.timeline();n&&n.play()}}_run(e){let i=!0;for(let n=0,o=this._queue.length;n<o;++n){const r=this._queue[n],a=r.runner.call(this,e);r.finished=r.finished||!0===a,i=i&&r.finished}return i}_tryRetarget(e,i,n){if(this._history[e]){if(!this._history[e].caller.initialised){const r=this._queue.indexOf(this._history[e].caller);return this._queue.splice(r,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,i,n):this._history[e].morpher.to(i),this._history[e].caller.finished=!1;const o=this.timeline();return o&&o.play(),!0}return!1}}return s.id=0,s})();class ns{constructor(t=new W,e=-1,i=!0){this.transforms=t,this.id=e,this.done=i}clearTransformsFromQueue(){}}U([De,ns],{mergeWith(s){return new ns(s.transforms.lmultiply(this.transforms),s.id)}});const Yc=(s,t)=>s.lmultiplyO(t),Xc=s=>s.transforms;function ax(){const s=this._transformationRunners.runners.map(Xc).reduce(Yc,new W);this.transform(s),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}class lx{constructor(){this.runners=[],this.ids=[]}add(t){if(this.runners.includes(t))return;const e=t.id+1;return this.runners.push(t),this.ids.push(e),this}clearBefore(t){const e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new ns).forEach(i=>i.clearTransformsFromQueue()),this}edit(t,e){const i=this.ids.indexOf(t+1);return this.ids.splice(i,1,t+1),this.runners.splice(i,1,e),this}getByID(t){return this.runners[this.ids.indexOf(t+1)]}length(){return this.ids.length}merge(){let t=null;for(let e=0;e<this.runners.length;++e){const i=this.runners[e];if(!(t&&i.done&&t.done)||i._timeline&&i._timeline._runnerIds.includes(i.id)||t._timeline&&t._timeline._runnerIds.includes(t.id))t=i;else{this.remove(i.id);const n=i.mergeWith(t);this.edit(t.id,n),t=n,--e}}return this}remove(t){const e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}}J({Element:{animate(s,t,e){const i=De.sanitise(s,t,e),n=this.timeline();return new De(i.duration).loop(i).element(this).timeline(n.play()).schedule(i.delay,i.when)},delay(s,t){return this.animate(0,s,t)},_clearTransformRunnersBefore(s){this._transformationRunners.clearBefore(s.id)},_currentTransform(s){return this._transformationRunners.runners.filter(t=>t.id<=s.id).map(Xc).reduce(Yc,new W)},_addRunner(s){this._transformationRunners.add(s),lt.cancelImmediate(this._frameId),this._frameId=lt.immediate(ax.bind(this))},_prepareRunner(){null==this._frameId&&(this._transformationRunners=(new lx).add(new ns(new W(this))))}}}),U(De,{attr(s,t){return this.styleAttr("attr",s,t)},css(s,t){return this.styleAttr("css",s,t)},styleAttr(s,t,e){if("string"==typeof t)return this.styleAttr(s,{[t]:e});let i=t;if(this._tryRetarget(s,i))return this;let n=new ni(this._stepper).to(i),o=Object.keys(i);return this.queue(function(){n=n.from(this.element()[s](o))},function(r){return this.element()[s](n.at(r).valueOf()),n.done()},function(r){const a=Object.keys(r),c=(h=o,a.filter(g=>!h.includes(g)));var h;if(c.length){const g=this.element()[s](c),u=new rn(n.from()).valueOf();Object.assign(u,g),n.from(u)}const d=new rn(n.to()).valueOf();Object.assign(d,r),n.to(d),o=a,i=r}),this._rememberMorpher(s,n),this},zoom(s,t){if(this._tryRetarget("zoom",s,t))return this;let e=new ni(this._stepper).to(new Z(s));return this.queue(function(){e=e.from(this.element().zoom())},function(i){return this.element().zoom(e.at(i),t),e.done()},function(i,n){t=n,e.to(i)}),this._rememberMorpher("zoom",e),this},transform(s,t,e){if(t=s.relative||t,this._isDeclarative&&!t&&this._tryRetarget("transform",s))return this;const i=W.isMatrixLike(s);e=null!=s.affine?s.affine:e??!i;const n=new ni(this._stepper).type(e?Nc:W);let o,r,a,c,h;return this.queue(function(){r=r||this.element(),o=o||yo(s,r),h=new W(t?void 0:r),r._addRunner(this),t||r._clearTransformRunnersBefore(this)},function(d){t||this.clearTransform();const{x:g,y:u}=new at(o).transform(r._currentTransform(this));let p=new W({...s,origin:[g,u]}),m=this._isDeclarative&&a?a:h;if(e){p=p.decompose(g,u),m=m.decompose(g,u);const b=p.rotate,x=m.rotate,v=[b-360,b,b+360],_=v.map(k=>Math.abs(k-x)),w=Math.min(..._),y=_.indexOf(w);p.rotate=v[y]}t&&(i||(p.rotate=s.rotate||0),this._isDeclarative&&c&&(m.rotate=c)),n.from(m),n.to(p);const f=n.at(d);return c=f.rotate,a=new W(f),this.addTransform(a),r._addRunner(this),n.done()},function(d){(d.origin||"center").toString()!==(s.origin||"center").toString()&&(o=yo(d,r)),s={...d,origin:o}},!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(s){return this._queueNumber("x",s)},y(s){return this._queueNumber("y",s)},ax(s){return this._queueNumber("ax",s)},ay(s){return this._queueNumber("ay",s)},dx(s=0){return this._queueNumberDelta("x",s)},dy(s=0){return this._queueNumberDelta("y",s)},dmove(s,t){return this.dx(s).dy(t)},_queueNumberDelta(s,t){if(t=new Z(t),this._tryRetarget(s,t))return this;const e=new ni(this._stepper).to(t);let i=null;return this.queue(function(){i=this.element()[s](),e.from(i),e.to(i+t)},function(n){return this.element()[s](e.at(n)),e.done()},function(n){e.to(i+new Z(n))}),this._rememberMorpher(s,e),this},_queueObject(s,t){if(this._tryRetarget(s,t))return this;const e=new ni(this._stepper).to(t);return this.queue(function(){e.from(this.element()[s]())},function(i){return this.element()[s](e.at(i)),e.done()}),this._rememberMorpher(s,e),this},_queueNumber(s,t){return this._queueObject(s,new Z(t))},cx(s){return this._queueNumber("cx",s)},cy(s){return this._queueNumber("cy",s)},move(s,t){return this.x(s).y(t)},amove(s,t){return this.ax(s).ay(t)},center(s,t){return this.cx(s).cy(t)},size(s,t){let e;return s&&t||(e=this._element.bbox()),s||(s=e.width/e.height*t),t||(t=e.height/e.width*s),this.width(s).height(t)},width(s){return this._queueNumber("width",s)},height(s){return this._queueNumber("height",s)},plot(s,t,e,i){if(4===arguments.length)return this.plot([s,t,e,i]);if(this._tryRetarget("plot",s))return this;const n=new ni(this._stepper).type(this._element.MorphArray).to(s);return this.queue(function(){n.from(this._element.array())},function(o){return this._element.plot(n.at(o)),n.done()}),this._rememberMorpher("plot",n),this},leading(s){return this._queueNumber("leading",s)},viewbox(s,t,e,i){return this._queueObject("viewbox",new Ct(s,t,e,i))},update(s){return"object"!=typeof s?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=s.opacity&&this.attr("stop-opacity",s.opacity),null!=s.color&&this.attr("stop-color",s.color),null!=s.offset&&this.attr("offset",s.offset),this)}}),U(De,{rx:Io,ry:To,from:Dc,to:Fc}),st(De,"Runner");class Yo extends Yt{constructor(t,e=t){super(gt("svg",t),e),this.namespace()}defs(){return this.isRoot()?Jt(this.node.querySelector("defs"))||this.put(new Kn):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof nt.window.SVGElement)&&"#document-fragment"!==this.node.parentNode.nodeName}namespace(){return this.isRoot()?this.attr({xmlns:wo,version:"1.1"}).attr("xmlns:xlink",yi,Co):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,Co).attr("xmlns:svgjs",null,Co)}root(){return this.isRoot()?this:super.root()}}J({Container:{nested:ut(function(){return this.put(new Yo)})}}),st(Yo,"Svg",!0);let Xo=class extends Yt{constructor(s,t=s){super(gt("symbol",s),t)}};J({Container:{symbol:ut(function(){return this.put(new Xo)})}}),st(Xo,"Symbol");var Wc=Object.freeze({__proto__:null,amove:function(s,t){return this.ax(s).ay(t)},ax:function(s){return this.attr("x",s)},ay:function(s){return this.attr("y",s)},build:function(s){return this._build=!!s,this},center:function(s,t,e=this.bbox()){return this.cx(s,e).cy(t,e)},cx:function(s,t=this.bbox()){return null==s?t.cx:this.attr("x",this.attr("x")+s-t.cx)},cy:function(s,t=this.bbox()){return null==s?t.cy:this.attr("y",this.attr("y")+s-t.cy)},length:function(){return this.node.getComputedTextLength()},move:function(s,t,e=this.bbox()){return this.x(s,e).y(t,e)},plain:function(s){return!1===this._build&&this.clear(),this.node.appendChild(nt.document.createTextNode(s)),this},x:function(s,t=this.bbox()){return null==s?t.x:this.attr("x",this.attr("x")+s-t.x)},y:function(s,t=this.bbox()){return null==s?t.y:this.attr("y",this.attr("y")+s-t.y)}});class oe extends Zt{constructor(t,e=t){super(gt("text",t),e),this.dom.leading=this.dom.leading??new Z(1.3),this._rebuild=!0,this._build=!1}leading(t){return null==t?this.dom.leading:(this.dom.leading=new Z(t),this.rebuild())}rebuild(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){const e=this;let i=0;const n=this.dom.leading;this.each(function(o){if(_o(this.node))return;const r=nt.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=n*new Z(r);this.dom.newLined&&(this.attr("x",e.attr("x")),"\n"===this.text()?i+=a:(this.attr("dy",o?a+i:0),i=0))}),this.fire("rebuild")}return this}setData(t){return this.dom=t,this.dom.leading=new Z(t.leading||1.3),this}writeDataToDom(){return pc(this,this.dom,{leading:1.3}),this}text(t){if(void 0===t){const e=this.node.childNodes;let i=0;t="";for(let n=0,o=e.length;n<o;++n)"textPath"===e[n].nodeName||_o(e[n])?0===n&&(i=n+1):(n!==i&&3!==e[n].nodeType&&!0===Jt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(let e=0,i=(t=(t+"").split("\n")).length;e<i;e++)this.newLine(t[e]);return this.build(!1).rebuild()}}U(oe,Wc),J({Container:{text:ut(function(s=""){return this.put(new oe).text(s)}),plain:ut(function(s=""){return this.put(new oe).plain(s)})}}),st(oe,"Text");class ss extends Zt{constructor(t,e=t){super(gt("tspan",t),e),this._build=!1}dx(t){return this.attr("dx",t)}dy(t){return this.attr("dy",t)}newLine(){this.dom.newLined=!0;const t=this.parent();if(!(t instanceof oe))return this;const e=t.index(this),i=nt.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new Z(i);return this.dy(e?n:0).attr("x",t.x())}text(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?(this.clear().build(!0),t.call(this,this),this.build(!1)):this.plain(t),this)}}U(ss,Wc),J({Tspan:{tspan:ut(function(s=""){const t=new ss;return this._build||this.clear(),this.put(t).text(s)})},Text:{newLine:function(s=""){return this.tspan(s).newLine()}}}),st(ss,"Tspan");class Wo extends Zt{constructor(t,e=t){super(gt("circle",t),e)}radius(t){return this.attr("r",t)}rx(t){return this.attr("r",t)}ry(t){return this.rx(t)}size(t){return this.radius(new Z(t).divide(2))}}U(Wo,{x:Sc,y:Ac,cx:Ec,cy:Ic,width:Tc,height:Rc}),J({Container:{circle:ut(function(s=0){return this.put(new Wo).size(s).move(0,0)})}}),st(Wo,"Circle");class Uo extends Yt{constructor(t,e=t){super(gt("clipPath",t),e)}remove(){return this.targets().forEach(function(t){t.unclip()}),super.remove()}targets(){return Qe("svg [clip-path*="+this.id()+"]")}}J({Container:{clip:ut(function(){return this.defs().put(new Uo)})},Element:{clipper(){return this.reference("clip-path")},clipWith(s){const t=s instanceof Uo?s:this.parent().clip().add(s);return this.attr("clip-path","url(#"+t.id()+")")},unclip(){return this.attr("clip-path",null)}}}),st(Uo,"ClipPath");class Uc extends Tt{constructor(t,e=t){super(gt("foreignObject",t),e)}}J({Container:{foreignObject:ut(function(s,t){return this.put(new Uc).size(s,t)})}}),st(Uc,"ForeignObject");var Gc=Object.freeze({__proto__:null,dmove:function(s,t){return this.children().forEach(e=>{let i;try{i=e.node instanceof Qi().SVGSVGElement?new Ct(e.attr(["x","y","width","height"])):e.bbox()}catch{return}const n=new W(e),o=n.translate(s,t).transform(n.inverse()),r=new at(i.x,i.y).transform(o);e.move(r.x,r.y)}),this},dx:function(s){return this.dmove(s,0)},dy:function(s){return this.dmove(0,s)},height:function(s,t=this.bbox()){return null==s?t.height:this.size(t.width,s,t)},move:function(s=0,t=0,e=this.bbox()){return this.dmove(s-e.x,t-e.y)},size:function(s,t,e=this.bbox()){const i=vi(this,s,t,e),n=i.width/e.width,o=i.height/e.height;return this.children().forEach(r=>{const a=new at(e).transform(new W(r).inverse());r.scale(n,o,a.x,a.y)}),this},width:function(s,t=this.bbox()){return null==s?t.width:this.size(s,t.height,t)},x:function(s,t=this.bbox()){return null==s?t.x:this.move(s,t.y,t)},y:function(s,t=this.bbox()){return null==s?t.y:this.move(t.x,s,t)}});class Fe extends Yt{constructor(t,e=t){super(gt("g",t),e)}}U(Fe,Gc),J({Container:{group:ut(function(){return this.put(new Fe)})}}),st(Fe,"G");class os extends Yt{constructor(t,e=t){super(gt("a",t),e)}target(t){return this.attr("target",t)}to(t){return this.attr("href",t,yi)}}U(os,Gc),J({Container:{link:ut(function(s){return this.put(new os).to(s)})},Element:{unlink(){const s=this.linker();if(!s)return this;const t=s.parent();if(!t)return this.remove();const e=t.index(s);return t.add(this,e),s.remove(),this},linkTo(s){let t=this.linker();return t||(t=new os,this.wrap(t)),"function"==typeof s?s.call(t,t):t.to(s),this},linker(){const s=this.parent();return s&&"a"===s.node.nodeName.toLowerCase()?s:null}}}),st(os,"A");class Go extends Yt{constructor(t,e=t){super(gt("mask",t),e)}remove(){return this.targets().forEach(function(t){t.unmask()}),super.remove()}targets(){return Qe("svg [mask*="+this.id()+"]")}}J({Container:{mask:ut(function(){return this.defs().put(new Go)})},Element:{masker(){return this.reference("mask")},maskWith(s){const t=s instanceof Go?s:this.parent().mask().add(s);return this.attr("mask","url(#"+t.id()+")")},unmask(){return this.attr("mask",null)}}}),st(Go,"Mask");class $c extends Tt{constructor(t,e=t){super(gt("stop",t),e)}update(t){return("number"==typeof t||t instanceof Z)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new Z(t.offset)),this}}J({Gradient:{stop:function(s,t,e){return this.put(new $c).update(s,t,e)}}}),st($c,"Stop");class $o extends Tt{constructor(t,e=t){super(gt("style",t),e)}addText(t=""){return this.node.textContent+=t,this}font(t,e,i={}){return this.rule("@font-face",{fontFamily:t,src:e,...i})}rule(t,e){return this.addText(function(i,n){if(!i)return"";if(!n)return i;let o=i+"{";for(const r in n)o+=r.replace(/([A-Z])/g,function(a,c){return"-"+c.toLowerCase()})+":"+n[r]+";";return o+="}",o}(t,e))}}J("Dom",{style(s,t){return this.put(new $o).rule(s,t)},fontface(s,t,e){return this.put(new $o).font(s,t,e)}}),st($o,"Style");class qo extends oe{constructor(t,e=t){super(gt("textPath",t),e)}array(){const t=this.track();return t?t.array():null}plot(t){const e=this.track();let i=null;return e&&(i=e.plot(t)),null==t?i:this}track(){return this.reference("href")}}J({Container:{textPath:ut(function(s,t){return s instanceof oe||(s=this.text(s)),s.path(t)})},Text:{path:ut(function(s,t=!0){const e=new qo;let i;if(s instanceof ki||(s=this.defs().path(s)),e.attr("href","#"+s,yi),t)for(;i=this.node.firstChild;)e.node.appendChild(i);return this.put(e)}),textPath(){return this.findOne("textPath")}},Path:{text:ut(function(s){return s instanceof oe||(s=(new oe).addTo(this.parent()).text(s)),s.path(this)}),targets(){return Qe("svg textPath").filter(s=>(s.attr("href")||"").includes(this.id()))}}}),qo.prototype.MorphArray=se,st(qo,"TextPath");class qc extends Zt{constructor(t,e=t){super(gt("use",t),e)}use(t,e){return this.attr("href",(e||"")+"#"+t,yi)}}J({Container:{use:ut(function(s,t){return this.put(new qc).use(s,t)})}}),st(qc,"Use");const cx=Ht;U([Yo,Xo,Qn,on,ts],Gt("viewbox")),U([ei,oi,si,ki],Gt("marker")),U(oe,Gt("Text")),U(ki,Gt("Path")),U(Kn,Gt("Defs")),U([oe,ss],Gt("Tspan")),U([is,Jn,sn,De],Gt("radius")),U(en,Gt("EventTarget")),U(Re,Gt("Dom")),U(Tt,Gt("Element")),U(Zt,Gt("Shape")),U([Yt,Lc],Gt("Container")),U(sn,Gt("Gradient")),U(De,Gt("Runner")),Je.extend([...new Set(gc)]),function(s=[]){Bo.push(...[].concat(s))}([Z,dt,Ct,W,ti,Le,se,at]),U(Bo,{to(s){return(new ni).type(this.constructor).from(this.toArray()).to(s)},fromArray(s){return this.init(s),this},toConsumable(){return this.toArray()},morph(s,t,e,i,n){return this.fromArray(s.map(function(o,r){return i.step(o,t[r],e,n[r],n)}))}});class mt extends Tt{constructor(t){super(gt("filter",t),t),this.$source="SourceGraphic",this.$sourceAlpha="SourceAlpha",this.$background="BackgroundImage",this.$backgroundAlpha="BackgroundAlpha",this.$fill="FillPaint",this.$stroke="StrokePaint",this.$autoSetIn=!0}put(t,e){return!(t=super.put(t,e)).attr("in")&&this.$autoSetIn&&t.attr("in",this.$source),t.attr("result")||t.attr("result",t.id()),t}remove(){return this.targets().each("unfilter"),super.remove()}targets(){return Qe('svg [filter*="'+this.id()+'"]')}toString(){return"url(#"+this.id()+")"}}class Zo extends Tt{constructor(t,e){super(t,e),this.result(this.id())}in(t){if(null==t){const e=this.attr("in");return this.parent()&&this.parent().find(`[result="${e}"]`)[0]||e}return this.attr("in",t)}result(t){return this.attr("result",t)}toString(){return this.result()}}const te=s=>function(...t){for(let e=s.length;e--;)null!=t[e]&&this.attr(s[e],t[e])},hx={blend:te(["in","in2","mode"]),colorMatrix:te(["type","values"]),composite:te(["in","in2","operator"]),convolveMatrix:function(s){s=new ti(s).toString(),this.attr({order:Math.sqrt(s.split(" ").length),kernelMatrix:s})},diffuseLighting:te(["surfaceScale","lightingColor","diffuseConstant","kernelUnitLength"]),displacementMap:te(["in","in2","scale","xChannelSelector","yChannelSelector"]),dropShadow:te(["in","dx","dy","stdDeviation"]),flood:te(["flood-color","flood-opacity"]),gaussianBlur:function(s=0,t=s){this.attr("stdDeviation",s+" "+t)},image:function(s){this.attr("href",s,yi)},morphology:te(["operator","radius"]),offset:te(["dx","dy"]),specularLighting:te(["surfaceScale","lightingColor","diffuseConstant","specularExponent","kernelUnitLength"]),tile:te([]),turbulence:te(["baseFrequency","numOctaves","seed","stitchTiles","type"])};["blend","colorMatrix","componentTransfer","composite","convolveMatrix","diffuseLighting","displacementMap","dropShadow","flood","gaussianBlur","image","merge","morphology","offset","specularLighting","tile","turbulence"].forEach(s=>{const t=xi(s),e=hx[s];mt[t+"Effect"]=class extends Zo{constructor(i){super(gt("fe"+t,i),i)}update(i){return e.apply(this,i),this}},mt.prototype[s]=ut(function(i,...n){const o=new mt[t+"Effect"];return null==i?this.put(o):("function"==typeof i?i.call(o,o):n.unshift(i),this.put(o).update(n))})}),U(mt,{merge(s){const t=this.put(new mt.MergeEffect);return"function"==typeof s?(s.call(t,t),t):((s instanceof Array?s:[...arguments]).forEach(e=>{e instanceof mt.MergeNode?t.put(e):t.mergeNode(e)}),t)},componentTransfer(s={}){const t=this.put(new mt.ComponentTransferEffect);if("function"==typeof s)return s.call(t,t),t;s.r||s.g||s.b||s.a||(s={r:s,g:s,b:s,a:s});for(const e in s)t.add(new(mt["Func"+e.toUpperCase()])(s[e]));return t}}),["distantLight","pointLight","spotLight","mergeNode","FuncR","FuncG","FuncB","FuncA"].forEach(s=>{const t=xi(s);mt[t]=class extends Zo{constructor(e){super(gt("fe"+t,e),e)}}}),["funcR","funcG","funcB","funcA"].forEach(function(s){const t=mt[xi(s)],e=ut(function(){return this.put(new t)});mt.ComponentTransferEffect.prototype[s]=e}),["distantLight","pointLight","spotLight"].forEach(s=>{const t=mt[xi(s)],e=ut(function(){return this.put(new t)});mt.DiffuseLightingEffect.prototype[s]=e,mt.SpecularLightingEffect.prototype[s]=e}),U(mt.MergeEffect,{mergeNode(s){return this.put(new mt.MergeNode).attr("in",s)}}),U(Kn,{filter:function(s){const t=this.put(new mt);return"function"==typeof s&&s.call(t,t),t}}),U(Yt,{filter:function(s){return this.defs().filter(s)}}),U(Tt,{filterWith:function(s){const t=s instanceof mt?s:this.defs().filter(s);return this.attr("filter",t)},unfilter:function(s){return this.attr("filter",null)},filterer(){return this.reference("filter")}}),U(Zo,{blend:function(s,t){return this.parent()&&this.parent().blend(this,s,t)},colorMatrix:function(s,t){return this.parent()&&this.parent().colorMatrix(s,t).in(this)},componentTransfer:function(s){return this.parent()&&this.parent().componentTransfer(s).in(this)},composite:function(s,t){return this.parent()&&this.parent().composite(this,s,t)},convolveMatrix:function(s){return this.parent()&&this.parent().convolveMatrix(s).in(this)},diffuseLighting:function(s,t,e,i){return this.parent()&&this.parent().diffuseLighting(s,e,i).in(this)},displacementMap:function(s,t,e,i){return this.parent()&&this.parent().displacementMap(this,s,t,e,i)},dropShadow:function(s,t,e){return this.parent()&&this.parent().dropShadow(this,s,t,e).in(this)},flood:function(s,t){return this.parent()&&this.parent().flood(s,t)},gaussianBlur:function(s,t){return this.parent()&&this.parent().gaussianBlur(s,t).in(this)},image:function(s){return this.parent()&&this.parent().image(s)},merge:function(s){return s=s instanceof Array?s:[...s],this.parent()&&this.parent().merge(this,...s)},morphology:function(s,t){return this.parent()&&this.parent().morphology(s,t).in(this)},offset:function(s,t){return this.parent()&&this.parent().offset(s,t).in(this)},specularLighting:function(s,t,e,i,n){return this.parent()&&this.parent().specularLighting(s,e,i,n).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(s,t,e,i,n){return this.parent()&&this.parent().turbulence(s,t,e,i,n).in(this)}}),U(mt.MergeEffect,{in:function(s){return this.add(s instanceof mt.MergeNode?s:(new mt.MergeNode).in(s),0),this}}),U([mt.CompositeEffect,mt.BlendEffect,mt.DisplacementMapEffect],{in2:function(s){if(null==s){const t=this.attr("in2");return this.parent()&&this.parent().find(`[result="${t}"]`)[0]||t}return this.attr("in2",s)}}),mt.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]};var Rt=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"getDefaultFilter",value:function(t,e){var i=this.w;t.unfilter(!0),(new mt).size("120%","180%","-5%","-40%"),i.config.chart.dropShadow.enabled&&this.dropShadow(t,i.config.chart.dropShadow,e)}},{key:"applyFilter",value:function(t,e,i){var n,o=this,r=this.w;if(t.unfilter(!0),"none"!==i){var a,c,h=r.config.chart.dropShadow,d="lighten"===i?2:.3;t.filterWith(function(g){g.colorMatrix({type:"matrix",values:"\n          ".concat(d," 0 0 0 0\n          0 ").concat(d," 0 0 0\n          0 0 ").concat(d," 0 0\n          0 0 0 1 0\n        "),in:"SourceGraphic",result:"brightness"}),h.enabled&&o.addShadow(g,e,h,"brightness")}),!h.noUserSpaceOnUse&&(null===(a=t.filterer())||void 0===a||null===(c=a.node)||void 0===c||c.setAttribute("filterUnits","userSpaceOnUse")),this._scaleFilterSize(null===(n=t.filterer())||void 0===n?void 0:n.node)}else this.getDefaultFilter(t,e)}},{key:"addShadow",value:function(t,e,i,n){var o,r=this.w,a=i.blur,c=i.top,h=i.left,d=i.color,g=i.opacity;if(d=Array.isArray(d)?d[e]:d,(null===(o=r.config.chart.dropShadow.enabledOnSeries)||void 0===o?void 0:o.length)>0&&-1===r.config.chart.dropShadow.enabledOnSeries.indexOf(e))return t;t.offset({in:n,dx:h,dy:c,result:"offset"}),t.gaussianBlur({in:"offset",stdDeviation:a,result:"blur"}),t.flood({"flood-color":d,"flood-opacity":g,result:"flood"}),t.composite({in:"flood",in2:"blur",operator:"in",result:"shadow"}),t.merge(["shadow",n])}},{key:"dropShadow",value:function(t,e){var i,n,o,r,a,c=this,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=this.w;return t.unfilter(!0),A.isMsEdge()&&"radialBar"===d.config.chart.type||(null===(i=d.config.chart.dropShadow.enabledOnSeries)||void 0===i?void 0:i.length)>0&&-1===(null===(o=d.config.chart.dropShadow.enabledOnSeries)||void 0===o?void 0:o.indexOf(h))||(t.filterWith(function(g){c.addShadow(g,h,e,"SourceGraphic")}),e.noUserSpaceOnUse||null===(r=t.filterer())||void 0===r||null===(a=r.node)||void 0===a||a.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(null===(n=t.filterer())||void 0===n?void 0:n.node)),t}},{key:"setSelectionFilter",value:function(t,e,i){var n=this.w;if(void 0!==n.globals.selectedDataPoints[e]&&n.globals.selectedDataPoints[e].indexOf(i)>-1){t.node.setAttribute("selected",!0);var o=n.config.states.active.filter;"none"!==o&&this.applyFilter(t,e,o.type)}}},{key:"_scaleFilterSize",value:function(t){t&&function(e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),s}(),D=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"roundPathCorners",value:function(t,e){function i(M,P,O){var S=P.x-M.x,E=P.y-M.y,I=Math.sqrt(S*S+E*E);return n(M,P,Math.min(1,O/I))}function n(M,P,O){return{x:M.x+(P.x-M.x)*O,y:M.y+(P.y-M.y)*O}}function o(M,P){M.length>2&&(M[M.length-2]=P.x,M[M.length-1]=P.y)}function r(M){return{x:parseFloat(M[M.length-2]),y:parseFloat(M[M.length-1])}}t.indexOf("NaN")>-1&&(t="");var a=t.split(/[,\s]/).reduce(function(M,P){var O=P.match(/^([a-zA-Z])(.+)/);return O?(M.push(O[1]),M.push(O[2])):M.push(P),M},[]).reduce(function(M,P){return parseFloat(P)==P&&M.length?M[M.length-1].push(P):M.push([P]),M},[]),c=[];if(a.length>1){var h=r(a[0]),d=null;"Z"==a[a.length-1][0]&&a[0].length>2&&(a[a.length-1]=d=["L",h.x,h.y]),c.push(a[0]);for(var g=1;g<a.length;g++){var u=c[c.length-1],p=a[g],m=p==d?a[1]:a[g+1];if(m&&u&&u.length>2&&"L"==p[0]&&m.length>2&&"L"==m[0]){var f,b,x=r(u),v=r(p),_=r(m);f=i(v,x,e),b=i(v,_,e),o(p,f),p.origPoint=v,c.push(p);var w=n(f,v,.5),y=n(v,b,.5),k=["C",w.x,w.y,y.x,y.y,b.x,b.y];k.origPoint=v,c.push(k)}else c.push(p)}if(d){var C=r(c[c.length-1]);c.push(["Z"]),o(c[0],C)}}else c=a;return c.reduce(function(M,P){return M+P.join(" ")+" "},"")}},{key:"drawLine",value:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:i,y2:n,stroke:o,"stroke-dasharray":r,"stroke-width":a,"stroke-linecap":c})}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,g=this.w.globals.dom.Paper.rect();return g.attr({x:t,y:e,width:i>0?i:0,height:n>0?n:0,rx:o,ry:o,opacity:a,"stroke-width":null!==c?c:0,stroke:null!==h?h:"none","stroke-dasharray":d}),g.node.setAttribute("fill",r),g}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:n,stroke:e,"stroke-width":i})}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t<0&&(t=0);var i=this.w.globals.dom.Paper.circle(2*t);return null!==e&&i.attr(e),i}},{key:"drawPath",value:function(t){var e=t.d,i=void 0===e?"":e,n=t.stroke,o=void 0===n?"#a8a8a8":n,r=t.strokeWidth,a=void 0===r?1:r,c=t.fill,h=t.fillOpacity,d=void 0===h?1:h,g=t.strokeOpacity,u=void 0===g?1:g,p=t.classes,m=t.strokeLinecap,f=void 0===m?null:m,b=t.strokeDashArray,x=void 0===b?0:b,v=this.w;return null===f&&(f=v.config.stroke.lineCap),(i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(i).attr({fill:c,"fill-opacity":d,stroke:o,"stroke-opacity":u,"stroke-linecap":f,"stroke-width":a,"stroke-dasharray":x,class:p})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w.globals.dom.Paper.group();return null!==t&&e.attr(t),e}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=null;return null===i?n=[" L",t,e].join(" "):"H"===i?n=[" H",t].join(" "):"V"===i&&(n=[" V",e].join(" ")),n}},{key:"curve",value:function(t,e,i,n,o,r){return["C",t,e,i,n,o,r].join(" ")}},{key:"quadraticCurve",value:function(t,e,i,n){return["Q",t,e,i,n].join(" ")}},{key:"arc",value:function(t,e,i,n,o,r,a){var c="A";return arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(c="a"),[c,t,e,i,n,o,r,a].join(" ")}},{key:"renderPaths",value:function(t){var e,i=t.j,n=t.realIndex,o=t.pathFrom,r=t.pathTo,a=t.stroke,c=t.strokeWidth,h=t.strokeLinecap,d=t.fill,g=t.animationDelay,u=t.initialSpeed,p=t.dataChangeSpeed,m=t.className,f=t.chartType,b=t.shouldClipToGrid,x=void 0===b||b,v=t.bindEventsOnPaths,_=void 0===v||v,w=t.drawShadow,y=void 0===w||w,k=this.w,C=new Rt(this.ctx),M=new bi(this.ctx),P=this.w.config.chart.animations.enabled,O=P&&this.w.config.chart.animations.dynamicAnimation.enabled;if(o&&o.startsWith("M 0 0")&&r){var S=r.match(/^M\s+[\d.-]+\s+[\d.-]+/);S&&(o=o.replace(/^M\s+0\s+0/,S[0]))}var E=!!(P&&!k.globals.resized||O&&k.globals.dataChanged&&k.globals.shouldAnimate);E?e=o:(e=r,k.globals.animationEnded=!0);var R,I=k.config.stroke.dashArray;R=Array.isArray(I)?I[n]:k.config.stroke.dashArray;var T=this.drawPath({d:e,stroke:a,strokeWidth:c,fill:d,fillOpacity:1,classes:m,strokeLinecap:h,strokeDashArray:R});T.attr("index",n),x&&T.attr("bar"===f&&!k.globals.isHorizontal||k.globals.comboCharts?{"clip-path":"url(#gridRectBarMask".concat(k.globals.cuid,")")}:{"clip-path":"url(#gridRectMask".concat(k.globals.cuid,")")}),k.config.chart.dropShadow.enabled&&y&&C.dropShadow(T,k.config.chart.dropShadow,n),_&&(T.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,T)),T.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,T)),T.node.addEventListener("mousedown",this.pathMouseDown.bind(this,T))),T.attr({pathTo:r,pathFrom:o});var L={el:T,j:i,realIndex:n,pathFrom:o,pathTo:r,fill:d,strokeWidth:c,delay:g};return!P||k.globals.resized||k.globals.dataChanged?!k.globals.resized&&k.globals.dataChanged||M.showDelayedElements():M.animatePathsGradually(z(z({},L),{},{speed:u})),k.globals.dataChanged&&O&&E&&M.animatePathsGradually(z(z({},L),{},{speed:p})),T}},{key:"drawPattern",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(e,i,function(r){"horizontalLines"===t?r.line(0,0,i,0).stroke({color:n,width:o+1}):"verticalLines"===t?r.line(0,0,0,e).stroke({color:n,width:o+1}):"slantedLines"===t?r.line(0,0,e,i).stroke({color:n,width:o}):"squares"===t?r.rect(e,i).fill("none").stroke({color:n,width:o}):"circles"===t&&r.circle(e).fill("none").stroke({color:n,width:o})})}},{key:"drawGradient",value:function(t,e,i,n,o){var r,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,g=this.w;e.length<9&&0===e.indexOf("#")&&(e=A.hexToRgba(e,n)),i.length<9&&0===i.indexOf("#")&&(i=A.hexToRgba(i,o));var u=0,p=1,m=1,f=null;null!==c&&(u=void 0!==c[0]?c[0]/100:0,p=void 0!==c[1]?c[1]/100:1,m=void 0!==c[2]?c[2]/100:1,f=void 0!==c[3]?c[3]/100:null);var b=!("donut"!==g.config.chart.type&&"pie"!==g.config.chart.type&&"polarArea"!==g.config.chart.type&&"bubble"!==g.config.chart.type);return r=g.globals.dom.Paper.gradient(b?"radial":"linear",h&&0!==h.length?function(_){(Array.isArray(h[d])?h[d]:h).forEach(function(w){_.stop(w.offset/100,w.color,w.opacity)})}:function(_){_.stop(u,e,n),_.stop(p,i,o),_.stop(m,i,o),null!==f&&_.stop(f,e,n)}),b?r.attr("bubble"!==g.config.chart.type?{gradientUnits:"userSpaceOnUse",cx:g.globals.gridWidth/2,cy:g.globals.gridHeight/2,r:a}:{cx:.5,cy:.5,r:.8,fx:.2,fy:.2}):"vertical"===t?r.from(0,0).to(0,1):"diagonal"===t?r.from(0,0).to(1,1):"horizontal"===t?r.from(0,1).to(1,1):"diagonal2"===t&&r.from(1,0).to(0,1),r}},{key:"getTextBasedOnMaxWidth",value:function(t){var e=t.text,i=t.maxWidth,r=this.getTextRects(e,t.fontSize,t.fontFamily),c=Math.floor(i/(r.width/e.length));return i<r.width?e.slice(0,c-3)+"...":e}},{key:"drawText",value:function(t){var e=this,i=t.x,n=t.y,o=t.text,r=t.textAnchor,a=t.fontSize,c=t.fontFamily,h=t.fontWeight,d=t.foreColor,g=t.opacity,u=t.maxWidth,p=t.cssClass,m=void 0===p?"":p,f=t.isPlainText,b=void 0===f||f,x=t.dominantBaseline,v=void 0===x?"auto":x,_=this.w;void 0===o&&(o="");var w=o;r||(r="start"),d&&d.length||(d=_.config.chart.foreColor),h=h||"regular";var y,k={maxWidth:u,fontSize:a=a||"11px",fontFamily:c=c||_.config.chart.fontFamily};return Array.isArray(o)?y=_.globals.dom.Paper.text(function(C){for(var M=0;M<o.length;M++)w=o[M],u&&(w=e.getTextBasedOnMaxWidth(z({text:o[M]},k))),0===M?C.tspan(w):C.tspan(w).newLine()}):(u&&(w=this.getTextBasedOnMaxWidth(z({text:o},k))),y=b?_.globals.dom.Paper.plain(o):_.globals.dom.Paper.text(function(C){return C.tspan(w)})),y.attr({x:i,y:n,"text-anchor":r,"dominant-baseline":v,"font-size":a,"font-family":c,"font-weight":h,fill:d,class:"apexcharts-text "+m}),y.node.style.fontFamily=c,y.node.style.opacity=g,y}},{key:"getMarkerPath",value:function(t,e,i,n){var o="";switch(i){case"cross":o="M ".concat(t-(n/=1.4)," ").concat(e-n," L ").concat(t+n," ").concat(e+n,"  M ").concat(t-n," ").concat(e+n," L ").concat(t+n," ").concat(e-n);break;case"plus":o="M ".concat(t-(n/=1.12)," ").concat(e," L ").concat(t+n," ").concat(e,"  M ").concat(t," ").concat(e-n," L ").concat(t," ").concat(e+n);break;case"star":case"sparkle":var r=5;n*=1.15,"sparkle"===i&&(n/=1.1,r=4);for(var a=Math.PI/r,c=0;c<=2*r;c++){var h=c*a,d=c%2==0?n:n/2;o+=(0===c?"M":"L")+(t+d*Math.sin(h))+","+(e-d*Math.cos(h))}o+="Z";break;case"triangle":o="M ".concat(t," ").concat(e-n," \n             L ").concat(t+n," ").concat(e+n," \n             L ").concat(t-n," ").concat(e+n," \n             Z");break;case"square":case"rect":o="M ".concat(t-(n/=1.125)," ").concat(e-n," \n           L ").concat(t+n," ").concat(e-n," \n           L ").concat(t+n," ").concat(e+n," \n           L ").concat(t-n," ").concat(e+n," \n           Z");break;case"diamond":n*=1.05,o="M ".concat(t," ").concat(e-n," \n             L ").concat(t+n," ").concat(e," \n             L ").concat(t," ").concat(e+n," \n             L ").concat(t-n," ").concat(e," \n            Z");break;case"line":o="M ".concat(t-(n/=1.1)," ").concat(e," \n           L ").concat(t+n," ").concat(e);break;default:n*=2,o="M ".concat(t,", ").concat(e," \n           m -").concat(n/2,", 0 \n           a ").concat(n/2,",").concat(n/2," 0 1,0 ").concat(n,",0 \n           a ").concat(n/2,",").concat(n/2," 0 1,0 -").concat(n,",0")}return o}},{key:"drawMarkerShape",value:function(t,e,i,n,o){var r=this.drawPath({d:this.getMarkerPath(t,e,i,n,o),stroke:o.pointStrokeColor,strokeDashArray:o.pointStrokeDashArray,strokeWidth:o.pointStrokeWidth,fill:o.pointFillColor,fillOpacity:o.pointFillOpacity,strokeOpacity:o.pointStrokeOpacity});return r.attr({cx:t,cy:e,shape:o.shape,class:o.class?o.class:""}),r}},{key:"drawMarker",value:function(t,e,i){t=t||0;var n=i.pSize||0;return A.isNumber(e)||(n=0,e=0),this.drawMarkerShape(t,e,i?.shape,n,z(z({},i),"line"===i.shape||"plus"===i.shape||"cross"===i.shape?{pointStrokeColor:i.pointFillColor,pointStrokeOpacity:i.pointFillOpacity}:{}))}},{key:"pathMouseEnter",value:function(t,e){var i=this.w,n=new Rt(this.ctx),o=parseInt(t.node.getAttribute("index"),10),r=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseEnter&&i.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"===i.config.states.hover.filter.type||i.globals.isTouchDevice||n.applyFilter(t,o,i.config.states.hover.filter.type)}},{key:"pathMouseLeave",value:function(t,e){var i=this.w,n=new Rt(this.ctx),o=parseInt(t.node.getAttribute("index"),10),r=parseInt(t.node.getAttribute("j"),10);"function"==typeof i.config.chart.events.dataPointMouseLeave&&i.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:o,dataPointIndex:r,w:i}]),"none"!==i.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==i.config.states.hover.filter.type&&n.getDefaultFilter(t,o)}},{key:"pathMouseDown",value:function(t,e){var i=this.w,n=new Rt(this.ctx),o=parseInt(t.node.getAttribute("index"),10),r=parseInt(t.node.getAttribute("j"),10),a="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),i.globals.selectedDataPoints[o].indexOf(r)>-1){var c=i.globals.selectedDataPoints[o].indexOf(r);i.globals.selectedDataPoints[o].splice(c,1)}}else{if(!i.config.states.active.allowMultipleDataPointsSelection&&i.globals.selectedDataPoints.length>0){i.globals.selectedDataPoints=[];var h=i.globals.dom.Paper.find(".apexcharts-series path:not(.apexcharts-decoration-element)"),d=i.globals.dom.Paper.find(".apexcharts-series circle:not(.apexcharts-decoration-element), .apexcharts-series rect:not(.apexcharts-decoration-element)"),g=function(m){Array.prototype.forEach.call(m,function(f){f.node.setAttribute("selected","false"),n.getDefaultFilter(f,o)})};g(h),g(d)}t.node.setAttribute("selected","true"),a="true",void 0===i.globals.selectedDataPoints[o]&&(i.globals.selectedDataPoints[o]=[]),i.globals.selectedDataPoints[o].push(r)}if("true"===a){var u=i.config.states.active.filter;if("none"!==u)n.applyFilter(t,o,u.type);else if("none"!==i.config.states.hover.filter&&!i.globals.isTouchDevice){var p=i.config.states.hover.filter;n.applyFilter(t,o,p.type)}}else"none"!==i.config.states.active.filter.type&&("none"===i.config.states.hover.filter.type||i.globals.isTouchDevice?n.getDefaultFilter(t,o):n.applyFilter(t,o,(p=i.config.states.hover.filter).type));"function"==typeof i.config.chart.events.dataPointSelection&&i.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:o,dataPointIndex:r,w:i}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:i.globals.selectedDataPoints,seriesIndex:o,dataPointIndex:r,w:i}])}},{key:"rotateAroundCenter",value:function(t){var e={};return t&&"function"==typeof t.getBBox&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,i,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=this.w,a=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:i,foreColor:"#fff",opacity:0});n&&a.attr("transform",n),r.globals.dom.Paper.add(a);var c=a.bbox();return o||(c=a.node.getBoundingClientRect()),a.remove(),{width:c.width,height:c.height}}},{key:"placeTextWithEllipsis",value:function(t,e,i){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=i/1.1)){for(var n=e.length-3;n>0;n-=3)if(t.getSubStringLength(0,n)<=i/1.1)return void(t.textContent=e.substring(0,n)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i])}}]),s}(),kt=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"getStackedSeriesTotals",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.w,i=[];if(0===e.globals.series.length)return i;for(var n=0;n<e.globals.series[e.globals.maxValsInArrayIndex].length;n++){for(var o=0,r=0;r<e.globals.series.length;r++)void 0!==e.globals.series[r][n]&&-1===t.indexOf(r)&&(o+=e.globals.series[r][n]);i.push(o)}return i}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce(function(e,i){return e+i},0):this.w.globals.series[t].reduce(function(e,i){return e+i},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var t=this,e=this.w,i=[];return e.globals.seriesGroups.forEach(function(n){var o=[];e.config.series.forEach(function(a,c){n.indexOf(e.globals.seriesNames[c])>-1&&o.push(c)});var r=e.globals.series.map(function(a,c){return-1===o.indexOf(c)?c:-1}).filter(function(a){return-1!==a});i.push(t.getStackedSeriesTotals(r))}),i}},{key:"setSeriesYAxisMappings",value:function(){var t=this.w.globals,e=this.w.config,i=[],n=[],o=[],r=t.series.length>e.yaxis.length||e.yaxis.some(function(g){return Array.isArray(g.seriesName)});e.series.forEach(function(g,u){o.push(u),n.push(null)}),e.yaxis.forEach(function(g,u){i[u]=[]});var a=[];e.yaxis.forEach(function(g,u){var p=!1;if(g.seriesName){var m=[];Array.isArray(g.seriesName)?m=g.seriesName:m.push(g.seriesName),m.forEach(function(f){e.series.forEach(function(b,x){if(b.name===f){var v=x;u===x||r?!r||o.indexOf(x)>-1?i[u].push([u,x]):console.warn("Series '"+b.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(i[x].push([x,u]),v=u),p=!0,-1!==(v=o.indexOf(v))&&o.splice(v,1)}})})}p||a.push(u)}),i=i.map(function(g,u){var p=[];return g.forEach(function(m){n[m[1]]=m[0],p.push(m[1])}),p});for(var c=e.yaxis.length-1,h=0;h<a.length&&(i[c=a[h]]=[],o);h++){var d=o[0];o.shift(),i[c].push(d),n[d]=c}o.forEach(function(g){i[c].push(g),n[g]=c}),t.seriesYAxisMap=i.map(function(g){return g}),t.seriesYAxisReverseMap=n.map(function(g){return g}),t.seriesYAxisMap.forEach(function(g,u){g.forEach(function(p){e.series[p]&&void 0===e.series[p].group&&(e.series[p].group="apexcharts-axis-".concat(u.toString()))})})}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter(function(e){return null!==e}):this.w.config.series[t].data.filter(function(e){return null!==e})).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every(function(e,i,n){return e===n[0]})}},{key:"getCategoryLabels",value:function(t){var e=this.w,i=t.slice();return e.config.xaxis.convertedCatToNumeric&&(i=t.map(function(n,o){return e.config.xaxis.labels.formatter(n-e.globals.minX+1)})),i}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map(function(e){return e.length}).indexOf(Math.max.apply(Math,t.globals.series.map(function(e){return e.length})))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach(function(i){e=Math.max(e,i)}),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach(function(i){e=Math.max(e,i.size)}),e>0&&(t.config.markers.hover.size>0?e=t.config.markers.hover.size:e+=t.config.markers.hover.sizeOffset),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map(function(e,i){var n=0;if(Array.isArray(e))for(var o=0;o<e.length;o++)n+=e[o];else n+=e;return n})}},{key:"getSeriesTotalsXRange",value:function(t,e){var i=this.w;return i.globals.series.map(function(n,o){for(var r=0,a=0;a<n.length;a++)i.globals.seriesX[o][a]>t&&i.globals.seriesX[o][a]<e&&(r+=n[a]);return r})}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map(function(e,i){var n=[];if(Array.isArray(e))for(var o=0;o<e.length;o++){var r=t.globals.stackedSeriesTotals[o],a=0;r&&(a=100*e[o]/r),n.push(a)}else{var c=100*e/t.globals.seriesTotals.reduce(function(h,d){return h+d},0);n.push(c)}return n})}},{key:"getCalculatedRatios",value:function(){var t,e,i,n=this,o=this.w,r=o.globals,a=[],c=0,h=[],d=.1,g=0;if(r.yRange=[],r.isMultipleYAxis)for(var u=0;u<r.minYArr.length;u++)r.yRange.push(Math.abs(r.minYArr[u]-r.maxYArr[u])),h.push(0);else r.yRange.push(Math.abs(r.minY-r.maxY));r.xRange=Math.abs(r.maxX-r.minX),r.zRange=Math.abs(r.maxZ-r.minZ);for(var p=0;p<r.yRange.length;p++)a.push(r.yRange[p]/r.gridHeight);if(e=r.xRange/r.gridWidth,t=r.yRange/r.gridWidth,i=r.xRange/r.gridHeight,(c=r.zRange/r.gridHeight*16)||(c=1),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(r.hasNegs=!0),o.globals.seriesYAxisReverseMap.length>0){var m=function(b,x){var v=o.config.yaxis[o.globals.seriesYAxisReverseMap[x]],_=b<0?-1:1;return b=Math.abs(b),v.logarithmic&&(b=n.getBaseLog(v.logBase,b)),-_*b/a[x]};if(r.isMultipleYAxis){h=[];for(var f=0;f<a.length;f++)h.push(m(r.minYArr[f],f))}else(h=[]).push(m(r.minY,0)),r.minY!==Number.MIN_VALUE&&0!==Math.abs(r.minY)&&(d=-r.minY/t,g=r.minX/e)}else(h=[]).push(0),d=0,g=0;return{yRatio:a,invertedYRatio:t,zRatio:c,xRatio:e,invertedXRatio:i,baseLineInvertedY:d,baseLineY:h,baseLineX:g}}},{key:"getLogSeries",value:function(t){var e=this,i=this.w;return i.globals.seriesLog=t.map(function(n,o){var r=i.globals.seriesYAxisReverseMap[o];return i.config.yaxis[r]&&i.config.yaxis[r].logarithmic?n.map(function(a){return null===a?null:e.getLogVal(i.config.yaxis[r].logBase,a,o)}):n}),i.globals.invalidLogScale?t:i.globals.seriesLog}},{key:"getLogValAtSeriesIndex",value:function(t,e){if(null===t)return null;var i=this.w,n=i.globals.seriesYAxisReverseMap[e];return i.config.yaxis[n]&&i.config.yaxis[n].logarithmic?this.getLogVal(i.config.yaxis[n].logBase,t,e):t}},{key:"getBaseLog",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"getLogVal",value:function(t,e,i){if(e<=0)return 0;var n=this.w,o=0===n.globals.minYArr[i]?-1:this.getBaseLog(t,n.globals.minYArr[i]),r=(0===n.globals.maxYArr[i]?0:this.getBaseLog(t,n.globals.maxYArr[i]))-o;return e<1?e/r:(this.getBaseLog(t,e)-o)/r}},{key:"getLogYRatios",value:function(t){var e=this,i=this.w,n=this.w.globals;return n.yLogRatio=t.slice(),n.logYRange=n.yRange.map(function(o,r){var a=i.globals.seriesYAxisReverseMap[r];if(i.config.yaxis[a]&&e.w.config.yaxis[a].logarithmic){var c,h=-Number.MAX_VALUE,d=Number.MIN_VALUE;return n.seriesLog.forEach(function(g,u){g.forEach(function(p){i.config.yaxis[u]&&i.config.yaxis[u].logarithmic&&(h=Math.max(p,h),d=Math.min(p,d))})}),c=Math.pow(n.yRange[r],Math.abs(d-h)/n.yRange[r]),n.yLogRatio[r]=c/n.gridHeight,c}}),n.invalidLogScale?t.slice():n.yLogRatio}},{key:"drawSeriesByGroup",value:function(t,e,i,n){var o=this.w,r=[];return t.series.length>0&&e.forEach(function(a){var c=[],h=[];t.i.forEach(function(d,g){o.config.series[d].group===a&&(c.push(t.series[g]),h.push(d))}),c.length>0&&r.push(n.draw(c,i,h))}),r}}],[{key:"checkComboSeries",value:function(t,e){var i=!1,n=0,o=0;return void 0===e&&(e="line"),t.length&&void 0!==t[0].type&&t.forEach(function(r){"bar"!==r.type&&"column"!==r.type&&"candlestick"!==r.type&&"boxPlot"!==r.type||n++,void 0!==r.type&&r.type!==e&&o++}),o>0&&(i=!0),{comboBarCount:n,comboCharts:i}}},{key:"extendArrayProps",value:function(t,e,i){var n,o,r,a,c,h;return null!==(n=e)&&void 0!==n&&n.yaxis&&(e=t.extendYAxis(e,i)),null!==(o=e)&&void 0!==o&&o.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),null!==(r=e)&&void 0!==r&&null!==(a=r.annotations)&&void 0!==a&&a.xaxis&&(e=t.extendXAxisAnnotations(e)),null!==(c=e)&&void 0!==c&&null!==(h=c.annotations)&&void 0!==h&&h.points&&(e=t.extendPointAnnotations(e))),e}}]),s}(),rs=function(){function s(t){N(this,s),this.w=t.w,this.annoCtx=t}return B(s,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("vertical"===t.label.orientation){var o=this.w.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(null!==e?e:0,"']"));if(null!==o){var r=o.getBoundingClientRect();o.setAttribute("x",parseFloat(o.getAttribute("x"))-r.height+4);var a="top"===t.label.position?r.width:-r.width;o.setAttribute("y",parseFloat(o.getAttribute("y"))+a);var c=this.annoCtx.graphics.rotateAroundCenter(o),d=c.y;o.setAttribute("transform","rotate(-90 ".concat(c.x," ").concat(d,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var i=this.w;if(!t||!e.label.text||!String(e.label.text).trim())return null;var n=i.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),o=t.getBoundingClientRect(),r=e.label.style.padding,a=r.left,c=r.right,h=r.top,d=r.bottom;if("vertical"===e.label.orientation){var g=[a,c,h,d];h=g[0],d=g[1],a=g[2],c=g[3]}var m=this.annoCtx.graphics.drawRect(o.left-n.left-a-i.globals.barPadForNumericAxis,o.top-n.top-h,o.width+a+c,o.height+h+d,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&m.node.classList.add(e.id),m}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,i=function(n,o,r){var a=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(o,"']"));if(a){var c=a.parentNode,h=t.addBackgroundToAnno(a,n);h&&(c.insertBefore(h.node,a),n.label.mouseEnter&&h.node.addEventListener("mouseenter",n.label.mouseEnter.bind(t,n)),n.label.mouseLeave&&h.node.addEventListener("mouseleave",n.label.mouseLeave.bind(t,n)),n.label.click&&h.node.addEventListener("click",n.label.click.bind(t,n)))}};e.config.annotations.xaxis.forEach(function(n,o){return i(n,o,"xaxis")}),e.config.annotations.yaxis.forEach(function(n,o){return i(n,o,"yaxis")}),e.config.annotations.points.forEach(function(n,o){return i(n,o,"point")})}},{key:"getY1Y2",value:function(t,e){var i,n=this.w,o="y1"===t?e.y:e.y2,r=!1;if(this.annoCtx.invertAxis){var a=n.config.xaxis.convertedCatToNumeric?n.globals.categoryLabels:n.globals.labels,c=a.indexOf(o),h=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child(".concat(c+1,")"));i=h?parseFloat(h.getAttribute("y")):(n.globals.gridHeight/a.length-1)*(c+1)-n.globals.barHeight,void 0!==e.seriesIndex&&n.globals.barHeight&&(i-=n.globals.barHeight/2*(n.globals.series.length-1)-n.globals.barHeight*e.seriesIndex)}else{var d,g=n.globals.seriesYAxisMap[e.yAxisIndex][0],u=n.config.yaxis[e.yAxisIndex].logarithmic?new kt(this.annoCtx.ctx).getLogVal(n.config.yaxis[e.yAxisIndex].logBase,o,g)/n.globals.yLogRatio[g]:(o-n.globals.minYArr[g])/(n.globals.yRange[g]/n.globals.gridHeight);i=n.globals.gridHeight-Math.min(Math.max(u,0),n.globals.gridHeight),r=u>n.globals.gridHeight||u<0,!e.marker||null!=e.y||(i=0),null!==(d=n.config.yaxis[e.yAxisIndex])&&void 0!==d&&d.reversed&&(i=u)}return"string"==typeof o&&o.includes("px")&&(i=parseFloat(o)),{yP:i,clipped:r}}},{key:"getX1X2",value:function(t,e){var i=this.w,n="x1"===t?e.x:e.x2,a=this.annoCtx.invertAxis?i.globals.yRange[0]:i.globals.xRange,c=!1,h=this.annoCtx.inversedReversedAxis?((this.annoCtx.invertAxis?i.globals.maxY:i.globals.maxX)-n)/(a/i.globals.gridWidth):(n-(this.annoCtx.invertAxis?i.globals.minY:i.globals.minX))/(a/i.globals.gridWidth);return"category"!==i.config.xaxis.type&&!i.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||i.globals.dataFormatXNumeric||i.config.chart.sparkline.enabled||(h=this.getStringX(n)),"string"==typeof n&&n.includes("px")&&(h=parseFloat(n)),null==n&&e.marker&&(h=i.globals.gridWidth),void 0!==e.seriesIndex&&i.globals.barWidth&&!this.annoCtx.invertAxis&&(h-=i.globals.barWidth/2*(i.globals.series.length-1)-i.globals.barWidth*e.seriesIndex),"number"!=typeof h&&(h=0,c=!0),parseFloat(h.toFixed(10))>parseFloat(i.globals.gridWidth.toFixed(10))?(h=i.globals.gridWidth,c=!0):h<0&&(h=0,c=!0),{x:h,clipped:c}}},{key:"getStringX",value:function(t){var e=this.w,i=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var n=e.globals.labels.map(function(r){return Array.isArray(r)?r.join(" "):r}).indexOf(t),o=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child(".concat(n+1,")"));return o&&(i=parseFloat(o.getAttribute("x"))),i}}]),s}(),dx=function(){function s(t){N(this,s),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new rs(this.annoCtx)}return B(s,[{key:"addXaxisAnnotation",value:function(t,e,i){var n,o=this.w,r=this.helpers.getX1X2("x1",t),a=r.x,c=r.clipped,h=!0,d=t.label.text,g=t.strokeDashArray;if(A.isNumber(a)){if(null==t.x2){if(!c){var u=this.annoCtx.graphics.drawLine(a+t.offsetX,0+t.offsetY,a+t.offsetX,o.globals.gridHeight+t.offsetY,t.borderColor,g,t.borderWidth);e.appendChild(u.node),t.id&&u.node.classList.add(t.id)}}else{var p=this.helpers.getX1X2("x2",t);if(h=p.clipped,(n=p.x)<a){var m=a;a=n,n=m}var f=this.annoCtx.graphics.drawRect(a+t.offsetX,0+t.offsetY,n-a,o.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,g);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}if(!c||!h){var b=this.annoCtx.graphics.getTextRects(d,parseFloat(t.label.style.fontSize)),v=this.annoCtx.graphics.drawText({x:a+t.label.offsetX,y:("top"===t.label.position?4:"center"===t.label.position?o.globals.gridHeight/2+("vertical"===t.label.orientation?b.width/2:0):o.globals.gridHeight)+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?b.width/2-12:-b.width/2:0),text:d,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});v.attr({rel:i}),e.appendChild(v.node),this.annoCtx.helpers.setOrientations(t,i)}}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map(function(n,o){t.addXaxisAnnotation(n,i.node,o)}),i}}]),s}(),Lt=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return B(s,[{key:"isValidDate",value:function(t){return"number"!=typeof t&&!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var i=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(i)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var i=this.w.globals.locale,n=this.w.config.xaxis.labels.datetimeUTC,o=["\0"].concat(At(i.months)),r=["\x01"].concat(At(i.shortMonths)),a=["\x02"].concat(At(i.days)),c=["\x03"].concat(At(i.shortDays));function h(M,P){var O=M+"";for(P=P||2;O.length<P;)O="0"+O;return O}var d=n?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+d)).replace(/(^|[^\\])yy/g,"$1"+d.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+d);var g=(n?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+o[0])).replace(/(^|[^\\])MMM/g,"$1"+r[0])).replace(/(^|[^\\])MM/g,"$1"+h(g))).replace(/(^|[^\\])M/g,"$1"+g);var u=n?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+a[0])).replace(/(^|[^\\])ddd/g,"$1"+c[0])).replace(/(^|[^\\])dd/g,"$1"+h(u))).replace(/(^|[^\\])d/g,"$1"+u);var p=n?t.getUTCHours():t.getHours(),m=p>12?p-12:0===p?12:p;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+h(p))).replace(/(^|[^\\])H/g,"$1"+p)).replace(/(^|[^\\])hh+/g,"$1"+h(m))).replace(/(^|[^\\])h/g,"$1"+m);var f=n?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+h(f))).replace(/(^|[^\\])m/g,"$1"+f);var b=n?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+h(b))).replace(/(^|[^\\])s/g,"$1"+b);var x=n?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+h(x,3)),x=Math.round(x/10),e=e.replace(/(^|[^\\])ff/g,"$1"+h(x)),x=Math.round(x/10);var v=p<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+x)).replace(/(^|[^\\])TT+/g,"$1"+v)).replace(/(^|[^\\])T/g,"$1"+v.charAt(0));var _=v.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+_)).replace(/(^|[^\\])t/g,"$1"+_.charAt(0));var w=-t.getTimezoneOffset(),y=n||!w?"Z":w>0?"+":"-";if(!n){var k=(w=Math.abs(w))%60;y+=h(Math.floor(w/60))+":"+h(k)}e=e.replace(/(^|[^\\])K/g,"$1"+y);var C=(n?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(a[0],"g"),a[C])).replace(new RegExp(c[0],"g"),c[C])).replace(new RegExp(o[0],"g"),o[g])).replace(new RegExp(r[0],"g"),r[g])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,i){var n=this.w;void 0!==n.config.xaxis.min&&(t=n.config.xaxis.min),void 0!==n.config.xaxis.max&&(e=n.config.xaxis.max);var o=this.getDate(t),r=this.getDate(e),a=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" "),c=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(a[6],10),maxMillisecond:parseInt(c[6],10),minSecond:parseInt(a[5],10),maxSecond:parseInt(c[5],10),minMinute:parseInt(a[4],10),maxMinute:parseInt(c[4],10),minHour:parseInt(a[3],10),maxHour:parseInt(c[3],10),minDate:parseInt(a[2],10),maxDate:parseInt(c[2],10),minMonth:parseInt(a[1],10)-1,maxMonth:parseInt(c[1],10)-1,minYear:parseInt(a[0],10),maxYear:parseInt(c[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,i){return this.determineDaysOfMonths(t,e)-i}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,i){var n=this.daysCntOfYear[e]+i;return e>1&&this.isLeapYear()&&n++,n}},{key:"determineDaysOfMonths",value:function(t,e){var i=30;switch(t=A.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(i=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:i=31}return i}}]),s}(),an=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return B(s,[{key:"xLabelFormat",value:function(t,e,i,n){var o=this.w;if("datetime"===o.config.xaxis.type&&void 0===o.config.xaxis.labels.formatter&&void 0===o.config.tooltip.x.formatter){var r=new Lt(this.ctx);return r.formatDate(r.getDate(e),o.config.tooltip.x.format)}return t(e,i,n)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map(function(e){return e}):t}},{key:"defaultYFormatter",value:function(t,e,i){var n=this.w;if(A.isNumber(t))if(0!==n.globals.yValueDecimal)t=t.toFixed(void 0!==e.decimalsInFloat?e.decimalsInFloat:n.globals.yValueDecimal);else{var o=t.toFixed(0);t=t==o?o:t.toFixed(1)}return t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xaxisTooltipFormatter=function(i){return t.defaultGeneralFormatter(i)},e.globals.ttKeyFormatter=function(i){return t.defaultGeneralFormatter(i)},e.globals.ttZFormatter=function(i){return i},e.globals.legendFormatter=function(i){return t.defaultGeneralFormatter(i)},e.globals.xLabelFormatter=void 0!==e.config.xaxis.labels.formatter?e.config.xaxis.labels.formatter:function(i){if(A.isNumber(i)){if(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type){if(A.isNumber(e.config.xaxis.decimalsInFloat))return i.toFixed(e.config.xaxis.decimalsInFloat);var n=e.globals.maxX-e.globals.minX;return i.toFixed(n>0&&n<100?1:0)}return i.toFixed(e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?1:0)}return i},e.globals.ttKeyFormatter="function"==typeof e.config.tooltip.x.formatter?e.config.tooltip.x.formatter:e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach(function(i,n){e.globals.yLabelFormatters[n]=void 0!==i.labels.formatter?i.labels.formatter:function(o){return e.globals.xyCharts?Array.isArray(o)?o.map(function(r){return t.defaultYFormatter(r,i,n)}):t.defaultYFormatter(o,i,n):o}}),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce(function(i,n){return i.length>n.length?i:n},0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),s}(),ze=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"getLabel",value:function(t,e,i,n){var b,x,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=this.w,h=void 0===t[n]?"":t[n],d=h,g=c.globals.xLabelFormatter,u=c.config.xaxis.labels.formatter,p=!1,m=new an(this.ctx);a&&(d=m.xLabelFormat(g,h,h,{i:n,dateFormatter:new Lt(this.ctx).formatDate,w:c}),void 0!==u&&(d=u(h,t[n],{i:n,dateFormatter:new Lt(this.ctx).formatDate,w:c}))),e.length>0?(b=e[n].unit,x=null,e.forEach(function(y){"month"===y.unit?x="year":"day"===y.unit?x="month":"hour"===y.unit?x="day":"minute"===y.unit&&(x="hour")}),p=x===b,i=e[n].position,d=e[n].value):"datetime"===c.config.xaxis.type&&void 0===u&&(d=""),void 0===d&&(d=""),d=Array.isArray(d)?d:d.toString();var _,v=new D(this.ctx);_=c.globals.rotateXLabels&&a?v.getTextRects(d,parseInt(r,10),null,"rotate(".concat(c.config.xaxis.labels.rotate," 0 0)"),!1):v.getTextRects(d,parseInt(r,10));var w=!c.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(d)&&("NaN"===String(d)||o.indexOf(d)>=0&&w)&&(d=""),{x:i,text:d,textRect:_,isBold:p}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,i){var n=this.w,o=n.config.xaxis.tickAmount;return"dataPoints"===o&&(o=Math.round(n.globals.gridWidth/120)),o>i||t%Math.round(i/(o+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,i,n,o){var r=this.w;if(0===t&&r.globals.skipFirstTimelinelabel&&(e.text=""),t===i-1&&r.globals.skipLastTimelinelabel&&(e.text=""),r.config.xaxis.labels.hideOverlappingLabels&&n.length>0){var a=o[o.length-1];if(r.config.xaxis.labels.trim&&"datetime"!==r.config.xaxis.type)return e;e.x<a.textRect.width/(r.globals.rotateXLabels?Math.abs(r.config.xaxis.labels.rotate)/12:1.01)+a.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var i=this.w;return i.config.yaxis[t]&&i.config.yaxis[t].reversed&&e.reverse(),e}},{key:"yAxisAllSeriesCollapsed",value:function(t){var e=this.w.globals;return!e.seriesYAxisMap[t].some(function(i){return-1===e.collapsedSeriesIndices.indexOf(i)})}},{key:"translateYAxisIndex",value:function(t){var e=this.w,i=e.globals,n=e.config.yaxis;return i.series.length>n.length||n.some(function(o){return Array.isArray(o.seriesName)})?t:i.seriesYAxisReverseMap[t]}},{key:"isYAxisHidden",value:function(t){var e=this.w,i=e.config.yaxis[t];if(!i.show||this.yAxisAllSeriesCollapsed(t))return!0;if(!i.showForNullSeries){var n=e.globals.seriesYAxisMap[t],o=new kt(this.ctx);return n.every(function(r){return o.isSeriesNull(r)})}return!1}},{key:"getYAxisForeColor",value:function(t,e){var i=this.w;return Array.isArray(t)&&i.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,i.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,i,n,o,r,a){var c=this.w,h=new D(this.ctx),d=c.globals.translateY+c.config.yaxis[o].labels.offsetY;if(c.globals.isBarHorizontal?d=0:"heatmap"===c.config.chart.type&&(d+=r/2),n.show&&e>0){!0===c.config.yaxis[o].opposite&&(t+=n.width);for(var g=e;g>=0;g--){var u=h.drawLine(t+i.offsetX-n.width+n.offsetX,d+n.offsetY,t+i.offsetX+n.offsetX,d+n.offsetY,n.color);a.add(u),d+=r}}}}]),s}(),gx=function(){function s(t){N(this,s),this.w=t.w,this.annoCtx=t,this.helpers=new rs(this.annoCtx),this.axesUtils=new ze(this.annoCtx)}return B(s,[{key:"addYaxisAnnotation",value:function(t,e,i){var n,o=this.w,r=t.strokeDashArray,a=this.helpers.getY1Y2("y1",t),c=a.yP,h=a.clipped,g=!1,u=t.label.text;if(null==t.y2){if(!h){g=!0;var p=this.annoCtx.graphics.drawLine(0+t.offsetX,c+t.offsetY,this._getYAxisAnnotationWidth(t),c+t.offsetY,t.borderColor,r,t.borderWidth);e.appendChild(p.node),t.id&&p.node.classList.add(t.id)}}else{if((n=(a=this.helpers.getY1Y2("y2",t)).yP)>c){var m=c;c=n,n=m}if(!h||!a.clipped){g=!0;var f=this.annoCtx.graphics.drawRect(0+t.offsetX,n+t.offsetY,this._getYAxisAnnotationWidth(t),c-n,0,t.fillColor,t.opacity,1,t.borderColor,r);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(o.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}}if(g){var x=this.annoCtx.graphics.drawText({x:("right"===t.label.position?o.globals.gridWidth:"center"===t.label.position?o.globals.gridWidth/2:0)+t.label.offsetX,y:(n??c)+t.label.offsetY-3,text:u,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});x.attr({rel:i}),e.appendChild(x.node)}}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.forEach(function(n,o){n.yAxisIndex=t.axesUtils.translateYAxisIndex(n.yAxisIndex),t.axesUtils.isYAxisHidden(n.yAxisIndex)&&t.axesUtils.yAxisAllSeriesCollapsed(n.yAxisIndex)||t.addYaxisAnnotation(n,i.node,o)}),i}}]),s}(),ux=function(){function s(t){N(this,s),this.w=t.w,this.annoCtx=t,this.helpers=new rs(this.annoCtx)}return B(s,[{key:"addPointAnnotation",value:function(t,e,i){if(!(this.w.globals.collapsedSeriesIndices.indexOf(t.seriesIndex)>-1)){var n=this.helpers.getX1X2("x1",t),o=n.x,r=n.clipped,a=(n=this.helpers.getY1Y2("y1",t)).yP,c=n.clipped;if(A.isNumber(o)&&!c&&!r){var h={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},d=this.annoCtx.graphics.drawMarker(o+t.marker.offsetX,a+t.marker.offsetY,h);e.appendChild(d.node);var g=t.label.text?t.label.text:"",u=this.annoCtx.graphics.drawText({x:o+t.label.offsetX,y:a+t.label.offsetY-t.marker.size-parseFloat(t.label.style.fontSize)/1.6,text:g,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(u.attr({rel:i}),e.appendChild(u.node),t.customSVG.SVG){var p=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});p.attr({transform:"translate(".concat(o+t.customSVG.offsetX,", ").concat(a+t.customSVG.offsetY,")")}),p.node.innerHTML=t.customSVG.SVG,e.appendChild(p.node)}if(t.image.path){var m=t.image.width?t.image.width:20,f=t.image.height?t.image.height:20;d=this.annoCtx.addImage({x:o+t.image.offsetX-m/2,y:a+t.image.offsetY-f/2,width:m,height:f,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&d.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&d.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t)),t.click&&d.node.addEventListener("click",t.click.bind(this,t))}}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,i=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map(function(n,o){t.addPointAnnotation(n,i.node,o)}),i}}]),s}(),Zc={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},ri=function(){function s(){N(this,s),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,showDuplicates:!1,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return B(s,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[Zc],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.7},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,injectStyleSheet:!0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0},scale:void 0,width:void 0},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,allowMouseWheelZoom:!0,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},parsing:{x:void 0,y:void 0},plotOptions:{line:{isSlopeChart:!1,colors:{threshold:0,colorAboveThreshold:void 0,colorBelowThreshold:void 0}},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0},seriesTitle:{show:!0,offsetY:1,offsetX:1,borderColor:"#000",borderWidth:1,borderRadius:2,style:{background:"rgba(0, 0, 0, 0.6)",color:"#fff",fontSize:"12px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:6,right:6,top:2,bottom:2}}}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(e,i){return e+i},0)/t.globals.series.length+"%"}}},barLabels:{enabled:!1,offsetX:0,offsetY:0,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(t){return t},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce(function(e,i){return e+i},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",backgroundColor:void 0,borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.8}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],clusterGroupedSeries:!0,clusterGroupedSeriesOrientation:"vertical",labels:{colors:void 0,useSeriesColors:!1},markers:{size:7,fillColors:void 0,strokeWidth:1,shape:void 0,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{hover:{filter:{type:"lighten"}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken"}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.8}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),s}(),px=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.graphics=new D(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new rs(this),this.xAxisAnnotations=new dx(this),this.yAxisAnnotations=new gx(this),this.pointsAnnotations=new ux(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return B(s,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts&&t.globals.dataPoints){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),i=this.xAxisAnnotations.drawXAxisAnnotations(),n=this.pointsAnnotations.drawPointAnnotations(),o=t.config.chart.animations.enabled,r=[e,i,n],a=[i.node,e.node,n.node],c=0;c<3;c++)t.globals.dom.elGraphical.add(r[c]),!o||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&a[c].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:a[c],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map(function(e,i){t.addImage(e,i)})}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map(function(e,i){t.addText(e,i)})}},{key:"addXaxisAnnotation",value:function(t,e,i){this.xAxisAnnotations.addXaxisAnnotation(t,e,i)}},{key:"addYaxisAnnotation",value:function(t,e,i){this.yAxisAnnotations.addYaxisAnnotation(t,e,i)}},{key:"addPointAnnotation",value:function(t,e,i){this.pointsAnnotations.addPointAnnotation(t,e,i)}},{key:"addText",value:function(t,e){var o=t.text,u=t.backgroundColor,p=t.borderWidth,m=t.strokeDashArray,f=t.borderRadius,b=t.borderColor,x=t.appendTo,v=void 0===x?".apexcharts-svg":x,_=t.paddingLeft,w=void 0===_?4:_,y=t.paddingRight,k=void 0===y?4:y,C=t.paddingBottom,M=void 0===C?2:C,P=t.paddingTop,O=void 0===P?2:P,S=this.w,E=this.graphics.drawText({x:t.x,y:t.y,text:o,textAnchor:t.textAnchor||"start",fontSize:t.fontSize||"12px",fontWeight:t.fontWeight||"regular",fontFamily:t.fontFamily||S.config.chart.fontFamily,foreColor:t.foreColor||S.config.chart.foreColor,cssClass:t.cssClass}),I=S.globals.dom.baseEl.querySelector(v);I&&I.appendChild(E.node);var R=E.bbox();if(o){var T=this.graphics.drawRect(R.x-w,R.y-O,R.width+w+k,R.height+M+O,f,u||"transparent",1,p,b,m);I.insertBefore(T.node,E.node)}}},{key:"addImage",value:function(t,e){var i=this.w,o=t.x,r=void 0===o?0:o,a=t.y,c=void 0===a?0:a,h=t.width,d=void 0===h?20:h,g=t.height,u=void 0===g?20:g,p=t.appendTo,m=void 0===p?".apexcharts-svg":p,f=i.globals.dom.Paper.image(t.path);f.size(d,u).move(r,c);var b=i.globals.dom.baseEl.querySelector(m);return b&&b.appendChild(f.node),f}},{key:"addXaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"xaxis",contextMethod:i.addXaxisAnnotation}),i}},{key:"addYaxisAnnotationExternal",value:function(t,e,i){return this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"yaxis",contextMethod:i.addYaxisAnnotation}),i}},{key:"addPointAnnotationExternal",value:function(t,e,i){return void 0===this.invertAxis&&(this.invertAxis=i.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:i,type:"point",contextMethod:i.addPointAnnotation}),i}},{key:"addAnnotationExternal",value:function(t){var e=t.params,i=t.pushToMemory,n=t.context,o=t.type,r=t.contextMethod,a=n,c=a.w,h=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations")),d=h.childNodes.length+1,g=new ri,u=Object.assign({},"xaxis"===o?g.xAxisAnnotation:"yaxis"===o?g.yAxisAnnotation:g.pointAnnotation),p=A.extend(u,e);switch(o){case"xaxis":this.addXaxisAnnotation(p,h,d);break;case"yaxis":this.addYaxisAnnotation(p,h,d);break;case"point":this.addPointAnnotation(p,h,d)}var m=c.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-annotations .apexcharts-").concat(o,"-annotation-label[rel='").concat(d,"']")),f=this.helpers.addBackgroundToAnno(m,p);return f&&h.insertBefore(f.node,m),i&&c.globals.memory.methodsToExec.push({context:a,id:p.id?p.id:A.randomId(),method:r,label:"addAnnotation",params:e}),n}},{key:"clearAnnotations",value:function(t){for(var e=t.w,i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations"),n=e.globals.memory.methodsToExec.length-1;n>=0;n--)"addText"!==e.globals.memory.methodsToExec[n].label&&"addAnnotation"!==e.globals.memory.methodsToExec[n].label||e.globals.memory.methodsToExec.splice(n,1);i=A.listToArray(i),Array.prototype.forEach.call(i,function(o){for(;o.firstChild;)o.removeChild(o.firstChild)})}},{key:"removeAnnotation",value:function(t,e){var i=t.w,n=i.globals.dom.baseEl.querySelectorAll(".".concat(e));n&&(i.globals.memory.methodsToExec.map(function(o,r){o.id===e&&i.globals.memory.methodsToExec.splice(r,1)}),Object.keys(i.config.annotations).forEach(function(o){var r=i.config.annotations[o];Array.isArray(r)&&(i.config.annotations[o]=r.filter(function(a){return a.id!==e}))}),Array.prototype.forEach.call(n,function(o){o.parentElement.removeChild(o)}))}}]),s}(),Ko=function(s){var t,e=s.isTimeline,i=s.ctx,n=s.seriesIndex,o=s.dataPointIndex,r=s.y1,a=s.y2,c=s.w,h=c.globals.seriesRangeStart[n][o],d=c.globals.seriesRangeEnd[n][o],g=c.globals.labels[o],u=c.config.series[n].name?c.config.series[n].name:"",p=c.globals.ttKeyFormatter,m=c.config.tooltip.y.title.formatter,f={w:c,seriesIndex:n,dataPointIndex:o,start:h,end:d};"function"==typeof m&&(u=m(u,f)),null!==(t=c.config.series[n].data[o])&&void 0!==t&&t.x&&(g=c.config.series[n].data[o].x),e||"datetime"===c.config.xaxis.type&&(g=new an(i).xLabelFormat(c.globals.ttKeyFormatter,g,g,{i:void 0,dateFormatter:new Lt(i).formatDate,w:c})),"function"==typeof p&&(g=p(g,f)),Number.isFinite(r)&&Number.isFinite(a)&&(h=r,d=a);var b="",x="",v=c.globals.colors[n];if(void 0===c.config.tooltip.x.formatter)if("datetime"===c.config.xaxis.type){var _=new Lt(i);b=_.formatDate(_.getDate(h),c.config.tooltip.x.format),x=_.formatDate(_.getDate(d),c.config.tooltip.x.format)}else b=h,x=d;else b=c.config.tooltip.x.formatter(h),x=c.config.tooltip.x.formatter(d);return{start:h,end:d,startVal:b,endVal:x,ylabel:g,color:v,seriesName:u}},Jo=function(s){var t=s.color,e=s.seriesName,i=s.ylabel,n=s.start,o=s.end,r=s.seriesIndex,a=s.dataPointIndex,c=s.ctx.tooltip.tooltipLabels.getFormatters(r);n=c.yLbFormatter(n),o=c.yLbFormatter(o);var h=c.yLbFormatter(s.w.globals.series[r][a]),d='<span class="value start-value">\n  '.concat(n,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(o,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+t+'">'+(e||"")+'</span></div><div> <span class="category">'+i+": </span> "+(s.w.globals.comboCharts?"rangeArea"===s.w.config.series[r].type||"rangeBar"===s.w.config.series[r].type?d:"<span>".concat(h,"</span>"):d)+" </div></div>"},ln=function(){function s(t){N(this,s),this.opts=t}return B(s,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.hideYAxis(),A.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(t,e){return null!==t?e.w.config.series[e.seriesIndex].name+": "+t:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"square"},fill:{opacity:.85},legend:{markers:{shape:"square"}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),z(z({},this.bar()),{},{chart:{animations:{speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){return t._getBoxTooltip(e.w,e.seriesIndex,e.dataPointIndex,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){return t._getBoxTooltip(e.w,e.seriesIndex,e.dataPointIndex,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:7,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){var i=e.seriesIndex,n=e.dataPointIndex,o=e.w,r=function(){return o.globals.seriesRangeEnd[i][n]-o.globals.seriesRangeStart[i][n]};return o.globals.comboCharts?"rangeBar"===o.config.series[i].type||"rangeArea"===o.config.series[i].type?r():t:r()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?(n=(i=Ko(z(z({},e=t),{},{isTimeline:!0}))).color,o=i.seriesName,r=i.ylabel,a=i.startVal,c=i.endVal,Jo(z(z({},e),{},{color:n,seriesName:o,ylabel:r,start:a,end:c}))):function(e){var i=Ko(e),n=i.color,o=i.seriesName,r=i.ylabel,a=i.start,c=i.end;return Jo(z(z({},e),{},{color:n,seriesName:o,ylabel:r,start:a,end:c}))}(t);var e,i,n,o,r,a,c}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(t){var e,i;return null!==(e=t.plotOptions.bar)&&void 0!==e&&e.barHeight||(t.plotOptions.bar.barHeight=2),null!==(i=t.plotOptions.bar)&&void 0!==i&&i.columnWidth||(t.plotOptions.bar.columnWidth=2),t}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(t){return n=(i=Ko(e=t)).color,o=i.seriesName,r=i.ylabel,a=i.start,c=i.end,Jo(z(z({},e),{},{color:n,seriesName:o,ylabel:r,start:a,end:c}));var e,i,n,o,r,a,c}}}}},{key:"brush",value:function(t){return A.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach(function(i,n){t.yaxis[n].min=0,t.yaxis[n].max=100}),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(i){return"number"==typeof i&&i?i.toFixed(0)+"%":i}),t}},{key:"stackedBars",value:function(){var t=this.bar();return z(z({},t),{},{plotOptions:z(z({},t.plotOptions),{},{bar:z(z({},t.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,i){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(r){return A.isNumber(r)?Math.floor(r):r};var n=t.xaxis.labels.formatter,o=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return i&&i.length&&(o=i.map(function(r){return Array.isArray(r)?r:String(r)})),o&&o.length&&(t.xaxis.labels.formatter=function(r){return A.isNumber(r)?n(o[Math.floor(r)-1]):n(r)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:5,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0},grid:{padding:{left:0,right:0,top:0,bottom:0}}}}},{key:"_getBoxTooltip",value:function(t,e,i,n,o){var r=t.globals.seriesCandleO[e][i],a=t.globals.seriesCandleH[e][i],c=t.globals.seriesCandleM[e][i],h=t.globals.seriesCandleL[e][i],d=t.globals.seriesCandleC[e][i];return t.config.series[e].type&&t.config.series[e].type!==o?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][i],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(n[0],': <span class="value">')+r+"</span></div>"+"<div>".concat(n[1],': <span class="value">')+a+"</span></div>"+(c?"<div>".concat(n[2],': <span class="value">')+c+"</span></div>":"")+"<div>".concat(n[3],': <span class="value">')+h+"</span></div>"+"<div>".concat(n[4],': <span class="value">')+d+"</span></div></div>"}}]),s}(),cn=function(){function s(t){N(this,s),this.opts=t}return B(s,[{key:"init",value:function(t){var e=t.responsiveOverride,i=this.opts,n=new ri,o=new ln(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var r=n.init(),a={};if(i&&"object"===Bt(i)){var c,h,d,g,u,p,m,f,b,x,v={};v=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?o[i.chart.type]():o.line(),null!==(c=i.plotOptions)&&void 0!==c&&null!==(h=c.bar)&&void 0!==h&&h.isFunnel&&(v=o.funnel()),i.chart.stacked&&"bar"===i.chart.type&&(v=o.stackedBars()),null!==(d=i.chart.brush)&&void 0!==d&&d.enabled&&(v=o.brush(v)),null!==(g=i.plotOptions)&&void 0!==g&&null!==(u=g.line)&&void 0!==u&&u.isSlopeChart&&(v=o.slope()),i.chart.stacked&&"100%"===i.chart.stackType&&(i=o.stacked100(i)),null!==(p=i.plotOptions)&&void 0!==p&&null!==(m=p.bar)&&void 0!==m&&m.isDumbbell&&(i=o.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},e||(i.xaxis.convertedCatToNumeric=!1),(null!==(f=(i=this.checkForCatToNumericXAxis(this.chartType,v,i)).chart.sparkline)&&void 0!==f&&f.enabled||null!==(b=window.Apex.chart)&&void 0!==b&&null!==(x=b.sparkline)&&void 0!==x&&x.enabled)&&(v=o.sparkline(v)),a=A.extend(r,v)}var _=A.extend(a,window.Apex);return r=A.extend(_,i),this.handleUserInputErrors(r)}},{key:"checkForCatToNumericXAxis",value:function(t,e,i){var n,o,r=new ln(i);return("bar"===t||"boxPlot"===t)&&(null===(n=i.plotOptions)||void 0===n||null===(o=n.bar)||void 0===o?void 0:o.horizontal)||"pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t||!("datetime"!==i.xaxis.type&&"numeric"!==i.xaxis.type)||"between"===(i.xaxis.tickPlacement?i.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement)||(i=r.convertCatToNumeric(i)),i}},{key:"extendYAxis",value:function(t,e){var i=new ri;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=A.extend(t.yaxis,window.Apex.yaxis)),t.yaxis=t.yaxis.constructor!==Array?[A.extend(i.yAxis,t.yaxis)]:A.extendArray(t.yaxis,i.yAxis);var n=!1;t.yaxis.forEach(function(r){r.logarithmic&&(n=!0)});var o=t.series;return e&&!o&&(o=e.config.series),n&&o.length!==t.yaxis.length&&o.length&&(t.yaxis=o.map(function(r,a){if(r.name||(o[a].name="series-".concat(a+1)),t.yaxis[a])return t.yaxis[a].seriesName=o[a].name,t.yaxis[a];var c=A.extend(i.yAxis,t.yaxis[0]);return c.show=!1,c})),n&&o.length>1&&o.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new ri;return t.annotations.yaxis=A.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new ri;return t.annotations.xaxis=A.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new ri;return t.annotations.points=A.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===e.chart.type&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&"barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(e.xaxis.crosshairs.width="tickWidth"),"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type||e.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(e.chart.type," chart is not supported.")),e.yaxis[0].reversed=!1),e}}]),s}(),Kc=function(){function s(){N(this,s)}return B(s,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRange=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.dataWasParsed=!1,t.originalSeries=null,t.labels=[],t.hasXaxisGroups=!1,t.groups=[],t.barGroups=[],t.lineGroups=[],t.areaGroups=[],t.hasSeriesGroups=!1,t.seriesGroups=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.lastWheelExecution=0,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0,t.multiAxisTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:t.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=A.extend({},t),e.initialSeries=A.clone(t.series),e.lastXAxis=A.clone(e.initialConfig.xaxis),e.lastYAxis=A.clone(e.initialConfig.yaxis),e}}]),s}(),fx=function(){function s(t){N(this,s),this.opts=t}return B(s,[{key:"init",value:function(){var t=new cn(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new Kc).init(t)}}}]),s}(),re=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0,this.patternIDs=[]}return B(s,[{key:"clippedImgArea",value:function(t){var e=this.w,i=e.config,n=parseInt(e.globals.gridWidth,10),o=parseInt(e.globals.gridHeight,10),r=n>o?n:o,a=t.image,c=0,h=0;void 0===t.width&&void 0===t.height?void 0!==i.fill.image.width&&void 0!==i.fill.image.height?(c=i.fill.image.width+1,h=i.fill.image.height):(c=r+1,h=r):(c=t.width,h=t.height);var d=document.createElementNS(e.globals.SVGNS,"pattern");D.setAttrs(d,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:c+"px",height:h+"px"});var g=document.createElementNS(e.globals.SVGNS,"image");d.appendChild(g),g.setAttributeNS(window.SVG.xlink,"href",a),D.setAttrs(g,{x:0,y:0,preserveAspectRatio:"none",width:c+"px",height:h+"px"}),g.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(d)}},{key:"getSeriesIndex",value:function(t){var e=this.w,i=e.config.chart.type;return this.seriesIndex=("bar"===i||"rangeBar"===i)&&e.config.plotOptions.bar.distributed||"heatmap"===i||"treemap"===i?t.seriesNumber:t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"computeColorStops",value:function(t,e){var i,n=this.w,o=null,r=null,a=Zi(t);try{for(a.s();!(i=a.n()).done;){var c=i.value;c>=e.threshold?(null===o||c>o)&&(o=c):(null===r||c<r)&&(r=c)}}catch(g){a.e(g)}finally{a.f()}null===o&&(o=e.threshold),null===r&&(r=e.threshold);var h=o-e.threshold+(e.threshold-r);0===h&&(h=1);var d=100-(e.threshold-r)/h*100;return[{offset:d=Math.max(0,Math.min(d,100)),color:e.colorAboveThreshold,opacity:n.config.fill.opacity},{offset:0,color:e.colorBelowThreshold,opacity:n.config.fill.opacity}]}},{key:"fillPath",value:function(t){var e,i,n,o=this.w;this.opts=t;var r,a,c,h=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var d=h.plotOptions.line.colors.colorAboveThreshold&&h.plotOptions.line.colors.colorBelowThreshold,g=this.getFillColors()[this.seriesIndex];void 0!==o.globals.seriesColors[this.seriesIndex]&&(g=o.globals.seriesColors[this.seriesIndex]),"function"==typeof g&&(g=g({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:o}));var u,p,m,f=t.fillType?t.fillType:this.getFillType(this.seriesIndex),b=Array.isArray(h.fill.opacity)?h.fill.opacity[this.seriesIndex]:h.fill.opacity,x="gradient"===f||d;t.color&&(g=t.color),null!==(e=o.config.series[this.seriesIndex])&&void 0!==e&&null!==(i=e.data)&&void 0!==i&&null!==(n=i[t.dataPointIndex])&&void 0!==n&&n.fillColor&&(g=null===(u=o.config.series[this.seriesIndex])||void 0===u||null===(p=u.data)||void 0===p||null===(m=p[t.dataPointIndex])||void 0===m?void 0:m.fillColor),g||(g="#fff",console.warn("undefined color - ApexCharts"));var v=g;if(-1===g.indexOf("rgb")?-1===g.indexOf("#")?v=g:g.length<9&&(v=A.hexToRgba(g,b)):g.indexOf("rgba")>-1?b=A.getOpacityFromRGBA(g):v=A.hexToRgba(A.rgb2hex(g),b),t.opacity&&(b=t.opacity),"pattern"===f&&(a=this.handlePatternFill({fillConfig:t.fillConfig,patternFill:a,fillColor:g,fillOpacity:b,defaultColor:v})),x){var _=At(h.fill.gradient.colorStops)||[],w=h.fill.gradient.type;d&&(_[this.seriesIndex]=this.computeColorStops(o.globals.series[this.seriesIndex],h.plotOptions.line.colors),w="vertical"),c=this.handleGradientFill({type:w,fillConfig:t.fillConfig,fillColor:g,fillOpacity:b,colorStops:_,i:this.seriesIndex})}if("image"===f){var y=h.fill.image.src,k=t.patternID?t.patternID:"",C="pattern".concat(o.globals.cuid).concat(t.seriesNumber+1).concat(k);-1===this.patternIDs.indexOf(C)&&(this.clippedImgArea({opacity:b,image:Array.isArray(y)?t.seriesNumber<y.length?y[t.seriesNumber]:y[0]:y,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:C}),this.patternIDs.push(C)),r="url(#".concat(C,")")}else r=x?c:"pattern"===f?a:v;return t.solid&&(r=v),r}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,i=this.opts,n=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?n=t.globals.stroke.colors:n.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?n=t.globals.fill.colors:n.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?n=t.globals.stroke.colors:n.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?n=t.globals.fill.colors:n.push(t.globals.fill.colors),void 0!==i.fillColors&&(n=[],Array.isArray(i.fillColors)?n=i.fillColors.slice():n.push(i.fillColors)),n}},{key:"handlePatternFill",value:function(t){var e=t.fillConfig,n=t.fillColor,o=t.fillOpacity,r=t.defaultColor,a=this.w.config.fill;e&&(a=e);var c=this.opts,h=new D(this.ctx),d=Array.isArray(a.pattern.strokeWidth)?a.pattern.strokeWidth[this.seriesIndex]:a.pattern.strokeWidth,g=n;return Array.isArray(a.pattern.style)?void 0!==a.pattern.style[c.seriesNumber]?h.drawPattern(a.pattern.style[c.seriesNumber],a.pattern.width,a.pattern.height,g,d,o):r:h.drawPattern(a.pattern.style,a.pattern.width,a.pattern.height,g,d,o)}},{key:"handleGradientFill",value:function(t){var e=t.type,i=t.fillColor,n=t.fillOpacity,o=t.fillConfig,r=t.colorStops,a=t.i,c=this.w.config.fill;o&&(c=z(z({},c),o));var h=this.opts,d=new D(this.ctx),g=new A;e=e||c.gradient.type;var u,p=i,m=void 0===c.gradient.opacityFrom?n:Array.isArray(c.gradient.opacityFrom)?c.gradient.opacityFrom[a]:c.gradient.opacityFrom;p.indexOf("rgba")>-1&&(m=A.getOpacityFromRGBA(p));var f=void 0===c.gradient.opacityTo?n:Array.isArray(c.gradient.opacityTo)?c.gradient.opacityTo[a]:c.gradient.opacityTo;if(void 0===c.gradient.gradientToColors||0===c.gradient.gradientToColors.length)u=g.shadeColor("dark"===c.gradient.shade?-1*parseFloat(c.gradient.shadeIntensity):parseFloat(c.gradient.shadeIntensity),i.indexOf("rgb")>-1?A.rgb2hex(i):i);else if(c.gradient.gradientToColors[h.seriesNumber]){var b=c.gradient.gradientToColors[h.seriesNumber];u=b,b.indexOf("rgba")>-1&&(f=A.getOpacityFromRGBA(b))}else u=i;if(c.gradient.gradientFrom&&(p=c.gradient.gradientFrom),c.gradient.gradientTo&&(u=c.gradient.gradientTo),c.gradient.inverseColors){var x=p;p=u,u=x}return p.indexOf("rgb")>-1&&(p=A.rgb2hex(p)),u.indexOf("rgb")>-1&&(u=A.rgb2hex(u)),d.drawGradient(e,p,u,m,f,h.size,c.gradient.stops,r,a)}}]),s}(),Mi=function(){function s(t,e){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map(function(i){return t.config.markers.size})}},{key:"plotChartMarkers",value:function(t){var i=t.seriesIndex,n=t.j,o=t.pSize,r=t.alwaysDrawMarker,a=void 0!==r&&r,c=t.isVirtualPoint,h=void 0!==c&&c,d=this.w,g=i,u=t.pointsPos,p=null,m=new D(this.ctx),f=d.config.markers.discrete&&d.config.markers.discrete.length;if(Array.isArray(u.x))for(var b=0;b<u.x.length;b++){var x=void 0,v=n,_=!A.isNumber(u.y[b]);0===d.globals.markers.largestSize&&d.globals.hasNullValues&&null!==d.globals.series[g][n+1]&&!h&&(_=!0),1===n&&0===b&&(v=0),1===n&&1===b&&(v=1);var w="apexcharts-marker";if("line"!==d.config.chart.type&&"area"!==d.config.chart.type||d.globals.comboCharts||d.config.tooltip.intersect||(w+=" no-pointer-events"),(Array.isArray(d.config.markers.size)?d.globals.markers.size[i]>0:d.config.markers.size>0)||a||f){_||(w+=" w".concat(A.randomId()));var y=this.getMarkerConfig({cssClass:w,seriesIndex:i,dataPointIndex:v});d.config.series[g].data[v]&&(d.config.series[g].data[v].fillColor&&(y.pointFillColor=d.config.series[g].data[v].fillColor),d.config.series[g].data[v].strokeColor&&(y.pointStrokeColor=d.config.series[g].data[v].strokeColor)),void 0!==o&&(y.pSize=o),(u.x[b]<-d.globals.markers.largestSize||u.x[b]>d.globals.gridWidth+d.globals.markers.largestSize||u.y[b]<-d.globals.markers.largestSize||u.y[b]>d.globals.gridHeight+d.globals.markers.largestSize)&&(y.pSize=0),!_&&((d.globals.markers.size[i]>0||a||f)&&!p&&(p=m.group({class:a||f?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(d.globals.cuid,")")),(x=m.drawMarker(u.x[b],u.y[b],y)).attr("rel",v),x.attr("j",v),x.attr("index",i),x.node.setAttribute("default-marker-size",y.pSize),new Rt(this.ctx).setSelectionFilter(x,i,v),this.addEvents(x),p&&p.add(x))}else void 0===d.globals.pointsArray[i]&&(d.globals.pointsArray[i]=[]),d.globals.pointsArray[i].push([u.x[b],u.y[b]])}return p}},{key:"getMarkerConfig",value:function(t){var e=t.cssClass,i=t.seriesIndex,n=t.dataPointIndex,o=void 0===n?null:n,r=t.radius,a=void 0===r?null:r,c=t.size,h=void 0===c?null:c,d=t.strokeWidth,g=void 0===d?null:d,u=this.w,p=this.getMarkerStyle(i),m=null===h?u.globals.markers.size[i]:h,f=u.config.markers;return null!==o&&f.discrete.length&&f.discrete.map(function(b){b.seriesIndex===i&&b.dataPointIndex===o&&(p.pointStrokeColor=b.strokeColor,p.pointFillColor=b.fillColor,m=b.size,p.pointShape=b.shape)}),{pSize:null===a?m:a,pRadius:null!==a?a:f.radius,pointStrokeWidth:null!==g?g:Array.isArray(f.strokeWidth)?f.strokeWidth[i]:f.strokeWidth,pointStrokeColor:p.pointStrokeColor,pointFillColor:p.pointFillColor,shape:p.pointShape||(Array.isArray(f.shape)?f.shape[i]:f.shape),class:e,pointStrokeOpacity:Array.isArray(f.strokeOpacity)?f.strokeOpacity[i]:f.strokeOpacity,pointStrokeDashArray:Array.isArray(f.strokeDashArray)?f.strokeDashArray[i]:f.strokeDashArray,pointFillOpacity:Array.isArray(f.fillOpacity)?f.fillOpacity[i]:f.fillOpacity,seriesIndex:i}}},{key:"addEvents",value:function(t){var e=this.w,i=new D(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",i.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,i=e.globals.markers.colors,n=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(n)?n[t]:n,pointFillColor:Array.isArray(i)?i[t]:i}}}]),s}(),Jc=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled}return B(s,[{key:"draw",value:function(t,e,i){var n=this.w,o=new D(this.ctx),r=i.realIndex,a=i.pointsPos,c=i.zRatio,h=i.elParent,d=o.group({class:"apexcharts-series-markers apexcharts-series-".concat(n.config.chart.type)});if(d.attr("clip-path","url(#gridRectMarkerMask".concat(n.globals.cuid,")")),Array.isArray(a.x))for(var g=0;g<a.x.length;g++){var u=e+1,p=!0;0===e&&0===g&&(u=0),0===e&&1===g&&(u=1);var m=n.globals.markers.size[r];if(c!==1/0){var f=n.config.plotOptions.bubble;m=n.globals.seriesZ[r][u],f.zScaling&&(m/=c),f.minBubbleRadius&&m<f.minBubbleRadius&&(m=f.minBubbleRadius),f.maxBubbleRadius&&m>f.maxBubbleRadius&&(m=f.maxBubbleRadius)}var x=a.y[g];if(m=m||0,null!==x&&void 0!==n.globals.series[r][u]||(p=!1),p){var v=this.drawPoint(a.x[g],x,m,r,u,e);d.add(v)}h.add(d)}}},{key:"drawPoint",value:function(t,e,i,n,o,r){var a=this.w,c=n,h=new bi(this.ctx),d=new Rt(this.ctx),g=new re(this.ctx),u=new Mi(this.ctx),p=new D(this.ctx),m=u.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:c,dataPointIndex:o,radius:"bubble"===a.config.chart.type||a.globals.comboCharts&&a.config.series[n]&&"bubble"===a.config.series[n].type?i:null}),f=g.fillPath({seriesNumber:n,dataPointIndex:o,color:m.pointFillColor,patternUnits:"objectBoundingBox",value:a.globals.series[n][r]}),b=p.drawMarker(t,e,m);return a.config.series[c].data[o]&&a.config.series[c].data[o].fillColor&&(f=a.config.series[c].data[o].fillColor),b.attr({fill:f}),a.config.chart.dropShadow.enabled&&d.dropShadow(b,a.config.chart.dropShadow,n),!this.initialAnim||a.globals.dataChanged||a.globals.resized?a.globals.animationEnded=!0:h.animateMarker(b,a.config.chart.animations.speed,a.globals.easing,function(){window.setTimeout(function(){h.animationCompleted(b)},100)}),b.attr({rel:o,j:o,index:n,"default-marker-size":m.pSize}),d.setSelectionFilter(b,n,o),u.addEvents(b),b.node.classList.add("apexcharts-marker"),b}},{key:"centerTextInBubble",value:function(t){return{y:t+=parseInt(this.w.config.dataLabels.style.fontSize,10)/4}}}]),s}(),Pi=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"dataLabelsCorrection",value:function(t,e,i,n,o,r,a){var c=this.w,h=!1,d=new D(this.ctx).getTextRects(i,a),g=d.width,u=d.height;if(e<0&&(e=0),e>c.globals.gridHeight+u&&(e=c.globals.gridHeight+u/2),void 0===c.globals.dataLabelsRects[n]&&(c.globals.dataLabelsRects[n]=[]),c.globals.dataLabelsRects[n].push({x:t,y:e,width:g,height:u}),void 0!==c.globals.dataLabelsRects[n][c.globals.dataLabelsRects[n].length-2]){var f=c.globals.dataLabelsRects[n][void 0!==c.globals.lastDrawnDataLabelsIndexes[n]?c.globals.lastDrawnDataLabelsIndexes[n][c.globals.lastDrawnDataLabelsIndexes[n].length-1]:0];(t>f.x+f.width||e>f.y+f.height||e+u<f.y||t+g<f.x)&&(h=!0)}return(0===o||r)&&(h=!0),{x:t,y:e,textRects:d,drawnextLabel:h}}},{key:"drawDataLabel",value:function(t){var e=this,i=t.type,n=t.pos,o=t.i,r=t.j,a=t.isRangeStart,c=t.strokeWidth,h=void 0===c?2:c,d=this.w,g=new D(this.ctx),u=d.config.dataLabels,p=0,m=0,f=r,b=null;if(-1!==d.globals.collapsedSeriesIndices.indexOf(o)||!u.enabled||!Array.isArray(n.x))return b;b=g.group({class:"apexcharts-data-labels"});for(var x=0;x<n.x.length;x++)if(p=n.x[x]+u.offsetX,m=n.y[x]+u.offsetY+h,!isNaN(p)){1===r&&0===x&&(f=0),1===r&&1===x&&(f=1);var v=d.globals.series[o][f];"rangeArea"===i&&(v=a?d.globals.seriesRangeStart[o][f]:d.globals.seriesRangeEnd[o][f]);var _="",w=function(k){return d.config.dataLabels.formatter(k,{ctx:e.ctx,seriesIndex:o,dataPointIndex:f,w:d})};"bubble"===d.config.chart.type?(_=w(v=d.globals.seriesZ[o][f]),m=n.y[x],m=new Jc(this.ctx).centerTextInBubble(m,o,f).y):void 0!==v&&(_=w(v));var y=d.config.dataLabels.textAnchor;d.globals.isSlopeChart&&(y=0===f?"end":f===d.config.series[o].data.length-1?"start":"middle"),this.plotDataLabelsText({x:p,y:m,text:_,i:o,j:f,parent:b,offsetCorrection:!0,dataLabelsConfig:d.config.dataLabels,textAnchor:y})}return b}},{key:"plotDataLabelsText",value:function(t){var e=this.w,i=new D(this.ctx),n=t.x,o=t.y,r=t.i,a=t.j,c=t.text,h=t.textAnchor,d=t.fontSize,g=t.parent,u=t.dataLabelsConfig,p=t.color,m=t.alwaysDrawDataLabel,f=t.offsetCorrection,b=t.className,x=null;if(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(r)<0)return x;var v={x:n,y:o,drawnextLabel:!0,textRects:null};f&&(v=this.dataLabelsCorrection(n,o,c,r,a,m,parseInt(u.style.fontSize,10))),e.globals.zoomed||(n=v.x,o=v.y),v.textRects&&(n<-20-v.textRects.width||n>e.globals.gridWidth+v.textRects.width+30)&&(c="");var _=e.globals.dataLabels.style.colors[r];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(_=e.globals.dataLabels.style.colors[a]),"function"==typeof _&&(_=_({series:e.globals.series,seriesIndex:r,dataPointIndex:a,w:e})),p&&(_=p);var w=u.offsetX,y=u.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(w=0,y=0),e.globals.isSlopeChart&&(0!==a&&(w=-2*u.offsetX+5),0!==a&&a!==e.config.series[r].data.length-1&&(w=0)),v.drawnextLabel){if("middle"===h&&n===e.globals.gridWidth&&(h="end"),(x=i.drawText({width:100,height:parseInt(u.style.fontSize,10),x:n+w,y:o+y,foreColor:_,textAnchor:h||u.textAnchor,text:c,fontSize:d||u.style.fontSize,fontFamily:u.style.fontFamily,fontWeight:u.style.fontWeight||"normal"})).attr({class:b||"apexcharts-datalabel",cx:n,cy:o}),u.dropShadow.enabled){var k=u.dropShadow;new Rt(this.ctx).dropShadow(x,k)}g.add(x),void 0===e.globals.lastDrawnDataLabelsIndexes[r]&&(e.globals.lastDrawnDataLabelsIndexes[r]=[]),e.globals.lastDrawnDataLabelsIndexes[r].push(a)}return x}},{key:"addBackgroundToDataLabel",value:function(t,e){var i=this.w,n=i.config.dataLabels.background,o=n.padding,r=n.padding/2,a=e.width,c=e.height,h=new D(this.ctx).drawRect(e.x-o,e.y-r/2,a+2*o,c+r,n.borderRadius,"transparent"!==i.config.chart.background&&i.config.chart.background?i.config.chart.background:"#fff",n.opacity,n.borderWidth,n.borderColor);return n.dropShadow.enabled&&new Rt(this.ctx).dropShadow(h,n.dropShadow),h}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),i=0;i<e.length;i++){var n=e[i],o=n.getBBox(),r=null;if(o.width&&o.height&&(r=this.addBackgroundToDataLabel(n,o)),r){n.parentNode.insertBefore(r.node,n);var a=t.config.dataLabels.background.backgroundColor||n.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?r.attr({fill:a}):r.animate().attr({fill:a}),n.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),i=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),n=0;n<e.length;n++)i&&i.insertBefore(e[n],i.nextSibling)}}]),s}(),Qc=".apexcharts-flip-y {\n  transform: scaleY(-1) translateY(-100%);\n  transform-origin: top;\n  transform-box: fill-box;\n}\n.apexcharts-flip-x {\n  transform: scaleX(-1);\n  transform-origin: center;\n  transform-box: fill-box;\n}\n.apexcharts-legend {\n  display: flex;\n  overflow: auto;\n  padding: 0 10px;\n}\n.apexcharts-legend.apexcharts-legend-group-horizontal {\n  flex-direction: column;\n}\n.apexcharts-legend-group {\n  display: flex;\n}\n.apexcharts-legend-group-vertical {\n  flex-direction: column-reverse;\n}\n.apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n  flex-wrap: wrap\n}\n.apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n  flex-direction: column;\n  bottom: 0;\n}\n.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n  justify-content: flex-start;\n  align-items: flex-start;\n}\n.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n  justify-content: center;\n  align-items: center;\n}\n.apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n  justify-content: flex-end;\n  align-items: flex-end;\n}\n.apexcharts-legend-series {\n  cursor: pointer;\n  line-height: normal;\n  display: flex;\n  align-items: center;\n}\n.apexcharts-legend-text {\n  position: relative;\n  font-size: 14px;\n}\n.apexcharts-legend-text *, .apexcharts-legend-marker * {\n  pointer-events: none;\n}\n.apexcharts-legend-marker {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  margin-right: 1px;\n}\n\n.apexcharts-legend-series.apexcharts-no-click {\n  cursor: auto;\n}\n.apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n  display: none !important;\n}\n.apexcharts-inactive-legend {\n  opacity: 0.45;\n} ",ee=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return B(s,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(A.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),i=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:i}}},{key:"addCollapsedClassToSeries",value:function(t,e){var i=this.w;function n(o){for(var r=0;r<o.length;r++)o[r].index===e&&t.node.classList.add("apexcharts-series-collapsed")}n(i.globals.collapsedSeries),n(i.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.w,o=A.clone(n.globals.initialSeries);n.globals.previousPaths=[],i?(n.globals.collapsedSeries=[],n.globals.ancillaryCollapsedSeries=[],n.globals.collapsedSeriesIndices=[],n.globals.ancillaryCollapsedSeriesIndices=[]):o=this.emptyCollapsedSeries(o),n.config.series=o,t&&(e&&(n.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(o,n.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,i=0;i<t.length;i++)e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[]);return t}},{key:"highlightSeries",value:function(t){var e=this.w,i=this.getSeriesByName(t),n=parseInt(i?.getAttribute("data:realIndex"),10),o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis"),r=null,a=null,c=null;e.globals.axisCharts||"radialBar"===e.config.chart.type?e.globals.axisCharts?(r=e.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(n,"']")),a=e.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(n,"']")),c=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e.globals.seriesYAxisReverseMap[n],"']"))):r=e.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"']")):r=e.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(n+1,"'] path"));for(var d=0;d<o.length;d++)o[d].classList.add(this.legendInactiveClass);if(r)e.globals.axisCharts||r.parentNode.classList.remove(this.legendInactiveClass),r.classList.remove(this.legendInactiveClass),null!==a&&a.classList.remove(this.legendInactiveClass),null!==c&&c.classList.remove(this.legendInactiveClass);else for(var g=0;g<o.length;g++)o[g].classList.remove(this.legendInactiveClass)}},{key:"toggleSeriesOnHover",value:function(t,e){var i=this.w;e||(e=t.target);var n=i.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if("mousemove"===t.type){var o=parseInt(e.getAttribute("rel"),10)-1;this.highlightSeries(i.globals.seriesNames[o])}else if("mouseout"===t.type)for(var r=0;r<n.length;r++)n[r].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var i=this,n=this.w,o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),r=function(h){for(var d=0;d<o.length;d++)o[d].classList[h](i.legendInactiveClass)};if("mousemove"===t.type){var a=parseInt(e.getAttribute("rel"),10)-1;r("add");var c=n.config.plotOptions.heatmap.colorScale.ranges;!function(h,d){for(var g=0;g<o.length;g++){var u=Number(o[g].getAttribute("val"));u>=h.from&&(u<h.to||h.to===d&&u===d)&&o[g].classList.remove(i.legendInactiveClass)}}(c[a],c.reduce(function(h,d){return Math.max(h,d.to)},0))}else"mouseout"===t.type&&r("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this.w,n=0;if(i.config.series.length>1)for(var o=i.config.series.map(function(a,c){return a.data&&a.data.length>0&&-1===i.globals.collapsedSeriesIndices.indexOf(c)&&(!i.globals.comboCharts||0===e.length||e.length&&e.indexOf(i.config.series[c].type)>-1)?c:-1}),r="asc"===t?0:o.length-1;"asc"===t?r<o.length:r>=0;"asc"===t?r++:r--)if(-1!==o[r]){n=o[r];break}return n}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(t,e){return"bar"===t.type||"column"===t.type?e:-1}).filter(function(t){return-1!==t}):this.w.config.series.map(function(t,e){return e})}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(r,a,c){for(var h=r[a].childNodes,d={type:c,paths:[],realIndex:r[a].getAttribute("data:realIndex")},g=0;g<h.length;g++)if(h[g].hasAttribute("pathTo")){var u=h[g].getAttribute("pathTo");d.paths.push({d:u})}t.globals.previousPaths.push(d)}t.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(r){for(var c=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series")),h=0;h<c.length;h++)e(c,h,r)});var i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(i.length>0)for(var n=function(r){for(var a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(r,"'] rect")),c=[],h=function(g){var u=function(m){return a[g].getAttribute(m)},p={x:parseFloat(u("x")),y:parseFloat(u("y")),width:parseFloat(u("width")),height:parseFloat(u("height"))};c.push({rect:p,color:a[g].getAttribute("color")})},d=0;d<a.length;d++)h(d);t.globals.previousPaths.push(c)},o=0;o<i.length;o++)n(o);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,i=new D(this.ctx),n=t.globals.svgWidth/2,o=t.globals.svgHeight/2,r="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(n=10,r="start"):"right"===e.align&&(n=t.globals.svgWidth-10,r="end"),"top"===e.verticalAlign?o=50:"bottom"===e.verticalAlign&&(o=t.globals.svgHeight-50),n+=e.offsetX,o=o+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var a=i.drawText({x:n,y:o,text:e.text,textAnchor:r,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(a)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,i=0;i<t.length;i++)if(0===t[i].length)for(var n=0;n<t[e.globals.maxValsInArrayIndex].length;n++)t[i].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,i=this.filteredSeriesX(),n=0;n<i.length-1;n++)if(i[n][0]!==i[n+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map(function(e){return e.length>0?e:[]})}}]),s}(),Qo=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new kt(this.ctx)}return B(s,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new ee(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new ee(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!=t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var i=this.w.config,n=this.w.globals,o="boxPlot"===i.chart.type||"boxPlot"===i.series[e].type,r=0;r<t[e].data.length;r++)if(void 0!==t[e].data[r][1]&&(Array.isArray(t[e].data[r][1])&&4===t[e].data[r][1].length&&!o?this.twoDSeries.push(A.parseNumber(t[e].data[r][1][3])):this.twoDSeries.push(A.parseNumber(t[e].data[r].length>=5?t[e].data[r][4]:t[e].data[r][1])),n.dataFormatXNumeric=!0),"datetime"===i.xaxis.type){var a=new Date(t[e].data[r][0]);a=new Date(a).getTime(),this.twoDSeriesX.push(a)}else this.twoDSeriesX.push(t[e].data[r][0]);for(var c=0;c<t[e].data.length;c++)void 0!==t[e].data[c][2]&&(this.threeDSeries.push(t[e].data[c][2]),n.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var i=this.w.config,n=this.w.globals,o=new Lt(this.ctx),r=e;n.collapsedSeriesIndices.indexOf(e)>-1&&(r=this.activeSeriesIndex);for(var a=0;a<t[e].data.length;a++)void 0!==t[e].data[a].y&&(Array.isArray(t[e].data[a].y)?this.twoDSeries.push(A.parseNumber(t[e].data[a].y[t[e].data[a].y.length-1])):this.twoDSeries.push(A.parseNumber(t[e].data[a].y))),void 0!==t[e].data[a].goals&&Array.isArray(t[e].data[a].goals)?(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[a].goals)):(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var c=0;c<t[r].data.length;c++){var h="string"==typeof t[r].data[c].x,d=Array.isArray(t[r].data[c].x),g=!d&&!!o.isValidDate(t[r].data[c].x);h||g?h||i.xaxis.convertedCatToNumeric?"datetime"!==i.xaxis.type||n.isBarHorizontal&&n.isRangeData?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[r].data[c].x),isNaN(t[r].data[c].x)||"category"===this.w.config.xaxis.type||"string"==typeof t[r].data[c].x||(n.isXNumeric=!0)):this.twoDSeriesX.push(o.parseDate(t[r].data[c].x)):"datetime"===i.xaxis.type?this.twoDSeriesX.push(o.parseDate(t[r].data[c].x.toString())):(n.dataFormatXNumeric=!0,n.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[r].data[c].x))):d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[r].data[c].x)):(n.isXNumeric=!0,n.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[r].data[c].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var p=0;p<t[e].data.length;p++)this.threeDSeries.push(t[e].data[p].z);n.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(n=this.handleRangeDataFormat("xy",t,e)),i.seriesRangeStart[e]=void 0===n.start?[]:n.start,i.seriesRangeEnd[e]=void 0===n.end?[]:n.end,i.seriesRange[e]=n.rangeUniques,i.seriesRange.forEach(function(o,r){o&&o.forEach(function(a,c){a.y.forEach(function(h,d){for(var g=0;g<a.y.length;g++)d!==g&&h.y1<=a.y[g].y2&&a.y[g].y1<=h.y2&&(a.overlaps.indexOf(h.rangeName)<0&&a.overlaps.push(h.rangeName),a.overlaps.indexOf(a.y[g].rangeName)<0&&a.overlaps.push(a.y[g].rangeName))})})}),n}},{key:"handleCandleStickBoxData",value:function(t,e){var i=this.w.globals,n={};return this.isFormat2DArray()?n=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(n=this.handleCandleStickBoxDataFormat("xy",t,e)),i.seriesCandleO[e]=n.o,i.seriesCandleH[e]=n.h,i.seriesCandleM[e]=n.m,i.seriesCandleL[e]=n.l,i.seriesCandleC[e]=n.c,n}},{key:"handleRangeDataFormat",value:function(t,e,i){var n=[],o=[],r=e[i].data.filter(function(d,g,u){return g===u.findIndex(function(p){return p.x===d.x})}).map(function(d,g){return{x:d.x,overlaps:[],y:[]}});if("array"===t)for(var a=0;a<e[i].data.length;a++)Array.isArray(e[i].data[a])?(n.push(e[i].data[a][1][0]),o.push(e[i].data[a][1][1])):(n.push(e[i].data[a]),o.push(e[i].data[a]));else if("xy"===t)for(var c=function(d){var g=Array.isArray(e[i].data[d].y),u=A.randomId(),p=e[i].data[d].x,m={y1:g?e[i].data[d].y[0]:e[i].data[d].y,y2:g?e[i].data[d].y[1]:e[i].data[d].y,rangeName:u};e[i].data[d].rangeName=u;var f=r.findIndex(function(b){return b.x===p});r[f].y.push(m),n.push(m.y1),o.push(m.y2)},h=0;h<e[i].data.length;h++)c(h);return{start:n,end:o,rangeUniques:r}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,i){var n=this.w,o="boxPlot"===n.config.chart.type||"boxPlot"===n.config.series[i].type,r=[],a=[],c=[],h=[],d=[];if("array"===t)if(o&&6===e[i].data[0].length||!o&&5===e[i].data[0].length)for(var g=0;g<e[i].data.length;g++)r.push(e[i].data[g][1]),a.push(e[i].data[g][2]),o?(c.push(e[i].data[g][3]),h.push(e[i].data[g][4]),d.push(e[i].data[g][5])):(h.push(e[i].data[g][3]),d.push(e[i].data[g][4]));else for(var u=0;u<e[i].data.length;u++)Array.isArray(e[i].data[u][1])&&(r.push(e[i].data[u][1][0]),a.push(e[i].data[u][1][1]),o?(c.push(e[i].data[u][1][2]),h.push(e[i].data[u][1][3]),d.push(e[i].data[u][1][4])):(h.push(e[i].data[u][1][2]),d.push(e[i].data[u][1][3])));else if("xy"===t)for(var p=0;p<e[i].data.length;p++)Array.isArray(e[i].data[p].y)&&(r.push(e[i].data[p].y[0]),a.push(e[i].data[p].y[1]),o?(c.push(e[i].data[p].y[2]),h.push(e[i].data[p].y[3]),d.push(e[i].data[p].y[4])):(h.push(e[i].data[p].y[2]),d.push(e[i].data[p].y[3])));return{o:r,h:a,m:c,l:h,c:d}}},{key:"parseDataAxisCharts",value:function(t){var e=this,n=this.w.config,o=this.w.globals,r=new Lt(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx),a=n.labels.length>0?n.labels.slice():n.xaxis.categories.slice();o.isRangeBar="rangeBar"===n.chart.type&&o.isBarHorizontal,o.hasXaxisGroups="category"===n.xaxis.type&&n.xaxis.group.groups.length>0,o.hasXaxisGroups&&(o.groups=n.xaxis.group.groups),t.forEach(function(p,m){o.seriesNames.push(void 0!==p.name?p.name:"series-"+parseInt(m+1,10))}),this.coreUtils.setSeriesYAxisMappings();var c=[],h=At(new Set(n.series.map(function(p){return p.group})));n.series.forEach(function(p,m){var f=h.indexOf(p.group);c[f]||(c[f]=[]),c[f].push(o.seriesNames[m])}),o.seriesGroups=c;for(var d=function(){for(var p=0;p<a.length;p++)if("string"==typeof a[p]){if(!r.isValidDate(a[p]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");e.twoDSeriesX.push(r.parseDate(a[p]))}else e.twoDSeriesX.push(a[p])},g=0;g<t.length;g++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[g].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==n.chart.type&&"rangeArea"!==n.chart.type&&"rangeBar"!==t[g].type&&"rangeArea"!==t[g].type||(o.isRangeData=!0,this.handleRangeData(t,g)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,g):this.isFormatXY()&&this.handleFormatXY(t,g),"candlestick"!==n.chart.type&&"candlestick"!==t[g].type&&"boxPlot"!==n.chart.type&&"boxPlot"!==t[g].type||this.handleCandleStickBoxData(t,g),o.series.push(this.twoDSeries),o.labels.push(this.twoDSeriesX),o.seriesX.push(this.twoDSeriesX),o.seriesGoals=this.seriesGoals,g!==this.activeSeriesIndex||this.fallbackToCategory||(o.isXNumeric=!0);else{"datetime"===n.xaxis.type?(o.isXNumeric=!0,d(),o.seriesX.push(this.twoDSeriesX)):"numeric"===n.xaxis.type&&(o.isXNumeric=!0,a.length>0&&(this.twoDSeriesX=a,o.seriesX.push(this.twoDSeriesX))),o.labels.push(this.twoDSeriesX);var u=t[g].data.map(function(p){return A.parseNumber(p)});o.series.push(u)}o.seriesZ.push(this.threeDSeries),o.seriesColors.push(void 0!==t[g].color?t[g].color:void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,i=this.w.config,n=Array.isArray(t)&&t.every(function(d){return"number"==typeof d})&&i.labels.length>0,o=Array.isArray(t)&&t.some(function(d){return d&&"object"===Bt(d)&&d.data||d&&"object"===Bt(d)&&d.parsing});if(n&&o&&console.warn("ApexCharts: Both old format (numeric series + labels) and new format (series objects with data/parsing) detected. Using old format for backward compatibility."),n){e.series=t.slice(),e.seriesNames=i.labels.slice();for(var r=0;r<e.series.length;r++)void 0===e.seriesNames[r]&&e.seriesNames.push("series-"+(r+1));return this.w}if(Array.isArray(t)&&t.every(function(d){return"number"==typeof d})){e.series=t.slice(),e.seriesNames=[];for(var a=0;a<e.series.length;a++)e.seriesNames.push(i.labels[a]||"series-".concat(a+1));return this.w}var c=this.extractPieDataFromSeries(t);e.series=c.values,e.seriesNames=c.labels,"radialBar"===i.chart.type&&(e.series=e.series.map(function(d){var g=A.parseNumber(d);return g>100&&console.warn("ApexCharts: RadialBar value ".concat(g," > 100, consider using percentage values (0-100)")),g}));for(var h=0;h<e.series.length;h++)void 0===e.seriesNames[h]&&e.seriesNames.push("series-"+(h+1));return this.w}},{key:"resetParsingFlags",value:function(){var t=this.w;t.globals.dataWasParsed=!1,t.globals.originalSeries=null,t.config.series&&t.config.series.forEach(function(e){e.__apexParsed&&delete e.__apexParsed})}},{key:"extractPieDataFromSeries",value:function(t){var e=[],i=[];if(!Array.isArray(t))return console.warn("ApexCharts: Expected array for series data"),{values:[],labels:[]};if(0===t.length)return console.warn("ApexCharts: Empty series array"),{values:[],labels:[]};var n=t[0];return"object"===Bt(n)&&null!==n&&n.data?(this.extractPieDataFromSeriesObjects(t,e,i),{values:e,labels:i}):(console.warn("ApexCharts: Unsupported series format for pie/donut/radialBar. Expected series objects with data property."),{values:[],labels:[]})}},{key:"extractPieDataFromSeriesObjects",value:function(t,e,i){t.forEach(function(n,o){n.data&&Array.isArray(n.data)?n.data.forEach(function(r){"object"===Bt(r)&&null!==r?void 0!==r.x&&void 0!==r.y?(i.push(String(r.x)),e.push(A.parseNumber(r.y))):console.warn("ApexCharts: Invalid data point format for pie chart. Expected {x, y} format:",r):console.warn("ApexCharts: Expected object data point, got:",Bt(r))}):console.warn("ApexCharts: Series ".concat(o," has no valid data array"))})}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,i=this.w.globals;e.xaxis.categories.length>0?i.labels=e.xaxis.categories:e.labels.length>0?i.labels=e.labels.slice():this.fallbackToCategory?(i.labels=i.labels[0],i.seriesRange.length&&(i.seriesRange.map(function(n){n.forEach(function(o){i.labels.indexOf(o.x)<0&&o.x&&i.labels.push(o.x)})}),i.labels=Array.from(new Set(i.labels.map(JSON.stringify)),JSON.parse)),e.xaxis.convertedCatToNumeric&&(new ln(e).convertCatToNumericXaxis(e,this.ctx,i.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,i=this.w.config,n=[];if(e.axisCharts){if(e.series.length>0)if(this.isFormatXY())for(var o=i.series.map(function(g,u){return g.data.filter(function(p,m,f){return f.findIndex(function(b){return b.x===p.x})===m})}),r=o.reduce(function(g,u,p,m){return m[g].length>u.length?g:p},0),a=0;a<o[r].length;a++)n.push(a+1);else for(var c=0;c<e.series[e.maxValsInArrayIndex].length;c++)n.push(c+1);e.seriesX=[];for(var h=0;h<t.length;h++)e.seriesX.push(n);this.w.globals.isBarHorizontal||(e.isXNumeric=!0)}if(0===n.length){n=e.axisCharts?[]:e.series.map(function(g,u){return u+1});for(var d=0;d<t.length;d++)e.seriesX.push(n)}e.labels=n,i.xaxis.convertedCatToNumeric&&(e.categoryLabels=n.map(function(g){return i.xaxis.labels.formatter(g)})),e.noLabelsProvided=!0}},{key:"parseRawDataIfNeeded",value:function(t){var e=this,n=this.w.globals,o=this.w.config.parsing;if(n.dataWasParsed||!o&&!t.some(function(a){return a.parsing}))return t;var r=t.map(function(a,c){var h,d,g;if(!a.data||!Array.isArray(a.data)||0===a.data.length)return a;var u={x:(null===(h=a.parsing)||void 0===h?void 0:h.x)||o?.x,y:(null===(d=a.parsing)||void 0===d?void 0:d.y)||o?.y,z:(null===(g=a.parsing)||void 0===g?void 0:g.z)||o?.z};if(!u.x&&!u.y)return a;var p=a.data[0];if("object"===Bt(p)&&null!==p&&(p.hasOwnProperty("x")||p.hasOwnProperty("y"))||Array.isArray(p))return a;if(!u.x||!u.y||Array.isArray(u.y)&&0===u.y.length)return console.warn("ApexCharts: Series ".concat(c," has parsing config but missing x or y field specification")),a;var m=a.data.map(function(f,b){if("object"!==Bt(f)||null===f)return console.warn("ApexCharts: Series ".concat(c,", data point ").concat(b," is not an object, skipping parsing")),f;var x,v=e.getNestedValue(f,u.x),_=void 0;if(Array.isArray(u.y)){var w=u.y.map(function(C){return e.getNestedValue(f,C)});x="bubble"===e.w.config.chart.type&&2===w.length?w[0]:w}else x=e.getNestedValue(f,u.y);u.z&&(_=e.getNestedValue(f,u.z)),void 0===v&&console.warn("ApexCharts: Series ".concat(c,", data point ").concat(b," missing field '").concat(u.x,"'")),void 0===x&&console.warn("ApexCharts: Series ".concat(c,", data point ").concat(b," missing field '").concat(u.y,"'"));var y={x:v,y:x};if("bubble"===e.w.config.chart.type&&Array.isArray(u.y)&&2===u.y.length){var k=e.getNestedValue(f,u.y[1]);void 0!==k&&(y.z=k)}return void 0!==_&&(y.z=_),y});return z(z({},a),{},{data:m,__apexParsed:!0})});return n.dataWasParsed=!0,n.originalSeries||(n.originalSeries=A.clone(t)),r}},{key:"getNestedValue",value:function(t,e){if(t&&"object"===Bt(t)&&e){if(-1===e.indexOf("."))return t[e];for(var i=e.split("."),n=t,o=0;o<i.length;o++){if(null==n||"object"!==Bt(n))return;n=n[i[o]]}return n}}},{key:"parseData",value:function(t){var e=this.w,i=e.config,n=e.globals;if(t=this.parseRawDataIfNeeded(t),i.series=t,n.initialSeries=A.clone(t),this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),n.axisCharts?(this.parseDataAxisCharts(t),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(t),i.chart.stacked){var o=new ee(this.ctx);n.series=o.setNullSeriesToZeroValues(n.series)}this.coreUtils.getSeriesTotals(),n.axisCharts&&(n.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),n.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),n.dataFormatXNumeric||n.isXNumeric&&("numeric"!==i.xaxis.type||0!==i.labels.length||0!==i.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var r=this.coreUtils.getCategoryLabels(n.labels),a=0;a<r.length;a++)if(Array.isArray(r[a])){n.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this.w,e=[];t.globals.seriesYAxisMap.forEach(function(i,n){var o=0;i.forEach(function(r){-1!==t.globals.collapsedSeriesIndices.indexOf(r)&&o++}),o>0&&o==i.length&&e.push(n)}),t.globals.ignoreYAxisIndexes=e.map(function(i){return i})}}]),s}(),hn=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"svgStringToNode",value:function(t){return(new DOMParser).parseFromString(t,"image/svg+xml").documentElement}},{key:"scaleSvgNode",value:function(t,e){var i=parseFloat(t.getAttributeNS(null,"width")),n=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",i*e),t.setAttributeNS(null,"height",n*e),t.setAttributeNS(null,"viewBox","0 0 "+i+" "+n)}},{key:"getSvgString",value:function(t){var e=this;return new Promise(function(i){var n=e.w,o=t||n.config.chart.toolbar.export.scale||n.config.chart.toolbar.export.width/n.globals.svgWidth;o||(o=1);var r=n.globals.svgWidth*o,a=n.globals.svgHeight*o,c=n.globals.dom.elWrap.cloneNode(!0);c.style.width=r+"px",c.style.height=a+"px";var h=(new XMLSerializer).serializeToString(c),d="\n        .apexcharts-tooltip, .apexcharts-toolbar, .apexcharts-xaxistooltip, .apexcharts-yaxistooltip, .apexcharts-xcrosshairs, .apexcharts-ycrosshairs, .apexcharts-zoom-rect, .apexcharts-selection-rect {\n          display: none;\n        }\n      ";n.config.legend.show&&n.globals.dom.elLegendWrap&&n.globals.dom.elLegendWrap.children.length>0&&(d+=Qc);var g='\n        <svg xmlns="http://www.w3.org/2000/svg"\n          version="1.1"\n          xmlns:xlink="http://www.w3.org/1999/xlink"\n          class="apexcharts-svg"\n          xmlns:data="ApexChartsNS"\n          transform="translate(0, 0)"\n          width="'.concat(n.globals.svgWidth,'px" height="').concat(n.globals.svgHeight,'px">\n          <foreignObject width="100%" height="100%">\n            <div xmlns="http://www.w3.org/1999/xhtml" style="width:').concat(r,"px; height:").concat(a,'px;">\n            <style type="text/css">\n              ').concat(d,"\n            </style>\n              ").concat(h,"\n            </div>\n          </foreignObject>\n        </svg>\n      "),u=e.svgStringToNode(g);1!==o&&e.scaleSvgNode(u,o),e.convertImagesToBase64(u).then(function(){g=(new XMLSerializer).serializeToString(u),i(g.replace(/&nbsp;/g,"&#160;"))})})}},{key:"convertImagesToBase64",value:function(t){var e=this,i=t.getElementsByTagName("image"),n=Array.from(i).map(function(o){var r=o.getAttributeNS("http://www.w3.org/1999/xlink","href");return r&&!r.startsWith("data:")?e.getBase64FromUrl(r).then(function(a){o.setAttributeNS("http://www.w3.org/1999/xlink","href",a)}).catch(function(a){console.error("Error converting image to base64:",a)}):Promise.resolve()});return Promise.all(n)}},{key:"getBase64FromUrl",value:function(t){return new Promise(function(e,i){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var o=document.createElement("canvas");o.width=n.width,o.height=n.height,o.getContext("2d").drawImage(n,0,0),e(o.toDataURL())},n.onerror=i,n.src=t})}},{key:"svgUrl",value:function(){var t=this;return new Promise(function(e){t.getSvgString().then(function(i){var n=new Blob([i],{type:"image/svg+xml;charset=utf-8"});e(URL.createObjectURL(n))})})}},{key:"dataURI",value:function(t){var e=this;return new Promise(function(i){var n=e.w,o=t?t.scale||t.width/n.globals.svgWidth:1,r=document.createElement("canvas");r.width=n.globals.svgWidth*o,r.height=parseInt(n.globals.dom.elWrap.style.height,10)*o;var a="transparent"!==n.config.chart.background&&n.config.chart.background?n.config.chart.background:"#fff",c=r.getContext("2d");c.fillStyle=a,c.fillRect(0,0,r.width*o,r.height*o),e.getSvgString(o).then(function(h){var d="data:image/svg+xml,"+encodeURIComponent(h),g=new Image;g.crossOrigin="anonymous",g.onload=function(){if(c.drawImage(g,0,0),r.msToBlob){var u=r.msToBlob();i({blob:u})}else{var p=r.toDataURL("image/png");i({imgURI:p})}},g.src=d})})}},{key:"exportToSVG",value:function(){var t=this;this.svgUrl().then(function(e){t.triggerDownload(e,t.w.config.chart.toolbar.export.svg.filename,".svg")})}},{key:"exportToPng",value:function(){var t=this,e=this.w.config.chart.toolbar.export.scale,i=this.w.config.chart.toolbar.export.width;this.dataURI(e?{scale:e}:i?{width:i}:void 0).then(function(o){var r=o.imgURI,a=o.blob;a?navigator.msSaveOrOpenBlob(a,t.w.globals.chartID+".png"):t.triggerDownload(r,t.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(t){var e=this,i=t.series,n=t.fileName,o=t.columnDelimiter,r=void 0===o?",":o,a=t.lineDelimiter,c=void 0===a?"\n":a,h=this.w;i||(i=h.config.series);var y,k,d=[],g=[],u="",p=h.globals.series.map(function(y,k){return-1===h.globals.collapsedSeriesIndices.indexOf(k)?y:[]}),m=function(y){return"function"==typeof h.config.chart.toolbar.export.csv.categoryFormatter?h.config.chart.toolbar.export.csv.categoryFormatter(y):"datetime"===h.config.xaxis.type&&String(y).length>=10?new Date(y).toDateString():A.isNumber(y)?y:y.split(r).join("")},f=function(y){return"function"==typeof h.config.chart.toolbar.export.csv.valueFormatter?h.config.chart.toolbar.export.csv.valueFormatter(y):y},b=Math.max.apply(Math,At(i.map(function(y){return y.data?y.data.length:0}))),x=new Qo(this.ctx),v=new ze(this.ctx),_=function(y){var k="";if(h.globals.axisCharts){if("category"===h.config.xaxis.type||h.config.xaxis.convertedCatToNumeric)if(h.globals.isBarHorizontal){var C=h.globals.yLabelFormatters[0],M=new ee(e.ctx).getActiveConfigSeriesIndex();k=C(h.globals.labels[y],{seriesIndex:M,dataPointIndex:y,w:h})}else k=v.getLabel(h.globals.labels,h.globals.timescaleLabels,0,y).text;"datetime"===h.config.xaxis.type&&(h.config.xaxis.categories.length?k=h.config.xaxis.categories[y]:h.config.labels.length&&(k=h.config.labels[y]))}else k=h.config.labels[y];return null===k?"nullvalue":(Array.isArray(k)&&(k=k.join(" ")),A.isNumber(k)?k:k.split(r).join(""))};d.push(h.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===h.config.chart.type?(d.push("minimum"),d.push("q1"),d.push("median"),d.push("q3"),d.push("maximum")):"candlestick"===h.config.chart.type?(d.push("open"),d.push("high"),d.push("low"),d.push("close")):"rangeBar"===h.config.chart.type?(d.push("minimum"),d.push("maximum")):i.map(function(y,k){var C=(y.name?y.name:"series-".concat(k))+"";h.globals.axisCharts&&d.push(C.split(r).join("")?C.split(r).join(""):"series-".concat(k))}),h.globals.axisCharts||(d.push(h.config.chart.toolbar.export.csv.headerValue),g.push(d.join(r))),h.globals.allSeriesHasEqualX||!h.globals.axisCharts||h.config.xaxis.categories.length||h.config.labels.length?i.map(function(y,k){h.globals.axisCharts?function(y,k){if(d.length&&0===k&&g.push(d.join(r)),y.data){y.data=y.data.length&&y.data||At(Array(b)).map(function(){return""});for(var C=0;C<y.data.length;C++){d=[];var M=_(C);if("nullvalue"!==M){if(M||(x.isFormatXY()?M=i[k].data[C].x:x.isFormat2DArray()&&(M=i[k].data[C]?i[k].data[C][0]:"")),0===k){d.push(m(M));for(var P=0;P<h.globals.series.length;P++){var O,S=x.isFormatXY()?null===(O=i[P].data[C])||void 0===O?void 0:O.y:p[P][C];d.push(f(S))}}("candlestick"===h.config.chart.type||y.type&&"candlestick"===y.type)&&(d.pop(),d.push(h.globals.seriesCandleO[k][C]),d.push(h.globals.seriesCandleH[k][C]),d.push(h.globals.seriesCandleL[k][C]),d.push(h.globals.seriesCandleC[k][C])),("boxPlot"===h.config.chart.type||y.type&&"boxPlot"===y.type)&&(d.pop(),d.push(h.globals.seriesCandleO[k][C]),d.push(h.globals.seriesCandleH[k][C]),d.push(h.globals.seriesCandleM[k][C]),d.push(h.globals.seriesCandleL[k][C]),d.push(h.globals.seriesCandleC[k][C])),"rangeBar"===h.config.chart.type&&(d.pop(),d.push(h.globals.seriesRangeStart[k][C]),d.push(h.globals.seriesRangeEnd[k][C])),d.length&&g.push(d.join(r))}}}}(y,k):((d=[]).push(m(h.globals.labels[k])),d.push(f(p[k])),g.push(d.join(r)))}):(y=new Set,k={},i.forEach(function(C,M){C?.data.forEach(function(P){var O,S;if(x.isFormatXY())O=P.x,S=P.y;else{if(!x.isFormat2DArray())return;O=P[0],S=P[1]}k[O]||(k[O]=Array(i.length).fill("")),k[O][M]=f(S),y.add(O)})}),d.length&&g.push(d.join(r)),Array.from(y).sort().forEach(function(C){g.push([m(C),k[C].join(r)])})),u+=g.join(c),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+u),n||h.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,i){var n=document.createElement("a");n.href=t,n.download=(e||this.w.globals.chartID)+i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}}]),s}(),dn=function(){function s(t,e){N(this,s),this.ctx=t,this.elgrid=e,this.w=t.w;var i=this.w;this.axesUtils=new ze(t),this.xaxisLabels=i.globals.labels.slice(),i.globals.timescaleLabels.length>0&&!i.globals.isBarHorizontal&&(this.xaxisLabels=i.globals.timescaleLabels.slice()),i.config.xaxis.overwriteCategories&&(this.xaxisLabels=i.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],this.offY="top"===i.config.xaxis.position?0:i.globals.gridHeight,this.offY=this.offY+i.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.xaxisBorderWidth=i.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=i.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth=String(this.xaxisBorderWidth).indexOf("%")>-1?i.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=i.config.xaxis.axisBorder.height,this.yaxis=i.config.yaxis[0]}return B(s,[{key:"drawXaxis",value:function(){var t=this.w,e=new D(this.ctx),i=e.group({class:"apexcharts-xaxis",transform:"translate(".concat(t.config.xaxis.offsetX,", ").concat(t.config.xaxis.offsetY,")")}),n=e.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});i.add(n);for(var o=[],r=0;r<this.xaxisLabels.length;r++)o.push(this.xaxisLabels[r]);if(this.drawXAxisLabelAndGroup(!0,e,n,o,t.globals.isXNumeric,function(m,f){return f}),t.globals.hasXaxisGroups){var a=t.globals.groups;o=[];for(var c=0;c<a.length;c++)o.push(a[c].title);var h={};t.config.xaxis.group.style&&(h.xaxisFontSize=t.config.xaxis.group.style.fontSize,h.xaxisFontFamily=t.config.xaxis.group.style.fontFamily,h.xaxisForeColors=t.config.xaxis.group.style.colors,h.fontWeight=t.config.xaxis.group.style.fontWeight,h.cssClass=t.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,e,n,o,!1,function(m,f){return a[m].cols*f},h)}if(void 0!==t.config.xaxis.title.text){var d=e.group({class:"apexcharts-xaxis-title"}),g=e.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===t.config.xaxis.position?t.globals.xAxisLabelsHeight:-t.globals.xAxisLabelsHeight-10)+t.config.xaxis.title.offsetY,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});d.add(g),i.add(d)}if(t.config.xaxis.axisBorder.show){var u=t.globals.barPadForNumericAxis,p=e.drawLine(t.globals.padHorizontal+t.config.xaxis.axisBorder.offsetX-u,this.offY,this.xaxisBorderWidth+u,this.offY,t.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(p):i.add(p)}return i}},{key:"drawXAxisLabelAndGroup",value:function(t,e,i,n,o,r){var a,c=this,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},d=[],g=[],u=this.w,p=h.xaxisFontSize||this.xaxisFontSize,m=h.xaxisFontFamily||this.xaxisFontFamily,f=h.xaxisForeColors||this.xaxisForeColors,b=h.fontWeight||u.config.xaxis.labels.style.fontWeight,x=h.cssClass||u.config.xaxis.labels.style.cssClass,v=u.globals.padHorizontal,_=n.length,w="category"===u.config.xaxis.type?u.globals.dataPoints:_;if(0===w&&_>w&&(w=_),o){var y=Math.max(Number(u.config.xaxis.tickAmount)||1,w>1?w-1:w);a=u.globals.gridWidth/Math.min(y,_-1),v=v+r(0,a)/2+u.config.xaxis.labels.offsetX}else v=v+r(0,a=u.globals.gridWidth/w)+u.config.xaxis.labels.offsetX;for(var k=function(M){var P=v-r(M,a)/2+u.config.xaxis.labels.offsetX;0===M&&1===_&&a/2===v&&1===w&&(P=u.globals.gridWidth/2);var O=c.axesUtils.getLabel(n,u.globals.timescaleLabels,P,M,d,p,t),S=28;if(u.globals.rotateXLabels&&t&&(S=22),u.config.xaxis.title.text&&"top"===u.config.xaxis.position&&(S+=parseFloat(u.config.xaxis.title.style.fontSize)+2),t||(S=S+parseFloat(p)+(u.globals.xAxisLabelsHeight-u.globals.xAxisGroupLabelsHeight)+(u.globals.rotateXLabels?10:0)),O=void 0!==u.config.xaxis.tickAmount&&"dataPoints"!==u.config.xaxis.tickAmount&&"datetime"!==u.config.xaxis.type?c.axesUtils.checkLabelBasedOnTickamount(M,O,_):c.axesUtils.checkForOverflowingLabels(M,O,_,d,g),u.config.xaxis.labels.show){var E=e.drawText({x:O.x,y:c.offY+u.config.xaxis.labels.offsetY+S-("top"===u.config.xaxis.position?u.globals.xAxisHeight+u.config.xaxis.axisTicks.height-2:0),text:O.text,textAnchor:"middle",fontWeight:O.isBold?600:b,fontSize:p,fontFamily:m,foreColor:Array.isArray(f)?t&&u.config.xaxis.convertedCatToNumeric?f[u.globals.minX+M-1]:f[M]:f,isPlainText:!1,cssClass:(t?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+x});if(i.add(E),E.on("click",function(R){if("function"==typeof u.config.chart.events.xAxisLabelClick){var T=Object.assign({},u,{labelIndex:M});u.config.chart.events.xAxisLabelClick(R,c.ctx,T)}}),t){var I=document.createElementNS(u.globals.SVGNS,"title");I.textContent=Array.isArray(O.text)?O.text.join(" "):O.text,E.node.appendChild(I),""!==O.text&&(d.push(O.text),g.push(O))}}M<_-1&&(v+=r(M+1,a))},C=0;C<=_-1;C++)k(C)}},{key:"drawXaxisInversed",value:function(t){var e,i,n=this,o=this.w,r=new D(this.ctx),a=o.config.yaxis[0].opposite?o.globals.translateYAxisX[t]:0,c=r.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),h=r.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+a+", 0)"});c.add(h);var d=[];if(o.config.yaxis[t].show)for(var g=0;g<this.xaxisLabels.length;g++)d.push(this.xaxisLabels[g]);i=-(e=o.globals.gridHeight/d.length)/2.2;var u=o.globals.yLabelFormatters[0],p=o.config.yaxis[0].labels;if(p.show)for(var m=function(y){var k=void 0===d[y]?"":d[y];k=u(k,{seriesIndex:t,dataPointIndex:y,w:o});var C=n.axesUtils.getYAxisForeColor(p.style.colors,t),M=0;Array.isArray(k)&&(M=k.length/2*parseInt(p.style.fontSize,10));var P=p.offsetX-15,O="end";n.yaxis.opposite&&(O="start"),"left"===o.config.yaxis[0].labels.align?(P=p.offsetX,O="start"):"center"===o.config.yaxis[0].labels.align?(P=p.offsetX,O="middle"):"right"===o.config.yaxis[0].labels.align&&(O="end");var S=r.drawText({x:P,y:i+e+p.offsetY-M,text:k,textAnchor:O,foreColor:Array.isArray(C)?C[y]:C,fontSize:p.style.fontSize,fontFamily:p.style.fontFamily,fontWeight:p.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+p.style.cssClass,maxWidth:p.maxWidth});h.add(S),S.on("click",function(R){if("function"==typeof o.config.chart.events.xAxisLabelClick){var T=Object.assign({},o,{labelIndex:y});o.config.chart.events.xAxisLabelClick(R,n.ctx,T)}});var E=document.createElementNS(o.globals.SVGNS,"title");if(E.textContent=Array.isArray(k)?k.join(" "):k,S.node.appendChild(E),0!==o.config.yaxis[t].labels.rotate){var I=r.rotateAroundCenter(S.node);S.node.setAttribute("transform","rotate(".concat(o.config.yaxis[t].labels.rotate," 0 ").concat(I.y,")"))}i+=e},f=0;f<=d.length-1;f++)m(f);if(void 0!==o.config.yaxis[0].title.text){var b=r.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+a+", 0)"}),x=r.drawText({x:o.config.yaxis[0].title.offsetX,y:o.globals.gridHeight/2+o.config.yaxis[0].title.offsetY,text:o.config.yaxis[0].title.text,textAnchor:"middle",foreColor:o.config.yaxis[0].title.style.color,fontSize:o.config.yaxis[0].title.style.fontSize,fontWeight:o.config.yaxis[0].title.style.fontWeight,fontFamily:o.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+o.config.yaxis[0].title.style.cssClass});b.add(x),c.add(b)}var v=0;this.isCategoryBarHorizontal&&o.config.yaxis[0].opposite&&(v=o.globals.gridWidth);var _=o.config.xaxis.axisBorder;if(_.show){var w=r.drawLine(o.globals.padHorizontal+_.offsetX+v,1+_.offsetY,o.globals.padHorizontal+_.offsetX+v,o.globals.gridHeight+_.offsetY,_.color,0);this.elgrid&&this.elgrid.elGridBorders&&o.config.grid.show?this.elgrid.elGridBorders.add(w):c.add(w)}return o.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(v,d.length,o.config.yaxis[0].axisBorder,o.config.yaxis[0].axisTicks,0,e,c),c}},{key:"drawXaxisTicks",value:function(t,e,i){var n=this.w,o=t;if(!(t<0||t-2>n.globals.gridWidth)){var r=this.offY+n.config.xaxis.axisTicks.offsetY;if(e=e+r+n.config.xaxis.axisTicks.height,"top"===n.config.xaxis.position&&(e=r-n.config.xaxis.axisTicks.height),n.config.xaxis.axisTicks.show){var a=new D(this.ctx).drawLine(t+n.config.xaxis.axisTicks.offsetX,r+n.config.xaxis.offsetY,o+n.config.xaxis.axisTicks.offsetX,e+n.config.xaxis.offsetY,n.config.xaxis.axisTicks.color);i.add(a),a.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],i=this.xaxisLabels.length,n=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var o=0;o<i;o++)e.push(n=this.xaxisLabels[o].position);else for(var r=i,a=0;a<r;a++){var c=r;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(c-=1),e.push(n+=t.globals.gridWidth/c)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new D(this.ctx),i=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var a=0;a<n.length;a++){var c=e.rotateAroundCenter(n[a]);c.y=c.y-1,c.x=c.x+1,n[a].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(c.x," ").concat(c.y,")")),n[a].setAttribute("text-anchor","end"),i.setAttribute("transform","translate(0, ".concat(-10,")")),t.config.xaxis.labels.trim&&Array.prototype.forEach.call(n[a].childNodes,function(p){e.placeTextWithEllipsis(p,p.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))})}else!function(){for(var p=t.globals.gridWidth/(t.globals.labels.length+1),m=0;m<n.length;m++)t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(n[m].childNodes,function(b){e.placeTextWithEllipsis(b,b.textContent,p)})}();if(o.length>0){var d=o[o.length-1].getBBox(),g=o[0].getBBox();d.x<-20&&o[o.length-1].parentNode.removeChild(o[o.length-1]),g.x+g.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&o[0].parentNode.removeChild(o[0]);for(var u=0;u<r.length;u++)e.placeTextWithEllipsis(r[u],r[u].textContent,t.config.yaxis[0].labels.maxWidth-(t.config.yaxis[0].title.text?2*parseFloat(t.config.yaxis[0].title.style.fontSize):0)-15)}}}]),s}(),th=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w;var e=this.w;this.xaxisLabels=e.globals.labels.slice(),this.axesUtils=new ze(t),this.isRangeBar=e.globals.seriesRange.length&&e.globals.isBarHorizontal,e.globals.timescaleLabels.length>0&&(this.xaxisLabels=e.globals.timescaleLabels.slice())}return B(s,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,i=new D(this.ctx);t||(t=i.group({class:"apexcharts-grid"}));var n=i.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),o=i.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(o),t.add(n),t}},{key:"drawGrid",value:function(){if(this.w.globals.axisCharts){var t=this.renderGrid();return this.drawGridArea(t.el),t}return null}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,i=new D(this.ctx),n=Array.isArray(t.config.stroke.width)?Math.max.apply(Math,At(t.config.stroke.width)):t.config.stroke.width,o=function(d){var g=document.createElementNS(e.SVGNS,"clipPath");return g.setAttribute("id",d),g};e.dom.elGridRectMask=o("gridRectMask".concat(e.cuid)),e.dom.elGridRectBarMask=o("gridRectBarMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=o("gridRectMarkerMask".concat(e.cuid)),e.dom.elForecastMask=o("forecastMask".concat(e.cuid)),e.dom.elNonForecastMask=o("nonForecastMask".concat(e.cuid));var r=0,a=0;(["bar","rangeBar","candlestick","boxPlot"].includes(t.config.chart.type)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(r=Math.max(t.config.grid.padding.left,e.barPadForNumericAxis),a=Math.max(t.config.grid.padding.right,e.barPadForNumericAxis)),e.dom.elGridRect=i.drawRect(-n/2-2,-n/2-2,e.gridWidth+n+4,e.gridHeight+n+4,0,"#fff"),e.dom.elGridRectBar=i.drawRect(-n/2-r-2,-n/2-2,e.gridWidth+n+a+r+4,e.gridHeight+n+4,0,"#fff");var c=t.globals.markers.largestSize;e.dom.elGridRectMarker=i.drawRect(Math.min(-n/2-r-2,-c),-c,e.gridWidth+Math.max(n+a+r+4,2*c),e.gridHeight+2*c,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectBarMask.appendChild(e.dom.elGridRectBar.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var h=e.dom.baseEl.querySelector("defs");h.appendChild(e.dom.elGridRectMask),h.appendChild(e.dom.elGridRectBarMask),h.appendChild(e.dom.elGridRectMarkerMask),h.appendChild(e.dom.elForecastMask),h.appendChild(e.dom.elNonForecastMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,i=t.x1,a=t.xCount,h=this.w;if(!(0===e&&h.globals.skipFirstTimelinelabel||e===a-1&&h.globals.skipLastTimelinelabel&&!h.config.xaxis.labels.formatter||"radar"===h.config.chart.type)){h.config.grid.xaxis.lines.show&&this._drawGridLine({i:e,x1:i,y1:t.y1,x2:t.x2,y2:t.y2,xCount:a,parent:t.parent});var d=0;if(h.globals.hasXaxisGroups&&"between"===h.config.xaxis.tickPlacement){var g=h.globals.groups;if(g){for(var u=0,p=0;u<e&&p<g.length;p++)u+=g[p].cols;u===e&&(d=.6*h.globals.xAxisLabelsHeight)}}new dn(this.ctx).drawXaxisTicks(i,d,h.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(t){var e=t.i,i=t.x1,n=t.y1,o=t.x2,r=t.y2,a=t.xCount,c=t.parent,h=this.w,d=c.node.classList.contains("apexcharts-gridlines-horizontal"),g=h.globals.barPadForNumericAxis,u=0===n&&0===r||0===i&&0===o||n===h.globals.gridHeight&&r===h.globals.gridHeight||h.globals.isBarHorizontal&&(0===e||e===a-1),p=new D(this).drawLine(i-(d?g:0),n,o+(d?g:0),r,h.config.grid.borderColor,h.config.grid.strokeDashArray);p.node.classList.add("apexcharts-gridline"),u&&h.config.grid.show?this.elGridBorders.add(p):c.add(p)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,i=t.x1,n=t.y1,o=t.x2,r=t.y2,a=t.type,c=this.w,h=new D(this.ctx),d=c.globals.barPadForNumericAxis,u=h.drawRect(i-("row"===a?d:0),n,o+("row"===a?2*d:0),r,0,c.config.grid[a].colors[e],c.config.grid[a].opacity);this.elg.add(u),u.attr("clip-path","url(#gridRectMask".concat(c.globals.cuid,")")),u.node.classList.add("apexcharts-grid-".concat(a))}},{key:"_drawXYLines",value:function(t){var e=this,i=t.xCount,n=t.tickAmount,o=this.w;if(o.config.grid.xaxis.lines.show||o.config.xaxis.axisTicks.show){var r,a=o.globals.padHorizontal,c=o.globals.gridHeight;o.globals.timescaleLabels.length?function(m){for(var f=m.xC,x=m.y1,_=m.y2,w=0;w<f;w++)e._drawGridLines({i:w,x1:e.xaxisLabels[w].position,y1:x,x2:e.xaxisLabels[w].position,y2:_,xCount:i,parent:e.elgridLinesV})}({xC:i,x1:a,y1:0,x2:r,y2:c}):(o.globals.isXNumeric&&(i=o.globals.xAxisScale.result.length),function(m){for(var f=m.xC,b=m.x1,x=m.y1,v=m.x2,_=m.y2,w=0;w<f+(o.globals.isXNumeric?0:1);w++)0===w&&1===f&&1===o.globals.dataPoints&&(v=b=o.globals.gridWidth/2),e._drawGridLines({i:w,x1:b,y1:x,x2:v,y2:_,xCount:i,parent:e.elgridLinesV}),v=b+=o.globals.gridWidth/(o.globals.isXNumeric?f-1:f)}({xC:i,x1:a,y1:0,x2:r,y2:c}))}if(o.config.grid.yaxis.lines.show){var h=0,d=0,g=o.globals.gridWidth,u=n+1;this.isRangeBar&&(u=o.globals.labels.length);for(var p=0;p<u+(this.isRangeBar?1:0);p++)this._drawGridLine({i:p,xCount:u+(this.isRangeBar?1:0),x1:0,y1:h,x2:g,y2:d,parent:this.elgridLinesH}),d=h+=o.globals.gridHeight/(this.isRangeBar?u:n)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,i=this.w;if(i.config.grid.xaxis.lines.show||i.config.xaxis.axisTicks.show)for(var n,o=i.globals.padHorizontal,r=i.globals.gridHeight,a=0;a<e+1;a++)i.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,xCount:e+1,x1:o,y1:0,x2:n,y2:r,parent:this.elgridLinesV}),new dn(this.ctx).drawXaxisTicks(o,0,i.globals.dom.elGraphical),n=o+=i.globals.gridWidth/e;if(i.config.grid.yaxis.lines.show)for(var c=0,h=0,d=i.globals.gridWidth,g=0;g<i.globals.dataPoints+1;g++)this._drawGridLine({i:g,xCount:i.globals.dataPoints+1,x1:0,y1:c,x2:d,y2:h,parent:this.elgridLinesH}),h=c+=i.globals.gridHeight/i.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=t.globals,i=new D(this.ctx);this.elg=i.group({class:"apexcharts-grid"}),this.elgridLinesH=i.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=i.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=i.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var n=0;n<e.seriesYAxisMap.length&&e.ignoreYAxisIndexes.includes(n);)n++;n===e.seriesYAxisMap.length&&(n=0);var o,a,c,h,r=e.yAxisScale[n].result.length-1;return!e.isBarHorizontal||this.isRangeBar?(o=this.xaxisLabels.length,this.isRangeBar&&(r=e.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(o=t.config.xaxis.tickAmount),(null===(a=e.yAxisScale)||void 0===a||null===(c=a[n])||void 0===c||null===(h=c.result)||void 0===h?void 0:h.length)>0&&"datetime"!==t.config.xaxis.type&&(o=e.yAxisScale[n].result.length-1)),this._drawXYLines({xCount:o,tickAmount:r})):this._drawInvertedXYLines({xCount:o=r,tickAmount:r=e.xTickAmount}),this.drawGridBands(o,r),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:e.gridWidth/o}}},{key:"drawGridBands",value:function(t,e){var i,n,o=this,r=this.w;if((null===(i=r.config.grid.row.colors)||void 0===i?void 0:i.length)>0&&function(m,f,b,x,v,_){for(var w=0,y=0;w<f;w++,y++)y>=r.config.grid.row.colors.length&&(y=0),o._drawGridBandRect({c:y,x1:0,y1:x,x2:v,y2:_,type:"row"}),x+=r.globals.gridHeight/e}(0,e,0,0,r.globals.gridWidth,r.globals.gridHeight/e),(null===(n=r.config.grid.column.colors)||void 0===n?void 0:n.length)>0){var a=r.globals.isBarHorizontal||"on"!==r.config.xaxis.tickPlacement||"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric?t:t-1;r.globals.isXNumeric&&(a=r.globals.xAxisScale.result.length-1);for(var c=r.globals.padHorizontal,h=r.globals.padHorizontal+r.globals.gridWidth/a,d=r.globals.gridHeight,g=0,u=0;g<t;g++,u++){var p;u>=r.config.grid.column.colors.length&&(u=0),"datetime"===r.config.xaxis.type&&(c=this.xaxisLabels[g].position,h=((null===(p=this.xaxisLabels[g+1])||void 0===p?void 0:p.position)||r.globals.gridWidth)-this.xaxisLabels[g].position),this._drawGridBandRect({c:u,x1:c,y1:0,x2:h,y2:d,type:"column"}),c+=r.globals.gridWidth/a}}}}]),s}(),eh=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.coreUtils=new kt(this.ctx)}return B(s,[{key:"niceScale",value:function(t,e){var i,n,o,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=1e-11,h=this.w,d=h.globals;d.isBarHorizontal?(i=h.config.xaxis,n=Math.max((d.svgWidth-100)/25,2)):(i=h.config.yaxis[a],n=Math.max((d.svgHeight-100)/15,2)),A.isNumber(n)||(n=10),o=null!=i.min,r=void 0!==i.max&&null!==i.min;var g=null!=i.stepSize,u=null!=i.tickAmount,p=u?i.tickAmount:d.niceScaleDefaultTicks[Math.min(Math.round(n/2),d.niceScaleDefaultTicks.length-1)];if(d.isMultipleYAxis&&!u&&d.multiAxisTickAmount>0&&(p=d.multiAxisTickAmount,u=!0),p="dataPoints"===p?d.dataPoints-1:Math.abs(Math.round(p)),(t===Number.MIN_VALUE&&0===e||!A.isNumber(t)&&!A.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)&&(t=A.isNumber(i.min)?i.min:0,e=A.isNumber(i.max)?i.max:t+p,d.allSeriesCollapsed=!1),t>e){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var m=e;e=t,t=m}else t===e&&(t=0===t?0:t-1,e=0===e?2:e+1);var f=[];p<1&&(p=1);var b=p,x=Math.abs(e-t);!o&&t>0&&t/x<.15&&(t=0,o=!0),!r&&e<0&&-e/x<.15&&(e=0,r=!0);var v=(x=Math.abs(e-t))/b,_=v,w=Math.floor(Math.log10(_)),y=Math.pow(10,w),k=Math.ceil(_/y);if(v=_=(k=d.niceScaleAllowedMagMsd[0===d.yValueDecimal?0:1][k])*y,d.isBarHorizontal&&i.stepSize&&"datetime"!==i.type?(v=i.stepSize,g=!0):g&&(v=i.stepSize),g&&i.forceNiceScale){var C=Math.floor(Math.log10(v));v*=Math.pow(10,w-C)}if(o&&r){var M=x/b;if(u)if(g)if(0!=A.mod(x,v)){var P=A.getGCD(v,M);v=M/P<10?P:M}else 0==A.mod(v,M)?v=M:(M=v,u=!1);else v=M;else if(g)0==A.mod(x,v)?M=v:v=M;else if(0==A.mod(x,v))M=v;else{M=x/(b=Math.ceil(x/v));var O=A.getGCD(x,v);x/O<n&&(M=O),v=M}b=Math.round(x/v)}else{if(o||r){if(r)if(u)t=e-v*b;else{var S=t;t=v*Math.floor(t/v),Math.abs(e-t)/A.getGCD(x,v)>n&&(t=e-v*p,t+=v*Math.floor((S-t)/v))}else if(o)if(u)e=t+v*b;else{var E=e;e=v*Math.ceil(e/v),Math.abs(e-t)/A.getGCD(x,v)>n&&(e=t+v*p,e+=v*Math.ceil((E-e)/v))}}else if(d.isMultipleYAxis&&u){var I=v*Math.floor(t/v),R=I+v*b;R<e&&(v*=2),R=e,e=(t=I)+v*b,x=Math.abs(e-t),t>0&&t<Math.abs(R-e)&&(t=0,e=v*b),e<0&&-e<Math.abs(I-t)&&(e=0,t=-v*b)}else t=v*Math.floor(t/v),e=v*Math.ceil(e/v);x=Math.abs(e-t),v=A.getGCD(x,v),b=Math.round(x/v)}if(u||o||r||(b=Math.ceil((x-c)/(v+c)))>16&&A.getPrimeFactors(b).length<2&&b++,!u&&i.forceNiceScale&&0===d.yValueDecimal&&b>x&&(b=x,v=Math.round(x/b)),b>n&&(!u&&!g||i.forceNiceScale)){var T=A.getPrimeFactors(b),L=T.length-1,F=b;t:for(var V=0;V<L;V++)for(var H=0;H<=L-V;H++){for(var Y=Math.min(H+V,L),X=F,Q=1,ct=H;ct<=Y;ct++)Q*=T[ct];if((X/=Q)<n){F=X;break t}}v=F===b?x:x/F,b=Math.round(x/v)}d.isMultipleYAxis&&0==d.multiAxisTickAmount&&d.ignoreYAxisIndexes.indexOf(a)<0&&(d.multiAxisTickAmount=b);var $=t-v,bt=v*c;do{f.push(A.stripNumber($+=v,7))}while(e-$>bt);return{result:f,niceMin:f[0],niceMax:f[f.length-1]}}},{key:"linearScale",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=Math.abs(e-t),a=[];if(t===e)return{result:a=[t],niceMin:a[0],niceMax:a[a.length-1]};"dataPoints"===(i=this._adjustTicksForSmallRange(i,n,r))&&(i=this.w.globals.dataPoints-1),o||(o=r/i),o=Math.round(100*(o+Number.EPSILON))/100,i===Number.MAX_VALUE&&(i=5,o=1);for(var c=t;i>=0;)a.push(c),c=A.preciseAddition(c,o),i-=1;return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScaleNice",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var n=[],o=Math.ceil(Math.log(e)/Math.log(i)+1),r=Math.floor(Math.log(t)/Math.log(i));r<o;r++)n.push(Math.pow(i,r));return{result:n,niceMin:n[0],niceMax:n[n.length-1]}}},{key:"logarithmicScale",value:function(t,e,i){e<=0&&(e=Math.max(t,i)),t<=0&&(t=Math.min(e,i));for(var n=[],o=Math.log(e)/Math.log(i),r=Math.log(t)/Math.log(i),a=o-r,c=Math.round(a),h=a/c,d=0,g=r;d<c;d++,g+=h)n.push(Math.pow(i,g));return n.push(Math.pow(i,o)),{result:n,niceMin:t,niceMax:e}}},{key:"_adjustTicksForSmallRange",value:function(t,e,i){var n=t;if(void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount){var o=Number(this.w.config.yaxis[e].labels.formatter(1));A.isNumber(o)&&0===this.w.globals.yValueDecimal&&(n=Math.ceil(i))}return n<t?n:t}},{key:"setYScaleForIndex",value:function(t,e,i){var n=this.w.globals,o=this.w.config,r=n.isBarHorizontal?o.xaxis:o.yaxis[t];void 0===n.yAxisScale[t]&&(n.yAxisScale[t]=[]);var a=Math.abs(i-e);r.logarithmic&&a<=5&&(n.invalidLogScale=!0),r.logarithmic&&a>5?(n.allSeriesCollapsed=!1,n.yAxisScale[t]=r.forceNiceScale?this.logarithmicScaleNice(e,i,r.logBase):this.logarithmicScale(e,i,r.logBase)):i!==-Number.MAX_VALUE&&A.isNumber(i)&&e!==Number.MAX_VALUE&&A.isNumber(e)?(n.allSeriesCollapsed=!1,n.yAxisScale[t]=this.niceScale(e,i,t)):n.yAxisScale[t]=this.niceScale(Number.MIN_VALUE,0,t)}},{key:"setXScale",value:function(t,e){var i=this.w,n=i.globals;return n.xAxisScale=e!==-Number.MAX_VALUE&&A.isNumber(e)?this.linearScale(t,e,n.xTickAmount,0,void 0===i.config.xaxis.max?i.config.xaxis.stepSize:void 0):this.linearScale(0,10,10),n.xAxisScale}},{key:"scaleMultipleYAxes",value:function(){var t=this,e=this.w.config,i=this.w.globals;this.coreUtils.setSeriesYAxisMappings();var n=i.seriesYAxisMap,o=i.minYArr,r=i.maxYArr;i.allSeriesCollapsed=!0,i.barGroups=[],n.forEach(function(a,c){var h=[];a.forEach(function(d){var g,u=null===(g=e.series[d])||void 0===g?void 0:g.group;h.indexOf(u)<0&&h.push(u)}),a.length>0?function(){var d,g,u=Number.MAX_VALUE,p=-Number.MAX_VALUE,m=u,f=p;if(e.chart.stacked)!function(){var v=new Array(i.dataPoints).fill(0),_=[],w=[],y=[];h.forEach(function(){_.push(v.map(function(){return Number.MIN_VALUE})),w.push(v.map(function(){return Number.MIN_VALUE})),y.push(v.map(function(){return Number.MIN_VALUE}))});for(var k=function(M){!d&&e.series[a[M]].type&&(d=e.series[a[M]].type);var P=a[M];g=e.series[P].group?e.series[P].group:"axis-".concat(c),!(i.collapsedSeriesIndices.indexOf(P)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(P)<0)||(i.allSeriesCollapsed=!1,h.forEach(function(O,S){if(e.series[P].group===O)for(var E=0;E<i.series[P].length;E++){var I=i.series[P][E];I>=0?w[S][E]+=I:y[S][E]+=I,_[S][E]+=I,m=Math.min(m,I),f=Math.max(f,I)}})),"bar"!==d&&"column"!==d||i.barGroups.push(g)},C=0;C<a.length;C++)k(C);d||(d=e.chart.type),"bar"===d||"column"===d?h.forEach(function(M,P){u=Math.min(u,Math.min.apply(null,y[P])),p=Math.max(p,Math.max.apply(null,w[P]))}):(h.forEach(function(M,P){m=Math.min(m,Math.min.apply(null,_[P])),f=Math.max(f,Math.max.apply(null,_[P]))}),u=m,p=f),u===Number.MIN_VALUE&&p===Number.MIN_VALUE&&(p=-Number.MAX_VALUE)}();else for(var b=0;b<a.length;b++){var x=a[b];u=Math.min(u,o[x]),p=Math.max(p,r[x]),!(i.collapsedSeriesIndices.indexOf(x)<0&&i.ancillaryCollapsedSeriesIndices.indexOf(x)<0)||(i.allSeriesCollapsed=!1)}void 0!==e.yaxis[c].min&&(u="function"==typeof e.yaxis[c].min?e.yaxis[c].min(u):e.yaxis[c].min),void 0!==e.yaxis[c].max&&(p="function"==typeof e.yaxis[c].max?e.yaxis[c].max(p):e.yaxis[c].max),i.barGroups=i.barGroups.filter(function(v,_,w){return w.indexOf(v)===_}),t.setYScaleForIndex(c,u,p),a.forEach(function(v){o[v]=i.yAxisScale[c].niceMin,r[v]=i.yAxisScale[c].niceMax})}():t.setYScaleForIndex(c,0,-Number.MAX_VALUE)})}}]),s}(),tr=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.scales=new eh(t)}return B(s,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this.w.config,r=this.w.globals,a=-Number.MAX_VALUE,c=Number.MIN_VALUE;null===n&&(n=t+1);var h=r.series,d=h,g=h;"candlestick"===o.chart.type?(d=r.seriesCandleL,g=r.seriesCandleH):"boxPlot"===o.chart.type?(d=r.seriesCandleO,g=r.seriesCandleC):r.isRangeData&&(d=r.seriesRangeStart,g=r.seriesRangeEnd);var u=!1;if(r.seriesX.length>=n){var p,m=null===(p=r.brushSource)||void 0===p?void 0:p.w.config.chart.brush;(o.chart.zoom.enabled&&o.chart.zoom.autoScaleYaxis||null!=m&&m.enabled&&null!=m&&m.autoScaleYaxis)&&(u=!0)}for(var f=t;f<n;f++){r.dataPoints=Math.max(r.dataPoints,h[f].length);var b=o.series[f].type;r.categoryLabels.length&&(r.dataPoints=r.categoryLabels.filter(function(P){return void 0!==P}).length),r.labels.length&&"datetime"!==o.xaxis.type&&0!==r.series.reduce(function(P,O){return P+O.length},0)&&(r.dataPoints=Math.max(r.dataPoints,r.labels.length));var x=0,v=h[f].length-1;if(u){if(o.xaxis.min)for(;x<v&&r.seriesX[f][x]<o.xaxis.min;x++);if(o.xaxis.max)for(;v>x&&r.seriesX[f][v]>o.xaxis.max;v--);}for(var _=x;_<=v&&_<r.series[f].length;_++){var w=h[f][_];if(null!==w&&A.isNumber(w)){var y,k,C,M;switch(void 0!==(null===(y=g[f])||void 0===y?void 0:y[_])&&(a=Math.max(a,g[f][_]),e=Math.min(e,g[f][_])),void 0!==(null===(k=d[f])||void 0===k?void 0:k[_])&&(e=Math.min(e,d[f][_]),i=Math.max(i,d[f][_])),b){case"candlestick":void 0!==r.seriesCandleC[f][_]&&(a=Math.max(a,r.seriesCandleH[f][_]),e=Math.min(e,r.seriesCandleL[f][_]));break;case"boxPlot":void 0!==r.seriesCandleC[f][_]&&(a=Math.max(a,r.seriesCandleC[f][_]),e=Math.min(e,r.seriesCandleO[f][_]))}b&&"candlestick"!==b&&"boxPlot"!==b&&"rangeArea"!==b&&"rangeBar"!==b&&(a=Math.max(a,r.series[f][_]),e=Math.min(e,r.series[f][_])),r.seriesGoals[f]&&r.seriesGoals[f][_]&&Array.isArray(r.seriesGoals[f][_])&&r.seriesGoals[f][_].forEach(function(P){a=Math.max(a,P.value),e=Math.min(e,P.value)}),i=a,w=A.noExponents(w),A.isFloat(w)&&(r.yValueDecimal=Math.max(r.yValueDecimal,w.toString().split(".")[1].length)),c>(null===(C=d[f])||void 0===C?void 0:C[_])&&(null===(M=d[f])||void 0===M?void 0:M[_])<0&&(c=d[f][_])}else r.hasNullValues=!0}"bar"!==b&&"column"!==b||(c<0&&a<0&&(a=0,i=Math.max(i,0)),c===Number.MIN_VALUE&&(c=0,e=Math.min(e,0)))}return"rangeBar"===o.chart.type&&r.seriesRangeStart.length&&r.isBarHorizontal&&(c=e),"bar"===o.chart.type&&(c<0&&a<0&&(a=0),c===Number.MIN_VALUE&&(c=0)),{minY:c,maxY:a,lowestY:e,highestY:i}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var i,n=Number.MAX_VALUE;if(t.isMultipleYAxis){n=Number.MAX_VALUE;for(var o=0;o<t.series.length;o++)i=this.getMinYMaxY(o),t.minYArr[o]=i.lowestY,t.maxYArr[o]=i.highestY,n=Math.min(n,i.lowestY)}return i=this.getMinYMaxY(0,n,null,t.series.length),"bar"===e.chart.type?(t.minY=i.minY,t.maxY=i.maxY):(t.minY=i.lowestY,t.maxY=i.highestY),n=i.lowestY,e.chart.stacked&&this._setStackedMinMax(),"line"===e.chart.type||"area"===e.chart.type||"scatter"===e.chart.type||"candlestick"===e.chart.type||"boxPlot"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal?t.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==t.maxY&&(t.minY=n):t.minY=t.minY!==Number.MIN_VALUE?Math.min(i.minY,t.minY):i.minY,e.yaxis.forEach(function(r,a){void 0!==r.max&&("number"==typeof r.max?t.maxYArr[a]=r.max:"function"==typeof r.max&&(t.maxYArr[a]=r.max(t.isMultipleYAxis?t.maxYArr[a]:t.maxY)),t.maxY=t.maxYArr[a]),void 0!==r.min&&("number"==typeof r.min?t.minYArr[a]=r.min:"function"==typeof r.min&&(t.minYArr[a]=r.min(t.isMultipleYAxis?t.minYArr[a]===Number.MIN_VALUE?0:t.minYArr[a]:t.minY)),t.minY=t.minYArr[a])}),t.isBarHorizontal&&["min","max"].forEach(function(r){void 0!==e.xaxis[r]&&"number"==typeof e.xaxis[r]&&("min"===r?t.minY=e.xaxis[r]:t.maxY=e.xaxis[r])}),t.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),t.minY=n):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.minY,t.maxYArr[0]=t.maxY),t.barGroups=[],t.lineGroups=[],t.areaGroups=[],e.series.forEach(function(r){switch(r.type||e.chart.type){case"bar":case"column":t.barGroups.push(r.group);break;case"line":t.lineGroups.push(r.group);break;case"area":t.areaGroups.push(r.group)}}),t.barGroups=t.barGroups.filter(function(r,a,c){return c.indexOf(r)===a}),t.lineGroups=t.lineGroups.filter(function(r,a,c){return c.indexOf(r)===a}),t.areaGroups=t.areaGroups.filter(function(r,a,c){return c.indexOf(r)===a}),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,i="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var c=0;c<t.series.length;c++)if(t.labels[c])for(var h=0;h<t.labels[c].length;h++)null!==t.labels[c][h]&&A.isNumber(t.labels[c][h])&&(t.maxX=Math.max(t.maxX,t.labels[c][h]),t.initialMaxX=Math.max(t.maxX,t.labels[c][h]),t.minX=Math.min(t.minX,t.labels[c][h]),t.initialMinX=Math.min(t.minX,t.labels[c][h]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var n=10;if(void 0===e.xaxis.tickAmount)n=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(n=t.dataPoints-1),n>t.dataPoints&&0!==t.dataPoints&&(n=t.dataPoints-1);else if("dataPoints"===e.xaxis.tickAmount){if(t.series.length>1&&(n=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric){var o=Math.round(t.maxX-t.minX);o<30&&(n=o)}}else n=e.xaxis.tickAmount;if(t.xTickAmount=n,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var r=[],a=t.minX-1;a<t.maxX;a++)r.push(a+1);t.xAxisScale={result:r,niceMin:r[0],niceMax:r[r.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(0,n,n,0,e.xaxis.stepSize),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,n-1,0,e.xaxis.stepSize),t.seriesX=t.labels.slice());i&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var i=0;i<t.seriesZ[e].length;i++)null!==t.seriesZ[e][i]&&A.isNumber(t.seriesZ[e][i])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][i]),t.minZ=Math.min(t.minZ,t.seriesZ[e][i]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var i=new Lt(this.ctx);if("datetime"===e.xaxis.type){var n=i.getDate(t.minX);e.xaxis.labels.datetimeUTC?n.setUTCDate(n.getUTCDate()-2):n.setDate(n.getDate()-2),t.minX=new Date(n).getTime();var o=i.getDate(t.maxX);e.xaxis.labels.datetimeUTC?o.setUTCDate(o.getUTCDate()+2):o.setDate(o.getDate()+2),t.maxX=new Date(o).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach(function(e,i){if(e.length){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var n=e.slice();n.sort(function(o,r){return o-r}),n.forEach(function(o,r){if(r>0){var a=o-n[r-1];a>0&&(t.minXDiff=Math.min(a,t.minXDiff))}}),1!==t.dataPoints&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)}})}},{key:"_setStackedMinMax",value:function(){var t=this,e=this.w.globals;if(e.series.length){var i=e.seriesGroups;i.length||(i=[this.w.globals.seriesNames.map(function(r){return r})]);var n={},o={};i.forEach(function(r){n[r]=[],o[r]=[],t.w.config.series.map(function(a,c){return r.indexOf(e.seriesNames[c])>-1?c:null}).filter(function(a){return null!==a}).forEach(function(a){for(var c=0;c<e.series[e.maxValsInArrayIndex].length;c++){var h,d,g,u;void 0===n[r][c]&&(n[r][c]=0,o[r][c]=0),(t.w.config.chart.stacked&&!e.comboCharts||t.w.config.chart.stacked&&e.comboCharts&&(!t.w.config.chart.stackOnlyBar||"bar"===(null===(h=t.w.config.series)||void 0===h||null===(d=h[a])||void 0===d?void 0:d.type)||"column"===(null===(g=t.w.config.series)||void 0===g||null===(u=g[a])||void 0===u?void 0:u.type)))&&null!==e.series[a][c]&&A.isNumber(e.series[a][c])&&(e.series[a][c]>0?n[r][c]+=parseFloat(e.series[a][c])+1e-4:o[r][c]+=parseFloat(e.series[a][c]))}})}),Object.entries(n).forEach(function(r){var a=hc(r,1)[0];n[a].forEach(function(c,h){e.maxY=Math.max(e.maxY,n[a][h]),e.minY=Math.min(e.minY,o[a][h])})})}}}]),s}(),er=function(){function s(t,e){N(this,s),this.ctx=t,this.elgrid=e,this.w=t.w;var i=this.w;this.xaxisFontSize=i.config.xaxis.labels.style.fontSize,this.axisFontFamily=i.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=i.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===i.config.chart.type&&i.config.plotOptions.bar.horizontal,this.xAxisoffX="bottom"===i.config.xaxis.position?i.globals.gridHeight:0,this.drawnLabels=[],this.axesUtils=new ze(t)}return B(s,[{key:"drawYaxis",value:function(t){var e=this.w,i=new D(this.ctx),n=e.config.yaxis[t].labels.style,o=n.fontSize,r=n.fontFamily,a=n.fontWeight,c=i.group({class:"apexcharts-yaxis",rel:t,transform:"translate(".concat(e.globals.translateYAxisX[t],", 0)")});if(this.axesUtils.isYAxisHidden(t))return c;var h=i.group({class:"apexcharts-yaxis-texts-g"});c.add(h);var d=e.globals.yAxisScale[t].result.length-1,g=e.globals.gridHeight/d,u=e.globals.yLabelFormatters[t],p=this.axesUtils.checkForReversedLabels(t,e.globals.yAxisScale[t].result.slice());if(e.config.yaxis[t].labels.show){var m=e.globals.translateY+e.config.yaxis[t].labels.offsetY;e.globals.isBarHorizontal?m=0:"heatmap"===e.config.chart.type&&(m-=g/2),m+=parseInt(o,10)/3;for(var f=d;f>=0;f--){var b=u(p[f],f,e),x=e.config.yaxis[t].labels.padding;e.config.yaxis[t].opposite&&0!==e.config.yaxis.length&&(x*=-1);var v=this.getTextAnchor(e.config.yaxis[t].labels.align,e.config.yaxis[t].opposite),_=this.axesUtils.getYAxisForeColor(n.colors,t),w=Array.isArray(_)?_[f]:_,y=A.listToArray(e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-label tspan"))).map(function(C){return C.textContent}),k=i.drawText({x,y:m,text:y.includes(b)&&!e.config.yaxis[t].labels.showDuplicates?"":b,textAnchor:v,fontSize:o,fontFamily:r,fontWeight:a,maxWidth:e.config.yaxis[t].labels.maxWidth,foreColor:w,isPlainText:!1,cssClass:"apexcharts-yaxis-label ".concat(n.cssClass)});h.add(k),this.addTooltip(k,b),0!==e.config.yaxis[t].labels.rotate&&this.rotateLabel(i,k,firstLabel,e.config.yaxis[t].labels.rotate),m+=g}}return this.addYAxisTitle(i,c,t),this.addAxisBorder(i,c,t,d,g),c}},{key:"getTextAnchor",value:function(t,e){return"left"===t?"start":"center"===t?"middle":"right"===t?"end":e?"start":"end"}},{key:"addTooltip",value:function(t,e){var i=document.createElementNS(this.w.globals.SVGNS,"title");i.textContent=Array.isArray(e)?e.join(" "):e,t.node.appendChild(i)}},{key:"rotateLabel",value:function(t,e,i,n){var o=t.rotateAroundCenter(i.node),r=t.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(".concat(n," ").concat(o.x," ").concat(r.y,")"))}},{key:"addYAxisTitle",value:function(t,e,i){var n=this.w;if(void 0!==n.config.yaxis[i].title.text){var o=t.group({class:"apexcharts-yaxis-title"}),a=t.drawText({x:n.config.yaxis[i].opposite?n.globals.translateYAxisX[i]:0,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[i].title.offsetY,text:n.config.yaxis[i].title.text,textAnchor:"end",foreColor:n.config.yaxis[i].title.style.color,fontSize:n.config.yaxis[i].title.style.fontSize,fontWeight:n.config.yaxis[i].title.style.fontWeight,fontFamily:n.config.yaxis[i].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text ".concat(n.config.yaxis[i].title.style.cssClass)});o.add(a),e.add(o)}}},{key:"addAxisBorder",value:function(t,e,i,n,o){var r=this.w,a=r.config.yaxis[i].axisBorder,c=31+a.offsetX;if(r.config.yaxis[i].opposite&&(c=-31-a.offsetX),a.show){var h=t.drawLine(c,r.globals.translateY+a.offsetY-2,c,r.globals.gridHeight+r.globals.translateY+a.offsetY+2,a.color,0,a.width);e.add(h)}r.config.yaxis[i].axisTicks.show&&this.axesUtils.drawYAxisTicks(c,n,a,r.config.yaxis[i].axisTicks,i,o,e)}},{key:"drawYaxisInversed",value:function(t){var e=this.w,i=new D(this.ctx),n=i.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),o=i.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(o);var r=e.globals.yAxisScale[t].result.length-1,a=e.globals.gridWidth/r+.1,c=a+e.config.xaxis.labels.offsetX,h=e.globals.xLabelFormatter,d=this.axesUtils.checkForReversedLabels(t,e.globals.yAxisScale[t].result.slice()),g=e.globals.timescaleLabels;if(g.length>0&&(this.xaxisLabels=g.slice(),r=(d=g.slice()).length),e.config.xaxis.labels.show)for(var u=g.length?0:r;g.length?u<g.length:u>=0;g.length?u++:u--){var p=h(d[u],u,e),m=e.globals.gridWidth+e.globals.padHorizontal-(c-a+e.config.xaxis.labels.offsetX);if(g.length){var f=this.axesUtils.getLabel(d,g,m,u,this.drawnLabels,this.xaxisFontSize);m=f.x,p=f.text,this.drawnLabels.push(f.text),0===u&&e.globals.skipFirstTimelinelabel&&(p=""),u===d.length-1&&e.globals.skipLastTimelinelabel&&(p="")}var b=i.drawText({x:m,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:p,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label ".concat(e.config.xaxis.labels.style.cssClass)});o.add(b),b.tspan(p),this.addTooltip(b,p),c+=a}return this.inversedYAxisTitleText(n),this.inversedYAxisBorder(n),n}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,i=new D(this.ctx),n=e.config.xaxis.axisBorder;if(n.show){var o=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(o-=15);var r=i.drawLine(e.globals.padHorizontal+o+n.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,n.color,0,n.height);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(r):t.add(r)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,i=new D(this.ctx);if(void 0!==e.config.xaxis.title.text){var n=i.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),o=i.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text ".concat(e.config.xaxis.title.style.cssClass)});n.add(o),t.add(n)}}},{key:"yAxisTitleRotate",value:function(t,e){var i=this.w,n=new D(this.ctx),o=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g")),r=o?o.getBoundingClientRect():{width:0,height:0},a=i.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text")),c=a?a.getBoundingClientRect():{width:0,height:0};if(a){var h=this.xPaddingForYAxisTitle(t,r,c,e);a.setAttribute("x",h.xPos-(e?10:0));var d=n.rotateAroundCenter(a);a.setAttribute("transform","rotate(".concat(e?-1*i.config.yaxis[t].title.rotate:i.config.yaxis[t].title.rotate," ").concat(d.x," ").concat(d.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,i,n){var o=this.w,r=0,a=10;return void 0===o.config.yaxis[t].title.text||t<0?{xPos:r,padd:0}:(n?r=e.width+o.config.yaxis[t].title.offsetX+i.width/2+a/2:(r=-1*e.width+o.config.yaxis[t].title.offsetX+a/2+i.width/2,o.globals.isBarHorizontal&&(r=-1*e.width-o.config.yaxis[t].title.offsetX-(a=25))),{xPos:r,padd:a})}},{key:"setYAxisXPosition",value:function(t,e){var i=this.w,n=0,o=0,r=18,a=1;i.config.yaxis.length>1&&(this.multipleYs=!0),i.config.yaxis.forEach(function(c,h){var d=i.globals.ignoreYAxisIndexes.includes(h)||!c.show||c.floating||0===t[h].width,g=t[h].width+e[h].width;c.opposite?i.globals.isBarHorizontal?i.globals.translateYAxisX[h]=(o=i.globals.gridWidth+i.globals.translateX-1)-c.labels.offsetX:(o=i.globals.gridWidth+i.globals.translateX+a,d||(a+=g+20),i.globals.translateYAxisX[h]=o-c.labels.offsetX+20):(n=i.globals.translateX-r,d||(r+=g+20),i.globals.translateYAxisX[h]=n+c.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var t=this.w;A.listToArray(t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis")).forEach(function(e,i){var n=t.config.yaxis[i];if(n&&!n.floating&&void 0!==n.labels.align){var o=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-texts-g")),r=A.listToArray(t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(i,"'] .apexcharts-yaxis-label"))),a=o.getBoundingClientRect();r.forEach(function(c){c.setAttribute("text-anchor",n.labels.align)}),"left"!==n.labels.align||n.opposite?"center"===n.labels.align?o.setAttribute("transform","translate(".concat(a.width/2*(n.opposite?1:-1),", 0)")):"right"===n.labels.align&&n.opposite&&o.setAttribute("transform","translate(".concat(a.width,", 0)")):o.setAttribute("transform","translate(-".concat(a.width,", 0)"))}})}}]),s}(),mx=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.documentEvent=A.bind(this.documentEvent,this)}return B(s,[{key:"addEventListener",value:function(t,e){var i=this.w;i.globals.events.hasOwnProperty(t)?i.globals.events[t].push(e):i.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){var n=i.globals.events[t].indexOf(e);-1!==n&&i.globals.events[t].splice(n,1)}}},{key:"fireEvent",value:function(t,e){var i=this.w;if(i.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var n=i.globals.events[t],o=n.length,r=0;r<o;r++)n[r].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,i=this.ctx,n=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach(function(o){n.addEventListener(o,function(r){var a=null===r.target.getAttribute("i")&&-1!==e.globals.capturedSeriesIndex?e.globals.capturedSeriesIndex:r.target.getAttribute("i"),c=null===r.target.getAttribute("j")&&-1!==e.globals.capturedDataPointIndex?e.globals.capturedDataPointIndex:r.target.getAttribute("j"),h=Object.assign({},e,{seriesIndex:e.globals.axisCharts?a:0,dataPointIndex:c});"mousemove"===r.type||"touchmove"===r.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(r,i,h):"mouseleave"===r.type||"touchleave"===r.type?"function"==typeof e.config.chart.events.mouseLeave&&e.config.chart.events.mouseLeave(r,i,h):("mouseup"===r.type&&1===r.which||"touchend"===r.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(r,i,h),i.ctx.events.fireEvent("click",[r,i,h]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(o){e.globals.dom.baseEl.addEventListener(o,t.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,i=t.target.className;if("click"===t.type){var n=e.globals.dom.baseEl.querySelector(".apexcharts-menu");n&&n.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==i&&n.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),s}(),bx=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var i=e.filter(function(o){return o.name===t})[0];if(!i)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var n=A.extend(Zc,i);this.w.globals.locale=n.options}}]),s}(),xx=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"drawAxis",value:function(t,e){var i,n,o=this,r=this.w.globals,a=this.w.config,c=new dn(this.ctx,e),h=new er(this.ctx,e);r.axisCharts&&"radar"!==t&&(r.isBarHorizontal?(n=h.drawYaxisInversed(0),i=c.drawXaxisInversed(0),r.dom.elGraphical.add(i),r.dom.elGraphical.add(n)):(i=c.drawXaxis(),r.dom.elGraphical.add(i),a.yaxis.map(function(d,g){if(-1===r.ignoreYAxisIndexes.indexOf(g)&&(n=h.drawYaxis(g),r.dom.Paper.add(n),"back"===o.w.config.grid.position)){var u=r.dom.Paper.children()[1];u.remove(),r.dom.Paper.add(u)}})))}}]),s}(),ir=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new D(this.ctx),i=new Rt(this.ctx),n=t.config.xaxis.crosshairs.fill.gradient,o=t.config.xaxis.crosshairs.dropShadow,u=o.enabled,p=o.left,m=o.top,f=o.blur,b=o.color,x=o.opacity,v=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===t.config.xaxis.crosshairs.fill.type&&(v=e.drawGradient("vertical",n.colorFrom,n.colorTo,n.opacityFrom,n.opacityTo,null,n.stops,null));var _=e.drawRect();1===t.config.xaxis.crosshairs.width&&(_=e.drawLine());var w=t.globals.gridHeight;(!A.isNumber(w)||w<0)&&(w=0);var y=t.config.xaxis.crosshairs.width;(!A.isNumber(y)||y<0)&&(y=0),_.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:w,width:y,height:w,fill:v,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),u&&(_=i.dropShadow(_,{left:p,top:m,blur:f,color:b,opacity:x})),t.globals.dom.elGraphical.add(_)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new D(this.ctx),i=t.config.yaxis[0].crosshairs,n=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var o=e.drawLine(-n,0,t.globals.gridWidth+n,0,i.stroke.color,i.stroke.dashArray,i.stroke.width);o.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(o)}var r=e.drawLine(-n,0,t.globals.gridWidth+n,0,i.stroke.color,0,0);r.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(r)}}]),s}(),vx=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"checkResponsiveConfig",value:function(t){var e=this,i=this.w,n=i.config;if(0!==n.responsive.length){var o=n.responsive.slice();o.sort(function(h,d){return h.breakpoint>d.breakpoint?1:d.breakpoint>h.breakpoint?-1:0}).reverse();var r=new cn({}),a=function(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=window.innerWidth>0?window.innerWidth:screen.width;if(g>o[0].breakpoint){var u=A.clone(i.globals.initialConfig);u.series=A.clone(i.config.series);var p=kt.extendArrayProps(r,u,i);h=A.extend(p,h),h=A.extend(i.config,h),e.overrideResponsiveOptions(h)}else for(var m=0;m<o.length;m++)g<o[m].breakpoint&&(h=kt.extendArrayProps(r,o[m].options,i),h=A.extend(i.config,h),e.overrideResponsiveOptions(h))};if(t){var c=kt.extendArrayProps(r,t,i);c=A.extend(i.config,c),a(c=A.extend(c,t))}else a({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new cn(t).init({responsiveOverride:!0});this.w.config=e}}]),s}(),yx=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.colors=[],this.isColorFn=!1,this.isHeatmapDistributed=this.checkHeatmapDistributed(),this.isBarDistributed=this.checkBarDistributed()}return B(s,[{key:"checkHeatmapDistributed",value:function(){var t=this.w.config,e=t.chart,i=t.plotOptions;return"treemap"===e.type&&i.treemap&&i.treemap.distributed||"heatmap"===e.type&&i.heatmap&&i.heatmap.distributed}},{key:"checkBarDistributed",value:function(){var t=this.w.config,e=t.chart,i=t.plotOptions;return i.bar&&i.bar.distributed&&("bar"===e.type||"rangeBar"===e.type)}},{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t=this.w,e=new A;t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode||"light"));var i=At(t.config.colors||t.config.fill.colors||[]);t.globals.colors=this.getColors(i),this.applySeriesColors(t.globals.seriesColors,t.globals.colors),t.config.theme.monochrome.enabled&&(t.globals.colors=this.getMonochromeColors(t.config.theme.monochrome,t.globals.series,e));var n=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),this.applyColorTypes(["fill","stroke"],n),this.applyDataLabelsColors(n),this.applyRadarPolygonsColors(),this.applyMarkersColors(n)}},{key:"getColors",value:function(t){var e=this,i=this.w;return t&&0!==t.length?Array.isArray(t)&&t.length>0&&"function"==typeof t[0]?(this.isColorFn=!0,i.config.series.map(function(n,o){var r=t[o]||t[0];return"function"==typeof r?r({value:i.globals.axisCharts?i.globals.series[o][0]||0:i.globals.series[o],seriesIndex:o,dataPointIndex:o,w:e.w}):r})):t:this.predefined()}},{key:"applySeriesColors",value:function(t,e){t.forEach(function(i,n){i&&(e[n]=i)})}},{key:"getMonochromeColors",value:function(t,e,i){var n=t.color,r=t.shadeTo,a=this.isBarDistributed||this.isHeatmapDistributed?e[0].length*e.length:e.length,c=1/(a/t.shadeIntensity),h=0;return Array.from({length:a},function(){var d=i.shadeColor("dark"===r?-1*h:h,n);return h+=c,d})}},{key:"applyColorTypes",value:function(t,e){var i=this,n=this.w;t.forEach(function(o){n.globals[o].colors=void 0===n.config[o].colors?i.isColorFn?n.config.colors:e:n.config[o].colors.slice(),i.pushExtraColors(n.globals[o].colors)})}},{key:"applyDataLabelsColors",value:function(t){var e=this.w;e.globals.dataLabels.style.colors=void 0===e.config.dataLabels.style.colors?t:e.config.dataLabels.style.colors.slice(),this.pushExtraColors(e.globals.dataLabels.style.colors,50)}},{key:"applyRadarPolygonsColors",value:function(){var t=this.w;t.globals.radarPolygons.fill.colors=void 0===t.config.plotOptions.radar.polygons.fill.colors?["dark"===t.config.theme.mode?"#343A3F":"none"]:t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20)}},{key:"applyMarkersColors",value:function(t){var e=this.w;e.globals.markers.colors=void 0===e.config.markers.colors?t:e.config.markers.colors.slice(),this.pushExtraColors(e.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,o=e||n.globals.series.length;if(null===i&&(i=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap&&n.config.plotOptions.heatmap.colorScale.inverse),i&&n.globals.series.length&&(o=n.globals.series[n.globals.maxValsInArrayIndex].length*n.globals.series.length),t.length<o)for(var r=o-t.length,a=0;a<r;a++)t.push(t[a])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode,i="dark"===e?"palette4":"light"===e?"palette1":t.theme.palette||"palette1",n="dark"===e?"#f6f7f8":"light"===e?"#373d3f":t.chart.foreColor||"#373d3f";return t.tooltip.theme=e||"light",t.chart.foreColor=n,t.theme.palette=i,t}},{key:"predefined",value:function(){var t=this.w.config.theme.palette,e=this.ctx.constructor.getThemePalettes();return e[t]||e.palette1}}]),s}(),_x=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,i="title"===t?e.config.title:e.config.subtitle,n=e.globals.svgWidth/2,o=i.offsetY,r="middle";if("left"===i.align?(n=10,r="start"):"right"===i.align&&(n=e.globals.svgWidth-10,r="end"),n+=i.offsetX,o=o+parseInt(i.style.fontSize,10)+i.margin/2,void 0!==i.text){var a=new D(this.ctx).drawText({x:n,y:o,text:i.text,textAnchor:r,fontSize:i.style.fontSize,fontFamily:i.style.fontFamily,fontWeight:i.style.fontWeight,foreColor:i.style.color,opacity:1});a.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(a)}}}]),s}(),wx=function(){function s(t){N(this,s),this.w=t.w,this.dCtx=t}return B(s,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,i=0,n=0,o="title"===t?e.config.title.floating:e.config.subtitle.floating,r=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==r&&!o){var a=r.getBoundingClientRect();i=a.width,n=e.globals.axisCharts?a.height+5:a.height}return{width:i,height:n}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.elLegendWrap;t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var i=Object.assign({},A.getBoundingClientRect(e));return this.dCtx.lgRect=null!==e&&!t.config.legend.floating&&t.config.legend.show?{x:i.x,y:i.y,height:i.height,width:0===i.height?0:i.width}:{x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var t=this,e=this.w,i=[];e.config.series.forEach(function(c,h){c.data.forEach(function(d,g){n=e.config.dataLabels.formatter(e.globals.series[h][g],{ctx:t.dCtx.ctx,seriesIndex:h,dataPointIndex:g,w:e}),i.push(n)})});var n=A.getLargestStringFromArr(i),o=new D(this.dCtx.ctx),r=e.config.dataLabels.style,a=o.getTextRects(n,parseInt(r.fontSize),r.fontFamily);return{width:1.05*a.width,height:a.height}}},{key:"getLargestStringFromMultiArr",value:function(t,e){var i=t;if(this.w.globals.isMultiLineX){var n=e.map(function(r,a){return Array.isArray(r)?r.length:1}),o=Math.max.apply(Math,At(n));i=e[n.indexOf(o)]}return i}}]),s}(),Cx=function(){function s(t){N(this,s),this.w=t.w,this.dCtx=t}return B(s,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,i=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===i.length&&(i=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var n=this.getxAxisTimeScaleLabelsCoords();t={width:n.width,height:n.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var o=e.globals.xLabelFormatter,r=A.getLargestStringFromArr(i),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,i);e.globals.isBarHorizontal&&(a=r=e.globals.yAxisScale[0].result.reduce(function(m,f){return m.length>f.length?m:f},0));var c=new an(this.dCtx.ctx),h=r;r=c.xLabelFormat(o,r,h,{i:void 0,dateFormatter:new Lt(this.dCtx.ctx).formatDate,w:e}),a=c.xLabelFormat(o,a,h,{i:void 0,dateFormatter:new Lt(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&void 0===r||""===String(r).trim())&&(a=r="1");var d=new D(this.dCtx.ctx),g=d.getTextRects(r,e.config.xaxis.labels.style.fontSize),u=g;if(r!==a&&(u=d.getTextRects(a,e.config.xaxis.labels.style.fontSize)),(t={width:g.width>=u.width?g.width:u.width,height:g.height>=u.height?g.height:u.height}).width*i.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var p=function(m){return d.getTextRects(m,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};g=p(r),r!==a&&(u=p(a)),t.height=(g.height>u.height?g.height:u.height)/1.5,t.width=g.width>u.width?g.width:u.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var t,e=this.w;if(!e.globals.hasXaxisGroups)return{width:0,height:0};var i,n=(null===(t=e.config.xaxis.group.style)||void 0===t?void 0:t.fontSize)||e.config.xaxis.labels.style.fontSize,o=e.globals.groups.map(function(g){return g.title}),r=A.getLargestStringFromArr(o),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(r,o),c=new D(this.dCtx.ctx),h=c.getTextRects(r,n),d=h;return r!==a&&(d=c.getTextRects(a,n)),i={width:h.width>=d.width?h.width:d.width,height:h.height>=d.height?h.height:d.height},e.config.xaxis.labels.show||(i={width:0,height:0}),{width:i.width,height:i.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,i=0;if(void 0!==t.config.xaxis.title.text){var n=new D(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=n.width,i=n.height}return{width:e,height:i}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var i=this.dCtx.timescaleLabels.map(function(o){return o.value}),n=i.reduce(function(o,r){return void 0===o?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):o.length>r.length?o:r},0);return 1.05*(t=new D(this.dCtx.ctx).getTextRects(n,e.config.xaxis.labels.style.fontSize)).width*i.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,i=this.w,n=i.globals,o=i.config,r=o.xaxis.type,a=t.width;n.skipLastTimelinelabel=!1,n.skipFirstTimelinelabel=!1;var c=i.config.yaxis[0].opposite&&i.globals.isBarHorizontal;o.yaxis.forEach(function(d,g){c?(e.dCtx.gridPad.left<a&&(e.dCtx.xPadLeft=a/2+1),e.dCtx.xPadRight=a/2+1):function(d,g){o.yaxis.length>1&&-1!==n.collapsedSeriesIndices.indexOf(g)||function(u){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var f=e.dCtx.timescaleLabels[0].position-a/1.75+e.dCtx.yAxisWidthLeft;e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+a/1.75-e.dCtx.yAxisWidthRight>n.svgWidth-n.translateX-("right"===i.config.legend.position&&e.dCtx.lgRect.width>0?e.dCtx.lgRect.width:0)&&(n.skipLastTimelinelabel=!0),f<-(u.show&&!u.floating||"bar"!==o.chart.type&&"candlestick"!==o.chart.type&&"rangeBar"!==o.chart.type&&"boxPlot"!==o.chart.type?10:a/1.75)&&(n.skipFirstTimelinelabel=!0)}else"datetime"===r?e.dCtx.gridPad.right<a&&!n.rotateXLabels&&(n.skipLastTimelinelabel=!0):"datetime"!==r&&e.dCtx.gridPad.right<a/2-e.dCtx.yAxisWidthRight&&!n.rotateXLabels&&!i.config.xaxis.labels.trim&&(e.dCtx.xPadRight=a/2+1)}(d)}(d,g)})}}]),s}(),kx=function(){function s(t){N(this,s),this.w=t.w,this.dCtx=t}return B(s,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,i=[],n=10,o=new ze(this.dCtx.ctx);return e.config.yaxis.map(function(r,a){var c={seriesIndex:a,dataPointIndex:-1,w:e},h=e.globals.yAxisScale[a],d=0;if(!o.isYAxisHidden(a)&&r.labels.show&&void 0!==r.labels.minWidth&&(d=r.labels.minWidth),!o.isYAxisHidden(a)&&r.labels.show&&h.result.length){var g=e.globals.yLabelFormatters[a],p=h.result.reduce(function(w,y){var k,C;return(null===(k=String(g(w,c)))||void 0===k?void 0:k.length)>(null===(C=String(g(y,c)))||void 0===C?void 0:C.length)?w:y},h.niceMin===Number.MIN_VALUE?0:h.niceMin),m=p=g(p,c);if(void 0!==p&&0!==p.length||(p=h.niceMax),e.globals.isBarHorizontal){n=0;var f=e.globals.labels.slice();p=A.getLargestStringFromArr(f),p=g(p,{seriesIndex:a,dataPointIndex:-1,w:e}),m=t.dCtx.dimHelpers.getLargestStringFromMultiArr(p,f)}var b=new D(t.dCtx.ctx),x="rotate(".concat(r.labels.rotate," 0 0)"),v=b.getTextRects(p,r.labels.style.fontSize,r.labels.style.fontFamily,x,!1),_=v;p!==m&&(_=b.getTextRects(m,r.labels.style.fontSize,r.labels.style.fontFamily,x,!1)),i.push({width:(d>_.width||d>v.width?d:_.width>v.width?_.width:v.width)+n,height:_.height>v.height?_.height:v.height})}else i.push({width:0,height:0})}),i}},{key:"getyAxisTitleCoords",value:function(){var t=this,i=[];return this.w.config.yaxis.map(function(n,o){if(n.show&&void 0!==n.title.text){var r=new D(t.dCtx.ctx),a="rotate(".concat(n.title.rotate," 0 0)"),c=r.getTextRects(n.title.text,n.title.style.fontSize,n.title.style.fontFamily,a,!1);i.push({width:c.width,height:c.height})}else i.push({width:0,height:0})}),i}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,i=0,n=0,o=t.globals.yAxisScale.length>1?10:0,r=new ze(this.dCtx.ctx),a=function(c,h){var d=t.config.yaxis[h].floating,g=0;c.width>0&&!d?(g=c.width+o,t.globals.ignoreYAxisIndexes.indexOf(h)>-1&&(g=g-c.width-o)):g=d||r.isYAxisHidden(h)?0:5,t.config.yaxis[h].opposite?n+=g:i+=g,e+=g};return t.globals.yLabelsCoords.map(function(c,h){a(c,h)}),t.globals.yTitleCoords.map(function(c,h){a(c,h)}),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=i,this.dCtx.yAxisWidthRight=n,e}}]),s}(),Mx=function(){function s(t){N(this,s),this.w=t.w,this.dCtx=t}return B(s,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w,i=e.config,n=e.globals;if(n.noData||n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.series.length)return 0;var o=function(p){return["bar","rangeBar","candlestick","boxPlot"].includes(p)},r=i.chart.type,a=0,c=o(r)?i.series.length:1;n.comboBarCount>0&&(c=n.comboBarCount),n.collapsedSeries.forEach(function(p){o(p.type)&&(c-=1)}),i.chart.stacked&&(c=1);var h=o(r)||n.comboBarCount>0,d=Math.abs(n.initialMaxX-n.initialMinX);if(h&&n.isXNumeric&&!n.isBarHorizontal&&c>0&&0!==d){d<=3&&(d=n.dataPoints);var g=d/t,u=n.minXDiff&&n.minXDiff/g>0?n.minXDiff/g:0;u>t/2&&(u/=2),(a=u*parseInt(i.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),n.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,i=e.globals,n=this.dCtx.isSparkline||!i.axisCharts?0:10;["title","subtitle"].forEach(function(a){n+=void 0!==e.config[a].text?e.config[a].margin:t.dCtx.isSparkline||!i.axisCharts?0:5}),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||i.axisCharts||(n+=10);var o=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),r=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");i.gridHeight-=o.height+r.height+n,i.translateY+=o.height+r.height+n}},{key:"setGridXPosForDualYAxis",value:function(t,e){var i=this.w,n=new ze(this.dCtx.ctx);i.config.yaxis.forEach(function(o,r){-1!==i.globals.ignoreYAxisIndexes.indexOf(r)||o.floating||n.isYAxisHidden(r)||(o.opposite&&(i.globals.translateX-=e[r].width+t[r].width+parseInt(o.labels.style.fontSize,10)/1.2+12),i.globals.translateX<2&&(i.globals.translateX=2))})}}]),s}(),as=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new wx(this),this.dimYAxis=new kx(this),this.dimXAxis=new Cx(this),this.dimGrid=new Mx(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return B(s,[{key:"plotCoords",value:function(){var t=this,e=this.w,i=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var n=Array.isArray(e.config.stroke.width)?Math.max.apply(Math,At(e.config.stroke.width)):e.config.stroke.width;this.isSparkline&&((e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(r){var a=hc(r,2);t.gridPad[a[0]]=Math.max(a[1],t.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(n/2,this.gridPad.top),this.gridPad.bottom=Math.max(n/2,this.gridPad.bottom)),i.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),i.gridHeight=i.gridHeight-this.gridPad.top-this.gridPad.bottom,i.gridWidth=i.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var o=this.dimGrid.gridPadForColumnsInNumericAxis(i.gridWidth);i.gridWidth=i.gridWidth-2*o,i.translateX=i.translateX+this.gridPad.left+this.xPadLeft+(o>0?o:0),i.translateY=i.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,i=e.globals,n=this.dimYAxis.getyAxisLabelsCoords(),o=this.dimYAxis.getyAxisTitleCoords();i.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map(function(p,m){e.globals.yLabelsCoords.push({width:n[m].width,index:m}),e.globals.yTitleCoords.push({width:o[m].width,index:m})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var r=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisGroupLabelsCoords(),c=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(r,c,a),i.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,i.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(i.rotateXLabels=!1,i.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),i.translateXAxisY=i.translateXAxisY+e.config.xaxis.labels.offsetY,i.translateXAxisX=i.translateXAxisX+e.config.xaxis.labels.offsetX;var h=this.yAxisWidth,d=this.xAxisHeight;i.xAxisLabelsHeight=this.xAxisHeight-c.height,i.xAxisGroupLabelsHeight=i.xAxisLabelsHeight-r.height,i.xAxisLabelsWidth=this.xAxisWidth,i.xAxisHeight=this.xAxisHeight;var g=10;("radar"===e.config.chart.type||this.isSparkline)&&(h=0,d=0),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===e.config.chart.type)&&(h=0,d=0,g=0),this.isSparkline||"treemap"===e.config.chart.type||this.dimXAxis.additionalPaddingXLabels(r);var u=function(){i.translateX=h+t.datalabelsCoords.width,i.gridHeight=i.svgHeight-t.lgRect.height-d-(t.isSparkline||"treemap"===e.config.chart.type?0:e.globals.rotateXLabels?10:15),i.gridWidth=i.svgWidth-h-2*t.datalabelsCoords.width};switch("top"===e.config.xaxis.position&&(g=i.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":i.translateY=g,u();break;case"top":i.translateY=this.lgRect.height+g,u();break;case"left":i.translateY=g,i.translateX=this.lgRect.width+h+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-d-12,i.gridWidth=i.svgWidth-this.lgRect.width-h-2*this.datalabelsCoords.width;break;case"right":i.translateY=g,i.translateX=h+this.datalabelsCoords.width,i.gridHeight=i.svgHeight-d-12,i.gridWidth=i.svgWidth-this.lgRect.width-h-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(o,n),new er(this.ctx).setYAxisXPosition(n,o)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=t.config,n=0;t.config.legend.show&&!t.config.legend.floating&&(n=20);var o="pie"===i.chart.type||"polarArea"===i.chart.type||"donut"===i.chart.type?"pie":"radialBar",r=i.plotOptions[o].offsetY,a=i.plotOptions[o].offsetX;if(!i.legend.show||i.legend.floating){e.gridHeight=e.svgHeight;var c=e.dom.elWrap.getBoundingClientRect().width;return e.gridWidth=Math.min(c,e.gridHeight),e.translateY=r,void(e.translateX=a+(e.svgWidth-e.gridWidth)/2)}switch(i.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height,e.gridWidth=e.svgWidth,e.translateY=r-10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+r+10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-n,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=r,e.translateX=a+this.lgRect.width+n;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-n-5,e.gridHeight="auto"!==i.chart.height?e.svgHeight:e.gridWidth,e.translateY=r,e.translateX=a+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e,i){var n=this.w;this.xAxisHeight=(i.height+t.height+e.height)*(n.globals.isMultiLineX?1.2:n.globals.LINE_HEIGHT_RATIO)+(n.globals.hasXaxisGroups?2:1)*(n.globals.rotateXLabels?22:10)+(n.globals.rotateXLabels&&"bottom"===n.config.legend.position?10:0),this.xAxisWidth=t.width,this.xAxisHeight-e.height>n.config.xaxis.labels.maxHeight&&(this.xAxisHeight=n.config.xaxis.labels.maxHeight),n.config.xaxis.labels.minHeight&&this.xAxisHeight<n.config.xaxis.labels.minHeight&&(this.xAxisHeight=n.config.xaxis.labels.minHeight),n.config.xaxis.floating&&(this.xAxisHeight=0);var d=0,g=0;n.config.yaxis.forEach(function(u){d+=u.labels.minWidth,g+=u.labels.maxWidth}),this.yAxisWidth<d&&(this.yAxisWidth=d),this.yAxisWidth>g&&(this.yAxisWidth=g)}}]),s}(),Px=function(){function s(t){N(this,s),this.w=t.w,this.lgCtx=t}return B(s,[{key:"getLegendStyles",value:function(){var t,e,i,n=document.createElement("style");n.setAttribute("type","text/css");var o=(null===(t=this.lgCtx.ctx)||void 0===t||null===(e=t.opts)||void 0===e||null===(i=e.chart)||void 0===i?void 0:i.nonce)||this.w.config.chart.nonce;o&&n.setAttribute("nonce",o);var r=document.createTextNode(Qc);return n.appendChild(r),n}},{key:"getLegendDimensions",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect();return{clwh:t.height,clww:t.width}}},{key:"appendToForeignObject",value:function(){!1!==this.w.config.chart.injectStyleSheet&&this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(t,e){var i=this,n=this.w;if(n.globals.axisCharts||"radialBar"===n.config.chart.type){n.globals.resized=!0;var o=null,r=null;n.globals.risingSeries=[],n.globals.axisCharts?(o=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),r=parseInt(o.getAttribute("data:realIndex"),10)):(o=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),r=parseInt(o.getAttribute("rel"),10)-1),e?[{cs:n.globals.collapsedSeries,csi:n.globals.collapsedSeriesIndices},{cs:n.globals.ancillaryCollapsedSeries,csi:n.globals.ancillaryCollapsedSeriesIndices}].forEach(function(d){i.riseCollapsedSeries(d.cs,d.csi,r)}):this.hideSeries({seriesEl:o,realIndex:r})}else{var a=n.globals.dom.Paper.findOne(" .apexcharts-series[rel='".concat(t+1,"'] path")),c=n.config.chart.type;if("pie"===c||"polarArea"===c||"donut"===c){var h=n.config.plotOptions.pie.donut.labels;new D(this.lgCtx.ctx).pathMouseDown(a,null),this.lgCtx.ctx.pie.printDataLabelsInner(a.node,h)}a.fire("click")}}},{key:"getSeriesAfterCollapsing",value:function(t){var e=t.realIndex,i=this.w,n=i.globals,o=A.clone(i.config.series);if(n.axisCharts){var r=i.config.yaxis[n.seriesYAxisReverseMap[e]],a={index:e,data:o[e].data.slice(),type:o[e].type||i.config.chart.type};if(r&&r.show&&r.showAlways)n.ancillaryCollapsedSeriesIndices.indexOf(e)<0&&(n.ancillaryCollapsedSeries.push(a),n.ancillaryCollapsedSeriesIndices.push(e));else if(n.collapsedSeriesIndices.indexOf(e)<0){n.collapsedSeries.push(a),n.collapsedSeriesIndices.push(e);var c=n.risingSeries.indexOf(e);n.risingSeries.splice(c,1)}}else n.collapsedSeries.push({index:e,data:o[e]}),n.collapsedSeriesIndices.push(e);return n.allSeriesCollapsed=n.collapsedSeries.length+n.ancillaryCollapsedSeries.length===i.config.series.length,this._getSeriesBasedOnCollapsedState(o)}},{key:"hideSeries",value:function(t){for(var e=t.seriesEl,n=this.w,o=this.getSeriesAfterCollapsing({realIndex:t.realIndex}),r=e.childNodes,a=0;a<r.length;a++)r[a].classList.contains("apexcharts-series-markers-wrap")&&(r[a].classList.contains("apexcharts-hide")?r[a].classList.remove("apexcharts-hide"):r[a].classList.add("apexcharts-hide"));this.lgCtx.ctx.updateHelpers._updateSeries(o,n.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,i){var n=this.w,o=A.clone(n.config.series);if(t.length>0){for(var r=0;r<t.length;r++)t[r].index===i&&(n.globals.axisCharts?o[i].data=t[r].data.slice():o[i]=t[r].data,"number"!=typeof o[i]&&(o[i].hidden=!1),t.splice(r,1),e.splice(r,1),n.globals.risingSeries.push(i));o=this._getSeriesBasedOnCollapsedState(o),this.lgCtx.ctx.updateHelpers._updateSeries(o,n.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w,i=0;return t.forEach(e.globals.axisCharts?function(n,o){e.globals.collapsedSeriesIndices.indexOf(o)<0&&e.globals.ancillaryCollapsedSeriesIndices.indexOf(o)<0||(t[o].data=[],i++)}:function(n,o){!e.globals.collapsedSeriesIndices.indexOf(o)<0&&(t[o]=0,i++)}),e.globals.allSeriesCollapsed=i===t.length,t}}]),s}(),ih=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new Px(this)}return B(s,[{key:"init",value:function(){var t=this.w,e=t.globals,i=t.config,n=i.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1;if(this.legendHelpers.appendToForeignObject(),(n||!e.axisCharts)&&i.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),"bottom"===i.legend.position||"top"===i.legend.position?this.legendAlignHorizontal():"right"!==i.legend.position&&"left"!==i.legend.position||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(t){var e=t.i,i=t.fillcolor,n=this.w,o=document.createElement("span");o.classList.add("apexcharts-legend-marker");var r=n.config.legend.markers.shape||n.config.markers.shape,a=r;Array.isArray(r)&&(a=r[e]);var c=Array.isArray(n.config.legend.markers.size)?parseFloat(n.config.legend.markers.size[e]):parseFloat(n.config.legend.markers.size),h=Array.isArray(n.config.legend.markers.offsetX)?parseFloat(n.config.legend.markers.offsetX[e]):parseFloat(n.config.legend.markers.offsetX),d=Array.isArray(n.config.legend.markers.offsetY)?parseFloat(n.config.legend.markers.offsetY[e]):parseFloat(n.config.legend.markers.offsetY),g=Array.isArray(n.config.legend.markers.strokeWidth)?parseFloat(n.config.legend.markers.strokeWidth[e]):parseFloat(n.config.legend.markers.strokeWidth),u=o.style;if(u.height=2*(c+g)+"px",u.width=2*(c+g)+"px",u.left=h+"px",u.top=d+"px",n.config.legend.markers.customHTML)u.background="transparent",u.color=i[e],Array.isArray(n.config.legend.markers.customHTML)?n.config.legend.markers.customHTML[e]&&(o.innerHTML=n.config.legend.markers.customHTML[e]()):o.innerHTML=n.config.legend.markers.customHTML();else{var p=new Mi(this.ctx).getMarkerConfig({cssClass:"apexcharts-legend-marker apexcharts-marker apexcharts-marker-".concat(a),seriesIndex:e,strokeWidth:g,size:c}),m=window.SVG().addTo(o).size("100%","100%"),f=new D(this.ctx).drawMarker(0,0,z(z({},p),{},{pointFillColor:Array.isArray(i)?i[e]:p.pointFillColor,shape:a}));n.globals.dom.Paper.find(".apexcharts-legend-marker.apexcharts-marker").forEach(function(b){b.node.style.transform=b.node.classList.contains("apexcharts-marker-triangle")?"translate(50%, 45%)":"translate(50%, 50%)"}),m.add(f)}return o}},{key:"drawLegends",value:function(){var t=this,e=this,i=this.w,n=i.config.legend.fontFamily,o=i.globals.seriesNames,r=i.config.legend.markers.fillColors?i.config.legend.markers.fillColors.slice():i.globals.colors.slice();if("heatmap"===i.config.chart.type){var a=i.config.plotOptions.heatmap.colorScale.ranges;o=a.map(function(p){return p.name?p.name:p.from+" - "+p.to}),r=a.map(function(p){return p.color})}else this.isBarsDistributed&&(o=i.globals.labels.slice());i.config.legend.customLegendItems.length&&(o=i.config.legend.customLegendItems);var c=i.globals.legendFormatter,h=i.config.legend.inverseOrder,d=[];i.globals.seriesGroups.length>1&&i.config.legend.clusterGroupedSeries&&i.globals.seriesGroups.forEach(function(p,m){d[m]=document.createElement("div"),d[m].classList.add("apexcharts-legend-group","apexcharts-legend-group-".concat(m)),"horizontal"===i.config.legend.clusterGroupedSeriesOrientation?i.globals.dom.elLegendWrap.classList.add("apexcharts-legend-group-horizontal"):d[m].classList.add("apexcharts-legend-group-vertical")});for(var g=function(p){var m,f=c(o[p],{seriesIndex:p,w:i}),b=!1,x=!1;if(i.globals.collapsedSeries.length>0)for(var v=0;v<i.globals.collapsedSeries.length;v++)i.globals.collapsedSeries[v].index===p&&(b=!0);if(i.globals.ancillaryCollapsedSeriesIndices.length>0)for(var _=0;_<i.globals.ancillaryCollapsedSeriesIndices.length;_++)i.globals.ancillaryCollapsedSeriesIndices[_]===p&&(x=!0);var w=t.createLegendMarker({i:p,fillcolor:r});D.setAttrs(w,{rel:p+1,"data:collapsed":b||x}),(b||x)&&w.classList.add("apexcharts-inactive-legend");var y=document.createElement("div"),k=document.createElement("span");k.classList.add("apexcharts-legend-text"),k.innerHTML=Array.isArray(f)?f.join(" "):f;var C=i.config.legend.labels.useSeriesColors?i.globals.colors[p]:Array.isArray(i.config.legend.labels.colors)?null===(m=i.config.legend.labels.colors)||void 0===m?void 0:m[p]:i.config.legend.labels.colors;C||(C=i.config.chart.foreColor),k.style.color=C,k.style.fontSize=parseFloat(i.config.legend.fontSize)+"px",k.style.fontWeight=i.config.legend.fontWeight,k.style.fontFamily=n||i.config.chart.fontFamily,D.setAttrs(k,{rel:p+1,i:p,"data:default-text":encodeURIComponent(f),"data:collapsed":b||x}),y.appendChild(w),y.appendChild(k);var M=new kt(t.ctx);i.config.legend.showForZeroSeries||0===M.getSeriesTotalByIndex(p)&&M.seriesHaveSameValues(p)&&!M.isSeriesNull(p)&&-1===i.globals.collapsedSeriesIndices.indexOf(p)&&-1===i.globals.ancillaryCollapsedSeriesIndices.indexOf(p)&&y.classList.add("apexcharts-hidden-zero-series"),i.config.legend.showForNullSeries||M.isSeriesNull(p)&&-1===i.globals.collapsedSeriesIndices.indexOf(p)&&-1===i.globals.ancillaryCollapsedSeriesIndices.indexOf(p)&&y.classList.add("apexcharts-hidden-null-series"),d.length?i.globals.seriesGroups.forEach(function(P,O){var S;P.includes(null===(S=i.config.series[p])||void 0===S?void 0:S.name)&&(i.globals.dom.elLegendWrap.appendChild(d[O]),d[O].appendChild(y))}):i.globals.dom.elLegendWrap.appendChild(y),i.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(i.config.legend.horizontalAlign)),i.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+i.config.legend.position),y.classList.add("apexcharts-legend-series"),y.style.margin="".concat(i.config.legend.itemMargin.vertical,"px ").concat(i.config.legend.itemMargin.horizontal,"px"),i.globals.dom.elLegendWrap.style.width=i.config.legend.width?i.config.legend.width+"px":"",i.globals.dom.elLegendWrap.style.height=i.config.legend.height?i.config.legend.height+"px":"",D.setAttrs(y,{rel:p+1,seriesName:A.escapeString(o[p]),"data:collapsed":b||x}),(b||x)&&y.classList.add("apexcharts-inactive-legend"),i.config.legend.onItemClick.toggleDataSeries||y.classList.add("apexcharts-no-click")},u=h?o.length-1:0;h?u>=0:u<=o.length-1;h?u--:u++)g(u);i.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),i.config.legend.onItemHover.highlightDataSeries&&0===i.config.legend.customLegendItems.length&&(i.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),i.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var i=this.w,n=i.globals.dom.elLegendWrap,r=0,a=0;if("bottom"===i.config.legend.position)a=i.globals.svgHeight-Math.min(n.clientHeight,i.globals.svgHeight/2)-5;else if("top"===i.config.legend.position){var c=new as(this.ctx),h=c.dimHelpers.getTitleSubtitleCoords("title").height,d=c.dimHelpers.getTitleSubtitleCoords("subtitle").height;a=(h>0?h-10:0)+(d>0?d-10:0)}n.style.position="absolute",a=a+e+i.config.legend.offsetY,n.style.left=(r=r+t+i.config.legend.offsetX)+"px",n.style.top=a+"px","right"===i.config.legend.position&&(n.style.left="auto",n.style.right=25+i.config.legend.offsetX+"px"),["width","height"].forEach(function(g){n.style[g]&&(n.style[g]=parseInt(i.config.legend[g],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.elLegendWrap.style.right=0;var e=new as(this.ctx),i=e.dimHelpers.getTitleSubtitleCoords("title"),n=e.dimHelpers.getTitleSubtitleCoords("subtitle"),o=0;"top"===t.config.legend.position&&(o=i.height+n.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,o)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendDimensions(),i=0;"left"===t.config.legend.position&&(i=20),"right"===t.config.legend.position&&(i=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(i,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,i=t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(i){var n=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,n,this.w]),new ee(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&i&&new ee(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(!e.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var i=parseInt(t.target.getAttribute("rel"),10)-1,n="true"===t.target.getAttribute("data:collapsed"),o=this.w.config.chart.events.legendClick;"function"==typeof o&&o(this.ctx,i,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,i,this.w]);var r=this.w.config.legend.markers.onClick;"function"==typeof r&&t.target.classList.contains("apexcharts-legend-marker")&&(r(this.ctx,i,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,i,this.w])),"treemap"!==e.config.chart.type&&"heatmap"!==e.config.chart.type&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(i,n)}}}]),s}(),nh=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w;var e=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=e.globals.minX,this.maxX=e.globals.maxX}return B(s,[{key:"createToolbar",value:function(){var t=this,e=this.w,i=function(){return document.createElement("div")},n=i();if(n.setAttribute("class","apexcharts-toolbar"),n.style.top=e.config.chart.toolbar.offsetY+"px",n.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(n),this.elZoom=i(),this.elZoomIn=i(),this.elZoomOut=i(),this.elPan=i(),this.elSelection=i(),this.elZoomReset=i(),this.elMenuIcon=i(),this.elMenu=i(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var o=0;o<this.t.customIcons.length;o++)this.elCustomIcons.push(i());var r=[],a=function(g,u,p){var m=g.toLowerCase();t.t[m]&&e.config.chart.zoom.enabled&&r.push({el:u,icon:"string"==typeof t.t[m]?t.t[m]:p,title:t.localeValues[g],class:"apexcharts-".concat(m,"-icon")})};a("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),a("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var c=function(g){t.t[g]&&e.config.chart[g].enabled&&r.push({el:"zoom"===g?t.elZoom:t.elSelection,icon:"string"==typeof t.t[g]?t.t[g]:"zoom"===g?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===g?"selectionZoom":"selection"],class:"apexcharts-".concat(g,"-icon")})};c("zoom"),c("selection"),this.t.pan&&e.config.chart.zoom.enabled&&r.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:"apexcharts-pan-icon"}),a("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&r.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var h=0;h<this.elCustomIcons.length;h++)r.push({el:this.elCustomIcons[h],icon:this.t.customIcons[h].icon,title:this.t.customIcons[h].title,index:this.t.customIcons[h].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[h].class});r.forEach(function(g,u){g.index&&A.moveIndexInArray(r,u,g.index)});for(var d=0;d<r.length;d++)D.setAttrs(r[d].el,{class:r[d].class,title:r[d].title}),r[d].el.innerHTML=r[d].icon,n.appendChild(r[d].el);this._createHamburgerMenu(n),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),D.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],i=0;i<e.length;i++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[i].innerHTML=e[i].title,D.setAttrs(this.elMenuItems[i],{class:"apexcharts-menu-item ".concat(e[i].name),title:e[i].title}),this.elMenu.appendChild(this.elMenuItems[i])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(i){i.classList.contains("exportSVG")?i.addEventListener("click",t.handleDownload.bind(t,"svg")):i.classList.contains("exportPNG")?i.addEventListener("click",t.handleDownload.bind(t,"png")):i.classList.contains("exportCSV")&&i.addEventListener("click",t.handleDownload.bind(t,"csv"))});for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach(function(e){e.ctx.toolbar.toggleOtherControls();var i="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,n="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[n]=!e.w.globals[n],i.classList.contains(e.ctx.toolbar.selectedClass)?i.classList.remove(e.ctx.toolbar.selectedClass):i.classList.add(e.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,i="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),i&&i.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(i){i&&i.classList.remove(t.selectedClass)})}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,o=this._getNewMinXMaxX((this.minX+e)/2,(this.maxX+e)/2);t.globals.disableZoomIn||this.zoomUpdateOptions(o.minX,o.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,o=this._getNewMinXMaxX(this.minX-(e-this.minX),this.maxX-(e-this.maxX));t.globals.disableZoomOut||this.zoomUpdateOptions(o.minX,o.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var i=this.w.config.xaxis.convertedCatToNumeric;return{minX:i?Math.floor(t):t,maxX:i?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var i=this.w;if(void 0!==t||void 0!==e){if(!(i.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=i.globals.dataPoints),e-t<2))){var n={min:t,max:e},o=this.getBeforeZoomRange(n);o&&(n=o.xaxis);var r={xaxis:n},a=A.clone(i.globals.initialConfig.yaxis);i.config.chart.group||(r.yaxis=a),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(r,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(n,a)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&(this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e}),this.ctx.events.fireEvent("zoomed",{xaxis:t,yaxis:e}))}},{key:"getBeforeZoomRange",value:function(t,e){var i=null;return"function"==typeof this.ev.beforeZoom&&(i=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),i}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout(function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(t){var e=this.w,i=new hn(this.ctx);switch(t){case"svg":i.exportToSVG(this.ctx);break;case"png":i.exportToPng(this.ctx);break;case"csv":i.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach(function(e){var i=e.w;if(i.globals.lastXAxis.min=i.globals.initialConfig.xaxis.min,i.globals.lastXAxis.max=i.globals.initialConfig.xaxis.max,e.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof i.config.chart.events.beforeResetZoom){var n=i.config.chart.events.beforeResetZoom(e,i);n&&e.updateHelpers.revertDefaultAxisMinMax(n)}"function"==typeof i.config.chart.events.zoomed&&e.ctx.toolbar.zoomCallback({min:i.config.xaxis.min,max:i.config.xaxis.max}),i.globals.zoomed=!1;var o=e.ctx.series.emptyCollapsedSeries(A.clone(i.globals.initialSeries));e.updateHelpers._updateSeries(o,i.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),s}(),Ox=function(s){Ji(e,nh);var t=Ki(e);function e(i){var n;return N(this,e),(n=t.call(this,i)).ctx=i,n.w=i.w,n.dragged=!1,n.graphics=new D(n.ctx),n.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend","wheel"],n.clientX=0,n.clientY=0,n.startX=0,n.endX=0,n.dragX=0,n.startY=0,n.endY=0,n.dragY=0,n.moveDirection="none",n.debounceTimer=null,n.debounceDelay=100,n.wheelDelay=400,n}return B(e,[{key:"init",value:function(i){var n=this,o=i.xyRatios,r=this.w,a=this;this.xyRatios=o,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=r.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.constraints=new Ct(0,0,r.globals.gridWidth,r.globals.gridHeight),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),r.globals.dom.Paper.add(this.zoomRect),r.globals.dom.Paper.add(this.selectionRect),this.slDraggableRect="x"===r.config.chart.selection.type?this.selectionRect.draggable({minX:0,minY:0,maxX:r.globals.gridWidth,maxY:r.globals.gridHeight}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):"y"===r.config.chart.selection.type?this.selectionRect.draggable({minX:0,maxX:r.globals.gridWidth}).on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")):this.selectionRect.draggable().on("dragmove.namespace",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=r.globals.dom.baseEl.querySelector("".concat(r.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(c){n.hoverArea.addEventListener(c,a.svgMouseEvents.bind(a,o),{capture:!1,passive:!0})}),r.config.chart.zoom.enabled&&r.config.chart.zoom.allowMouseWheelZoom&&this.hoverArea.addEventListener("wheel",a.mouseWheelEvent.bind(a),{capture:!1,passive:!1})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(i,n){var o=this.w,r=this.ctx.toolbar,a=o.globals.zoomEnabled?o.config.chart.zoom.type:o.config.chart.selection.type,c=o.config.chart.toolbar.autoSelected;if(n.shiftKey?(this.shiftWasPressed=!0,r.enableZoomPanFromToolbar("pan"===c?"zoom":"pan")):this.shiftWasPressed&&(r.enableZoomPanFromToolbar(c),this.shiftWasPressed=!1),n.target){var h,d=n.target.classList;if(n.target.parentNode&&null!==n.target.parentNode&&(h=n.target.parentNode.classList),!(d.contains("apexcharts-legend-marker")||d.contains("apexcharts-legend-text")||h&&h.contains("apexcharts-toolbar"))){if(this.clientX="touchmove"===n.type||"touchstart"===n.type?n.touches[0].clientX:"touchend"===n.type?n.changedTouches[0].clientX:n.clientX,this.clientY="touchmove"===n.type||"touchstart"===n.type?n.touches[0].clientY:"touchend"===n.type?n.changedTouches[0].clientY:n.clientY,"mousedown"===n.type&&1===n.which||"touchstart"===n.type){var g=this.gridRect.getBoundingClientRect();this.startX=this.clientX-g.left-o.globals.barPadForNumericAxis,this.startY=this.clientY-g.top,this.dragged=!1,this.w.globals.mousedown=!0}("mousemove"===n.type&&1===n.which||"touchmove"===n.type)&&(this.dragged=!0,o.globals.panEnabled?(o.globals.selection=null,this.w.globals.mousedown&&this.panDragging({context:this,zoomtype:a,xyRatios:i})):(this.w.globals.mousedown&&o.globals.zoomEnabled||this.w.globals.mousedown&&o.globals.selectionEnabled)&&(this.selection=this.selectionDrawing({context:this,zoomtype:a}))),"mouseup"!==n.type&&"touchend"!==n.type&&"mouseleave"!==n.type||this.handleMouseUp({zoomtype:a}),this.makeSelectionRectDraggable()}}}},{key:"handleMouseUp",value:function(i){var n,o=i.zoomtype,r=i.isResized,a=this.w,c=null===(n=this.gridRect)||void 0===n?void 0:n.getBoundingClientRect();c&&(this.w.globals.mousedown||r)&&(this.endX=this.clientX-c.left-a.globals.barPadForNumericAxis,this.endY=this.clientY-c.top,this.dragX=Math.abs(this.endX-this.startX),this.dragY=Math.abs(this.endY-this.startY),(a.globals.zoomEnabled||a.globals.selectionEnabled)&&this.selectionDrawn({context:this,zoomtype:o})),a.globals.zoomEnabled&&this.hideSelectionRect(this.selectionRect),this.dragged=!1,this.w.globals.mousedown=!1}},{key:"mouseWheelEvent",value:function(i){var n=this,o=this.w;i.preventDefault();var r=Date.now();r-o.globals.lastWheelExecution>this.wheelDelay&&(this.executeMouseWheelZoom(i),o.globals.lastWheelExecution=r),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){r-o.globals.lastWheelExecution>n.wheelDelay&&(n.executeMouseWheelZoom(i),o.globals.lastWheelExecution=r)},this.debounceDelay)}},{key:"executeMouseWheelZoom",value:function(i){var n,o=this.w;this.minX=o.globals.isRangeBar?o.globals.minY:o.globals.minX,this.maxX=o.globals.isRangeBar?o.globals.maxY:o.globals.maxX;var r=null===(n=this.gridRect)||void 0===n?void 0:n.getBoundingClientRect();if(r){var a,c,h,g=this.minX,u=this.maxX,p=u-g;if(i.deltaY<0){var m=g+(i.clientX-r.left)/r.width*p;c=m-(a=.5*p)/2,h=m+a/2}else c=g-(a=1.5*p)/2,h=u+a/2;if(!o.globals.isRangeBar){c=Math.max(c,o.globals.initialMinX),h=Math.min(h,o.globals.initialMaxX);var f=.01*(o.globals.initialMaxX-o.globals.initialMinX);if(h-c<f){var b=(c+h)/2;c=b-f/2,h=b+f/2}}var x=this._getNewMinXMaxX(c,h);isNaN(x.minX)||isNaN(x.maxX)||this.zoomUpdateOptions(x.minX,x.maxX)}}},{key:"makeSelectionRectDraggable",value:function(){var i=this,n=this.w;if(this.selectionRect){var o=this.selectionRect.node.getBoundingClientRect();o.width>0&&o.height>0&&(this.selectionRect.select(!1).resize(!1),this.selectionRect.select({createRot:function(){},updateRot:function(){},createHandle:function(r,a,c,h,d){return"l"===d||"r"===d?r.circle(8).css({"stroke-width":1,stroke:"#333",fill:"#fff"}):r.circle(0)},updateHandle:function(r,a){return r.center(a[0],a[1])}}).resize().on("resize",function(){i.handleMouseUp({zoomtype:n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,isResized:!0})}))}}},{key:"preselectedSelection",value:function(){var i=this.w,n=this.xyRatios;if(!i.globals.zoomEnabled)if(null!=i.globals.selection)this.drawSelectionRect(z(z({},i.globals.selection),{},{translateX:i.globals.translateX,translateY:i.globals.translateY}));else if(void 0!==i.config.chart.selection.xaxis.min&&void 0!==i.config.chart.selection.xaxis.max){var o=(i.config.chart.selection.xaxis.min-i.globals.minX)/n.xRatio,r=i.globals.gridWidth-(i.globals.maxX-i.config.chart.selection.xaxis.max)/n.xRatio-o;i.globals.isRangeBar&&(o=(i.config.chart.selection.xaxis.min-i.globals.yAxisScale[0].niceMin)/n.invertedYRatio,r=(i.config.chart.selection.xaxis.max-i.config.chart.selection.xaxis.min)/n.invertedYRatio),this.drawSelectionRect({x:o,y:0,width:r,height:i.globals.gridHeight,translateX:i.globals.translateX,translateY:i.globals.translateY,selectionEnabled:!0}),this.makeSelectionRectDraggable(),"function"==typeof i.config.chart.events.selection&&i.config.chart.events.selection(this.ctx,{xaxis:{min:i.config.chart.selection.xaxis.min,max:i.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(i){var n=i.x,o=i.y,r=i.width,a=i.height,c=i.translateX,d=i.translateY,u=this.w,p=this.zoomRect,m=this.selectionRect;if(this.dragged||null!==u.globals.selection){var f={transform:"translate("+(void 0===c?0:c)+", "+(void 0===d?0:d)+")"};u.globals.zoomEnabled&&this.dragged&&(r<0&&(r=1),p.attr({x:n,y:o,width:r,height:a,fill:u.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":u.config.chart.zoom.zoomedArea.fill.opacity,stroke:u.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":u.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":u.config.chart.zoom.zoomedArea.stroke.opacity}),D.setAttrs(p.node,f)),u.globals.selectionEnabled&&(m.attr({x:n,y:o,width:r>0?r:0,height:a>0?a:0,fill:u.config.chart.selection.fill.color,"fill-opacity":u.config.chart.selection.fill.opacity,stroke:u.config.chart.selection.stroke.color,"stroke-width":u.config.chart.selection.stroke.width,"stroke-dasharray":u.config.chart.selection.stroke.dashArray,"stroke-opacity":u.config.chart.selection.stroke.opacity}),D.setAttrs(m.node,f))}}},{key:"hideSelectionRect",value:function(i){i&&i.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(i){var o=i.zoomtype,r=this.w,a=i.context,c=this.gridRect.getBoundingClientRect(),h=a.startX-1,d=a.startY,g=!1,u=!1,p=a.clientX-c.left-r.globals.barPadForNumericAxis,m=a.clientY-c.top,f=p-h,b=m-d,x={translateX:r.globals.translateX,translateY:r.globals.translateY};return Math.abs(f+h)>r.globals.gridWidth?f=r.globals.gridWidth-h:p<0&&(f=h),h>p&&(g=!0,f=Math.abs(f)),d>m&&(u=!0,b=Math.abs(b)),x=z(z({},x="x"===o?{x:g?h-f:h,y:0,width:f,height:r.globals.gridHeight}:"y"===o?{x:0,y:u?d-b:d,width:r.globals.gridWidth,height:b}:{x:g?h-f:h,y:u?d-b:d,width:f,height:b}),{},{translateX:r.globals.translateX,translateY:r.globals.translateY}),a.drawSelectionRect(x),a.selectionDragging("resizing"),x}},{key:"selectionDragging",value:function(i,n){var o=this,r=this.w;if(n){n.preventDefault();var a=n.detail,h=a.box,d=h.x,g=h.y;d<this.constraints.x&&(d=this.constraints.x),g<this.constraints.y&&(g=this.constraints.y),h.x2>this.constraints.x2&&(d=this.constraints.x2-h.w),h.y2>this.constraints.y2&&(g=this.constraints.y2-h.h),a.handler.move(d,g);var u=this.xyRatios,p=this.selectionRect,m=0;"resizing"===i&&(m=30);var f=function(x){return parseFloat(p.node.getAttribute(x))},b={x:f("x"),y:f("y"),width:f("width"),height:f("height")};r.globals.selection=b,"function"==typeof r.config.chart.events.selection&&r.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var x,v,_,w,y=o.gridRect.getBoundingClientRect(),k=p.node.getBoundingClientRect();r.globals.isRangeBar?(x=r.globals.yAxisScale[0].niceMin+(k.left-y.left)*u.invertedYRatio,v=r.globals.yAxisScale[0].niceMin+(k.right-y.left)*u.invertedYRatio,_=0,w=1):(x=r.globals.xAxisScale.niceMin+(k.left-y.left)*u.xRatio,v=r.globals.xAxisScale.niceMin+(k.right-y.left)*u.xRatio,_=r.globals.yAxisScale[0].niceMin+(y.bottom-k.bottom)*u.yRatio[0],w=r.globals.yAxisScale[0].niceMax-(k.top-y.top)*u.yRatio[0]);var C={xaxis:{min:x,max:v},yaxis:{min:_,max:w}};r.config.chart.events.selection(o.ctx,C),r.config.chart.brush.enabled&&void 0!==r.config.chart.events.brushScrolled&&r.config.chart.events.brushScrolled(o.ctx,C)},m))}}},{key:"selectionDrawn",value:function(i){var n,o,a=i.zoomtype,c=this.w,h=i.context,d=this.xyRatios,g=this.ctx.toolbar,u=c.globals.zoomEnabled?h.zoomRect.node.getBoundingClientRect():h.selectionRect.node.getBoundingClientRect(),p=h.gridRect.getBoundingClientRect(),m=u.left-p.left-c.globals.barPadForNumericAxis,f=u.right-p.left-c.globals.barPadForNumericAxis,b=u.top-p.top,x=u.bottom-p.top;c.globals.isRangeBar?(n=c.globals.yAxisScale[0].niceMin+m*d.invertedYRatio,o=c.globals.yAxisScale[0].niceMin+f*d.invertedYRatio):(n=c.globals.xAxisScale.niceMin+m*d.xRatio,o=c.globals.xAxisScale.niceMin+f*d.xRatio);var v=[],_=[];if(c.config.yaxis.forEach(function(O,S){var E=c.globals.seriesYAxisMap[S][0],R=c.globals.yAxisScale[S].niceMax-d.yRatio[E]*x;v.push(c.globals.yAxisScale[S].niceMax-d.yRatio[E]*b),_.push(R)}),h.dragged&&(h.dragX>10||h.dragY>10)&&n!==o)if(c.globals.zoomEnabled){var w=A.clone(c.globals.initialConfig.yaxis),y=A.clone(c.globals.initialConfig.xaxis);if(c.globals.zoomed=!0,c.config.xaxis.convertedCatToNumeric&&(n=Math.floor(n),o=Math.floor(o),n<1&&(n=1,o=c.globals.dataPoints),o-n<2&&(o=n+1)),"xy"!==a&&"x"!==a||(y={min:n,max:o}),"xy"!==a&&"y"!==a||w.forEach(function(O,S){w[S].min=_[S],w[S].max=v[S]}),g){var k=g.getBeforeZoomRange(y,w);k&&(y=k.xaxis?k.xaxis:y,w=k.yaxis?k.yaxis:w)}var C={xaxis:y};c.config.chart.group||(C.yaxis=w),h.ctx.updateHelpers._updateOptions(C,!1,h.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof c.config.chart.events.zoomed&&g.zoomCallback(y,w)}else if(c.globals.selectionEnabled){var M,P=null;M={min:n,max:o},"xy"!==a&&"y"!==a||(P=A.clone(c.config.yaxis)).forEach(function(O,S){P[S].min=_[S],P[S].max=v[S]}),c.globals.selection=h.selection,"function"==typeof c.config.chart.events.selection&&c.config.chart.events.selection(h.ctx,{xaxis:M,yaxis:P})}}},{key:"panDragging",value:function(i){var o=this.w,r=i.context;if(void 0!==o.globals.lastClientPosition.x){var a=o.globals.lastClientPosition.x-r.clientX,c=o.globals.lastClientPosition.y-r.clientY;Math.abs(a)>Math.abs(c)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(c)&&a<0?this.moveDirection="right":Math.abs(c)>Math.abs(a)&&c>0?this.moveDirection="up":Math.abs(c)>Math.abs(a)&&c<0&&(this.moveDirection="down")}o.globals.lastClientPosition={x:r.clientX,y:r.clientY},r.panScrolled(o.globals.isRangeBar?o.globals.minY:o.globals.minX,o.globals.isRangeBar?o.globals.maxY:o.globals.maxX)}},{key:"panScrolled",value:function(i,n){var o=this.w,r=this.xyRatios,a=A.clone(o.globals.initialConfig.yaxis),c=r.xRatio,h=o.globals.minX,d=o.globals.maxX;o.globals.isRangeBar&&(c=r.invertedYRatio,h=o.globals.minY,d=o.globals.maxY),"left"===this.moveDirection?(i=h+o.globals.gridWidth/15*c,n=d+o.globals.gridWidth/15*c):"right"===this.moveDirection&&(i=h-o.globals.gridWidth/15*c,n=d-o.globals.gridWidth/15*c),o.globals.isRangeBar||(i<o.globals.initialMinX||n>o.globals.initialMaxX)&&(i=h,n=d);var g={xaxis:{min:i,max:n}};o.config.chart.group||(g.yaxis=a),this.updateScrolledChart(g,i,n)}},{key:"updateScrolledChart",value:function(i,n,o){var r=this.w;if(this.ctx.updateHelpers._updateOptions(i,!1,!1),"function"==typeof r.config.chart.events.scrolled){var a={xaxis:{min:n,max:o}};r.config.chart.events.scrolled(this.ctx,a),this.ctx.events.fireEvent("scrolled",a)}}}]),e}(),sh=function(){function s(t){N(this,s),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return B(s,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,n=t.clientX,o=t.clientY,r=this.w,a=t.elGrid.getBoundingClientRect(),c=a.width,h=a.height,d=c/(r.globals.dataPoints-1),g=h/r.globals.dataPoints,u=this.hasBars();!r.globals.comboCharts&&!u||r.config.xaxis.convertedCatToNumeric||(d=c/r.globals.dataPoints);var p=n-a.left-r.globals.barPadForNumericAxis,m=o-a.top;p<0||m<0||p>c||m>h?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):r.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):r.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var f=Math.round(p/d),b=Math.floor(m/g);u&&!r.config.xaxis.convertedCatToNumeric&&(f=Math.ceil(p/d),f-=1);var x=null,v=null,_=r.globals.seriesXvalues.map(function(M){return M.filter(function(P){return A.isNumber(P)})}),w=r.globals.seriesYvalues.map(function(M){return M.filter(function(P){return A.isNumber(P)})});if(r.globals.isXNumeric){var y=this.ttCtx.getElGrid().getBoundingClientRect(),k=p*(y.width/c);x=(v=this.closestInMultiArray(k,m*(y.height/h),_,w)).index,f=v.j,null!==x&&r.globals.hasNullValues&&(f=(v=this.closestInArray(k,_=r.globals.seriesXvalues[x])).j)}return r.globals.capturedSeriesIndex=null===x?-1:x,(!f||f<1)&&(f=0),r.globals.capturedDataPointIndex=r.globals.isBarHorizontal?b:f,{capturedSeries:x,j:r.globals.isBarHorizontal?b:f,hoverX:p,hoverY:m}}},{key:"getFirstActiveXArray",value:function(t){for(var e=this.w,i=0,n=t.map(function(r,a){return r.length>0?a:-1}),o=0;o<n.length;o++)if(-1!==n[o]&&-1===e.globals.collapsedSeriesIndices.indexOf(o)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(o)){i=n[o];break}return i}},{key:"closestInMultiArray",value:function(t,e,i,n){for(var o,r=this.w,a=1/0,c=null,h=null,d=0;d<i.length;d++)if(-1===r.globals.collapsedSeriesIndices.indexOf(o=d)&&-1===r.globals.ancillaryCollapsedSeriesIndices.indexOf(o))for(var g=i[d],u=n[d],p=Math.min(g.length,u.length),m=0;m<p;m++){var f=t-g[m],b=Math.sqrt(f*f);if(!r.globals.allSeriesHasEqualX){var x=e-u[m];b=Math.sqrt(f*f+x*x)}b<a&&(a=b,c=d,h=m)}return{index:c,j:h}}},{key:"closestInArray",value:function(t,e){for(var n=null,o=Math.abs(t-e[0]),r=0;r<e.length;r++){var a=Math.abs(t-e[r]);a<o&&(o=a,n=r)}return{j:n}}},{key:"isXoverlap",value:function(t){var e=[],i=this.w.globals.seriesX.filter(function(o){return void 0!==o[0]});if(i.length>0)for(var n=0;n<i.length-1;n++)void 0!==i[n][t]&&void 0!==i[n+1][t]&&i[n][t]!==i[n+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,i=0;i<e.length-1;i++)if(e[i].data.length!==e[i+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return At(t).reduce(function(e,i){return e+i.getBBox().height},0)}},{key:"getElMarkers",value:function(t){return this.w.globals.dom.baseEl.querySelectorAll("number"==typeof t?".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers-wrap > *"):".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");i=At(i),e&&(i=i.filter(function(o){var r=Number(o.getAttribute("data:realIndex"));return-1===t.w.globals.collapsedSeriesIndices.indexOf(r)})),i.sort(function(o,r){var a=Number(o.getAttribute("data:realIndex")),c=Number(r.getAttribute("data:realIndex"));return c<a?1:c>a?-1:0});var n=[];return i.forEach(function(o){n.push(o.querySelector(".apexcharts-marker"))}),n}},{key:"hasMarkers",value:function(t){return this.getElMarkers(t).length>0}},{key:"getPathFromPoint",value:function(t,e){var i=Number(t.getAttribute("cx")),n=Number(t.getAttribute("cy")),o=t.getAttribute("shape");return new D(this.ctx).getMarkerPath(i,n,o,e)}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,i=e.config.markers.hover.size;return void 0===i&&(i=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),i}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,i=this.ttCtx;0===i.allTooltipSeriesGroups.length&&(i.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var n=i.allTooltipSeriesGroups,o=0;o<n.length;o++)"enable"===t?(n[o].classList.add("apexcharts-active"),n[o].style.display=e.config.tooltip.items.display):(n[o].classList.remove("apexcharts-active"),n[o].style.display="none")}}]),s}(),Sx=function(){function s(t){N(this,s),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new sh(t)}return B(s,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,i=void 0===e||e,n=t.ttItems,o=t.i,r=void 0===o?0:o,a=t.j,c=void 0===a?null:a,g=t.e,u=this.w;void 0!==u.config.tooltip.custom?this.handleCustomTooltip({i:r,j:c,y1:t.y1,y2:t.y2,w:u}):this.toggleActiveInactiveSeries(i,r);var p=this.getValuesToPrint({i:r,j:c});this.printLabels({i:r,j:c,values:p,ttItems:n,shared:i,e:g});var m=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=m.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=m.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var e,i=this,n=t.i,o=t.j,r=t.values,a=t.ttItems,c=t.shared,h=t.e,d=this.w,g=[],u=function(y){return d.globals.seriesGoals[y]&&d.globals.seriesGoals[y][o]&&Array.isArray(d.globals.seriesGoals[y][o])},p=r.xVal,m=r.zVal,f=r.xAxisTTVal,b="",x=d.globals.colors[n];null!==o&&d.config.plotOptions.bar.distributed&&(x=d.globals.colors[o]);for(var v=function(y,k){var C=i.getFormatters(n);b=i.getSeriesName({fn:C.yLbTitleFormatter,index:n,seriesIndex:n,j:o}),"treemap"===d.config.chart.type&&(b=C.yLbTitleFormatter(String(d.config.series[n].data[o].x),{series:d.globals.series,seriesIndex:n,dataPointIndex:o,w:d}));var M=d.config.tooltip.inverseOrder?k:y;if(d.globals.axisCharts){var P=function(E){var I,R,T,L;return d.globals.isRangeData?C.yLbFormatter(null===(I=d.globals.seriesRangeStart)||void 0===I||null===(R=I[E])||void 0===R?void 0:R[o],{series:d.globals.seriesRangeStart,seriesIndex:E,dataPointIndex:o,w:d})+" - "+C.yLbFormatter(null===(T=d.globals.seriesRangeEnd)||void 0===T||null===(L=T[E])||void 0===L?void 0:L[o],{series:d.globals.seriesRangeEnd,seriesIndex:E,dataPointIndex:o,w:d}):C.yLbFormatter(d.globals.series[E][o],{series:d.globals.series,seriesIndex:E,dataPointIndex:o,w:d})};if(c)C=i.getFormatters(M),b=i.getSeriesName({fn:C.yLbTitleFormatter,index:M,seriesIndex:n,j:o}),x=d.globals.colors[M],e=P(M),u(M)&&(g=d.globals.seriesGoals[M][o].map(function(E){return{attrs:E,val:C.yLbFormatter(E.value,{seriesIndex:M,dataPointIndex:o,w:d})}}));else{var O,S=null==h||null===(O=h.target)||void 0===O?void 0:O.getAttribute("fill");S&&(-1!==S.indexOf("url")?-1!==S.indexOf("Pattern")&&(x=d.globals.dom.baseEl.querySelector(S.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke")):x=S),e=P(n),u(n)&&Array.isArray(d.globals.seriesGoals[n][o])&&(g=d.globals.seriesGoals[n][o].map(function(E){return{attrs:E,val:C.yLbFormatter(E.value,{seriesIndex:n,dataPointIndex:o,w:d})}}))}}null===o&&(e=C.yLbFormatter(d.globals.series[n],z(z({},d),{},{seriesIndex:n,dataPointIndex:n}))),i.DOMHandling({i:n,t:M,j:o,ttItems:a,values:{val:e,goalVals:g,xVal:p,xAxisTTVal:f,zVal:m},seriesName:b,shared:c,pColor:x})},_=0,w=d.globals.series.length-1;_<d.globals.series.length;_++,w--)v(_,w)}},{key:"getFormatters",value:function(t){var e,i=this.w,n=i.globals.yLabelFormatters[t];return void 0!==i.globals.ttVal?Array.isArray(i.globals.ttVal)?(n=i.globals.ttVal[t]&&i.globals.ttVal[t].formatter,e=i.globals.ttVal[t]&&i.globals.ttVal[t].title&&i.globals.ttVal[t].title.formatter):(n=i.globals.ttVal.formatter,"function"==typeof i.globals.ttVal.title.formatter&&(e=i.globals.ttVal.title.formatter)):e=i.config.tooltip.y.title.formatter,"function"!=typeof n&&(n=i.globals.yLabelFormatters[0]?i.globals.yLabelFormatters[0]:function(o){return o}),"function"!=typeof e&&(e=function(o){return o?o+": ":""}),{yLbFormatter:n,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var n=t.seriesIndex,o=t.j,r=this.w;return(0,t.fn)(String(r.globals.seriesNames[t.index]),{series:r.globals.series,seriesIndex:n,dataPointIndex:o,w:r})}},{key:"DOMHandling",value:function(t){var e=t.t,i=t.j,n=t.ttItems,o=t.values,r=t.seriesName,a=t.shared,c=t.pColor,h=this.w,d=this.ttCtx,g=o.val,u=o.goalVals,p=o.xVal,m=o.xAxisTTVal,f=o.zVal,b=null;b=n[e].children,h.config.tooltip.fillSeriesColor&&(n[e].style.backgroundColor=c,b[0].style.display="none"),d.showTooltipTitle&&(null===d.tooltipTitle&&(d.tooltipTitle=h.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),d.tooltipTitle.innerHTML=p),d.isXAxisTooltipEnabled&&(d.xaxisTooltipText.innerHTML=""!==m?m:p);var x=n[e].querySelector(".apexcharts-tooltip-text-y-label");x&&(x.innerHTML=r||"");var v=n[e].querySelector(".apexcharts-tooltip-text-y-value");v&&(v.innerHTML=void 0!==g?g:""),b[0]&&b[0].classList.contains("apexcharts-tooltip-marker")&&(h.config.tooltip.marker.fillColors&&Array.isArray(h.config.tooltip.marker.fillColors)&&(c=h.config.tooltip.marker.fillColors[e]),h.config.tooltip.fillSeriesColor?b[0].style.backgroundColor=c:b[0].style.color=c),h.config.tooltip.marker.show||(b[0].style.display="none");var _=n[e].querySelector(".apexcharts-tooltip-text-goals-label"),w=n[e].querySelector(".apexcharts-tooltip-text-goals-value");if(u.length&&h.globals.seriesGoals[e]){var y=function(){var M="<div>",P="<div>";u.forEach(function(O,S){M+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(O.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(O.attrs.name,"</div>"),P+="<div>".concat(O.val,"</div>")}),_.innerHTML=M+"</div>",w.innerHTML=P+"</div>"};a?h.globals.seriesGoals[e][i]&&Array.isArray(h.globals.seriesGoals[e][i])?y():(_.innerHTML="",w.innerHTML=""):y()}else _.innerHTML="",w.innerHTML="";if(null!==f&&(n[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=h.config.tooltip.z.title,n[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==f?f:""),a&&b[0]){if(h.config.tooltip.hideEmptySeries){var k=n[e].querySelector(".apexcharts-tooltip-marker"),C=n[e].querySelector(".apexcharts-tooltip-text");0==parseFloat(g)?(k.style.display="none",C.style.display="none"):(k.style.display="block",C.style.display="block")}b[0].parentNode.style.display=null==g||h.globals.ancillaryCollapsedSeriesIndices.indexOf(e)>-1||h.globals.collapsedSeriesIndices.indexOf(e)>-1||Array.isArray(d.tConfig.enabledOnSeries)&&-1===d.tConfig.enabledOnSeries.indexOf(e)?"none":h.config.tooltip.items.display}else Array.isArray(d.tConfig.enabledOnSeries)&&-1===d.tConfig.enabledOnSeries.indexOf(e)&&(b[0].parentNode.style.display="none")}},{key:"toggleActiveInactiveSeries",value:function(t,e){var i=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group-".concat(e));n&&(n.classList.add("apexcharts-active"),n.style.display=i.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,i=t.j,n=this.w,o=this.ctx.series.filteredSeriesX(),r="",a="",c=null,h=null,d={series:n.globals.series,seriesIndex:e,dataPointIndex:i,w:n},g=n.globals.ttZFormatter;null===i?h=n.globals.series[e]:n.globals.isXNumeric&&"treemap"!==n.config.chart.type?(r=o[e][i],0===o[e].length&&(r=o[this.tooltipUtil.getFirstActiveXArray(o)][i])):r=new Qo(this.ctx).isFormatXY()?void 0!==n.config.series[e].data[i]?n.config.series[e].data[i].x:"":void 0!==n.globals.labels[i]?n.globals.labels[i]:"";var u=r;return r=n.globals.isXNumeric&&"datetime"===n.config.xaxis.type?new an(this.ctx).xLabelFormat(n.globals.ttKeyFormatter,u,u,{i:void 0,dateFormatter:new Lt(this.ctx).formatDate,w:this.w}):n.globals.isBarHorizontal?n.globals.yLabelFormatters[0](u,d):n.globals.xLabelFormatter(u,d),void 0!==n.config.tooltip.x.formatter&&(r=n.globals.ttKeyFormatter(u,d)),n.globals.seriesZ.length>0&&n.globals.seriesZ[e].length>0&&(c=g(n.globals.seriesZ[e][i],n)),a="function"==typeof n.config.xaxis.tooltip.formatter?n.globals.xaxisTooltipFormatter(u,d):r,{val:Array.isArray(h)?h.join(" "):h,xVal:Array.isArray(r)?r.join(" "):r,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:c}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,i=t.j,n=t.y1,o=t.y2,r=t.w,a=this.ttCtx.getElTooltip(),c=r.config.tooltip.custom;Array.isArray(c)&&c[e]&&(c=c[e]);var h=c({ctx:this.ctx,series:r.globals.series,seriesIndex:e,dataPointIndex:i,y1:n,y2:o,w:r});"string"==typeof h||"number"==typeof h?a.innerHTML=h:(h instanceof Element||"string"==typeof h.nodeName)&&(a.innerHTML="",a.appendChild(h.cloneNode(!0)))}}]),s}(),oh=function(){function s(t){N(this,s),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return B(s,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.ttCtx,n=this.w,o=i.getElXCrosshairs(),r=t-i.xcrosshairsWidth/2,a=n.globals.labels.slice().length;if(null!==e&&(r=n.globals.gridWidth/a*e),null===o||n.globals.isBarHorizontal||(o.setAttribute("x",r),o.setAttribute("x1",r),o.setAttribute("x2",r),o.setAttribute("y2",n.globals.gridHeight),o.classList.add("apexcharts-active")),r<0&&(r=0),r>n.globals.gridWidth&&(r=n.globals.gridWidth),i.isXAxisTooltipEnabled){var c=r;"tickWidth"!==n.config.xaxis.crosshairs.width&&"barWidth"!==n.config.xaxis.crosshairs.width||(c=r+i.xcrosshairsWidth/2),this.moveXAxisTooltip(c)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&D.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&D.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;if(null!==i.xaxisTooltip&&0!==i.xcrosshairsWidth){i.xaxisTooltip.classList.add("apexcharts-active");var o,n=i.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;t-=i.xaxisTooltip.getBoundingClientRect().width/2,isNaN(t)||(t+=e.globals.translateX,o=new D(this.ctx).getTextRects(i.xaxisTooltipText.innerHTML),i.xaxisTooltipText.style.minWidth=o.width+"px",i.xaxisTooltip.style.left=t+"px",i.xaxisTooltip.style.top=n+"px")}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,i=this.ttCtx;null===i.yaxisTTEls&&(i.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var n=parseInt(i.ycrosshairsHidden.getAttribute("y1"),10),o=e.globals.translateY+n,r=i.yaxisTTEls[t].getBoundingClientRect(),c=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(c-=r.width),o-=r.height/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)&&o>0&&o<e.globals.gridHeight?(i.yaxisTTEls[t].classList.add("apexcharts-active"),i.yaxisTTEls[t].style.top=o+"px",i.yaxisTTEls[t].style.left=c+e.config.yaxis[t].tooltip.offsetX+"px"):i.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=this.w,o=this.ttCtx,r=o.getElTooltip(),a=o.tooltipRect,c=null!==i?parseFloat(i):1,h=parseFloat(t)+c+5,d=parseFloat(e)+c/2;if(h>n.globals.gridWidth/2&&(h=h-a.ttWidth-c-10),h>n.globals.gridWidth-a.ttWidth-10&&(h=n.globals.gridWidth-a.ttWidth),h<-20&&(h=-20),n.config.tooltip.followCursor){var g=o.getElGrid().getBoundingClientRect();(h=o.e.clientX-g.left)>n.globals.gridWidth/2&&(h-=o.tooltipRect.ttWidth),(d=o.e.clientY+n.globals.translateY-g.top)>n.globals.gridHeight/2&&(d-=o.tooltipRect.ttHeight)}else n.globals.isBarHorizontal||a.ttHeight/2+d>n.globals.gridHeight&&(d=n.globals.gridHeight-a.ttHeight+n.globals.translateY);isNaN(h)||(r.style.left=(h+=n.globals.translateX)+"px",r.style.top=d+"px")}},{key:"moveMarkers",value:function(t,e){var i=this.w,n=this.ttCtx;if(i.globals.markers.size[t]>0)for(var o=i.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),r=0;r<o.length;r++)parseInt(o[r].getAttribute("rel"),10)===e&&(n.marker.resetPointsSize(),n.marker.enlargeCurrentPoint(e,o[r]));else n.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var i,n,o,r,a=this.w,c=this.ttCtx,h=new D(this.ctx),d=a.globals.pointsArray,g=c.tooltipUtil.getHoverMarkerSize(e),u=a.config.series[e].type;if(!u||"column"!==u&&"candlestick"!==u&&"boxPlot"!==u){o=null===(i=d[e][t])||void 0===i?void 0:i[0],r=(null===(n=d[e][t])||void 0===n?void 0:n[1])||0;var p=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers path"));if(p&&r<a.globals.gridHeight&&r>0){var m=p.getAttribute("shape"),f=h.getMarkerPath(o,r,m,1.5*g);p.setAttribute("d",f)}this.moveXCrosshairs(o),c.fixedTooltip||this.moveTooltip(o,r,g)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,i=this.ttCtx,n=i.w,o=0,r=0,a=n.globals.pointsArray,c=new ee(this.ctx),h=new D(this.ctx);e=c.getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var d=i.tooltipUtil.getHoverMarkerSize(e);if(a[e]&&(o=a[e][t][0],r=a[e][t][1]),!isNaN(o)){var g=i.tooltipUtil.getAllMarkers();if(g.length)for(var u=0;u<n.globals.series.length;u++){var p=a[u];if(n.globals.comboCharts&&void 0===p&&g.splice(u,0,null),p&&p.length){var m=a[u][t][1];g[u].setAttribute("cx",o);var b=g[u].getAttribute("shape");if("rangeArea"!==n.config.chart.type||n.globals.comboCharts||(m-=Math.abs(m-a[u][t+n.globals.series[u].length][1])/2),null!==m&&!isNaN(m)&&m<n.globals.gridHeight+d&&m+d>0){var v=h.getMarkerPath(o,m,b,d);g[u].setAttribute("d",v)}else g[u].setAttribute("d","")}}this.moveXCrosshairs(o),i.fixedTooltip||this.moveTooltip(o,r||n.globals.gridHeight,d)}}},{key:"moveStickyTooltipOverBars",value:function(t,e){var i=this.w,n=this.ttCtx,o=i.globals.columnSeries?i.globals.columnSeries.length:i.globals.series.length;i.config.chart.stacked&&(o=i.globals.barGroups.length);var r=o>=2&&o%2==0?Math.floor(o/2):Math.floor(o/2)+1;i.globals.isBarHorizontal&&(r=new ee(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(r,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(r,"'] path[j='").concat(t,"']"));a||"number"!=typeof e||(a=i.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"']")));var c=a?parseFloat(a.getAttribute("cx")):0,h=a?parseFloat(a.getAttribute("cy")):0,d=a?parseFloat(a.getAttribute("barWidth")):0,g=n.getElGrid().getBoundingClientRect(),u=a&&(a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area"));i.globals.isXNumeric?(a&&!u&&(c-=o%2!=0?d/2:0),a&&u&&(c-=d/2)):i.globals.isBarHorizontal||(c=n.xAxisTicksPositions[t-1]+n.dataPointsDividedWidth/2,isNaN(c)&&(c=n.xAxisTicksPositions[t]-n.dataPointsDividedWidth/2)),i.globals.isBarHorizontal?h-=n.tooltipRect.ttHeight:i.config.tooltip.followCursor?h=n.e.clientY-g.top-n.tooltipRect.ttHeight/2:h+n.tooltipRect.ttHeight+15>i.globals.gridHeight&&(h=i.globals.gridHeight),i.globals.isBarHorizontal||this.moveXCrosshairs(c),n.fixedTooltip||this.moveTooltip(c,h||i.globals.gridHeight)}}]),s}(),Ax=function(){function s(t){N(this,s),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new oh(t)}return B(s,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new D(this.ctx),i=new Mi(this.ctx),n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");n=At(n),t.config.chart.stacked&&n.sort(function(g,u){return parseFloat(g.getAttribute("data:realIndex"))-parseFloat(u.getAttribute("data:realIndex"))});for(var o=0;o<n.length;o++){var r=n[o].querySelector(".apexcharts-series-markers-wrap");if(null!==r){var a=void 0,c="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(c+=" no-pointer-events");var h=i.getMarkerConfig({cssClass:c,seriesIndex:Number(r.getAttribute("data:realIndex"))});(a=e.drawMarker(0,0,h)).node.setAttribute("default-marker-size",0);var d=document.createElementNS(t.globals.SVGNS,"g");d.classList.add("apexcharts-series-markers"),d.appendChild(a.node),r.appendChild(d)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this.w;"bubble"!==o.config.chart.type&&this.newPointSize(t,e);var r=e.getAttribute("cx"),a=e.getAttribute("cy");if(null!==i&&null!==n&&(r=i,a=n),this.tooltipPosition.moveXCrosshairs(r),!this.fixedTooltip){if("radar"===o.config.chart.type){var c=this.ttCtx.getElGrid().getBoundingClientRect();r=this.ttCtx.e.clientX-c.left}this.tooltipPosition.moveTooltip(r,a,o.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,i=this,n=this.ttCtx,o=t,r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=e.config.markers.hover.size,c=0;c<r.length;c++){var h=r[c].getAttribute("rel"),d=r[c].getAttribute("index");if(void 0===a&&(a=e.globals.markers.size[d]+e.config.markers.hover.sizeOffset),o===parseInt(h,10)){i.newPointSize(o,r[c]);var g=r[c].getAttribute("cx"),u=r[c].getAttribute("cy");i.tooltipPosition.moveXCrosshairs(g),n.fixedTooltip||i.tooltipPosition.moveTooltip(g,u,a)}else i.oldPointSize(r[c])}}},{key:"newPointSize",value:function(t,e){var i=this.w,n=i.config.markers.hover.size,o=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==o.getAttribute("default-marker-size")){var r=parseInt(o.getAttribute("index"),10);void 0===n&&(n=i.globals.markers.size[r]+i.config.markers.hover.sizeOffset),n<0&&(n=0);var a=this.ttCtx.tooltipUtil.getPathFromPoint(e,n);e.setAttribute("d",a)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size")),i=this.ttCtx.tooltipUtil.getPathFromPoint(t,e);t.setAttribute("d",i)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var i=parseFloat(t[e].getAttribute("default-marker-size"));if(A.isNumber(i)&&i>0){var n=this.ttCtx.tooltipUtil.getPathFromPoint(t[e],i);t[e].setAttribute("d",n)}else t[e].setAttribute("d","M0,0")}}}]),s}(),Ex=function(){function s(t){N(this,s),this.w=t.w;var e=this.w;this.ttCtx=t,this.isVerticalGroupedRangeBar=!e.globals.isBarHorizontal&&"rangeBar"===e.config.chart.type&&e.config.plotOptions.bar.rangeBarGroupRows}return B(s,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,i=t.opt,n=t.x,o=t.y,a=this.ttCtx,c=this.w;if(e.target.classList.contains("apexcharts-".concat(t.type,"-rect"))){var h=this.getAttr(e,"i"),d=this.getAttr(e,"j"),g=this.getAttr(e,"cx"),u=this.getAttr(e,"cy"),p=this.getAttr(e,"width"),m=this.getAttr(e,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:h,j:d,shared:!1,e}),c.globals.capturedSeriesIndex=h,c.globals.capturedDataPointIndex=d,n=g+a.tooltipRect.ttWidth/2+p,o=u+a.tooltipRect.ttHeight/2-m/2,a.tooltipPosition.moveXCrosshairs(g+p/2),n>c.globals.gridWidth/2&&(n=g-a.tooltipRect.ttWidth/2+p),a.w.config.tooltip.followCursor){var f=c.globals.dom.elWrap.getBoundingClientRect();n=c.globals.clientX-f.left-(n>c.globals.gridWidth/2?a.tooltipRect.ttWidth:0),o=c.globals.clientY-f.top-(o>c.globals.gridHeight/2?a.tooltipRect.ttHeight:0)}}return{x:n,y:o}}},{key:"handleMarkerTooltip",value:function(t){var e,i,n=t.e,o=t.opt,r=t.x,a=t.y,c=this.w,h=this.ttCtx;if(n.target.classList.contains("apexcharts-marker")){var d=parseInt(o.paths.getAttribute("cx"),10),g=parseInt(o.paths.getAttribute("cy"),10),u=parseFloat(o.paths.getAttribute("val"));if(i=parseInt(o.paths.getAttribute("rel"),10),e=parseInt(o.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,h.intersect){var p=A.findAncestor(o.paths,"apexcharts-series");p&&(e=parseInt(p.getAttribute("data:realIndex"),10))}if(h.tooltipLabels.drawSeriesTexts({ttItems:o.ttItems,i:e,j:i,shared:!h.showOnIntersect&&c.config.tooltip.shared,e:n}),"mouseup"===n.type&&h.markerClick(n,e,i),c.globals.capturedSeriesIndex=e,c.globals.capturedDataPointIndex=i,r=d,a=g+c.globals.translateY-1.4*h.tooltipRect.ttHeight,h.w.config.tooltip.followCursor){var m=h.getElGrid().getBoundingClientRect();a=h.e.clientY+c.globals.translateY-m.top}u<0&&(a=g),h.marker.enlargeCurrentPoint(i,o.paths,r,a)}return{x:r,y:a}}},{key:"handleBarTooltip",value:function(t){var e,i,n=t.e,o=t.opt,r=this.w,a=this.ttCtx,c=a.getElTooltip(),h=0,d=0,g=0,u=this.getBarTooltipXY({e:n,opt:o});if(null!==u.j||0!==u.barHeight||0!==u.barWidth){var p=u.j;if(r.globals.capturedSeriesIndex=e=u.i,r.globals.capturedDataPointIndex=p,r.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||!r.config.tooltip.shared?(d=u.x,g=u.y,i=Array.isArray(r.config.stroke.width)?r.config.stroke.width[e]:r.config.stroke.width,h=d):r.globals.comboCharts||r.config.tooltip.shared||(h/=2),isNaN(g)&&(g=r.globals.svgHeight-a.tooltipRect.ttHeight),parseInt(o.paths.parentNode.getAttribute("data:realIndex"),10),d+a.tooltipRect.ttWidth>r.globals.gridWidth?d-=a.tooltipRect.ttWidth:d<0&&(d=0),a.w.config.tooltip.followCursor){var m=a.getElGrid().getBoundingClientRect();g=a.e.clientY-m.top}null===a.tooltip&&(a.tooltip=r.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),r.config.tooltip.shared||a.tooltipPosition.moveXCrosshairs(r.globals.comboBarCount>0?h+i/2:h),!a.fixedTooltip&&(!r.config.tooltip.shared||r.globals.isBarHorizontal&&a.tooltipUtil.hasBars())&&(g=g+r.globals.translateY-a.tooltipRect.ttHeight/2,c.style.left=d+r.globals.translateX+"px",c.style.top=g+"px")}}},{key:"getBarTooltipXY",value:function(t){var e=this,i=t.e,n=t.opt,o=this.w,r=null,a=this.ttCtx,c=0,h=0,d=0,g=0,u=0,p=i.target.classList;if(p.contains("apexcharts-bar-area")||p.contains("apexcharts-candlestick-area")||p.contains("apexcharts-boxPlot-area")||p.contains("apexcharts-rangebar-area")){var m=i.target,f=m.getBoundingClientRect(),b=n.elGrid.getBoundingClientRect(),x=f.height;u=f.height;var v=f.width,_=parseInt(m.getAttribute("cx"),10),w=parseInt(m.getAttribute("cy"),10);g=parseFloat(m.getAttribute("barWidth"));var y="touchmove"===i.type?i.touches[0].clientX:i.clientX;r=parseInt(m.getAttribute("j"),10),c=parseInt(m.parentNode.getAttribute("rel"),10)-1;var k=m.getAttribute("data-range-y1"),C=m.getAttribute("data-range-y2");o.globals.comboCharts&&(c=parseInt(m.parentNode.getAttribute("data:realIndex"),10));var M=function(O){return o.globals.isXNumeric?_-v/2:e.isVerticalGroupedRangeBar?_+v/2:_-a.dataPointsDividedWidth+v/2},P=function(){return w-a.dataPointsDividedHeight+x/2-a.tooltipRect.ttHeight/2};a.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:c,j:r,y1:k?parseInt(k,10):null,y2:C?parseInt(C,10):null,shared:!a.showOnIntersect&&o.config.tooltip.shared,e:i}),o.config.tooltip.followCursor?o.globals.isBarHorizontal?(h=y-b.left+15,d=P()):(h=M(),d=i.clientY-b.top-a.tooltipRect.ttHeight/2-15):o.globals.isBarHorizontal?((h=_)<a.xyRatios.baseLineInvertedY&&(h=_-a.tooltipRect.ttWidth),d=P()):(h=M(),d=w)}return{x:h,y:d,barHeight:u,barWidth:g,i:c,j:r}}}]),s}(),Ix=function(){function s(t){N(this,s),this.w=t.w,this.ttCtx=t}return B(s,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,i="bottom"===t.config.xaxis.position;e.xaxisOffY=i?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var n=i?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",o=t.globals.dom.elWrap;e.isXAxisTooltipEnabled&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",n+" apexcharts-theme-"+t.config.tooltip.theme),o.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,i=0;i<t.config.yaxis.length;i++){var n=t.config.yaxis[i].opposite||t.config.yaxis[i].crosshairs.opposite;e.yaxisOffX=n?t.globals.gridWidth+1:1;var o="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i,n?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),r=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(i))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",o+" apexcharts-theme-"+t.config.tooltip.theme),r.appendChild(e.yaxisTooltip),0===i&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[i]=document.createElement("div"),e.yaxisTooltipText[i].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[i]))}}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,i=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var n=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==n&&"barWidth"===t.config.xaxis.crosshairs.width){var o=parseFloat(n.getAttribute("barWidth"));e.xcrosshairsWidth=o}else"tickWidth"===t.config.xaxis.crosshairs.width&&(e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length)}else if("tickWidth"===t.config.xaxis.crosshairs.width)e.xcrosshairsWidth=t.globals.gridWidth/t.globals.labels.length;else if("barWidth"===t.config.xaxis.crosshairs.width){var c=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==c){var h=parseFloat(c.getAttribute("barWidth"));e.xcrosshairsWidth=h}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==i&&e.xcrosshairsWidth>0&&i.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,i){var n=this.ttCtx,o=this.w,r=o.globals,a=r.seriesYAxisMap[t];if(n.yaxisTooltips[t]&&a.length>0){var c=r.yLabelFormatters[t],h=n.getElGrid().getBoundingClientRect(),d=a[0],g=0;i.yRatio.length>1&&(g=d);var u=(e-h.top)*i.yRatio[g],p=r.maxYArr[d]-r.minYArr[d],m=r.minYArr[d]+(p-u);o.config.yaxis[t].reversed&&(m=r.maxYArr[d]-(p-u)),n.tooltipPosition.moveYCrosshairs(e-h.top),n.yaxisTooltipText[t].innerHTML=c(m),n.tooltipPosition.moveYAxisTooltip(t)}}}]),s}(),rh=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w;var e=this.w;this.tConfig=e.config.tooltip,this.tooltipUtil=new sh(this),this.tooltipLabels=new Sx(this),this.tooltipPosition=new oh(this),this.marker=new Ax(this),this.intersect=new Ex(this),this.axesTooltip=new Ix(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!e.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return B(s,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map(function(r,a){return!!(r.show&&r.tooltip.enabled&&e.globals.axisCharts)}),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var i=document.createElement("div");if(i.classList.add("apexcharts-tooltip"),e.config.tooltip.cssClass&&i.classList.add(e.config.tooltip.cssClass),i.classList.add("apexcharts-theme-".concat(this.tConfig.theme||"light")),e.globals.dom.elWrap.appendChild(i),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var n=new dn(this.ctx);this.xAxisTicksPositions=n.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,i.appendChild(this.tooltipTitle));var o=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(o=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(o),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this,i=this.w,n=[],o=this.getElTooltip(),r=function(c){var h=document.createElement("div");h.classList.add("apexcharts-tooltip-series-group","apexcharts-tooltip-series-group-".concat(c)),h.style.order=i.config.tooltip.inverseOrder?t-c:c+1;var d=document.createElement("span");d.classList.add("apexcharts-tooltip-marker"),i.config.tooltip.fillSeriesColor?d.style.backgroundColor=i.globals.colors[c]:d.style.color=i.globals.colors[c];var g=i.config.markers.shape,u=g;Array.isArray(g)&&(u=g[c]),d.setAttribute("shape",u),h.appendChild(d);var p=document.createElement("div");p.classList.add("apexcharts-tooltip-text"),p.style.fontFamily=e.tConfig.style.fontFamily||i.config.chart.fontFamily,p.style.fontSize=e.tConfig.style.fontSize,["y","goals","z"].forEach(function(m){var f=document.createElement("div");f.classList.add("apexcharts-tooltip-".concat(m,"-group"));var b=document.createElement("span");b.classList.add("apexcharts-tooltip-text-".concat(m,"-label")),f.appendChild(b);var x=document.createElement("span");x.classList.add("apexcharts-tooltip-text-".concat(m,"-value")),f.appendChild(x),p.appendChild(f)}),h.appendChild(p),o.appendChild(h),n.push(h)},a=0;a<t;a++)r(a);return n}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,i=this.getElTooltip(),n=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),o="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,r=t.globals.dom.Paper.node,a=this.getElGrid();a&&(this.seriesBound=a.getBoundingClientRect());var c,h=[],d=[],g={hoverArea:r,elGrid:a,tooltipEl:i,tooltipY:h,tooltipX:d,ttItems:this.ttItems};if(t.globals.axisCharts&&(o?c=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):n?c=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(c=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),c&&c.length))for(var u=0;u<c.length;u++)h.push(c[u].getAttribute("cy")),d.push(c[u].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||n&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([r],g);else if(n&&!t.globals.comboCharts||o&&this.showOnIntersect)this.addDatapointEventsListeners(g);else if(!t.globals.axisCharts||"heatmap"===e||"treemap"===e){var p=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(p,g)}if(this.showOnIntersect){var m=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");m.length>0&&this.addPathsEventListeners(m,g),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(g)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),i=e.getBoundingClientRect(),n=i.width+10,o=i.height+10,r=this.tConfig.fixed.offsetX,a=this.tConfig.fixed.offsetY,c=this.tConfig.fixed.position.toLowerCase();return c.indexOf("right")>-1&&(r=r+t.globals.svgWidth-n+10),c.indexOf("bottom")>-1&&(a=a+t.globals.svgHeight-o-10),e.style.left=r+"px",e.style.top=a+"px",{x:r,y:a,ttWidth:n,ttHeight:o}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var i=this,n=function(r){var a={paths:t[r],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(c){return t[r].addEventListener(c,i.onSeriesHover.bind(i,a),{capture:!1,passive:!0})})},o=0;o<t.length;o++)n(o)}},{key:"onSeriesHover",value:function(t,e){var i=this,n=Date.now()-this.lastHoverTime;n>=20?this.seriesHover(t,e):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){i.seriesHover(t,e)},20-n))}},{key:"seriesHover",value:function(t,e){var i=this;this.lastHoverTime=Date.now();var n=[],o=this.w;o.config.chart.group&&(n=this.ctx.getGroupedCharts()),o.globals.axisCharts&&(o.globals.minX===-1/0&&o.globals.maxX===1/0||0===o.globals.dataPoints)||(n.length?n.forEach(function(r){var a=i.getElTooltip(r);r.w.globals.minX===i.w.globals.minX&&r.w.globals.maxX===i.w.globals.maxX&&r.w.globals.tooltip.seriesHoverByContext({chartCtx:r,ttCtx:r.w.globals.tooltip,opt:{paths:t.paths,tooltipEl:a,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:r.w.globals.tooltip.ttItems},e})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,i=t.ttCtx,n=t.opt,o=t.e,r=e.w,a=this.getElTooltip(e);a&&(i.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},i.e=o,i.tooltipUtil.hasBars()&&!r.globals.comboCharts&&!i.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new ee(e).toggleSeriesOnHover(o,o.target.parentNode),r.globals.axisCharts?i.axisChartsTooltips({e:o,opt:n,tooltipRect:i.tooltipRect}):i.nonAxisChartsTooltips({e:o,opt:n,tooltipRect:i.tooltipRect}),i.fixedTooltip&&i.drawFixedTooltipRect())}},{key:"axisChartsTooltips",value:function(t){var e,i,n=t.e,o=t.opt,r=this.w,a=o.elGrid.getBoundingClientRect(),c="touchmove"===n.type?n.touches[0].clientX:n.clientX,h="touchmove"===n.type?n.touches[0].clientY:n.clientY;if(this.clientY=h,this.clientX=c,r.globals.capturedSeriesIndex=-1,r.globals.capturedDataPointIndex=-1,h<a.top||h>a.top+a.height)this.handleMouseOut(o);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!r.config.tooltip.shared){var d=parseInt(o.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(d)<0)return void this.handleMouseOut(o)}var g=this.getElTooltip(),u=this.getElXCrosshairs(),p=[];r.config.chart.group&&(p=this.ctx.getSyncedCharts());var m=r.globals.xyCharts||"bar"===r.config.chart.type&&!r.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||r.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===n.type||"touchmove"===n.type||"mouseup"===n.type){if(r.globals.collapsedSeries.length+r.globals.ancillaryCollapsedSeries.length===r.globals.series.length)return;null!==u&&u.classList.add("apexcharts-active");var f=this.yaxisTooltips.filter(function(v){return!0===v});if(null!==this.ycrosshairs&&f.length&&this.ycrosshairs.classList.add("apexcharts-active"),m&&!this.showOnIntersect||p.length>1)this.handleStickyTooltip(n,c,h,o);else if("heatmap"===r.config.chart.type||"treemap"===r.config.chart.type){var b=this.intersect.handleHeatTreeTooltip({e:n,opt:o,x:e,y:i,type:r.config.chart.type});i=b.y,g.style.left=(e=b.x)+"px",g.style.top=i+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:n,opt:o}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:n,opt:o,x:e,y:i});if(this.yaxisTooltips.length)for(var x=0;x<r.config.yaxis.length;x++)this.axesTooltip.drawYaxisTooltipText(x,h,this.xyRatios);r.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),o.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==n.type&&"touchend"!==n.type||this.handleMouseOut(o)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,i=t.opt,n=t.tooltipRect,o=this.w,r=i.paths.getAttribute("rel"),a=this.getElTooltip(),c=o.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){o.globals.dom.baseEl.classList.add("apexcharts-tooltip-active"),a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:parseInt(r,10)-1,shared:!1});var d=o.globals.clientY-c.top-n.ttHeight-10;if(a.style.left=o.globals.clientX-c.left-n.ttWidth/2+"px",a.style.top=d+"px",o.config.legend.tooltipHoverFormatter){var g=r-1,u=(0,o.config.legend.tooltipHoverFormatter)(this.legendLabels[g].getAttribute("data:default-text"),{seriesIndex:g,dataPointIndex:g,w:o});this.legendLabels[g].innerHTML=u}}else"mouseout"!==e.type&&"touchend"!==e.type||(a.classList.remove("apexcharts-active"),o.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),o.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(p){var m=p.getAttribute("data:default-text");p.innerHTML=decodeURIComponent(m)}))}},{key:"handleStickyTooltip",value:function(t,e,i,n){var o=this.w,r=this.tooltipUtil.getNearestValues({context:this,hoverArea:n.hoverArea,elGrid:n.elGrid,clientX:e,clientY:i}),a=r.j,c=r.capturedSeries;o.globals.collapsedSeriesIndices.includes(c)&&(c=null);var h=n.elGrid.getBoundingClientRect();if(r.hoverX<0||r.hoverX>h.width)this.handleMouseOut(n);else if(null!==c)this.handleStickyCapturedSeries(t,c,n,a);else if(this.tooltipUtil.isXoverlap(a)||o.globals.isBarHorizontal){var d=o.globals.series.findIndex(function(g,u){return!o.globals.collapsedSeriesIndices.includes(u)});this.create(t,this,d,a,n.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(t,e,i,n){var o=this.w;if(this.tConfig.shared||null!==o.globals.series[e][n]){if(void 0!==o.globals.series[e][n])this.tConfig.shared&&this.tooltipUtil.isXoverlap(n)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,n,i.ttItems):this.create(t,this,e,n,i.ttItems,!1);else if(this.tooltipUtil.isXoverlap(n)){var r=o.globals.series.findIndex(function(a,c){return!o.globals.collapsedSeriesIndices.includes(c)});this.create(t,this,r,n,i.ttItems)}}else this.handleMouseOut(i)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new D(this.ctx),i=t.globals.dom.Paper.find(".apexcharts-bar-area"),n=0;n<i.length;n++)e.pathMouseLeave(i[n])}},{key:"handleMouseOut",value:function(t){var e=this.w,i=this.getElXCrosshairs();if(e.globals.dom.baseEl.classList.remove("apexcharts-tooltip-active"),t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==i&&i.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var n=0;n<this.yaxisTTEls.length;n++)this.yaxisTTEls[n].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(o){var r=o.getAttribute("data:default-text");o.innerHTML=decodeURIComponent(r)})}},{key:"markerClick",value:function(t,e,i){var n=this.w;"function"==typeof n.config.chart.events.markerClick&&n.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:i,w:n}])}},{key:"create",value:function(t,e,i,n,o){var r,a,c,h,d,g,u,p,m,f,b,x,v,_,w,y,k=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=this.w,M=e;"mouseup"===t.type&&this.markerClick(t,i,n),null===k&&(k=this.tConfig.shared);var P=this.tooltipUtil.hasMarkers(i),O=this.tooltipUtil.getElBars(),S=function(){C.globals.markers.largestSize>0?M.marker.enlargePoints(n):M.tooltipPosition.moveDynamicPointsOnHover(n)};if(C.config.legend.tooltipHoverFormatter){var E=C.config.legend.tooltipHoverFormatter,I=Array.from(this.legendLabels);I.forEach(function(ct){var $=ct.getAttribute("data:default-text");ct.innerHTML=decodeURIComponent($)});for(var R=0;R<I.length;R++){var T=I[R],L=parseInt(T.getAttribute("i"),10),F=decodeURIComponent(T.getAttribute("data:default-text")),V=E(F,{seriesIndex:k?L:i,dataPointIndex:n,w:C});if(k)T.innerHTML=C.globals.collapsedSeriesIndices.indexOf(L)<0?V:F;else if(T.innerHTML=L===i?V:F,i===L)break}}var H=z(z({ttItems:o,i,j:n},void 0!==(null===(r=C.globals.seriesRange)||void 0===r||null===(a=r[i])||void 0===a||null===(c=a[n])||void 0===c||null===(h=c.y[0])||void 0===h?void 0:h.y1)&&{y1:null===(d=C.globals.seriesRange)||void 0===d||null===(g=d[i])||void 0===g||null===(u=g[n])||void 0===u||null===(p=u.y[0])||void 0===p?void 0:p.y1}),void 0!==(null===(m=C.globals.seriesRange)||void 0===m||null===(f=m[i])||void 0===f||null===(b=f[n])||void 0===b||null===(x=b.y[0])||void 0===x?void 0:x.y2)&&{y2:null===(v=C.globals.seriesRange)||void 0===v||null===(_=v[i])||void 0===_||null===(w=_[n])||void 0===w||null===(y=w.y[0])||void 0===y?void 0:y.y2});if(k){if(M.tooltipLabels.drawSeriesTexts(z(z({},H),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),P)S();else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(O),this.barSeriesHeight>0)){var Y=new D(this.ctx),X=C.globals.dom.Paper.find(".apexcharts-bar-area[j='".concat(n,"']"));this.deactivateHoverFilter(),M.tooltipUtil.getAllMarkers(!0).length&&!this.barSeriesHeight&&S(),M.tooltipPosition.moveStickyTooltipOverBars(n,i);for(var Q=0;Q<X.length;Q++)Y.pathMouseEnter(X[Q])}}else M.tooltipLabels.drawSeriesTexts(z({shared:!1},H)),this.tooltipUtil.hasBars()&&M.tooltipPosition.moveStickyTooltipOverBars(n,i),P&&M.tooltipPosition.moveMarkers(i,n)}}]),s}(),Tx=function(){function s(t){N(this,s),this.w=t.w,this.barCtx=t,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return B(s,[{key:"handleBarDataLabels",value:function(t){var e,i,n=t.x,o=t.y,r=t.y1,a=t.y2,c=t.i,h=t.j,d=t.realIndex,g=t.columnGroupIndex,u=t.series,p=t.barHeight,m=t.barWidth,f=t.barXPosition,b=t.barYPosition,x=t.visibleSeries,v=this.w,_=new D(this.barCtx.ctx),w=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[d]:this.barCtx.strokeWidth;v.globals.isXNumeric&&!v.globals.isBarHorizontal?(e=n+parseFloat(m*(x+1)),i=o+parseFloat(p*(x+1))-w):(e=n+parseFloat(m*x),i=o+parseFloat(p*x));var y,P,k=null,C=n,M=o,O=v.config.dataLabels,S=this.barCtx.barOptions.dataLabels,E=this.barCtx.barOptions.dataLabels.total;void 0!==b&&this.barCtx.isRangeBar&&(i=b,M=b),void 0!==f&&this.barCtx.isVerticalGroupedRangeBar&&(e=f,C=f);var I=O.offsetX,R=O.offsetY,T={width:0,height:0};if(v.config.dataLabels.enabled){var L=v.globals.series[c][h];T=_.getTextRects(v.config.dataLabels.formatter?v.config.dataLabels.formatter(L,z(z({},v),{},{seriesIndex:c,dataPointIndex:h,w:v})):v.globals.yLabelFormatters[0](L),parseFloat(O.style.fontSize))}var F={x:n,y:o,i:c,j:h,realIndex:d,columnGroupIndex:g,bcx:e,bcy:i,barHeight:p,barWidth:m,textRects:T,strokeWidth:w,dataLabelsX:C,dataLabelsY:M,dataLabelsConfig:O,barDataLabelsConfig:S,barTotalDataLabelsConfig:E,offX:I,offY:R};return P=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(F):this.calculateColumnsDataLabelsPosition(F),y=this.drawCalculatedDataLabels({x:P.dataLabelsX,y:P.dataLabelsY,val:this.barCtx.isRangeBar?[r,a]:"100%"===v.config.chart.stackType?u[d][h]:v.globals.series[d][h],i:d,j:h,barWidth:m,barHeight:p,textRects:T,dataLabelsConfig:O}),v.config.chart.stacked&&E.enabled&&(k=this.drawTotalDataLabels({x:P.totalDataLabelsX,y:P.totalDataLabelsY,barWidth:m,barHeight:p,realIndex:d,textAnchor:P.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:d,j:h}),dataLabelsConfig:O,barTotalDataLabelsConfig:E})),{dataLabelsPos:P,dataLabels:y,totalDataLabels:k}}},{key:"getStackedTotalDataLabel",value:function(t){var e=t.realIndex,i=t.j,n=this.w,o=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(o=this.totalFormatter(o,z(z({},n),{},{seriesIndex:e,dataPointIndex:i,w:n}))),o}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var a,c,e=this,i=this.w,n=t.i,o=t.j,r=t.realIndex,h=t.y,d=t.bcx,g=t.barWidth,u=t.barHeight,p=t.textRects,m=t.dataLabelsX,f=t.dataLabelsY,b=t.dataLabelsConfig,x=t.barDataLabelsConfig,v=t.barTotalDataLabelsConfig,_=t.strokeWidth,w=t.offX,y=t.offY,k=d;u=Math.abs(u);var C="vertical"===i.config.plotOptions.bar.dataLabels.orientation,M=this.barCtx.barHelpers.getZeroValueEncounters({i:n,j:o}).zeroEncounters;d-=_/2;var P=i.globals.gridWidth/i.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?m+=g/2:(m=i.globals.isXNumeric?d-g/2+w:d-P+g/2+w,!i.config.chart.stacked&&M>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(m-=g*M)),C&&(m=m+p.height/2-_/2-2);var O=i.globals.series[n][o]<0,S=h;switch(this.barCtx.isReversed&&(S=h+(O?u:-u)),x.position){case"center":f=C?O?S-u/2+y:S+u/2-y:O?S-u/2+p.height/2+y:S+u/2+p.height/2-y;break;case"bottom":f=C?O?S-u+y:S+u-y:O?S-u+p.height+_+y:S+u-p.height/2+_-y;break;case"top":f=C?O?S+y:S-y:O?S-p.height/2-y:S+p.height+y}var E=S;if(i.globals.seriesGroups.forEach(function(T){var L;null===(L=e.barCtx[T.join(",")])||void 0===L||L.prevY.forEach(function(F){E=O?Math.max(F[o],E):Math.min(F[o],E)})}),this.barCtx.lastActiveBarSerieIndex===r&&v.enabled){var I=new D(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:r,j:o}),b.fontSize);a=O?E-I.height/2-y-v.offsetY+18:E+I.height+y+v.offsetY-18,c=k+(i.globals.isXNumeric?-g*i.globals.barGroups.length/2:i.globals.barGroups.length*g/2-(i.globals.barGroups.length-1)*g-P)+v.offsetX}return i.config.chart.stacked||(f<0?f=0+_:f+p.height/3>i.globals.gridHeight&&(f=i.globals.gridHeight-_)),{bcx:d,bcy:h,dataLabelsX:m,dataLabelsY:f,totalDataLabelsX:c,totalDataLabelsY:a,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this,i=this.w,n=t.x,o=t.i,r=t.j,a=t.realIndex,c=t.bcy,h=t.barHeight,d=t.barWidth,g=t.textRects,u=t.dataLabelsX,p=t.strokeWidth,m=t.dataLabelsConfig,f=t.barDataLabelsConfig,b=t.barTotalDataLabelsConfig,x=t.offX,v=t.offY,_=i.globals.gridHeight/i.globals.dataPoints,w=this.barCtx.barHelpers.getZeroValueEncounters({i:o,j:r}).zeroEncounters;d=Math.abs(d);var y,k,C=c-(this.barCtx.isRangeBar?0:_)+h/2+g.height/2+v-3;!i.config.chart.stacked&&w>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(C-=h*w);var M="start",P=i.globals.series[o][r]<0,O=n;switch(this.barCtx.isReversed&&(O=n+(P?-d:d),M=P?"start":"end"),f.position){case"center":u=P?O+d/2-x:Math.max(g.width/2,O-d/2)+x;break;case"bottom":u=P?O+d-p-x:O-d+p+x;break;case"top":u=P?O-p-x:O-p+x}var S=O;if(i.globals.seriesGroups.forEach(function(I){var R;null===(R=e.barCtx[I.join(",")])||void 0===R||R.prevX.forEach(function(T){S=P?Math.min(T[r],S):Math.max(T[r],S)})}),this.barCtx.lastActiveBarSerieIndex===a&&b.enabled){var E=new D(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:r}),m.fontSize);P?(y=S-p-x-b.offsetX,M="end"):y=S+x+b.offsetX+(this.barCtx.isReversed?-(d+p):p),k=C-g.height/2+E.height/2+b.offsetY+p,i.globals.barGroups.length>1&&(k-=i.globals.barGroups.length/2*(h/2))}return i.config.chart.stacked||("start"===m.textAnchor?u-g.width<0?u=P?g.width+p:p:u+g.width>i.globals.gridWidth&&(u=P?i.globals.gridWidth-p:i.globals.gridWidth-g.width-p):"middle"===m.textAnchor?u-g.width/2<0?u=g.width/2+p:u+g.width/2>i.globals.gridWidth&&(u=i.globals.gridWidth-g.width/2-p):"end"===m.textAnchor&&(u<1?u=g.width+p:u+1>i.globals.gridWidth&&(u=i.globals.gridWidth-g.width-p))),{bcx:n,bcy:c,dataLabelsX:u,dataLabelsY:C,totalDataLabelsX:y,totalDataLabelsY:k,totalDataLabelsAnchor:M}}},{key:"drawCalculatedDataLabels",value:function(t){var e=t.x,i=t.y,n=t.val,o=t.i,r=t.j,a=t.textRects,c=t.barHeight,h=t.barWidth,d=t.dataLabelsConfig,g=this.w,u="rotate(0)";"vertical"===g.config.plotOptions.bar.dataLabels.orientation&&(u="rotate(-90, ".concat(e,", ").concat(i,")"));var p=new Pi(this.barCtx.ctx),m=new D(this.barCtx.ctx),f=d.formatter,b=null,x=g.globals.collapsedSeriesIndices.indexOf(o)>-1;if(d.enabled&&!x){b=m.group({class:"apexcharts-data-labels",transform:u});var v="";void 0!==n&&(v=f(n,z(z({},g),{},{seriesIndex:o,dataPointIndex:r,w:g}))),!n&&g.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(v="");var _=g.globals.series[o][r]<0,w=g.config.plotOptions.bar.dataLabels.position;"vertical"===g.config.plotOptions.bar.dataLabels.orientation&&("top"===w&&(d.textAnchor=_?"end":"start"),"center"===w&&(d.textAnchor="middle"),"bottom"===w&&(d.textAnchor=_?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&h<m.getTextRects(v,parseFloat(d.style.fontSize)).width&&(v=""),g.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?a.width/1.6>Math.abs(h)&&(v=""):a.height/1.6>Math.abs(c)&&(v=""));var y=z({},d);this.barCtx.isHorizontal&&n<0&&("start"===d.textAnchor?y.textAnchor="end":"end"===d.textAnchor&&(y.textAnchor="start")),p.plotDataLabelsText({x:e,y:i,text:v,i:o,j:r,parent:b,dataLabelsConfig:y,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return b}},{key:"drawTotalDataLabels",value:function(t){var c,e=t.x,i=t.y,n=t.val,o=t.realIndex,r=t.textAnchor,a=t.barTotalDataLabelsConfig,h=new D(this.barCtx.ctx);return a.enabled&&void 0!==e&&void 0!==i&&this.barCtx.lastActiveBarSerieIndex===o&&(c=h.drawText({x:e,y:i,foreColor:a.style.color,text:n,textAnchor:r,fontFamily:a.style.fontFamily,fontSize:a.style.fontSize,fontWeight:a.style.fontWeight})),c}}]),s}(),Rx=function(){function s(t){N(this,s),this.w=t.w,this.barCtx=t}return B(s,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var i=0;i<t.length;i++)if(t[i].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[i].length),e.globals.isXNumeric)for(var n=0;n<t[i].length;n++)e.globals.seriesX[i][n]>e.globals.minX&&e.globals.seriesX[i][n]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;this.arrBorderRadius=this.createBorderRadiusArr(e.globals.series),A.isSafari()&&(this.arrBorderRadius=this.arrBorderRadius.map(function(o){return o.map(function(r){return"none"})})),0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(t){var e,i,n,o,r,a,c,h,d=this.w,g=d.globals.dataPoints;this.barCtx.isRangeBar&&(g=d.globals.labels.length);var u=this.barCtx.seriesLen;if(d.config.plotOptions.bar.rangeBarGroupRows&&(u=1),this.barCtx.isHorizontal)r=(n=d.globals.gridHeight/g)/u,d.globals.isXNumeric&&(r=(n=d.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),r=r*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(r=parseInt(this.barCtx.barOptions.barHeight,10)),h=this.barCtx.baseLineInvertedY+d.globals.padHorizontal+(this.barCtx.isReversed?d.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(h=d.globals.gridWidth/2),i=(n-r*this.barCtx.seriesLen)/2;else{if(o=d.globals.gridWidth/this.barCtx.visibleItems,d.config.xaxis.convertedCatToNumeric&&(o=d.globals.gridWidth/d.globals.dataPoints),a=o/u*parseInt(this.barCtx.barOptions.columnWidth,10)/100,d.globals.isXNumeric){var p=this.barCtx.xRatio;d.globals.minXDiff&&.5!==d.globals.minXDiff&&d.globals.minXDiff/p>0&&(o=d.globals.minXDiff/p),(a=o/u*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(a=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(a=parseInt(this.barCtx.barOptions.columnWidth,10)),c=d.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?d.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),e=d.globals.isXNumeric?this.barCtx.getBarXForNumericXAxis({x:e,j:0,realIndex:t,barWidth:a}).x:d.globals.padHorizontal+A.noExponents(o-a*this.barCtx.seriesLen)/2}return d.globals.barHeight=r,d.globals.barWidth=a,{x:e,y:i,yDivision:n,xDivision:o,barHeight:r,barWidth:a,zeroH:c,zeroW:h}}},{key:"initializeStackedPrevVars",value:function(t){t.w.globals.seriesGroups.forEach(function(e){t[e]||(t[e]={}),t[e].prevY=[],t[e].prevX=[],t[e].prevYF=[],t[e].prevXF=[],t[e].prevYVal=[],t[e].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(t){t.w.globals.seriesGroups.forEach(function(e){t[e]||(t[e]={}),t[e].xArrj=[],t[e].xArrjF=[],t[e].xArrjVal=[],t[e].yArrj=[],t[e].yArrjF=[],t[e].yArrjVal=[]})}},{key:"getPathFillColor",value:function(t,e,i,n){var o,r,a,c,h=this.w,d=this.barCtx.ctx.fill,g=null,u=this.barCtx.barOptions.distributed?i:e,p=!1;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(m){t[e][i]>=m.from&&t[e][i]<=m.to&&(g=m.color,p=!0)}),{color:d.fillPath({seriesNumber:this.barCtx.barOptions.distributed?u:n,dataPointIndex:i,color:g,value:t[e][i],fillConfig:null===(o=h.config.series[e].data[i])||void 0===o?void 0:o.fill,fillType:null!==(r=h.config.series[e].data[i])&&void 0!==r&&null!==(a=r.fill)&&void 0!==a&&a.type?null===(c=h.config.series[e].data[i])||void 0===c?void 0:c.fill.type:Array.isArray(h.config.fill.type)?h.config.fill.type[n]:h.config.fill.type}),useRangeColor:p}}},{key:"getStrokeWidth",value:function(t,e,i){var n=0,o=this.w;return this.barCtx.isNullValue=null==this.barCtx.series[t][e]||"bar"===o.config.chart.type&&!this.barCtx.series[t][e],o.config.stroke.show&&(this.barCtx.isNullValue||(n=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[i]:this.barCtx.strokeWidth)),n}},{key:"createBorderRadiusArr",value:function(t){var e,n=!this.w.config.chart.stacked||this.w.config.plotOptions.bar.borderRadius<=0,o=t.length,r=0|(null===(e=t[0])||void 0===e?void 0:e.length),a=Array.from({length:o},function(){return Array(r).fill(n?"top":"none")});if(n)return a;for(var c=0;c<r;c++){for(var h=[],d=[],g=0,u=0;u<o;u++){var p=t[u][c];p>0?(h.push(u),g++):p<0&&(d.push(u),g++)}if(h.length>0&&0===d.length)if(1===h.length)a[h[0]][c]="both";else{var m,f=h[0],b=h[h.length-1],x=Zi(h);try{for(x.s();!(m=x.n()).done;){var v=m.value;a[v][c]=v===f?"bottom":v===b?"top":"none"}}catch(L){x.e(L)}finally{x.f()}}else if(d.length>0&&0===h.length)if(1===d.length)a[d[0]][c]="both";else{var _,w=Math.max.apply(Math,d),y=Math.min.apply(Math,d),k=Zi(d);try{for(k.s();!(_=k.n()).done;){var C=_.value;a[C][c]=C===w?"bottom":C===y?"top":"none"}}catch(L){k.e(L)}finally{k.f()}}else if(h.length>0&&d.length>0){var M,P=h[h.length-1],O=Zi(h);try{for(O.s();!(M=O.n()).done;){var S=M.value;a[S][c]=S===P?"top":"none"}}catch(L){O.e(L)}finally{O.f()}var E,I=Math.max.apply(Math,d),R=Zi(d);try{for(R.s();!(E=R.n()).done;){var T=E.value;a[T][c]=T===I?"bottom":"none"}}catch(L){R.e(L)}finally{R.f()}}else 1===g&&(a[h[0]||d[0]][c]="both")}return a}},{key:"barBackground",value:function(t){var e=t.j,i=t.i,n=t.x1,o=t.x2,r=t.y1,a=t.y2,c=t.elSeries,h=this.w,d=new D(this.barCtx.ctx),g=new ee(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&g===i){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);var p=d.drawRect(void 0!==n?n:0,void 0!==r?r:0,void 0!==o?o:h.globals.gridWidth,void 0!==a?a:h.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,this.barCtx.barOptions.colors.backgroundBarColors[e],this.barCtx.barOptions.colors.backgroundBarOpacity);c.add(p),p.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e,i=t.barWidth,n=t.barXPosition,o=t.y1,r=t.y2,a=t.strokeWidth,c=t.isReversed,h=t.series,d=t.seriesGroup,g=t.realIndex,u=t.i,p=t.j,m=t.w,f=new D(this.barCtx.ctx);(a=Array.isArray(a)?a[g]:a)||(a=0);var b=i,x=n;null!==(e=m.config.series[g].data[p])&&void 0!==e&&e.columnWidthOffset&&(x=n-m.config.series[g].data[p].columnWidthOffset/2,b=i+m.config.series[g].data[p].columnWidthOffset);var v=a/2,_=x+v,w=x+b-v,y=(h[u][p]>=0?1:-1)*(c?-1:1);r+=.001+v*y;var k=f.move(_,o+=.001-v*y),C=f.move(_,o),M=f.line(w,o);if(m.globals.previousPaths.length>0&&(C=this.barCtx.getPreviousPath(g,p,!1)),k=k+f.line(_,r)+f.line(w,r)+M+("around"===m.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[g][p]?" Z":" z"),C=C+f.line(_,o)+M+M+M+M+M+f.line(_,o)+("around"===m.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[g][p]?" Z":" z"),"none"!==this.arrBorderRadius[g][p]&&(k=f.roundPathCorners(k,m.config.plotOptions.bar.borderRadius)),m.config.chart.stacked){var P=this.barCtx;(P=this.barCtx[d]).yArrj.push(r-v*y),P.yArrjF.push(Math.abs(o-r+a*y)),P.yArrjVal.push(this.barCtx.series[u][p])}return{pathTo:k,pathFrom:C}}},{key:"getBarpaths",value:function(t){var e,i=t.barYPosition,n=t.barHeight,o=t.x1,r=t.x2,a=t.strokeWidth,c=t.isReversed,h=t.series,d=t.seriesGroup,g=t.realIndex,u=t.i,p=t.j,m=t.w,f=new D(this.barCtx.ctx);(a=Array.isArray(a)?a[g]:a)||(a=0);var b=i,x=n;null!==(e=m.config.series[g].data[p])&&void 0!==e&&e.barHeightOffset&&(b=i-m.config.series[g].data[p].barHeightOffset/2,x=n+m.config.series[g].data[p].barHeightOffset);var v=a/2,_=b+v,w=b+x-v,y=(h[u][p]>=0?1:-1)*(c?-1:1);r+=.001-v*y;var k=f.move(o+=.001+v*y,_),C=f.move(o,_);m.globals.previousPaths.length>0&&(C=this.barCtx.getPreviousPath(g,p,!1));var M=f.line(o,w);if(k=k+f.line(r,_)+f.line(r,w)+M+("around"===m.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[g][p]?" Z":" z"),C=C+f.line(o,_)+M+M+M+M+M+f.line(o,_)+("around"===m.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[g][p]?" Z":" z"),"none"!==this.arrBorderRadius[g][p]&&(k=f.roundPathCorners(k,m.config.plotOptions.bar.borderRadius)),m.config.chart.stacked){var P=this.barCtx;(P=this.barCtx[d]).xArrj.push(r+v*y),P.xArrjF.push(Math.abs(o-r-a*y)),P.xArrjVal.push(this.barCtx.series[u][p])}return{pathTo:k,pathFrom:C}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,i=this.w,n=0;n<e.length;n++){for(var o=0,r=0;r<e[i.globals.maxValsInArrayIndex].length;r++)o+=e[n][r];0===o&&this.barCtx.zeroSerieses.push(n)}}},{key:"getXForValue",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:e;return null!=t&&(i=e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),i}},{key:"getYForValue",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?null:e;return null!=t&&(n=e-t/this.barCtx.yRatio[i]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[i]:0)),n}},{key:"getGoalValues",value:function(t,e,i,n,o,r){var a=this,c=this.w,h=[],d=function(p,m){var f;h.push((qn(f={},t,"x"===t?a.getXForValue(p,e,!1):a.getYForValue(p,i,r,!1)),qn(f,"attrs",m),f))};if(c.globals.seriesGoals[n]&&c.globals.seriesGoals[n][o]&&Array.isArray(c.globals.seriesGoals[n][o])&&c.globals.seriesGoals[n][o].forEach(function(p){d(p.value,p)}),this.barCtx.barOptions.isDumbbell&&c.globals.seriesRange.length){var g=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:c.globals.colors,u={strokeHeight:"x"===t?0:c.globals.markers.size[n],strokeWidth:"x"===t?c.globals.markers.size[n]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(g[n])?g[n][0]:g[n]};d(c.globals.seriesRangeStart[n][o],u),d(c.globals.seriesRangeEnd[n][o],z(z({},u),{},{strokeColor:Array.isArray(g[n])?g[n][1]:g[n]}))}return h}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,i=t.barYPosition,n=t.goalX,o=t.goalY,r=t.barWidth,a=t.barHeight,c=new D(this.barCtx.ctx),h=c.group({className:"apexcharts-bar-goals-groups"});h.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:h.node}),h.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var d=null;return this.barCtx.isHorizontal?Array.isArray(n)&&n.forEach(function(g){if(g.x>=-1&&g.x<=c.w.globals.gridWidth+1){var u=void 0!==g.attrs.strokeHeight?g.attrs.strokeHeight:a/2,p=i+u+a/2;d=c.drawLine(g.x,p-2*u,g.x,p,g.attrs.strokeColor?g.attrs.strokeColor:void 0,g.attrs.strokeDashArray,g.attrs.strokeWidth?g.attrs.strokeWidth:2,g.attrs.strokeLineCap),h.add(d)}}):Array.isArray(o)&&o.forEach(function(g){if(g.y>=-1&&g.y<=c.w.globals.gridHeight+1){var u=void 0!==g.attrs.strokeWidth?g.attrs.strokeWidth:r/2,p=e+u+r/2;d=c.drawLine(p-2*u,g.y,p,g.y,g.attrs.strokeColor?g.attrs.strokeColor:void 0,g.attrs.strokeDashArray,g.attrs.strokeHeight?g.attrs.strokeHeight:2,g.attrs.strokeLineCap),h.add(d)}}),h}},{key:"drawBarShadow",value:function(t){var e=t.prevPaths,i=t.currPaths,n=t.color,o=this.w,r=e.x,a=e.x1,h=i.x,d=i.x1,g=i.barYPosition,u=e.barYPosition+i.barHeight,p=new D(this.barCtx.ctx),m=new A,f=p.move(a,u)+p.line(r,u)+p.line(h,g)+p.line(d,g)+p.line(a,u)+("around"===o.config.plotOptions.bar.borderRadiusApplication||"both"===this.arrBorderRadius[realIndex][j]?" Z":" z");return p.drawPath({d:f,fill:m.shadeColor(.5,A.rgb2hex(n)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadow apexcharts-decoration-element"})}},{key:"getZeroValueEncounters",value:function(t){var e,i=t.i,n=t.j,o=this.w,r=0,a=0;return(o.config.plotOptions.bar.horizontal?o.globals.series.map(function(c,h){return h}):(null===(e=o.globals.columnSeries)||void 0===e?void 0:e.i.map(function(c){return c}))||[]).forEach(function(c){var h=o.globals.seriesPercent[c][n];h&&r++,c<i&&0===h&&a++}),{nonZeroColumns:r,zeroEncounters:a}}},{key:"getGroupIndex",value:function(t){var e=this.w,i=e.globals.seriesGroups.findIndex(function(r){return r.indexOf(e.globals.seriesNames[t])>-1}),n=this.barCtx.columnGroupIndices,o=n.indexOf(i);return o<0&&(n.push(i),o=n.length-1),{groupIndex:i,columnGroupIndex:o}}}]),s}(),Oi=function(){function s(t,e){N(this,s),this.ctx=t,this.w=t.w;var i=this.w;this.barOptions=i.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=i.config.stroke.width,this.isNullValue=!1,this.isRangeBar=i.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!i.globals.isBarHorizontal&&i.globals.seriesRange.length&&i.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=e,null!==this.xyRatios&&(this.xRatio=e.xRatio,this.yRatio=e.yRatio,this.invertedXRatio=e.invertedXRatio,this.invertedYRatio=e.invertedYRatio,this.baseLineY=e.baseLineY,this.baseLineInvertedY=e.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var n=new ee(this.ctx);this.lastActiveBarSerieIndex=n.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var o=n.getBarSeriesIndices(),r=new kt(this.ctx);this.stackedSeriesTotals=r.getStackedSeriesTotals(this.w.config.series.map(function(a,c){return-1===o.indexOf(c)?c:-1}).filter(function(a){return-1!==a})),this.barHelpers=new Rx(this)}return B(s,[{key:"draw",value:function(t,e){var i=this.w,n=new D(this.ctx),o=new kt(this.ctx,i);t=o.getLogSeries(t),this.series=t,this.yRatio=o.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var r=n.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var a=0,c=0;a<t.length;a++,c++){var h,d,g,u,p=void 0,m=void 0,f=[],b=[],x=i.globals.comboCharts?e[a]:a,v=this.barHelpers.getGroupIndex(x).columnGroupIndex,_=n.group({class:"apexcharts-series",rel:a+1,seriesName:A.escapeString(i.globals.seriesNames[x]),"data:realIndex":x});this.ctx.series.addCollapsedClassToSeries(_,x),t[a].length>0&&(this.visibleI=this.visibleI+1);var w=0,y=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[x],this.translationsIndex=x);var k=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var C=this.barHelpers.initialPositions(x);m=C.y,w=C.barHeight,d=C.yDivision,u=C.zeroW,p=C.x,y=C.barWidth,h=C.xDivision,g=C.zeroH,this.isHorizontal||b.push(p+y/2);var M=n.group({class:"apexcharts-datalabels","data:realIndex":x});i.globals.delayedElements.push({el:M.node}),M.node.classList.add("apexcharts-element-hidden");var P=n.group({class:"apexcharts-bar-goals-markers"}),O=n.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:O.node}),O.node.classList.add("apexcharts-element-hidden");for(var S=0;S<t[a].length;S++){var E=this.barHelpers.getStrokeWidth(a,S,x),I=null,R={indexes:{i:a,j:S,realIndex:x,translationsIndex:k,bc:c},x:p,y:m,strokeWidth:E,elSeries:_};this.isHorizontal?(I=this.drawBarPaths(z(z({},R),{},{barHeight:w,zeroW:u,yDivision:d})),y=this.series[a][S]/this.invertedYRatio):(I=this.drawColumnPaths(z(z({},R),{},{xDivision:h,barWidth:y,zeroH:g})),w=this.series[a][S]/this.yRatio[k]);var T=this.barHelpers.getPathFillColor(t,a,S,x);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&S>0){var L,F=this.barHelpers.drawBarShadow({color:"string"==typeof T.color&&-1===(null===(L=T.color)||void 0===L?void 0:L.indexOf("url"))?T.color:A.hexToRgba(i.globals.colors[a]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:I});O.add(F),i.config.chart.dropShadow.enabled&&new Rt(this.ctx).dropShadow(F,i.config.chart.dropShadow,x)}this.pathArr.push(I);var V=this.barHelpers.drawGoalLine({barXPosition:I.barXPosition,barYPosition:I.barYPosition,goalX:I.goalX,goalY:I.goalY,barHeight:w,barWidth:y});V&&P.add(V),m=I.y,p=I.x,S>0&&b.push(p+y/2),f.push(m),this.renderSeries(z(z({realIndex:x,pathFill:T.color},T.useRangeColor?{lineFill:T.color}:{}),{},{j:S,i:a,columnGroupIndex:v,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:E,elSeries:_,x:p,y:m,series:t,barHeight:Math.abs(I.barHeight?I.barHeight:w),barWidth:Math.abs(I.barWidth?I.barWidth:y),elDataLabelsWrap:M,elGoalsMarkers:P,elBarShadows:O,visibleSeries:this.visibleI,type:"bar"}))}i.globals.seriesXvalues[x]=b,i.globals.seriesYvalues[x]=f,r.add(_)}return r}},{key:"renderSeries",value:function(t){var H,Y,X,e=t.realIndex,i=t.pathFill,n=t.lineFill,o=t.j,r=t.i,a=t.columnGroupIndex,c=t.pathFrom,h=t.pathTo,d=t.strokeWidth,g=t.elSeries,u=t.x,p=t.y,m=t.y1,f=t.y2,b=t.series,x=t.barHeight,v=t.barWidth,_=t.barXPosition,w=t.barYPosition,y=t.elDataLabelsWrap,k=t.elGoalsMarkers,C=t.elBarShadows,M=t.visibleSeries,P=t.type,O=t.classes,S=this.w,E=new D(this.ctx),I=!1;if(!n){var R="function"==typeof S.globals.stroke.colors[e]?(H=e,X=S.config.stroke.colors,Array.isArray(X)&&X.length>0&&((Y=X[H])||(Y=""),"function"==typeof Y)?Y({value:S.globals.series[H][o],dataPointIndex:o,w:S}):Y):S.globals.stroke.colors[e];n=this.barOptions.distributed?S.globals.stroke.colors[o]:R}var T=new Tx(this).handleBarDataLabels({x:u,y:p,y1:m,y2:f,i:r,j:o,series:b,realIndex:e,columnGroupIndex:a,barHeight:x,barWidth:v,barXPosition:_,barYPosition:w,visibleSeries:M});if(S.globals.isBarHorizontal||(T.dataLabelsPos.dataLabelsX+Math.max(v,S.globals.barPadForNumericAxis)<0||T.dataLabelsPos.dataLabelsX-Math.max(v,S.globals.barPadForNumericAxis)>S.globals.gridWidth)&&(I=!0),S.config.series[r].data[o]&&S.config.series[r].data[o].strokeColor&&(n=S.config.series[r].data[o].strokeColor),this.isNullValue&&(i="none"),!I){var F=E.renderPaths({i:r,j:o,realIndex:e,pathFrom:c,pathTo:h,stroke:n,strokeWidth:d,strokeLineCap:S.config.stroke.lineCap,fill:i,animationDelay:o/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(P,"-area ").concat(O),chartType:P});F.attr("clip-path","url(#gridRectBarMask".concat(S.globals.cuid,")"));var V=S.config.forecastDataPoints;V.count>0&&o>=S.globals.dataPoints-V.count&&(F.node.setAttribute("stroke-dasharray",V.dashArray),F.node.setAttribute("stroke-width",V.strokeWidth),F.node.setAttribute("fill-opacity",V.fillOpacity)),void 0!==m&&void 0!==f&&(F.attr("data-range-y1",m),F.attr("data-range-y2",f)),new Rt(this.ctx).setSelectionFilter(F,e,o),g.add(F),F.attr({cy:T.dataLabelsPos.bcy,cx:T.dataLabelsPos.bcx,j:o,val:S.globals.series[r][o],barHeight:x,barWidth:v}),null!==T.dataLabels&&y.add(T.dataLabels),T.totalDataLabels&&y.add(T.totalDataLabels),g.add(y),k&&g.add(k),C&&g.add(C)}return g}},{key:"drawBarPaths",value:function(t){var e,a,i=t.indexes,n=t.barHeight,o=t.strokeWidth,r=t.zeroW,c=t.y,h=t.yDivision,d=t.elSeries,g=this.w,u=i.i,p=i.j;if(g.globals.isXNumeric)e=(c=(g.globals.seriesX[u][p]-g.globals.minX)/this.invertedXRatio-n)+n*this.visibleI;else if(g.config.plotOptions.bar.hideZeroBarsWhenGrouped){var m=this.barHelpers.getZeroValueEncounters({i:u,j:p}),f=m.nonZeroColumns;f>0&&(n=this.seriesLen*n/f),e=c+n*this.visibleI,e-=n*m.zeroEncounters}else e=c+n*this.visibleI;this.isFunnel&&(r-=(this.barHelpers.getXForValue(this.series[u][p],r)-r)/2),a=this.barHelpers.getXForValue(this.series[u][p],r);var x=this.barHelpers.getBarpaths({barYPosition:e,barHeight:n,x1:r,x2:a,strokeWidth:o,isReversed:this.isReversed,series:this.series,realIndex:i.realIndex,i:u,j:p,w:g});return g.globals.isXNumeric||(c+=h),this.barHelpers.barBackground({j:p,i:u,y1:e-n*this.visibleI,y2:n*this.seriesLen,elSeries:d}),{pathTo:x.pathTo,pathFrom:x.pathFrom,x1:r,x:a,y:c,goalX:this.barHelpers.getGoalValues("x",r,null,u,p),barYPosition:e,barHeight:n}}},{key:"drawColumnPaths",value:function(t){var e,o,i=t.indexes,n=t.x,r=t.xDivision,a=t.barWidth,c=t.zeroH,h=t.strokeWidth,d=t.elSeries,g=this.w,u=i.realIndex,p=i.translationsIndex,m=i.i,f=i.j,b=i.bc;if(g.globals.isXNumeric){var x=this.getBarXForNumericXAxis({x:n,j:f,realIndex:u,barWidth:a});n=x.x,e=x.barXPosition}else if(g.config.plotOptions.bar.hideZeroBarsWhenGrouped){var v=this.barHelpers.getZeroValueEncounters({i:m,j:f}),_=v.nonZeroColumns;_>0&&(a=this.seriesLen*a/_),e=n+a*this.visibleI,e-=a*v.zeroEncounters}else e=n+a*this.visibleI;o=this.barHelpers.getYForValue(this.series[m][f],c,p);var y=this.barHelpers.getColumnPaths({barXPosition:e,barWidth:a,y1:c,y2:o,strokeWidth:h,isReversed:this.isReversed,series:this.series,realIndex:u,i:m,j:f,w:g});return g.globals.isXNumeric||(n+=r),this.barHelpers.barBackground({bc:b,j:f,i:m,x1:e-h/2-a*this.visibleI,x2:a*this.seriesLen+h/2,elSeries:d}),{pathTo:y.pathTo,pathFrom:y.pathFrom,x:n,y:o,goalY:this.barHelpers.getGoalValues("y",null,c,m,f,p),barXPosition:e,barWidth:a}}},{key:"getBarXForNumericXAxis",value:function(t){var e=t.x,i=t.barWidth,n=t.realIndex,o=t.j,r=this.w,a=n;return r.globals.seriesX[n].length||(a=r.globals.maxValsInArrayIndex),A.isNumber(r.globals.seriesX[a][o])&&(e=(r.globals.seriesX[a][o]-r.globals.minX)/this.xRatio-i*this.seriesLen/2),{barXPosition:e+i*this.visibleI,x:e}}},{key:"getPreviousPath",value:function(t,e){for(var i=this.w,n="M 0 0",o=0;o<i.globals.previousPaths.length;o++){var r=i.globals.previousPaths[o];r.paths&&r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(t,10)&&void 0!==i.globals.previousPaths[o].paths[e]&&(n=i.globals.previousPaths[o].paths[e].d)}return n}}]),s}(),ah=function(s){Ji(e,Oi);var t=Ki(e);function e(){return N(this,e),t.apply(this,arguments)}return B(e,[{key:"draw",value:function(i,n){var o=this,r=this.w;this.graphics=new D(this.ctx),this.bar=new Oi(this.ctx,this.xyRatios);var a=new kt(this.ctx,r);i=a.getLogSeries(i),this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i),"100%"===r.config.chart.stackType&&(i=r.globals.comboCharts?n.map(function(m){return r.globals.seriesPercent[m]}):r.globals.seriesPercent.slice()),this.series=i,this.barHelpers.initializeStackedPrevVars(this);for(var c=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),h=0,d=0,g=function(m,f){var b=void 0,x=void 0,v=void 0,_=void 0,w=r.globals.comboCharts?n[m]:m,y=o.barHelpers.getGroupIndex(w),k=y.groupIndex,C=y.columnGroupIndex;o.groupCtx=o[r.globals.seriesGroups[k]];var M=[],P=[],O=0;o.yRatio.length>1&&(o.yaxisIndex=r.globals.seriesYAxisReverseMap[w][0],O=w),o.isReversed=r.config.yaxis[o.yaxisIndex]&&r.config.yaxis[o.yaxisIndex].reversed;var S=o.graphics.group({class:"apexcharts-series",seriesName:A.escapeString(r.globals.seriesNames[w]),rel:m+1,"data:realIndex":w});o.ctx.series.addCollapsedClassToSeries(S,w);var E=o.graphics.group({class:"apexcharts-datalabels","data:realIndex":w}),I=o.graphics.group({class:"apexcharts-bar-goals-markers"}),R=0,T=0,L=o.initialPositions(h,d,b,x,v,_,O);d=L.y,x=L.yDivision,_=L.zeroW,h=L.x,T=L.barWidth,b=L.xDivision,v=L.zeroH,r.globals.barHeight=R=L.barHeight,r.globals.barWidth=T,o.barHelpers.initializeStackedXYVars(o),1===o.groupCtx.prevY.length&&o.groupCtx.prevY[0].every(function(bt){return isNaN(bt)})&&(o.groupCtx.prevY[0]=o.groupCtx.prevY[0].map(function(){return v}),o.groupCtx.prevYF[0]=o.groupCtx.prevYF[0].map(function(){return 0}));for(var F=0;F<r.globals.dataPoints;F++){var V=o.barHelpers.getStrokeWidth(m,F,w),H={indexes:{i:m,j:F,realIndex:w,translationsIndex:O,bc:f},strokeWidth:V,x:h,y:d,elSeries:S,columnGroupIndex:C,seriesGroup:r.globals.seriesGroups[k]},Y=null;o.isHorizontal?(Y=o.drawStackedBarPaths(z(z({},H),{},{zeroW:_,barHeight:R,yDivision:x})),T=o.series[m][F]/o.invertedYRatio):(Y=o.drawStackedColumnPaths(z(z({},H),{},{xDivision:b,barWidth:T,zeroH:v})),R=o.series[m][F]/o.yRatio[O]);var X=o.barHelpers.drawGoalLine({barXPosition:Y.barXPosition,barYPosition:Y.barYPosition,goalX:Y.goalX,goalY:Y.goalY,barHeight:R,barWidth:T});X&&I.add(X),d=Y.y,M.push(h=Y.x),P.push(d);var Q=o.barHelpers.getPathFillColor(i,m,F,w),ct="";("bottom"===o.barHelpers.arrBorderRadius[w][F]&&r.globals.series[w][F]>0||"top"===o.barHelpers.arrBorderRadius[w][F]&&r.globals.series[w][F]<0)&&(ct=r.globals.isBarHorizontal?"apexcharts-flip-x":"apexcharts-flip-y"),S=o.renderSeries(z(z({realIndex:w,pathFill:Q.color},Q.useRangeColor?{lineFill:Q.color}:{}),{},{j:F,i:m,columnGroupIndex:C,pathFrom:Y.pathFrom,pathTo:Y.pathTo,strokeWidth:V,elSeries:S,x:h,y:d,series:i,barHeight:R,barWidth:T,elDataLabelsWrap:E,elGoalsMarkers:I,type:"bar",visibleSeries:C,classes:ct}))}r.globals.seriesXvalues[w]=M,r.globals.seriesYvalues[w]=P,o.groupCtx.prevY.push(o.groupCtx.yArrj),o.groupCtx.prevYF.push(o.groupCtx.yArrjF),o.groupCtx.prevYVal.push(o.groupCtx.yArrjVal),o.groupCtx.prevX.push(o.groupCtx.xArrj),o.groupCtx.prevXF.push(o.groupCtx.xArrjF),o.groupCtx.prevXVal.push(o.groupCtx.xArrjVal),c.add(S)},u=0,p=0;u<i.length;u++,p++)g(u,p);return c}},{key:"initialPositions",value:function(i,n,o,r,a,c,h){var d,g,u=this.w;if(this.isHorizontal){r=u.globals.gridHeight/u.globals.dataPoints;var p=u.config.plotOptions.bar.barHeight;d=-1===String(p).indexOf("%")?parseInt(p,10):r*parseInt(p,10)/100,c=u.globals.padHorizontal+(this.isReversed?u.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),n=(r-d)/2}else{g=o=u.globals.gridWidth/u.globals.dataPoints;var m=u.config.plotOptions.bar.columnWidth;u.globals.isXNumeric&&u.globals.dataPoints>1?g=(o=u.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:-1===String(m).indexOf("%")?g=parseInt(m,10):g*=parseInt(m,10)/100,a=this.isReversed?this.baseLineY[h]:u.globals.gridHeight-this.baseLineY[h],i=u.globals.padHorizontal+(o-g)/2}var f=u.globals.barGroups.length||1;return{x:i,y:n,yDivision:r,xDivision:o,barHeight:d/f,barWidth:g/f,zeroH:a,zeroW:c}}},{key:"drawStackedBarPaths",value:function(i){for(var n,h,o=i.indexes,r=i.barHeight,a=i.strokeWidth,c=i.zeroW,d=i.y,u=i.seriesGroup,p=i.yDivision,m=i.elSeries,f=this.w,b=d+i.columnGroupIndex*r,x=o.i,v=o.j,_=o.realIndex,w=o.translationsIndex,y=0,k=0;k<this.groupCtx.prevXF.length;k++)y+=this.groupCtx.prevXF[k][v];var C=x;if(f.config.series[_].name&&(C=u.indexOf(f.config.series[_].name)),C>0){var M=c;this.groupCtx.prevXVal[C-1][v]<0?M=this.series[x][v]>=0?this.groupCtx.prevX[C-1][v]+y-2*(this.isReversed?y:0):this.groupCtx.prevX[C-1][v]:this.groupCtx.prevXVal[C-1][v]>=0&&(M=this.series[x][v]>=0?this.groupCtx.prevX[C-1][v]:this.groupCtx.prevX[C-1][v]-y+2*(this.isReversed?y:0)),n=M}else n=c;var P=this.barHelpers.getBarpaths({barYPosition:b,barHeight:r,x1:n,x2:h=null===this.series[x][v]?n:n+this.series[x][v]/this.invertedYRatio-2*(this.isReversed?this.series[x][v]/this.invertedYRatio:0),strokeWidth:a,isReversed:this.isReversed,series:this.series,realIndex:o.realIndex,seriesGroup:u,i:x,j:v,w:f});return this.barHelpers.barBackground({j:v,i:x,y1:b,y2:r,elSeries:m}),d+=p,{pathTo:P.pathTo,pathFrom:P.pathFrom,goalX:this.barHelpers.getGoalValues("x",c,null,x,v,w),barXPosition:n,barYPosition:b,x:h,y:d}}},{key:"drawStackedColumnPaths",value:function(i){var r,n=i.indexes,o=i.x,a=i.xDivision,c=i.barWidth,h=i.zeroH,g=i.seriesGroup,u=i.elSeries,p=this.w,m=n.i,f=n.j,b=n.bc,x=n.realIndex,v=n.translationsIndex;if(p.globals.isXNumeric){var _=p.globals.seriesX[x][f];_||(_=0),o=(_-p.globals.minX)/this.xRatio-c/2*p.globals.barGroups.length}for(var w,y=o+i.columnGroupIndex*c,k=0,C=0;C<this.groupCtx.prevYF.length;C++)k+=isNaN(this.groupCtx.prevYF[C][f])?0:this.groupCtx.prevYF[C][f];var M=m;if(g&&(M=g.indexOf(p.globals.seriesNames[x])),M>0&&!p.globals.isXNumeric||M>0&&p.globals.isXNumeric&&p.globals.seriesX[x-1][f]===p.globals.seriesX[x][f]){var P,O,S,E=Math.min(this.yRatio.length+1,x+1);if(void 0!==this.groupCtx.prevY[M-1]&&this.groupCtx.prevY[M-1].length)for(var I=1;I<E;I++){var R;if(!isNaN(null===(R=this.groupCtx.prevY[M-I])||void 0===R?void 0:R[f])){S=this.groupCtx.prevY[M-I][f];break}}for(var T=1;T<E;T++){var L,F;if((null===(L=this.groupCtx.prevYVal[M-T])||void 0===L?void 0:L[f])<0){O=this.series[m][f]>=0?S-k+2*(this.isReversed?k:0):S;break}if((null===(F=this.groupCtx.prevYVal[M-T])||void 0===F?void 0:F[f])>=0){O=this.series[m][f]>=0?S:S+k-2*(this.isReversed?k:0);break}}void 0===O&&(O=p.globals.gridHeight),w=null!==(P=this.groupCtx.prevYF[0])&&void 0!==P&&P.every(function(H){return 0===H})&&this.groupCtx.prevYF.slice(1,M).every(function(H){return H.every(function(Y){return isNaN(Y)})})?h:O}else w=h;var V=this.barHelpers.getColumnPaths({barXPosition:y,barWidth:c,y1:w,y2:r=this.series[m][f]?w-this.series[m][f]/this.yRatio[v]+2*(this.isReversed?this.series[m][f]/this.yRatio[v]:0):w,yRatio:this.yRatio[v],strokeWidth:this.strokeWidth,isReversed:this.isReversed,series:this.series,seriesGroup:g,realIndex:n.realIndex,i:m,j:f,w:p});return this.barHelpers.barBackground({bc:b,j:f,i:m,x1:y,x2:c,elSeries:u}),{pathTo:V.pathTo,pathFrom:V.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,h,m,f),barXPosition:y,x:p.globals.isXNumeric?o:o+a,y:r}}}]),e}(),nr=function(s){Ji(e,Oi);var t=Ki(e);function e(){return N(this,e),t.apply(this,arguments)}return B(e,[{key:"draw",value:function(i,n,o){var r=this,a=this.w,c=new D(this.ctx),h=a.globals.comboCharts?n:a.config.chart.type,d=new re(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=a.config.plotOptions.bar.horizontal,this.isOHLC=this.candlestickOptions&&"ohlc"===this.candlestickOptions.type;var g=new kt(this.ctx,a);i=g.getLogSeries(i),this.series=i,this.yRatio=g.getLogYRatios(this.yRatio),this.barHelpers.initVariables(i);for(var u=c.group({class:"apexcharts-".concat(h,"-series apexcharts-plot-series")}),p=function(f){r.isBoxPlot="boxPlot"===a.config.chart.type||"boxPlot"===a.config.series[f].type;var b,x,v,_,w=void 0,y=void 0,k=[],C=[],M=a.globals.comboCharts?o[f]:f,P=r.barHelpers.getGroupIndex(M).columnGroupIndex,O=c.group({class:"apexcharts-series",seriesName:A.escapeString(a.globals.seriesNames[M]),rel:f+1,"data:realIndex":M});r.ctx.series.addCollapsedClassToSeries(O,M),i[f].length>0&&(r.visibleI=r.visibleI+1);var S,E,I=0;r.yRatio.length>1&&(r.yaxisIndex=a.globals.seriesYAxisReverseMap[M][0],I=M);var R=r.barHelpers.initialPositions(M);y=R.y,S=R.barHeight,x=R.yDivision,_=R.zeroW,b=R.xDivision,v=R.zeroH,C.push((w=R.x)+(E=R.barWidth)/2);for(var T=c.group({class:"apexcharts-datalabels","data:realIndex":M}),L=c.group({class:"apexcharts-bar-goals-markers"}),F=function(H){var Y=r.barHelpers.getStrokeWidth(f,H,M),X=null,Q={indexes:{i:f,j:H,realIndex:M,translationsIndex:I},x:w,y,strokeWidth:Y,elSeries:O};X=r.isHorizontal?r.drawHorizontalBoxPaths(z(z({},Q),{},{yDivision:x,barHeight:S,zeroW:_})):r.drawVerticalBoxPaths(z(z({},Q),{},{xDivision:b,barWidth:E,zeroH:v})),y=X.y,w=X.x;var ct=r.barHelpers.drawGoalLine({barXPosition:X.barXPosition,barYPosition:X.barYPosition,goalX:X.goalX,goalY:X.goalY,barHeight:S,barWidth:E});ct&&L.add(ct),H>0&&C.push(w+E/2),k.push(y),X.pathTo.forEach(function($,bt){var K=!r.isBoxPlot&&r.candlestickOptions.wick.useFillColor?X.color[bt]:a.globals.stroke.colors[f],it=d.fillPath({seriesNumber:M,dataPointIndex:H,color:X.color[bt],value:i[f][H]});r.renderSeries({realIndex:M,pathFill:it,lineFill:K,j:H,i:f,pathFrom:X.pathFrom,pathTo:$,strokeWidth:Y,elSeries:O,x:w,y,series:i,columnGroupIndex:P,barHeight:S,barWidth:E,elDataLabelsWrap:T,elGoalsMarkers:L,visibleSeries:r.visibleI,type:a.config.chart.type})})},V=0;V<a.globals.dataPoints;V++)F(V);a.globals.seriesXvalues[M]=C,a.globals.seriesYvalues[M]=k,u.add(O)},m=0;m<i.length;m++)p(m);return u}},{key:"drawVerticalBoxPaths",value:function(i){var n=i.indexes,o=i.x,r=i.xDivision,a=i.barWidth,c=i.zeroH,h=i.strokeWidth,d=this.w,g=new D(this.ctx),u=n.i,p=n.j,m=d.config.plotOptions.candlestick.colors,f=this.boxOptions.colors,b=n.realIndex,x=function(V){return Array.isArray(V)?V[b]:V},v=x(m.upward),_=x(m.downward),w=this.yRatio[n.translationsIndex],y=this.getOHLCValue(b,p),k=c,C=c,M=y.o<y.c?[v]:[_];this.isBoxPlot&&(M=[x(f.lower),x(f.upper)]);var P=Math.min(y.o,y.c),O=Math.max(y.o,y.c),S=y.m;d.globals.isXNumeric&&(o=(d.globals.seriesX[b][p]-d.globals.minX)/this.xRatio-a/2);var E=o+a*this.visibleI;null==this.series[u][p]?(P=c,O=c):(P=c-P/w,O=c-O/w,k=c-y.h/w,C=c-y.l/w,S=c-y.m/w);var I=g.move(E,c),R=g.move(E+a/2,P);if(d.globals.previousPaths.length>0&&(R=this.getPreviousPath(b,p,!0)),this.isOHLC){var T=E+a/2,L=c-y.o/w,F=c-y.c/w;I=[g.move(T,k)+g.line(T,C)+g.move(T,L)+g.line(E,L)+g.move(T,F)+g.line(E+a,F)]}else I=this.isBoxPlot?[g.move(E,P)+g.line(E+a/2,P)+g.line(E+a/2,k)+g.line(E+a/4,k)+g.line(E+a-a/4,k)+g.line(E+a/2,k)+g.line(E+a/2,P)+g.line(E+a,P)+g.line(E+a,S)+g.line(E,S)+g.line(E,P+h/2),g.move(E,S)+g.line(E+a,S)+g.line(E+a,O)+g.line(E+a/2,O)+g.line(E+a/2,C)+g.line(E+a-a/4,C)+g.line(E+a/4,C)+g.line(E+a/2,C)+g.line(E+a/2,O)+g.line(E,O)+g.line(E,S)+"z"]:[g.move(E,O)+g.line(E+a/2,O)+g.line(E+a/2,k)+g.line(E+a/2,O)+g.line(E+a,O)+g.line(E+a,P)+g.line(E+a/2,P)+g.line(E+a/2,C)+g.line(E+a/2,P)+g.line(E,P)+g.line(E,O-h/2)];return R+=g.move(E,P),d.globals.isXNumeric||(o+=r),{pathTo:I,pathFrom:R,x:o,y:O,goalY:this.barHelpers.getGoalValues("y",null,c,u,p,n.translationsIndex),barXPosition:E,color:M}}},{key:"drawHorizontalBoxPaths",value:function(i){var n=i.indexes,o=i.y,r=i.yDivision,a=i.barHeight,c=i.zeroW,h=i.strokeWidth,d=this.w,g=new D(this.ctx),u=n.i,p=n.j,m=this.boxOptions.colors.lower;this.isBoxPlot&&(m=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var f=this.invertedYRatio,b=n.realIndex,x=this.getOHLCValue(b,p),v=c,_=c,w=Math.min(x.o,x.c),y=Math.max(x.o,x.c),k=x.m;d.globals.isXNumeric&&(o=(d.globals.seriesX[b][p]-d.globals.minX)/this.invertedXRatio-a/2);var C=o+a*this.visibleI;null==this.series[u][p]?(w=c,y=c):(w=c+w/f,y=c+y/f,v=c+x.h/f,_=c+x.l/f,k=c+x.m/f);var M=g.move(c,C),P=g.move(w,C+a/2);return d.globals.previousPaths.length>0&&(P=this.getPreviousPath(b,p,!0)),M=[g.move(w,C)+g.line(w,C+a/2)+g.line(v,C+a/2)+g.line(v,C+a/2-a/4)+g.line(v,C+a/2+a/4)+g.line(v,C+a/2)+g.line(w,C+a/2)+g.line(w,C+a)+g.line(k,C+a)+g.line(k,C)+g.line(w+h/2,C),g.move(k,C)+g.line(k,C+a)+g.line(y,C+a)+g.line(y,C+a/2)+g.line(_,C+a/2)+g.line(_,C+a-a/4)+g.line(_,C+a/4)+g.line(_,C+a/2)+g.line(y,C+a/2)+g.line(y,C)+g.line(k,C)+"z"],P+=g.move(w,C),d.globals.isXNumeric||(o+=r),{pathTo:M,pathFrom:P,x:y,y:o,goalX:this.barHelpers.getGoalValues("x",c,null,u,p),barYPosition:C,color:m}}},{key:"getOHLCValue",value:function(i,n){var o=this.w,r=new kt(this.ctx,o),a=r.getLogValAtSeriesIndex(o.globals.seriesCandleH[i][n],i),c=r.getLogValAtSeriesIndex(o.globals.seriesCandleO[i][n],i),h=r.getLogValAtSeriesIndex(o.globals.seriesCandleM[i][n],i),d=r.getLogValAtSeriesIndex(o.globals.seriesCandleC[i][n],i),g=r.getLogValAtSeriesIndex(o.globals.seriesCandleL[i][n],i);return{o:this.isBoxPlot?a:c,h:this.isBoxPlot?c:a,m:h,l:this.isBoxPlot?d:g,c:this.isBoxPlot?g:d}}}]),e}(),lh=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,i=t.config.plotOptions[t.config.chart.type];return i.colorScale.ranges.length>0&&i.colorScale.ranges.map(function(n,o){n.from<=0&&(e=!0)}),e}},{key:"getShadeColor",value:function(t,e,i,n){var o=this.w,r=1,a=o.config.plotOptions[t].shadeIntensity,c=this.determineColor(t,e,i);o.globals.hasNegs||n?r=o.config.plotOptions[t].reverseNegativeShade?c.percent<0?c.percent/100*(1.25*a):1.25*a*(1-c.percent/100):c.percent<=0?1-(1+c.percent/100)*a:(1-c.percent/100)*a:(r=1-c.percent/100,"treemap"===t&&(r=1.25*a*(1-c.percent/100)));var h=c.color,d=new A;if(o.config.plotOptions[t].enableShades)if("dark"===this.w.config.theme.mode){var g=d.shadeColor(-1*r,c.color);h=A.hexToRgba(A.isColorHex(g)?g:A.rgb2hex(g),o.config.fill.opacity)}else{var u=d.shadeColor(r,c.color);h=A.hexToRgba(A.isColorHex(u)?u:A.rgb2hex(u),o.config.fill.opacity)}return{color:h,colorProps:c}}},{key:"determineColor",value:function(t,e,i){var n=this.w,o=n.globals.series[e][i],r=n.config.plotOptions[t],a=r.colorScale.inverse?i:e;r.distributed&&"treemap"===n.config.chart.type&&(a=i);var c=n.globals.colors[a],h=null,d=Math.min.apply(Math,At(n.globals.series[e])),g=Math.max.apply(Math,At(n.globals.series[e]));r.distributed||"heatmap"!==t||(d=n.globals.minY,g=n.globals.maxY),void 0!==r.colorScale.min&&(d=r.colorScale.min<n.globals.minY?r.colorScale.min:n.globals.minY,g=r.colorScale.max>n.globals.maxY?r.colorScale.max:n.globals.maxY);var u=Math.abs(g)+Math.abs(d),p=100*o/(0===u?u-1e-6:u);return r.colorScale.ranges.length>0&&r.colorScale.ranges.map(function(m,f){if(o>=m.from&&o<=m.to){c=m.color,h=m.foreColor?m.foreColor:null,d=m.from,g=m.to;var b=Math.abs(g)+Math.abs(d);p=100*o/(0===b?b-1e-6:b)}}),{color:c,foreColor:h,percent:p}}},{key:"calculateDataLabels",value:function(t){var e=t.text,i=t.x,n=t.y,o=t.i,r=t.j,a=t.colorProps,c=t.fontSize,h=this.w.config.dataLabels,d=new D(this.ctx),g=new Pi(this.ctx),u=null;if(h.enabled){u=d.group({class:"apexcharts-data-labels"});var m=h.offsetY,f=i+h.offsetX,b=n+parseFloat(h.style.fontSize)/3+m;g.plotDataLabelsText({x:f,y:b,text:e,i:o,j:r,color:a.foreColor,parent:u,fontSize:c,dataLabelsConfig:h})}return u}},{key:"addListeners",value:function(t){var e=new D(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),s}(),Lx=function(){function s(t,e){N(this,s),this.ctx=t,this.w=t.w,this.xRatio=e.xRatio,this.yRatio=e.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new lh(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return B(s,[{key:"draw",value:function(t){var e=this.w,i=new D(this.ctx),n=i.group({class:"apexcharts-heatmap"});n.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var o=e.globals.gridWidth/e.globals.dataPoints,r=e.globals.gridHeight/e.globals.series.length,a=0,c=!1;this.negRange=this.helpers.checkColorRange();var h=t.slice();e.config.yaxis[0].reversed&&(c=!0,h.reverse());for(var d=c?0:h.length-1;c?d<h.length:d>=0;c?d++:d--){var g=i.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:A.escapeString(e.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});if(this.ctx.series.addCollapsedClassToSeries(g,d),e.config.chart.dropShadow.enabled){var u=e.config.chart.dropShadow;new Rt(this.ctx).dropShadow(g,u,d)}for(var p=0,m=e.config.plotOptions.heatmap.shadeIntensity,f=0,b=0;b<e.globals.dataPoints;b++)if(e.globals.seriesX.length&&!e.globals.allSeriesHasEqualX&&e.globals.minX+e.globals.minXDiff*b<e.globals.seriesX[d][f])p+=o;else{if(f>=h[d].length)break;var x=this.helpers.getShadeColor(e.config.chart.type,d,f,this.negRange),v=x.color,_=x.colorProps;"image"===e.config.fill.type&&(v=new re(this.ctx).fillPath({seriesNumber:d,dataPointIndex:f,opacity:e.globals.hasNegs?_.percent<0?1-(1+_.percent/100):m+_.percent/100:_.percent/100,patternID:A.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:o,height:e.config.fill.image.height?e.config.fill.image.height:r}));var y=i.drawRect(p,a,o,r,this.rectRadius);if(y.attr({cx:p,cy:a}),y.node.classList.add("apexcharts-heatmap-rect"),g.add(y),y.attr({fill:v,i:d,index:d,j:f,val:t[d][f],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?v:e.globals.stroke.colors[0],color:v}),this.helpers.addListeners(y),e.config.chart.animations.enabled&&!e.globals.dataChanged){var k=1;e.globals.resized||(k=e.config.chart.animations.speed),this.animateHeatMap(y,p,a,o,r,k)}if(e.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){C=this.dynamicAnim.speed;var M=e.globals.previousPaths[d]&&e.globals.previousPaths[d][f]&&e.globals.previousPaths[d][f].color;M||(M="rgba(255, 255, 255, 0)"),this.animateHeatColor(y,A.isColorHex(M)?M:A.rgb2hex(M),A.isColorHex(v)?v:A.rgb2hex(v),C)}}var P=(0,e.config.dataLabels.formatter)(e.globals.series[d][f],{value:e.globals.series[d][f],seriesIndex:d,dataPointIndex:f,w:e}),O=this.helpers.calculateDataLabels({text:P,x:p+o/2,y:a+r/2,i:d,j:f,colorProps:_,series:h});null!==O&&g.add(O),p+=o,f++}a+=r,n.add(g)}var S=e.globals.yAxisScale[0].result.slice();return e.config.yaxis[0].reversed?S.unshift(""):S.push(""),e.globals.yAxisScale[0].result=S,n}},{key:"animateHeatMap",value:function(t,e,i,n,o,r){var a=new bi(this.ctx);a.animateRect(t,{x:e+n/2,y:i+o/2,width:0,height:0},{x:e,y:i,width:n,height:o},r,function(){a.animationCompleted(t)})}},{key:"animateHeatColor",value:function(t,e,i,n){t.attr({fill:e}).animate(n).attr({fill:i})}}]),s}(),ch=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"drawYAxisTexts",value:function(t,e,i,n){var o=this.w,r=o.config.yaxis[0],a=o.globals.yLabelFormatters[0];return new D(this.ctx).drawText({x:t+r.labels.offsetX,y:e+r.labels.offsetY,text:a(n,i),textAnchor:"middle",fontSize:r.labels.style.fontSize,fontFamily:r.labels.style.fontFamily,foreColor:Array.isArray(r.labels.style.colors)?r.labels.style.colors[i]:r.labels.style.colors})}}]),s}(),hh=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w;var e=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==e.globals.stroke.colors?e.globals.stroke.colors:e.globals.colors,this.defaultSize=Math.min(e.globals.gridWidth,e.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=e.globals.gridWidth/2,this.fullAngle="radialBar"===e.config.chart.type?360:Math.abs(e.config.plotOptions.pie.endAngle-e.config.plotOptions.pie.startAngle),this.initialAngle=e.config.plotOptions.pie.startAngle%this.fullAngle,e.globals.radialSize=this.defaultSize/2.05-e.config.stroke.width-(e.config.chart.sparkline.enabled?0:e.config.chart.dropShadow.blur),this.donutSize=e.globals.radialSize*parseInt(e.config.plotOptions.pie.donut.size,10)/100;var i=e.config.plotOptions.pie.customScale,n=e.globals.gridWidth/2,o=e.globals.gridHeight/2;this.translateX=n-n*i,this.translateY=o-o*i,this.dataLabelsGroup=new D(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return B(s,[{key:"draw",value:function(t){var e=this,i=this.w,n=new D(this.ctx),o=n.group({class:"apexcharts-pie"});if(i.globals.noData)return o;for(var r=0,a=0;a<t.length;a++)r+=A.negToZero(t[a]);var c=[],h=n.group();0===r&&(r=1e-5),t.forEach(function(_){e.maxY=Math.max(e.maxY,_)}),i.config.yaxis[0].max&&(this.maxY=i.config.yaxis[0].max),"back"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(o);for(var d=0;d<t.length;d++){var g=this.fullAngle*A.negToZero(t[d])/r;c.push(g),"polarArea"===this.chartType?(c[d]=this.fullAngle/t.length,this.sliceSizes.push(i.globals.radialSize*t[d]/this.maxY)):this.sliceSizes.push(i.globals.radialSize)}if(i.globals.dataChanged){for(var u,p=0,m=0;m<i.globals.previousPaths.length;m++)p+=A.negToZero(i.globals.previousPaths[m]);for(var f=0;f<i.globals.previousPaths.length;f++)u=this.fullAngle*A.negToZero(i.globals.previousPaths[f])/p,this.prevSectorAngleArr.push(u)}if(this.donutSize<0&&(this.donutSize=0),"donut"===this.chartType){var b=n.drawCircle(this.donutSize);b.attr({cx:this.centerX,cy:this.centerY,fill:i.config.plotOptions.pie.donut.background?i.config.plotOptions.pie.donut.background:"transparent"}),h.add(b)}var x=this.drawArcs(c,t);if(this.sliceLabels.forEach(function(_){x.add(_)}),h.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(i.config.plotOptions.pie.customScale,")")}),h.add(x),o.add(h),this.donutDataLabels.show){var v=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});o.add(v)}return"front"===i.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(o),o}},{key:"drawArcs",value:function(t,e){var i=this.w,n=new Rt(this.ctx),o=new D(this.ctx),r=new re(this.ctx),a=o.group({class:"apexcharts-slices"}),c=this.initialAngle,h=this.initialAngle,d=this.initialAngle,g=this.initialAngle;this.strokeWidth=i.config.stroke.show?i.config.stroke.width:0;for(var u=0;u<t.length;u++){var p=o.group({class:"apexcharts-series apexcharts-pie-series",seriesName:A.escapeString(i.globals.seriesNames[u]),rel:u+1,"data:realIndex":u});a.add(p),d=(c=d)+t[u],g=(h=g)+this.prevSectorAngleArr[u];var m=d<c?this.fullAngle+d-c:d-c,f=r.fillPath({seriesNumber:u,size:this.sliceSizes[u],value:e[u]}),b=this.getChangedPath(h,g),x=o.drawPath({d:b,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[u]:this.lineColorArr,strokeWidth:0,fill:f,fillOpacity:i.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(u)});x.attr({index:0,j:u}),n.setSelectionFilter(x,0,u),i.config.chart.dropShadow.enabled&&n.dropShadow(x,i.config.chart.dropShadow,u),this.addListeners(x,this.donutDataLabels),D.setAttrs(x.node,{"data:angle":m,"data:startAngle":c,"data:strokeWidth":this.strokeWidth,"data:value":e[u]});var _={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?_=A.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize/1.25+i.config.plotOptions.pie.dataLabels.offset,(c+m/2)%this.fullAngle):"donut"===this.chartType&&(_=A.polarToCartesian(this.centerX,this.centerY,(i.globals.radialSize+this.donutSize)/2+i.config.plotOptions.pie.dataLabels.offset,(c+m/2)%this.fullAngle)),p.add(x);var w=0;if(!this.initialAnim||i.globals.resized||i.globals.dataChanged?this.animBeginArr.push(0):(0==(w=m/this.fullAngle*i.config.chart.animations.speed)&&(w=1),this.animDur=w+this.animDur,this.animBeginArr.push(this.animDur)),this.animatePaths(x,this.dynamicAnim&&i.globals.dataChanged?{size:this.sliceSizes[u],endAngle:d,startAngle:c,prevStartAngle:h,prevEndAngle:g,animateStartingPos:!0,i:u,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:i.config.chart.animations.dynamicAnimation.speed}:{size:this.sliceSizes[u],endAngle:d,startAngle:c,i:u,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:w}),i.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&x.node.addEventListener("mouseup",this.pieClicked.bind(this,u)),void 0!==i.globals.selectedDataPoints[0]&&i.globals.selectedDataPoints[0].indexOf(u)>-1&&this.pieClicked(u),i.config.dataLabels.enabled){var y=_.x,k=_.y,C=100*m/this.fullAngle+"%";if(0!==m&&i.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[u]){var M=i.config.dataLabels.formatter;void 0!==M&&(C=M(i.globals.seriesPercent[u][0],{seriesIndex:u,w:i}));var P=i.globals.dataLabels.style.colors[u],O=o.group({class:"apexcharts-datalabels"}),S=o.drawText({x:y,y:k,text:C,textAnchor:"middle",fontSize:i.config.dataLabels.style.fontSize,fontFamily:i.config.dataLabels.style.fontFamily,fontWeight:i.config.dataLabels.style.fontWeight,foreColor:P});O.add(S),i.config.dataLabels.dropShadow.enabled&&n.dropShadow(S,i.config.dataLabels.dropShadow),S.node.classList.add("apexcharts-pie-label"),i.config.chart.animations.animate&&!1===i.globals.resized&&(S.node.classList.add("apexcharts-pie-label-delay"),S.node.style.animationDelay=i.config.chart.animations.speed/940+"s"),this.sliceLabels.push(O)}}}return a}},{key:"addListeners",value:function(t,e){var i=new D(this.ctx);t.node.addEventListener("mouseenter",i.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",i.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",i.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var n=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,o=n,r=e.startAngle,a=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(r=e.prevEndAngle,o=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===this.w.config.series.length-1&&(n+a>this.fullAngle?e.endAngle=e.endAngle-(n+a):n+a<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(n+a)))),n===this.fullAngle&&(n=this.fullAngle-.01),this.animateArc(t,r,a,n,o,e)}},{key:"animateArc",value:function(t,e,i,n,o,r){var a,c=this,h=this.w,d=new bi(this.ctx),g=r.size;(isNaN(e)||isNaN(o))&&(e=i,o=n,r.dur=0);var u=n,p=i,m=e<i?this.fullAngle+e-i:e-i;h.globals.dataChanged&&r.shouldSetPrevPaths&&r.prevEndAngle&&(a=c.getPiePath({me:c,startAngle:r.prevStartAngle,angle:r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle,size:g}),t.attr({d:a})),0!==r.dur?t.animate(r.dur,r.animBeginArr[r.i]).after(function(){"pie"!==c.chartType&&"donut"!==c.chartType&&"polarArea"!==c.chartType||this.animate(h.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":c.strokeWidth}),r.i===h.config.series.length-1&&d.animationCompleted(t)}).during(function(f){u=m+(n-m)*f,r.animateStartingPos&&(u=o+(n-o)*f,p=e-o+(i-(e-o))*f),a=c.getPiePath({me:c,startAngle:p,angle:u,size:g}),t.node.setAttribute("data:pathOrig",a),t.attr({d:a})}):(a=c.getPiePath({me:c,startAngle:p,angle:n,size:g}),r.isTrack||(h.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",a),t.attr({d:a,"stroke-width":c.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,i=this.w,n=this,o=n.sliceSizes[t]+(i.config.plotOptions.pie.expandOnClick?4:0),r=i.globals.dom.Paper.findOne(".apexcharts-".concat(n.chartType.toLowerCase(),"-slice-").concat(t));if("true"!==r.attr("data:pieClicked")){var a=i.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(a,function(g){g.setAttribute("data:pieClicked","false");var u=g.getAttribute("data:pathOrig");u&&g.setAttribute("d",u)}),i.globals.capturedDataPointIndex=t,r.attr("data:pieClicked","true");var c=parseInt(r.attr("data:startAngle"),10),h=parseInt(r.attr("data:angle"),10);e=n.getPiePath({me:n,startAngle:c,angle:h,size:o}),360!==h&&r.plot(e)}else{r.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(r.node,this.donutDataLabels);var d=r.attr("data:pathOrig");r.attr({d})}}},{key:"getChangedPath",value:function(t,e){var i="";return this.dynamicAnim&&this.w.globals.dataChanged&&(i=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),i}},{key:"getPiePath",value:function(t){var e,i=t.me,n=t.startAngle,o=t.angle,r=t.size,a=new D(this.ctx),c=n,h=Math.PI*(c-90)/180,d=o+n;Math.ceil(d)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(d=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(d)>this.fullAngle&&(d-=this.fullAngle);var g=Math.PI*(d-90)/180,u=i.centerX+r*Math.cos(h),p=i.centerY+r*Math.sin(h),m=i.centerX+r*Math.cos(g),f=i.centerY+r*Math.sin(g),b=A.polarToCartesian(i.centerX,i.centerY,i.donutSize,d),x=A.polarToCartesian(i.centerX,i.centerY,i.donutSize,c),v=o>180?1:0,_=["M",u,p,"A",r,r,0,v,1,m,f];return e="donut"===i.chartType?[].concat(_,["L",b.x,b.y,"A",i.donutSize,i.donutSize,0,v,0,x.x,x.y,"L",u,p,"z"]).join(" "):"pie"===i.chartType||"polarArea"===i.chartType?[].concat(_,["L",i.centerX,i.centerY,"L",u,p]).join(" "):[].concat(_).join(" "),a.roundPathCorners(e,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(t){var e=this.w,i=new eh(this.ctx),n=new D(this.ctx),o=new ch(this.ctx),r=n.group(),a=n.group(),c=i.niceScale(0,Math.ceil(this.maxY),0),h=c.result.reverse(),d=c.result.length;this.maxY=c.niceMax;for(var g=e.globals.radialSize,u=g/(d-1),p=0;p<d-1;p++){var m=n.drawCircle(g);if(m.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var f=o.drawYAxisTexts(this.centerX,this.centerY-g+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,p,h[p]);a.add(f)}r.add(m),g-=u}this.drawSpokes(t),t.add(r),t.add(a)}},{key:"renderInnerDataLabels",value:function(t,e,i){var n=this.w,o=new D(this.ctx),r=e.total.show;t.node.innerHTML="",t.node.style.opacity=i.opacity;var a,c,h=i.centerX,d=this.donutDataLabels.total.label?i.centerY:i.centerY-i.centerY/6;a=void 0===e.name.color?n.globals.colors[0]:e.name.color;var g=e.name.fontSize,u=e.name.fontFamily,p=e.name.fontWeight;c=void 0===e.value.color?n.config.chart.foreColor:e.value.color;var m=e.value.formatter,f="",b="";if(r?(a=e.total.color,g=e.total.fontSize,u=e.total.fontFamily,p=e.total.fontWeight,b=this.donutDataLabels.total.label?e.total.label:"",f=e.total.formatter(n)):1===n.globals.series.length&&(f=m(n.globals.series[0],n),b=n.globals.seriesNames[0]),b&&(b=e.name.formatter(b,e.total.show,n)),e.name.show){var x=o.drawText({x:h,y:d+parseFloat(e.name.offsetY),text:b,textAnchor:"middle",foreColor:a,fontSize:g,fontWeight:p,fontFamily:u});x.node.classList.add("apexcharts-datalabel-label"),t.add(x)}if(e.value.show){var v=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,_=o.drawText({x:h,y:d+v,text:f,textAnchor:"middle",foreColor:c,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});_.node.classList.add("apexcharts-datalabel-value"),t.add(_)}return t}},{key:"printInnerLabels",value:function(t,e,i,n){var o,r=this.w;n?o=void 0===t.name.color?r.globals.colors[parseInt(n.parentNode.getAttribute("rel"),10)-1]:t.name.color:r.globals.series.length>1&&t.total.show&&(o=t.total.color);var a=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),c=r.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");i=(0,t.value.formatter)(i,r),n||"function"!=typeof t.total.formatter||(i=t.total.formatter(r)),e=this.donutDataLabels.total.label?t.name.formatter(e,e===t.total.label,r):"",null!==a&&(a.textContent=e),null!==c&&(c.textContent=i),null!==a&&(a.style.fill=o)}},{key:"printDataLabelsInner",value:function(t,e){var i=this.w,n=t.getAttribute("data:value"),o=i.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];i.globals.series.length>1&&this.printInnerLabels(e,o,n,t);var r=i.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==r&&(r.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,i=this.w,n=new D(this.ctx),o=i.config.plotOptions.polarArea.spokes;if(0!==o.strokeWidth){for(var r=[],a=360/i.globals.series.length,c=0;c<i.globals.series.length;c++)r.push(A.polarToCartesian(this.centerX,this.centerY,i.globals.radialSize,i.config.plotOptions.pie.startAngle+a*c));r.forEach(function(h,d){var g=n.drawLine(h.x,h.y,e.centerX,e.centerY,Array.isArray(o.connectorColors)?o.connectorColors[d]:o.connectorColors);t.add(g)})}}},{key:"revertDataLabelsInner",value:function(){var t=this.w;if(this.donutDataLabels.show){var e=t.globals.dom.Paper.findOne(".apexcharts-datalabels-group"),i=this.renderInnerDataLabels(e,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});t.globals.dom.Paper.findOne(".apexcharts-radialbar, .apexcharts-pie").add(i)}}}]),s}(),Dx=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var e=this.w;this.graphics=new D(this.ctx),this.lineColorArr=void 0!==e.globals.stroke.colors?e.globals.stroke.colors:e.globals.colors,this.defaultSize=e.globals.svgHeight<e.globals.svgWidth?e.globals.gridHeight:e.globals.gridWidth,this.isLog=e.config.yaxis[0].logarithmic,this.logBase=e.config.yaxis[0].logBase,this.coreUtils=new kt(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,e.globals.maxY,0):e.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):e.globals.minY,this.polygons=e.config.plotOptions.radar.polygons,this.strokeWidth=e.config.stroke.show?e.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-e.config.chart.dropShadow.blur,e.config.xaxis.labels.show&&(this.size=this.size-e.globals.xAxisLabelsWidth/1.75),void 0!==e.config.plotOptions.radar.size&&(this.size=e.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return B(s,[{key:"draw",value:function(t){var e=this,i=this.w,n=new re(this.ctx),o=[],r=new Pi(this.ctx);t.length&&(this.dataPointsLen=t[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var d=i.globals.gridHeight/2+i.config.plotOptions.radar.offsetY,g=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(i.globals.gridWidth/2+i.config.plotOptions.radar.offsetX||0,", ").concat(d||0,")")}),u=[],p=null,m=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach(function(b,x){var v=b.length===i.globals.dataPoints,_=e.graphics.group().attr({class:"apexcharts-series","data:longestSeries":v,seriesName:A.escapeString(i.globals.seriesNames[x]),rel:x+1,"data:realIndex":x});e.dataRadiusOfPercent[x]=[],e.dataRadius[x]=[],e.angleArr[x]=[],b.forEach(function(I,R){var T=Math.abs(e.maxValue-e.minValue);I-=e.minValue,e.isLog&&(I=e.coreUtils.getLogVal(e.logBase,I,0)),e.dataRadiusOfPercent[x][R]=I/T,e.dataRadius[x][R]=e.dataRadiusOfPercent[x][R]*e.size,e.angleArr[x][R]=R*e.disAngle}),u=e.getDataPointsPos(e.dataRadius[x],e.angleArr[x]);var w=e.createPaths(u,{x:0,y:0});p=e.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),m=e.graphics.group({class:"apexcharts-datalabels","data:realIndex":x}),i.globals.delayedElements.push({el:p.node,index:x});var y={i:x,realIndex:x,animationDelay:x,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[x],strokeLineCap:i.config.stroke.lineCap},k=null;i.globals.previousPaths.length>0&&(k=e.getPreviousPath(x));for(var C=0;C<w.linePathsTo.length;C++){var M=e.graphics.renderPaths(z(z({},y),{},{pathFrom:null===k?w.linePathsFrom[C]:k,pathTo:w.linePathsTo[C],strokeWidth:Array.isArray(e.strokeWidth)?e.strokeWidth[x]:e.strokeWidth,fill:"none",drawShadow:!1}));_.add(M);var P=n.fillPath({seriesNumber:x}),O=e.graphics.renderPaths(z(z({},y),{},{pathFrom:null===k?w.areaPathsFrom[C]:k,pathTo:w.areaPathsTo[C],strokeWidth:0,fill:P,drawShadow:!1}));i.config.chart.dropShadow.enabled&&new Rt(e.ctx).dropShadow(O,Object.assign({},i.config.chart.dropShadow,{noUserSpaceOnUse:!0}),x),_.add(O)}b.forEach(function(I,R){var T=new Mi(e.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:x,dataPointIndex:R}),L=e.graphics.drawMarker(u[R].x,u[R].y,T);L.attr("rel",R),L.attr("j",R),L.attr("index",x),L.node.setAttribute("default-marker-size",T.pSize);var F=e.graphics.group({class:"apexcharts-series-markers"});F&&F.add(L),p.add(F),_.add(p);var V=i.config.dataLabels;if(V.enabled){var H=V.formatter(i.globals.series[x][R],{seriesIndex:x,dataPointIndex:R,w:i});r.plotDataLabelsText({x:u[R].x,y:u[R].y,text:H,textAnchor:"middle",i:x,j:x,parent:m,offsetCorrection:!1,dataLabelsConfig:z({},V)})}_.add(m)}),o.push(_)}),this.drawPolygons({parent:g}),i.config.xaxis.labels.show){var f=this.drawXAxisTexts();g.add(f)}return o.forEach(function(b){g.add(b)}),g.add(this.yaxisLabels),g}},{key:"drawPolygons",value:function(t){for(var e=this,i=this.w,n=t.parent,o=new ch(this.ctx),r=i.globals.yAxisScale[0].result.reverse(),a=r.length,c=[],h=this.size/(a-1),d=0;d<a;d++)c[d]=h*d;c.reverse();var g=[],u=[];c.forEach(function(p,m){var f=A.getPolygonPos(p,e.dataPointsLen),b="";f.forEach(function(x,v){if(0===m){var _=e.graphics.drawLine(x.x,x.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[v]:e.polygons.connectorColors);u.push(_)}0===v&&e.yaxisLabelsTextsPos.push({x:x.x,y:x.y}),b+=x.x+","+x.y+" "}),g.push(b)}),g.forEach(function(p,m){var f=e.polygons.strokeColors,b=e.polygons.strokeWidth,x=e.graphics.drawPolygon(p,Array.isArray(f)?f[m]:f,Array.isArray(b)?b[m]:b,i.globals.radarPolygons.fill.colors[m]);n.add(x)}),u.forEach(function(p){n.add(p)}),i.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(p,m){var f=o.drawYAxisTexts(p.x,p.y,m,r[m]);e.yaxisLabels.add(f)})}},{key:"drawXAxisTexts",value:function(){var t=this,e=this.w,i=e.config.xaxis.labels,n=this.graphics.group({class:"apexcharts-xaxis"}),o=A.getPolygonPos(this.size,this.dataPointsLen);return e.globals.labels.forEach(function(r,a){var c=e.config.xaxis.labels.formatter,h=new Pi(t.ctx);if(o[a]){var d=t.getTextPos(o[a],t.size),g=c(r,{seriesIndex:-1,dataPointIndex:a,w:e});h.plotDataLabelsText({x:d.newX,y:d.newY,text:g,textAnchor:d.textAnchor,i:a,j:a,parent:n,className:"apexcharts-xaxis-label",color:Array.isArray(i.style.colors)&&i.style.colors[a]?i.style.colors[a]:"#a8a8a8",dataLabelsConfig:z({textAnchor:d.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1}).on("click",function(u){if("function"==typeof e.config.chart.events.xAxisLabelClick){var p=Object.assign({},e,{labelIndex:a});e.config.chart.events.xAxisLabelClick(u,t.ctx,p)}})}}),n}},{key:"createPaths",value:function(t,e){var i=this,n=[],o=[],r=[],a=[];if(t.length){o=[this.graphics.move(e.x,e.y)],a=[this.graphics.move(e.x,e.y)];var c=this.graphics.move(t[0].x,t[0].y),h=this.graphics.move(t[0].x,t[0].y);t.forEach(function(d,g){c+=i.graphics.line(d.x,d.y),h+=i.graphics.line(d.x,d.y),g===t.length-1&&(c+="Z",h+="Z")}),n.push(c),r.push(h)}return{linePathsFrom:o,linePathsTo:n,areaPathsFrom:a,areaPathsTo:r}}},{key:"getTextPos",value:function(t,e){var i="middle",n=t.x,o=t.y;return Math.abs(t.x)>=10?t.x>0?(i="start",n+=10):t.x<0&&(i="end",n-=10):i="middle",Math.abs(t.y)>=e-10&&(t.y<0?o-=10:t.y>0&&(o+=10)),{textAnchor:i,newX:n,newY:o}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,i=null,n=0;n<e.globals.previousPaths.length;n++){var o=e.globals.previousPaths[n];o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[n].paths[0]&&(i=e.globals.previousPaths[n].paths[0].d)}return i}},{key:"getDataPointsPos",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var n=[],o=0;o<i;o++){var r={};r.x=t[o]*Math.sin(e[o]),r.y=-t[o]*Math.cos(e[o]),n.push(r)}return n}}]),s}(),Fx=function(s){Ji(e,hh);var t=Ki(e);function e(i){var n;N(this,e),(n=t.call(this,i)).ctx=i,n.w=i.w,n.animBeginArr=[0],n.animDur=0;var o=n.w;return n.startAngle=o.config.plotOptions.radialBar.startAngle,n.endAngle=o.config.plotOptions.radialBar.endAngle,n.totalAngle=Math.abs(o.config.plotOptions.radialBar.endAngle-o.config.plotOptions.radialBar.startAngle),n.trackStartAngle=o.config.plotOptions.radialBar.track.startAngle,n.trackEndAngle=o.config.plotOptions.radialBar.track.endAngle,n.barLabels=n.w.config.plotOptions.radialBar.barLabels,n.donutDataLabels=n.w.config.plotOptions.radialBar.dataLabels,n.radialDataLabels=n.donutDataLabels,n.trackStartAngle||(n.trackStartAngle=n.startAngle),n.trackEndAngle||(n.trackEndAngle=n.endAngle),360===n.endAngle&&(n.endAngle=359.99),n.margin=parseInt(o.config.plotOptions.radialBar.track.margin,10),n.onBarLabelClick=n.onBarLabelClick.bind(rc(n)),n}return B(e,[{key:"draw",value:function(i){var n=this.w,o=new D(this.ctx),r=o.group({class:"apexcharts-radialbar"});if(n.globals.noData)return r;var a=o.group(),c=this.defaultSize/2,h=n.globals.gridWidth/2,d=this.defaultSize/2.05;n.config.chart.sparkline.enabled||(d=d-n.config.stroke.width-n.config.chart.dropShadow.blur);var g=n.globals.fill.colors;if(n.config.plotOptions.radialBar.track.show){var u=this.drawTracks({size:d,centerX:h,centerY:c,colorArr:g,series:i});a.add(u)}var p=this.drawArcs({size:d,centerX:h,centerY:c,colorArr:g,series:i}),m=360;n.config.plotOptions.radialBar.startAngle<0&&(m=this.totalAngle);var f=(360-m)/360;if(n.globals.radialSize=d-d*f,this.radialDataLabels.value.show){var b=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);n.globals.radialSize+=b*f}return a.add(p.g),"front"===n.config.plotOptions.radialBar.hollow.position&&(p.g.add(p.elHollow),p.dataLabels&&p.g.add(p.dataLabels)),r.add(a),r}},{key:"drawTracks",value:function(i){var n=this.w,o=new D(this.ctx),r=o.group({class:"apexcharts-tracks"}),a=new Rt(this.ctx),c=new re(this.ctx),h=this.getStrokeWidth(i);i.size=i.size-h/2;for(var d=0;d<i.series.length;d++){var g=o.group({class:"apexcharts-radialbar-track apexcharts-track"});r.add(g),g.attr({rel:d+1}),i.size=i.size-h-this.margin;var u=n.config.plotOptions.radialBar.track,p=c.fillPath({seriesNumber:0,size:i.size,fillColors:Array.isArray(u.background)?u.background[d]:u.background,solid:!0}),m=this.trackStartAngle,f=this.trackEndAngle;Math.abs(f)+Math.abs(m)>=360&&(f=360-Math.abs(this.startAngle)-.1);var b=o.drawPath({d:"",stroke:p,strokeWidth:h*parseInt(u.strokeWidth,10)/100,fill:"none",strokeOpacity:u.opacity,classes:"apexcharts-radialbar-area"});u.dropShadow.enabled&&a.dropShadow(b,u.dropShadow),g.add(b),b.attr("id","apexcharts-radialbarTrack-"+d),this.animatePaths(b,{centerX:i.centerX,centerY:i.centerY,endAngle:f,startAngle:m,size:i.size,i:d,totalItems:2,animBeginArr:0,dur:0,isTrack:!0})}return r}},{key:"drawArcs",value:function(i){var n=this.w,o=new D(this.ctx),r=new re(this.ctx),a=new Rt(this.ctx),c=o.group(),h=this.getStrokeWidth(i);i.size=i.size-h/2;var d=n.config.plotOptions.radialBar.hollow.background,g=i.size-h*i.series.length-this.margin*i.series.length-h*parseInt(n.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,u=g-n.config.plotOptions.radialBar.hollow.margin;void 0!==n.config.plotOptions.radialBar.hollow.image&&(d=this.drawHollowImage(i,c,g,d));var p=this.drawHollow({size:u,centerX:i.centerX,centerY:i.centerY,fill:d||"transparent"});n.config.plotOptions.radialBar.hollow.dropShadow.enabled&&a.dropShadow(p,n.config.plotOptions.radialBar.hollow.dropShadow);var f=1;!this.radialDataLabels.total.show&&n.globals.series.length>1&&(f=0);var b=null;if(this.radialDataLabels.show){var x=n.globals.dom.Paper.findOne(".apexcharts-datalabels-group");b=this.renderInnerDataLabels(x,this.radialDataLabels,{hollowSize:g,centerX:i.centerX,centerY:i.centerY,opacity:f})}"back"===n.config.plotOptions.radialBar.hollow.position&&(c.add(p),b&&c.add(b));var v=!1;n.config.plotOptions.radialBar.inverseOrder&&(v=!0);for(var _=v?i.series.length-1:0;v?_>=0:_<i.series.length;v?_--:_++){var w=o.group({class:"apexcharts-series apexcharts-radial-series",seriesName:A.escapeString(n.globals.seriesNames[_])});c.add(w),w.attr({rel:_+1,"data:realIndex":_}),this.ctx.series.addCollapsedClassToSeries(w,_),i.size=i.size-h-this.margin;var y=r.fillPath({seriesNumber:_,size:i.size,value:i.series[_]}),k=this.startAngle,C=void 0,M=A.negToZero(i.series[_]>100?100:i.series[_])/100,P=Math.round(this.totalAngle*M)+this.startAngle,O=void 0;n.globals.dataChanged&&(C=this.startAngle,O=Math.round(this.totalAngle*A.negToZero(n.globals.previousPaths[_])/100)+C),Math.abs(P)+Math.abs(k)>360&&(P-=.01),Math.abs(O)+Math.abs(C)>360&&(O-=.01);var S=P-k,E=Array.isArray(n.config.stroke.dashArray)?n.config.stroke.dashArray[_]:n.config.stroke.dashArray,I=o.drawPath({d:"",stroke:y,strokeWidth:h,fill:"none",fillOpacity:n.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+_,strokeDashArray:E});if(D.setAttrs(I.node,{"data:angle":S,"data:value":i.series[_]}),n.config.chart.dropShadow.enabled&&a.dropShadow(I,n.config.chart.dropShadow,_),a.setSelectionFilter(I,0,_),this.addListeners(I,this.radialDataLabels),w.add(I),I.attr({index:0,j:_}),this.barLabels.enabled){var T=A.polarToCartesian(i.centerX,i.centerY,i.size,k),L=this.barLabels.formatter(n.globals.seriesNames[_],{seriesIndex:_,w:n}),F=["apexcharts-radialbar-label"];this.barLabels.onClick||F.push("apexcharts-no-click");var V=this.barLabels.useSeriesColors?n.globals.colors[_]:n.config.chart.foreColor;V||(V=n.config.chart.foreColor);var H=T.x+this.barLabels.offsetX,Y=T.y+this.barLabels.offsetY,X=o.drawText({x:H,y:Y,text:L,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:V,cssClass:F.join(" ")});X.on("click",this.onBarLabelClick),X.attr({rel:_+1}),0!==k&&X.attr({"transform-origin":"".concat(H," ").concat(Y),transform:"rotate(".concat(k," 0 0)")}),w.add(X)}var Q=0;!this.initialAnim||n.globals.resized||n.globals.dataChanged||(Q=n.config.chart.animations.speed),n.globals.dataChanged&&(Q=n.config.chart.animations.dynamicAnimation.speed),this.animDur=Q/(1.2*i.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(I,{centerX:i.centerX,centerY:i.centerY,endAngle:P,startAngle:k,prevEndAngle:O,prevStartAngle:C,size:i.size,i:_,totalItems:2,animBeginArr:this.animBeginArr,dur:Q,shouldSetPrevPaths:!0})}return{g:c,elHollow:p,dataLabels:b}}},{key:"drawHollow",value:function(i){var n=new D(this.ctx).drawCircle(2*i.size);return n.attr({class:"apexcharts-radialbar-hollow",cx:i.centerX,cy:i.centerY,r:i.size,fill:i.fill}),n}},{key:"drawHollowImage",value:function(i,n,o,r){var a=this.w,c=new re(this.ctx),h=A.randomId(),d=a.config.plotOptions.radialBar.hollow.image;if(a.config.plotOptions.radialBar.hollow.imageClipped)c.clippedImgArea({width:o,height:o,image:d,patternID:"pattern".concat(a.globals.cuid).concat(h)}),r="url(#pattern".concat(a.globals.cuid).concat(h,")");else{var g=a.config.plotOptions.radialBar.hollow.imageWidth,u=a.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===g&&void 0===u){var p=a.globals.dom.Paper.image(d,function(f){this.move(i.centerX-f.width/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-f.height/2+a.config.plotOptions.radialBar.hollow.imageOffsetY)});n.add(p)}else{var m=a.globals.dom.Paper.image(d,function(f){this.move(i.centerX-g/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,i.centerY-u/2+a.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(g,u)});n.add(m)}}return r}},{key:"getStrokeWidth",value:function(i){return i.size*(100-parseInt(this.w.config.plotOptions.radialBar.hollow.size,10))/100/(i.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(i){var n=parseInt(i.target.getAttribute("rel"),10)-1,o=this.barLabels.onClick,r=this.w;o&&o(r.globals.seriesNames[n],{w:r,seriesIndex:n})}}]),e}(),zx=function(s){Ji(e,Oi);var t=Ki(e);function e(){return N(this,e),t.apply(this,arguments)}return B(e,[{key:"draw",value:function(i,n){var o=this.w,r=new D(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=i,this.seriesRangeStart=o.globals.seriesRangeStart,this.seriesRangeEnd=o.globals.seriesRangeEnd,this.barHelpers.initVariables(i);for(var a=r.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),c=0;c<i.length;c++){var h,d,g,u,p=void 0,m=void 0,f=o.globals.comboCharts?n[c]:c,b=this.barHelpers.getGroupIndex(f).columnGroupIndex,x=r.group({class:"apexcharts-series",seriesName:A.escapeString(o.globals.seriesNames[f]),rel:c+1,"data:realIndex":f});this.ctx.series.addCollapsedClassToSeries(x,f),i[c].length>0&&(this.visibleI=this.visibleI+1);var v=0,_=0,w=0;this.yRatio.length>1&&(this.yaxisIndex=o.globals.seriesYAxisReverseMap[f][0],w=f);var y=this.barHelpers.initialPositions(f);m=y.y,u=y.zeroW,p=y.x,_=y.barWidth,v=y.barHeight,h=y.xDivision,d=y.yDivision,g=y.zeroH;for(var k=r.group({class:"apexcharts-datalabels","data:realIndex":f}),C=r.group({class:"apexcharts-rangebar-goals-markers"}),M=0;M<o.globals.dataPoints;M++){var P=this.barHelpers.getStrokeWidth(c,M,f),O=this.seriesRangeStart[c][M],S=this.seriesRangeEnd[c][M],E=null,I=null,R=null,T={x:p,y:m,strokeWidth:P,elSeries:x},L=this.seriesLen;if(o.config.plotOptions.bar.rangeBarGroupRows&&(L=1),void 0===o.config.series[c].data[M])break;if(this.isHorizontal){if(R=m+v*this.visibleI,o.config.series[c].data[M].x){var V=this.detectOverlappingBars({i:c,j:M,barYPosition:R,srty:(d-v*L)/2,barHeight:v,yDivision:d,initPositions:y});v=V.barHeight,R=V.barYPosition}_=(E=this.drawRangeBarPaths(z({indexes:{i:c,j:M,realIndex:f},barHeight:v,barYPosition:R,zeroW:u,yDivision:d,y1:O,y2:S},T))).barWidth}else{if(o.globals.isXNumeric&&(p=(o.globals.seriesX[c][M]-o.globals.minX)/this.xRatio-_/2),I=p+_*this.visibleI,o.config.series[c].data[M].x){var Y=this.detectOverlappingBars({i:c,j:M,barXPosition:I,srtx:(h-_*L)/2,barWidth:_,xDivision:h,initPositions:y});_=Y.barWidth,I=Y.barXPosition}v=(E=this.drawRangeColumnPaths(z({indexes:{i:c,j:M,realIndex:f,translationsIndex:w},barWidth:_,barXPosition:I,zeroH:g,xDivision:h},T))).barHeight}var X=this.barHelpers.drawGoalLine({barXPosition:E.barXPosition,barYPosition:R,goalX:E.goalX,goalY:E.goalY,barHeight:v,barWidth:_});X&&C.add(X),m=E.y,p=E.x;var Q=this.barHelpers.getPathFillColor(i,c,M,f);this.renderSeries({realIndex:f,pathFill:Q.color,lineFill:Q.useRangeColor?Q.color:o.globals.stroke.colors[f],j:M,i:c,x:p,y:m,y1:O,y2:S,pathFrom:E.pathFrom,pathTo:E.pathTo,strokeWidth:P,elSeries:x,series:i,barHeight:v,barWidth:_,barXPosition:I,barYPosition:R,columnGroupIndex:b,elDataLabelsWrap:k,elGoalsMarkers:C,visibleSeries:this.visibleI,type:"rangebar"})}a.add(x)}return a}},{key:"detectOverlappingBars",value:function(i){var n=i.i,o=i.j,r=i.barYPosition,a=i.barXPosition,c=i.srty,h=i.srtx,d=i.barHeight,g=i.barWidth,u=i.yDivision,p=i.xDivision,m=i.initPositions,f=this.w,b=[],x=f.config.series[n].data[o].rangeName,v=f.config.series[n].data[o].x,_=Array.isArray(v)?v.join(" "):v,w=f.globals.labels.map(function(k){return Array.isArray(k)?k.join(" "):k}).indexOf(_),y=f.globals.seriesRange[n].findIndex(function(k){return k.x===_&&k.overlaps.length>0});return this.isHorizontal?(r=f.config.plotOptions.bar.rangeBarGroupRows?c+u*w:c+d*this.visibleI+u*w,y>-1&&!f.config.plotOptions.bar.rangeBarOverlap&&(b=f.globals.seriesRange[n][y].overlaps).indexOf(x)>-1&&(r=(d=m.barHeight/b.length)*this.visibleI+u*(100-parseInt(this.barOptions.barHeight,10))/100/2+d*(this.visibleI+b.indexOf(x))+u*w)):(w>-1&&!f.globals.timescaleLabels.length&&(a=f.config.plotOptions.bar.rangeBarGroupRows?h+p*w:h+g*this.visibleI+p*w),y>-1&&!f.config.plotOptions.bar.rangeBarOverlap&&(b=f.globals.seriesRange[n][y].overlaps).indexOf(x)>-1&&(a=(g=m.barWidth/b.length)*this.visibleI+p*(100-parseInt(this.barOptions.barWidth,10))/100/2+g*(this.visibleI+b.indexOf(x))+p*w)),{barYPosition:r,barXPosition:a,barHeight:d,barWidth:g}}},{key:"drawRangeColumnPaths",value:function(i){var n=i.indexes,o=i.x,r=i.xDivision,a=i.barWidth,c=i.barXPosition,h=i.zeroH,d=this.w,g=n.i,u=n.j,p=n.realIndex,m=n.translationsIndex,f=this.yRatio[m],b=this.getRangeValue(p,u),x=Math.min(b.start,b.end),v=Math.max(b.start,b.end);null==this.series[g][u]?x=h:(x=h-x/f,v=h-v/f);var _=Math.abs(v-x),w=this.barHelpers.getColumnPaths({barXPosition:c,barWidth:a,y1:x,y2:v,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:p,i:p,j:u,w:d});if(d.globals.isXNumeric){var y=this.getBarXForNumericXAxis({x:o,j:u,realIndex:p,barWidth:a});o=y.x,c=y.barXPosition}else o+=r;return{pathTo:w.pathTo,pathFrom:w.pathFrom,barHeight:_,x:o,y:b.start<0&&b.end<0?x:v,goalY:this.barHelpers.getGoalValues("y",null,h,g,u,m),barXPosition:c}}},{key:"preventBarOverflow",value:function(i){var n=this.w;return i<0&&(i=0),i>n.globals.gridWidth&&(i=n.globals.gridWidth),i}},{key:"drawRangeBarPaths",value:function(i){var n=i.indexes,o=i.y,a=i.y2,c=i.yDivision,h=i.barHeight,d=i.barYPosition,g=i.zeroW,u=this.w,p=n.realIndex,m=n.j,f=this.preventBarOverflow(g+i.y1/this.invertedYRatio),b=this.preventBarOverflow(g+a/this.invertedYRatio),x=this.getRangeValue(p,m),v=Math.abs(b-f),_=this.barHelpers.getBarpaths({barYPosition:d,barHeight:h,x1:f,x2:b,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:p,realIndex:p,j:m,w:u});return u.globals.isXNumeric||(o+=c),{pathTo:_.pathTo,pathFrom:_.pathFrom,barWidth:v,x:x.start<0&&x.end<0?f:b,goalX:this.barHelpers.getGoalValues("x",g,null,p,m),y:o}}},{key:"getRangeValue",value:function(i,n){var o=this.w;return{start:o.globals.seriesRangeStart[i][n],end:o.globals.seriesRangeEnd[i][n]}}}]),e}(),jx=function(){function s(t){N(this,s),this.w=t.w,this.lineCtx=t}return B(s,[{key:"sameValueSeriesFix",value:function(t,e){var i=this.w;if(("gradient"===i.config.fill.type||"gradient"===i.config.fill.type[t])&&new kt(this.lineCtx.ctx,i).seriesHaveSameValues(t)){var n=e[t].slice();n[n.length-1]=n[n.length-1]+1e-6,e[t]=n}return e}},{key:"calculatePoints",value:function(t){var e=t.series,n=t.x,o=t.y,r=t.i,a=t.j,c=t.prevY,h=this.w,d=[],g=[],u=this.lineCtx.categoryAxisCorrection+h.config.markers.offsetX;return h.globals.isXNumeric&&(u=(h.globals.seriesX[t.realIndex][0]-h.globals.minX)/this.lineCtx.xRatio+h.config.markers.offsetX),0===a&&(d.push(u),g.push(A.isNumber(e[r][0])?c+h.config.markers.offsetY:null)),d.push(n+h.config.markers.offsetX),g.push(A.isNumber(e[r][a+1])?o+h.config.markers.offsetY:null),{x:d,y:g}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,i=t.pathFromArea,n=t.realIndex,o=this.w,r=0;r<o.globals.previousPaths.length;r++){var a=o.globals.previousPaths[r];("line"===a.type||"area"===a.type)&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(n,10)&&("line"===a.type?(this.lineCtx.appendPathFrom=!1,e=o.globals.previousPaths[r].paths[0].d):"area"===a.type&&(this.lineCtx.appendPathFrom=!1,i=o.globals.previousPaths[r].paths[0].d,o.config.stroke.show&&o.globals.previousPaths[r].paths[1]&&(e=o.globals.previousPaths[r].paths[1].d)))}return{pathFromLine:e,pathFromArea:i}}},{key:"determineFirstPrevY",value:function(t){var e,i,n,o=t.i,r=t.realIndex,a=t.series,c=t.prevY,h=t.lineYPosition,d=t.translationsIndex,g=this.w,u=g.config.chart.stacked&&!g.globals.comboCharts||g.config.chart.stacked&&g.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(e=this.w.config.series[r])||void 0===e?void 0:e.type)||"column"===(null===(i=this.w.config.series[r])||void 0===i?void 0:i.type));if(void 0!==(null===(n=a[o])||void 0===n?void 0:n[0]))c=(h=u&&o>0?this.lineCtx.prevSeriesY[o-1][0]:this.lineCtx.zeroY)-a[o][0]/this.lineCtx.yRatio[d]+2*(this.lineCtx.isReversed?a[o][0]/this.lineCtx.yRatio[d]:0);else if(u&&o>0&&void 0===a[o][0])for(var p=o-1;p>=0;p--)if(null!=a[p][0]){c=h=this.lineCtx.prevSeriesY[p][0];break}return{prevY:c,lineYPosition:h}}}]),s}(),Bx=function(s,t,e){var i=s.slice(t,e);if(t){if(e-t>1&&i[1].length<6){var n=i[0].length;i[1]=[2*i[0][n-2]-i[0][n-4],2*i[0][n-1]-i[0][n-3]].concat(i[1])}i[0]=i[0].slice(-2)}return i};function sr(s,t){return(t[1]-s[1])/(t[0]-s[0])}var or=function(){function s(t,e,i){N(this,s),this.ctx=t,this.w=t.w,this.xyRatios=e,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||i,this.scatter=new Jc(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new jx(this),this.markers=new Mi(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return B(s,[{key:"draw",value:function(t,e,i,n){var o,r=this.w,a=new D(this.ctx),c=r.globals.comboCharts?e:r.config.chart.type,h=a.group({class:"apexcharts-".concat(c,"-series apexcharts-plot-series")}),d=new kt(this.ctx,r);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=d.getLogSeries(t),this.yRatio=d.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var g=[],u=0;u<t.length;u++){t=this.lineHelpers.sameValueSeriesFix(u,t);var p=r.globals.comboCharts?i[u]:u,m=this.yRatio.length>1?p:0;this._initSerieVariables(t,u,p);var f=[],b=[],x=[],v=r.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,p),r.globals.isXNumeric&&r.globals.seriesX.length>0&&(v=(r.globals.seriesX[p][0]-r.globals.minX)/this.xRatio),x.push(v);var _,w=v,y=void 0,k=w,C=this.zeroY,M=this.zeroY;C=this.lineHelpers.determineFirstPrevY({i:u,realIndex:p,series:t,prevY:C,lineYPosition:0,translationsIndex:m}).prevY,f.push("monotoneCubic"===r.config.stroke.curve&&null===t[u][0]?null:C),_=C,"rangeArea"===c&&(y=M=this.lineHelpers.determineFirstPrevY({i:u,realIndex:p,series:n,prevY:M,lineYPosition:0,translationsIndex:m}).prevY,b.push(null!==f[0]?M:null));var P=this._calculatePathsFrom({type:c,series:t,i:u,realIndex:p,translationsIndex:m,prevX:k,prevY:C,prevY2:M}),O=[f[0]],S=[b[0]],E={type:c,series:t,realIndex:p,translationsIndex:m,i:u,x:v,y:1,pX:w,pY:_,pathsFrom:P,linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:x,yArrj:f,y2Arrj:b,seriesRangeEnd:n},I=this._iterateOverDataPoints(z(z({},E),{},{iterations:"rangeArea"===c?t[u].length-1:void 0,isRangeStart:!0}));if("rangeArea"===c){for(var R=this._calculatePathsFrom({series:n,i:u,realIndex:p,prevX:k,prevY:M}),T=this._iterateOverDataPoints(z(z({},E),{},{series:n,xArrj:[v],yArrj:O,y2Arrj:S,pY:y,areaPaths:I.areaPaths,pathsFrom:R,iterations:n[u].length-1,isRangeStart:!1})),L=I.linePaths.length/2,F=0;F<L;F++)I.linePaths[F]=T.linePaths[F+L]+I.linePaths[F];I.linePaths.splice(L),I.pathFromLine=T.pathFromLine+I.pathFromLine}else I.pathFromArea+="z";this._handlePaths({type:c,realIndex:p,i:u,paths:I}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),g.push(this.elSeries)}if(void 0!==(null===(o=r.config.series[0])||void 0===o?void 0:o.zIndex)&&g.sort(function(Y,X){return Number(Y.node.getAttribute("zIndex"))-Number(X.node.getAttribute("zIndex"))}),r.config.chart.stacked)for(var V=g.length-1;V>=0;V--)h.add(g[V]);else for(var H=0;H<g.length;H++)h.add(g[H]);return h}},{key:"_initSerieVariables",value:function(t,e,i){var n=this.w,o=new D(this.ctx);this.xDivision=n.globals.gridWidth/(n.globals.dataPoints-("on"===n.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(n.config.stroke.width)?n.config.stroke.width[i]:n.config.stroke.width;var r=0;if(this.yRatio.length>1&&(this.yaxisIndex=n.globals.seriesYAxisReverseMap[i],r=i),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed,this.zeroY=n.globals.gridHeight-this.baseLineY[r]-(this.isReversed?n.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[r]:0),this.areaBottomY=this.zeroY,(this.zeroY>n.globals.gridHeight||"end"===n.config.plotOptions.area.fillTo)&&(this.areaBottomY=n.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=o.group({class:"apexcharts-series",zIndex:void 0!==n.config.series[i].zIndex?n.config.series[i].zIndex:i,seriesName:A.escapeString(n.globals.seriesNames[i])}),this.elPointsMain=o.group({class:"apexcharts-series-markers-wrap","data:realIndex":i}),n.globals.hasNullValues){var a=this.markers.plotChartMarkers({pointsPos:{x:[0],y:[n.globals.gridHeight+n.globals.markers.largestSize]},seriesIndex:e,j:0,pSize:.1,alwaysDrawMarker:!0,isVirtualPoint:!0});null!==a&&this.elPointsMain.add(a)}this.elDataLabelsWrap=o.group({class:"apexcharts-datalabels","data:realIndex":i}),this.elSeries.attr({"data:longestSeries":t[e].length===n.globals.dataPoints,rel:e+1,"data:realIndex":i}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,i,n,o,r=t.type,a=t.series,c=t.i,h=t.realIndex,d=t.translationsIndex,g=t.prevX,u=t.prevY,p=t.prevY2,m=this.w,f=new D(this.ctx);if(null===a[c][0]){for(var b=0;b<a[c].length;b++)if(null!==a[c][b]){e=f.move(g=this.xDivision*b,u=this.zeroY-a[c][b]/this.yRatio[d]),i=f.move(g,this.areaBottomY);break}}else e=f.move(g,u),"rangeArea"===r&&(e=f.move(g,p)+f.line(g,u)),i=f.move(g,this.areaBottomY)+f.line(g,u);if(n=f.move(0,this.areaBottomY)+f.line(0,this.areaBottomY),o=f.move(0,this.areaBottomY)+f.line(0,this.areaBottomY),m.globals.previousPaths.length>0){var x=this.lineHelpers.checkPreviousPaths({pathFromLine:n,pathFromArea:o,realIndex:h});n=x.pathFromLine,o=x.pathFromArea}return{prevX:g,prevY:u,linePath:e,areaPath:i,pathFromLine:n,pathFromArea:o}}},{key:"_handlePaths",value:function(t){var e=t.type,i=t.realIndex,n=t.i,o=t.paths,r=this.w,a=new D(this.ctx),c=new re(this.ctx);this.prevSeriesY.push(o.yArrj),r.globals.seriesXvalues[i]=o.xArrj,r.globals.seriesYvalues[i]=o.yArrj;var h=r.config.forecastDataPoints;if(h.count>0&&"rangeArea"!==e){var d=r.globals.seriesXvalues[i][r.globals.seriesXvalues[i].length-h.count-1],g=a.drawRect(d,0,r.globals.gridWidth,r.globals.gridHeight,0);r.globals.dom.elForecastMask.appendChild(g.node);var u=a.drawRect(0,0,d,r.globals.gridHeight,0);r.globals.dom.elNonForecastMask.appendChild(u.node)}this.pointsChart||r.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var p={i:n,realIndex:i,animationDelay:n,initialSpeed:r.config.chart.animations.speed,dataChangeSpeed:r.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(e)};if("area"===e)for(var m=c.fillPath({seriesNumber:i}),f=0;f<o.areaPaths.length;f++){var b=a.renderPaths(z(z({},p),{},{pathFrom:o.pathFromArea,pathTo:o.areaPaths[f],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:m}));this.elSeries.add(b)}if(r.config.stroke.show&&!this.pointsChart){var x=null;if("line"===e)x=c.fillPath({seriesNumber:i,i:n});else if("solid"===r.config.stroke.fill.type)x=r.globals.stroke.colors[i];else{var v=r.config.fill;r.config.fill=r.config.stroke.fill,x=c.fillPath({seriesNumber:i,i:n}),r.config.fill=v}for(var _=0;_<o.linePaths.length;_++){var w=x;"rangeArea"===e&&(w=c.fillPath({seriesNumber:i}));var y=z(z({},p),{},{pathFrom:o.pathFromLine,pathTo:o.linePaths[_],stroke:x,strokeWidth:this.strokeWidth,strokeLineCap:r.config.stroke.lineCap,fill:"rangeArea"===e?w:"none"}),k=a.renderPaths(y);if(this.elSeries.add(k),k.attr("fill-rule","evenodd"),h.count>0&&"rangeArea"!==e){var C=a.renderPaths(y);C.node.setAttribute("stroke-dasharray",h.dashArray),h.strokeWidth&&C.node.setAttribute("stroke-width",h.strokeWidth),this.elSeries.add(C),C.attr("clip-path","url(#forecastMask".concat(r.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(r.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){var e,i,n=this,o=t.type,r=t.series,a=t.iterations,c=t.realIndex,h=t.translationsIndex,d=t.i,g=t.x,u=t.y,p=t.pX,m=t.pY,f=t.pathsFrom,b=t.linePaths,x=t.areaPaths,v=t.seriesIndex,_=t.lineYPosition,w=t.xArrj,y=t.yArrj,k=t.y2Arrj,C=t.isRangeStart,M=t.seriesRangeEnd,P=this.w,O=new D(this.ctx),S=this.yRatio,E=f.prevY,I=f.linePath,R=f.areaPath,T=f.pathFromLine,L=f.pathFromArea,F=A.isNumber(P.globals.minYArr[c])?P.globals.minYArr[c]:P.globals.minY;a||(a=P.globals.dataPoints>1?P.globals.dataPoints-1:P.globals.dataPoints);var V=function(Mt,Ot){return Ot-Mt/S[h]+2*(n.isReversed?Mt/S[h]:0)},H=u,Y=P.config.chart.stacked&&!P.globals.comboCharts||P.config.chart.stacked&&P.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(e=this.w.config.series[c])||void 0===e?void 0:e.type)||"column"===(null===(i=this.w.config.series[c])||void 0===i?void 0:i.type)),X=P.config.stroke.curve;Array.isArray(X)&&(X=Array.isArray(v)?X[v[d]]:X[d]);for(var Q,ct=0,$=0;$<a&&0!==r[d].length;$++){var bt=null==r[d][$+1];if(P.globals.isXNumeric){var K=P.globals.seriesX[c][$+1];void 0===P.globals.seriesX[c][$+1]&&(K=P.globals.seriesX[c][a-1]),g=(K-P.globals.minX)/this.xRatio}else g+=this.xDivision;_=Y&&d>0&&P.globals.collapsedSeries.length<P.config.series.length-1?this.prevSeriesY[function(Mt){for(var Ot=Mt;Ot>0;Ot--){if(!(P.globals.collapsedSeriesIndices.indexOf(v?.[Ot]||Ot)>-1))return Ot;Ot--}return 0}(d-1)][$+1]:this.zeroY,bt?u=V(F,_):(u=V(r[d][$+1],_),"rangeArea"===o&&(H=V(M[d][$+1],_))),w.push(null===r[d][$+1]?null:g),!bt||"smooth"!==P.config.stroke.curve&&"monotoneCubic"!==P.config.stroke.curve?(y.push(u),k.push(H)):(y.push(null),k.push(null));var it=this.lineHelpers.calculatePoints({series:r,x:g,y:u,realIndex:c,i:d,j:$,prevY:E}),rt=this._createPaths({type:o,series:r,i:d,realIndex:c,j:$,x:g,y:u,y2:H,xArrj:w,yArrj:y,y2Arrj:k,pX:p,pY:m,pathState:ct,segmentStartX:Q,linePath:I,areaPath:R,linePaths:b,areaPaths:x,curve:X,isRangeStart:C});x=rt.areaPaths,b=rt.linePaths,p=rt.pX,m=rt.pY,ct=rt.pathState,Q=rt.segmentStartX,R=rt.areaPath,I=rt.linePath,!this.appendPathFrom||P.globals.hasNullValues||"monotoneCubic"===X&&"rangeArea"===o||(T+=O.line(g,this.areaBottomY),L+=O.line(g,this.areaBottomY)),this.handleNullDataPoints(r,it,d,$,c),this._handleMarkersAndLabels({type:o,pointsPos:it,i:d,j:$,realIndex:c,isRangeStart:C})}return{yArrj:y,xArrj:w,pathFromArea:L,areaPaths:x,pathFromLine:T,linePaths:b,linePath:I,areaPath:R}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.type,i=t.pointsPos,n=t.isRangeStart,o=t.i,r=t.j,a=t.realIndex,c=this.w,h=new Pi(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,r,{realIndex:a,pointsPos:i,zRatio:this.zRatio,elParent:this.elPointsMain});else{c.globals.series[o].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var d=this.markers.plotChartMarkers({pointsPos:i,seriesIndex:a,j:r+1});null!==d&&this.elPointsMain.add(d)}var g=h.drawDataLabel({type:e,isRangeStart:n,pos:i,i:a,j:r+1});null!==g&&this.elDataLabelsWrap.add(g)}},{key:"_createPaths",value:function(t){var o,e=t.type,i=t.series,n=t.i,r=t.j,a=t.x,c=t.y,h=t.xArrj,d=t.yArrj,g=t.y2,u=t.y2Arrj,p=t.pX,m=t.pY,f=t.pathState,b=t.segmentStartX,x=t.linePath,v=t.areaPath,_=t.linePaths,w=t.areaPaths,y=t.curve,k=t.isRangeStart,C=new D(this.ctx),M=this.areaBottomY,P="rangeArea"===e,O="rangeArea"===e&&k;switch(y){case"monotoneCubic":var S=k?d:u;switch(f){case 0:if(null===S[r+1])break;f=1;case 1:if(!(P?h.length===i[n].length:r===i[n].length-2))break;case 2:var E=k?h:h.slice().reverse(),I=k?S:S.slice().reverse(),R=(o=I,E.map(function(K,it){return[K,o[it]]}).filter(function(K){return null!==K[1]})),T=R.length>1?function(s){var t=function(s){for(var t,e,i,n,o=function(d){for(var g=[],u=d[0],p=d[1],m=g[0]=sr(u,p),f=1,b=d.length-1;f<b;f++)g[f]=.5*(m+(m=sr(u=p,p=d[f+1])));return g[f]=m,g}(s),r=s.length-1,a=[],c=0;c<r;c++)i=sr(s[c],s[c+1]),Math.abs(i)<1e-6?o[c]=o[c+1]=0:(n=(t=o[c]/i)*t+(e=o[c+1]/i)*e)>9&&(n=3*i/Math.sqrt(n),o[c]=n*t,o[c+1]=n*e);for(var h=0;h<=r;h++)n=(s[Math.min(r,h+1)][0]-s[Math.max(0,h-1)][0])/(6*(1+o[h]*o[h])),a.push([n||0,o[h]*n||0]);return a}(s),e=s[1],i=s[0],n=[],o=t[1],r=t[0];n.push(i,[i[0]+r[0],i[1]+r[1],e[0]-o[0],e[1]-o[1],e[0],e[1]]);for(var a=2,c=t.length;a<c;a++){var h=s[a],d=t[a];n.push([h[0]-d[0],h[1]-d[1],h[0],h[1]])}return n}(R):R,L=[];P&&(O?w=R:L=w.reverse());var F=0,V=0;if(function(K,it){for(var rt=function(gn){var Xt=[],we=0;return gn.forEach(function(Qx){null!==Qx?we++:we>0&&(Xt.push(we),we=0)}),we>0&&Xt.push(we),Xt}(K),Mt=[],Ot=0,Vt=0;Ot<rt.length;Vt+=rt[Ot++])Mt[Ot]=Bx(it,Vt,Vt+rt[Ot]);return Mt}(I,T).forEach(function(K){F++;var it=function(Ot){for(var Vt="",gn=0;gn<Ot.length;gn++){var Xt=Ot[gn],we=Xt.length;we>4?(Vt+="C".concat(Xt[0],", ").concat(Xt[1]),Vt+=", ".concat(Xt[2],", ").concat(Xt[3]),Vt+=", ".concat(Xt[4],", ").concat(Xt[5])):we>2&&(Vt+="S".concat(Xt[0],", ").concat(Xt[1]),Vt+=", ".concat(Xt[2],", ").concat(Xt[3]))}return Vt}(K),rt=V,Mt=(V+=K.length)-1;O?x=C.move(R[rt][0],R[rt][1])+it:P?x=C.move(L[rt][0],L[rt][1])+C.line(R[rt][0],R[rt][1])+it+C.line(L[Mt][0],L[Mt][1]):(x=C.move(R[rt][0],R[rt][1])+it,v=x+C.line(R[Mt][0],M)+C.line(R[rt][0],M)+"z",w.push(v)),_.push(x)}),P&&F>1&&!O){var H=_.slice(F).reverse();_.splice(F),H.forEach(function(K){return _.push(K)})}f=0}break;case"smooth":var Y=.35*(a-p);if(null===i[n][r])f=0;else switch(f){case 0:if(b=p,x=O?C.move(p,u[r])+C.line(p,m):C.move(p,m),v=C.move(p,m),null==i[n][r+1]){_.push(x),w.push(v);break}if(f=1,r<i[n].length-2){var X=C.curve(p+Y,m,a-Y,c,a,c);x+=X,v+=X;break}case 1:if(null===i[n][r+1])x+=O?C.line(p,g):C.move(p,m),v+=C.line(p,M)+C.line(b,M)+"z",_.push(x),w.push(v),f=-1;else{var Q=C.curve(p+Y,m,a-Y,c,a,c);x+=Q,v+=Q,r>=i[n].length-2&&(O&&(x+=C.curve(a,c,a,c,a,g)+C.move(a,g)),v+=C.curve(a,c,a,c,a,M)+C.line(b,M)+"z",_.push(x),w.push(v),f=-1)}}p=a,m=c;break;default:var ct=function(K,it,rt){var Mt=[];switch(K){case"stepline":Mt=C.line(it,null,"H")+C.line(null,rt,"V");break;case"linestep":Mt=C.line(null,rt,"V")+C.line(it,null,"H");break;case"straight":Mt=C.line(it,rt)}return Mt};if(null===i[n][r])f=0;else switch(f){case 0:if(b=p,x=O?C.move(p,u[r])+C.line(p,m):C.move(p,m),v=C.move(p,m),null==i[n][r+1]){_.push(x),w.push(v);break}if(f=1,r<i[n].length-2){var $=ct(y,a,c);x+=$,v+=$;break}case 1:if(null===i[n][r+1])x+=O?C.line(p,g):C.move(p,m),v+=C.line(p,M)+C.line(b,M)+"z",_.push(x),w.push(v),f=-1;else{var bt=ct(y,a,c);x+=bt,v+=bt,r>=i[n].length-2&&(O&&(x+=C.line(a,g)),v+=C.line(a,M)+C.line(b,M)+"z",_.push(x),w.push(v),f=-1)}}p=a,m=c}return{linePaths:_,areaPaths:w,pX:p,pY:m,pathState:f,segmentStartX:b,linePath:x,areaPath:v}}},{key:"handleNullDataPoints",value:function(t,e,i,n,o){var r=this.w;if(null===t[i][n]&&r.config.markers.showNullDataPoints||1===t[i].length){var a=this.strokeWidth-r.config.markers.strokeWidth/2;a>0||(a=0);var c=this.markers.plotChartMarkers({pointsPos:e,seriesIndex:o,j:n+1,pSize:a,alwaysDrawMarker:!0});null!==c&&this.elPointsMain.add(c)}}}]),s}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function s(a,c,h,d){this.xoffset=a,this.yoffset=c,this.height=d,this.width=h,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(g){var u,p=[],m=this.xoffset,f=this.yoffset,b=o(g)/this.height,x=o(g)/this.width;if(this.width>=this.height)for(u=0;u<g.length;u++)p.push([m,f,m+b,f+g[u]/b]),f+=g[u]/b;else for(u=0;u<g.length;u++)p.push([m,f,m+g[u]/x,f+x]),m+=g[u]/x;return p},this.cutArea=function(g){var u;if(this.width>=this.height){var p=g/this.height;u=new s(this.xoffset+p,this.yoffset,this.width-p,this.height)}else{var f=g/this.width;u=new s(this.xoffset,this.yoffset+f,this.width,this.height-f)}return u}}function t(a,c,h,d,g){return d=void 0===d?0:d,g=void 0===g?0:g,function(p){var m,f,b=[];for(m=0;m<p.length;m++)for(f=0;f<p[m].length;f++)b.push(p[m][f]);return b}(e(function(p,m){var f,b=[],x=m/o(p);for(f=0;f<p.length;f++)b[f]=p[f]*x;return b}(a,c*h),[],new s(d,g,c,h),[]))}function e(a,c,h,d){var g,u,p,m,f,b,x;if(0!==a.length)return g=h.shortestEdge(),f=u=a[0],b=g,0===(m=c).length||((x=m.slice()).push(f),i(m,b)>=i(x,b))?(c.push(u),e(a.slice(1),c,h,d)):(p=h.cutArea(o(c),d),d.push(h.getCoordinates(c)),e(a,[],p,d)),d;d.push(h.getCoordinates(c))}function i(a,c){var h=Math.min.apply(Math,a),d=Math.max.apply(Math,a),g=o(a);return Math.max(Math.pow(c,2)*d/Math.pow(g,2),Math.pow(g,2)/(Math.pow(c,2)*h))}function n(a){return a&&a.constructor===Array}function o(a){var c,h=0;for(c=0;c<a.length;c++)h+=a[c];return h}function r(a){var c,h=0;if(n(a[0]))for(c=0;c<a.length;c++)h+=r(a[c]);else h=o(a);return h}return function a(c,h,d,g,u){g=void 0===g?0:g,u=void 0===u?0:u;var p,m,f=[],b=[];if(n(c[0])){for(m=0;m<c.length;m++)f[m]=r(c[m]);for(p=t(f,h,d,g,u),m=0;m<c.length;m++)b.push(a(c[m],p[m][2]-p[m][0],p[m][3]-p[m][1],p[m][0],p[m][1]))}else b=t(c,h,d,g,u);return b}}();var Hx=function(){function s(t,e){N(this,s),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new lh(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return B(s,[{key:"draw",value:function(t){var e=this,i=this.w,n=new D(this.ctx),o=new re(this.ctx),r=n.group({class:"apexcharts-treemap"});if(i.globals.noData)return r;var a=[];return t.forEach(function(c){var h=c.map(function(d){return Math.abs(d)});a.push(h)}),this.negRange=this.helpers.checkColorRange(),i.config.series.forEach(function(c,h){c.data.forEach(function(d){Array.isArray(e.labels[h])||(e.labels[h]=[]),e.labels[h].push(d.x)})}),window.TreemapSquared.generate(a,i.globals.gridWidth,i.globals.gridHeight).forEach(function(c,h){var d=n.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:A.escapeString(i.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});if(i.config.chart.dropShadow.enabled){var g=i.config.chart.dropShadow;new Rt(e.ctx).dropShadow(r,g,h)}var u=n.group({class:"apexcharts-data-labels"}),p={xMin:1/0,yMin:1/0,xMax:-1/0,yMax:-1/0};c.forEach(function(T,L){var F=T[0],V=T[1],H=T[2],Y=T[3];p.xMin=Math.min(p.xMin,F),p.yMin=Math.min(p.yMin,V),p.xMax=Math.max(p.xMax,H),p.yMax=Math.max(p.yMax,Y);var X=e.helpers.getShadeColor(i.config.chart.type,h,L,e.negRange),Q=X.color,ct=o.fillPath({color:Q,seriesNumber:h,dataPointIndex:L}),$=n.drawRect(F,V,H-F,Y-V,i.config.plotOptions.treemap.borderRadius,"#fff",1,e.strokeWidth,i.config.plotOptions.treemap.useFillColorAsStroke?Q:i.globals.stroke.colors[h]);$.attr({cx:F,cy:V,index:h,i:h,j:L,width:H-F,height:Y-V,fill:ct}),$.node.classList.add("apexcharts-treemap-rect"),e.helpers.addListeners($);var bt={x:F+(H-F)/2,y:V+(Y-V)/2,width:0,height:0},K={x:F,y:V,width:H-F,height:Y-V};if(i.config.chart.animations.enabled&&!i.globals.dataChanged){var it=1;i.globals.resized||(it=i.config.chart.animations.speed),e.animateTreemap($,bt,K,it)}i.globals.dataChanged&&e.dynamicAnim.enabled&&i.globals.shouldAnimate&&(i.globals.previousPaths[h]&&i.globals.previousPaths[h][L]&&i.globals.previousPaths[h][L].rect&&(bt=i.globals.previousPaths[h][L].rect),e.animateTreemap($,bt,K,e.dynamicAnim.speed));var Mt=e.getFontSize(T),Ot=i.config.dataLabels.formatter(e.labels[h][L],{value:i.globals.series[h][L],seriesIndex:h,dataPointIndex:L,w:i});"truncate"===i.config.plotOptions.treemap.dataLabels.format&&(Mt=parseInt(i.config.dataLabels.style.fontSize,10),Ot=e.truncateLabels(Ot,Mt,F,V,H,Y));var Vt=null;i.globals.series[h][L]&&(Vt=e.helpers.calculateDataLabels({text:Ot,x:(F+H)/2,y:(V+Y)/2+e.strokeWidth/2+Mt/3,i:h,j:L,colorProps:X,fontSize:Mt,series:t})),i.config.dataLabels.enabled&&Vt&&e.rotateToFitLabel(Vt,Mt,Ot,F,V,H,Y),d.add($),null!==Vt&&d.add(Vt)});var m=i.config.plotOptions.treemap.seriesTitle;if(i.config.series.length>1&&m&&m.show){var f=i.config.series[h].name||"";if(f&&p.xMin<1/0&&p.yMin<1/0){var b=m.offsetX,x=m.offsetY,v=m.borderColor,_=m.borderWidth,w=m.borderRadius,y=m.style,k=y.color||i.config.chart.foreColor,C={left:y.padding.left,right:y.padding.right,top:y.padding.top,bottom:y.padding.bottom},M=n.getTextRects(f,y.fontSize,y.fontFamily),S=p.xMin+(b||0),E=p.yMin+(x||0),I=n.drawRect(S,E,M.width+C.left+C.right,M.height+C.top+C.bottom,w,y.background,1,_,v),R=n.drawText({x:S+C.left,y:E+C.top+.75*M.height,text:f,fontSize:y.fontSize,fontFamily:y.fontFamily,fontWeight:y.fontWeight,foreColor:k,cssClass:y.cssClass||""});d.add(I),d.add(R)}}d.add(u),r.add(d)}),r}},{key:"getFontSize",value:function(t){var a,e=this.w,i=function n(o){var r,a=0;if(Array.isArray(o[0]))for(r=0;r<o.length;r++)a+=n(o[r]);else for(r=0;r<o.length;r++)a+=o[r].length;return a}(this.labels)/function n(o){var r,a=0;if(Array.isArray(o[0]))for(r=0;r<o.length;r++)a+=n(o[r]);else for(r=0;r<o.length;r++)a+=1;return a}(this.labels);return a=Math.pow((t[2]-t[0])*(t[3]-t[1]),.5),Math.min(a/i,parseInt(e.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,e,i,n,o,r,a){var c=new D(this.ctx),h=c.getTextRects(i,e);if(h.width+this.w.config.stroke.width+5>r-n&&h.width<=a-o){var d=c.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(d.x," ").concat(d.y,") translate(").concat(h.height/3,")"))}}},{key:"truncateLabels",value:function(t,e,i,n,o,r){var a=new D(this.ctx),c=a.getTextRects(t,e).width+this.w.config.stroke.width+5>o-i&&r-n>o-i?r-n:o-i,h=a.getTextBasedOnMaxWidth({text:t,maxWidth:c,fontSize:e});return t.length!==h.length&&c/e<5?"":h}},{key:"animateTreemap",value:function(t,e,i,n){var o=new bi(this.ctx);o.animateRect(t,e,i,n,function(){o.animationCompleted(t)})}}]),s}(),Xx=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return B(s,[{key:"calculateTimeScaleTicks",value:function(t,e){var i=this,n=this.w;if(n.globals.allSeriesCollapsed)return n.globals.labels=[],n.globals.timescaleLabels=[],[];var o=new Lt(this.ctx),r=(e-t)/864e5;this.determineInterval(r),n.globals.disableZoomIn=!1,n.globals.disableZoomOut=!1,r<.00011574074074074075?n.globals.disableZoomIn=!0:r>5e4&&(n.globals.disableZoomOut=!0);var a=o.getTimeUnitsfromTimestamp(t,e,this.utc),c=n.globals.gridWidth/r,h=c/24,d=h/60,g=d/60,u=Math.floor(24*r),p=Math.floor(1440*r),m=Math.floor(86400*r),f=Math.floor(r),b=Math.floor(r/30),x=Math.floor(r/365),v={minMillisecond:a.minMillisecond,minSecond:a.minSecond,minMinute:a.minMinute,minHour:a.minHour,minDate:a.minDate,minMonth:a.minMonth,minYear:a.minYear},_={firstVal:v,currentMillisecond:v.minMillisecond,currentSecond:v.minSecond,currentMinute:v.minMinute,currentHour:v.minHour,currentMonthDate:v.minDate,currentDate:v.minDate,currentMonth:v.minMonth,currentYear:v.minYear,daysWidthOnXAxis:c,hoursWidthOnXAxis:h,minutesWidthOnXAxis:d,secondsWidthOnXAxis:g,numberOfSeconds:m,numberOfMinutes:p,numberOfHours:u,numberOfDays:f,numberOfMonths:b,numberOfYears:x};switch(this.tickInterval){case"years":this.generateYearScale(_);break;case"months":case"half_year":this.generateMonthScale(_);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(_);break;case"hours":this.generateHourScale(_);break;case"minutes_fives":case"minutes":this.generateMinuteScale(_);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(_)}var w=this.timeScaleArray.map(function(y){var k={position:y.position,unit:y.unit,year:y.year,day:y.day?y.day:1,hour:y.hour?y.hour:0,month:y.month+1};return"month"===y.unit?z(z({},k),{},{day:1,value:y.value+1}):"day"===y.unit||"hour"===y.unit?z(z({},k),{},{value:y.value}):"minute"===y.unit?z(z({},k),{},{value:y.value,minute:y.value}):"second"===y.unit?z(z({},k),{},{value:y.value,minute:y.minute,second:y.second}):y});return w.filter(function(y){var k=1,C=Math.ceil(n.globals.gridWidth/120),M=y.value;void 0!==n.config.xaxis.tickAmount&&(C=n.config.xaxis.tickAmount),w.length>C&&(k=Math.floor(w.length/C));var P=!1,O=!1;switch(i.tickInterval){case"years":"year"===y.unit&&(P=!0);break;case"half_year":k=7,"year"===y.unit&&(P=!0);break;case"months":k=1,"year"===y.unit&&(P=!0);break;case"months_fortnight":k=15,"year"!==y.unit&&"month"!==y.unit||(P=!0),30===M&&(O=!0);break;case"months_days":k=10,"month"===y.unit&&(P=!0),30===M&&(O=!0);break;case"week_days":k=8,"month"===y.unit&&(P=!0);break;case"days":k=1,"month"===y.unit&&(P=!0);break;case"hours":"day"===y.unit&&(P=!0);break;case"minutes_fives":case"seconds_fives":M%5!=0&&(O=!0);break;case"seconds_tens":M%10!=0&&(O=!0)}if("hours"===i.tickInterval||"minutes_fives"===i.tickInterval||"seconds_tens"===i.tickInterval||"seconds_fives"===i.tickInterval){if(!O)return!0}else if((M%k==0||P)&&!O)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var i=this.w,n=this.formatDates(t),o=this.removeOverlappingTS(n);i.globals.timescaleLabels=o.slice(),new as(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,i=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case i>15:this.tickInterval="minutes_fives";break;case i>5:this.tickInterval="minutes";break;case i>1:this.tickInterval="seconds_tens";break;case 60*i>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,i=t.currentMonth,n=t.currentYear,o=t.daysWidthOnXAxis,r=t.numberOfYears,a=e.minYear,c=0,h=new Lt(this.ctx),d="year";if(e.minDate>1||e.minMonth>0){var g=h.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);c=(h.determineDaysOfYear(e.minYear)-g+1)*o,this.timeScaleArray.push({position:c,value:a=e.minYear+1,unit:d,year:a,month:A.monthMod(i+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:c,value:a,unit:d,year:n,month:A.monthMod(i+1)});for(var u=a,p=c,m=0;m<r;m++)u++,p=h.determineDaysOfYear(u-1)*o+p,this.timeScaleArray.push({position:p,value:u,unit:d,year:u,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,i=t.currentMonthDate,n=t.currentMonth,o=t.currentYear,r=t.daysWidthOnXAxis,a=t.numberOfMonths,c=n,h=0,d=new Lt(this.ctx),g="month",u=0;if(e.minDate>1){h=(d.determineDaysOfMonths(n+1,e.minYear)-i+1)*r,c=A.monthMod(n+1);var p=o+u,m=A.monthMod(c),f=c;0===c&&(g="year",f=p,m=1,p+=u+=1),this.timeScaleArray.push({position:h,value:f,unit:g,year:p,month:m})}else this.timeScaleArray.push({position:h,value:c,unit:g,year:o,month:A.monthMod(n)});for(var b=c+1,x=h,v=0,_=1;v<a;v++,_++){0===(b=A.monthMod(b))?(g="year",u+=1):g="month";var w=this._getYear(o,b,u);x=d.determineDaysOfMonths(b,w)*r+x,this.timeScaleArray.push({position:x,value:0===b?w:b,unit:g,year:w,month:0===b?1:b}),b++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,i=t.currentMonth,n=t.currentYear,o=t.hoursWidthOnXAxis,r=t.numberOfDays,a=new Lt(this.ctx),c="day",h=e.minDate+1,d=h,g=function(_,w,y){return _>a.determineDaysOfMonths(w+1,y)&&(d=1,c="month",p=w+=1),w},u=(24-e.minHour)*o,p=h,m=g(d,i,n);0===e.minHour&&1===e.minDate?(u=0,p=A.monthMod(e.minMonth),c="month",d=e.minDate):1!==e.minDate&&0===e.minHour&&0===e.minMinute&&(u=0,p=h=e.minDate,m=g(d=h,i,n),1!==p&&(c="day")),this.timeScaleArray.push({position:u,value:p,unit:c,year:this._getYear(n,m,0),month:A.monthMod(m),day:d});for(var f=u,b=0;b<r;b++){c="day",m=g(d+=1,m,this._getYear(n,m,0));var x=this._getYear(n,m,0);f=24*o+f;var v=1===d?A.monthMod(m):d;this.timeScaleArray.push({position:f,value:v,unit:c,year:x,month:A.monthMod(m),day:v})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,i=t.currentDate,n=t.currentMonth,o=t.currentYear,r=t.minutesWidthOnXAxis,a=t.numberOfHours,c=new Lt(this.ctx),h="hour",d=function(k,C){return k>c.determineDaysOfMonths(C+1,o)&&(b=1,C+=1),{month:C,date:b}},g=function(k,C){return k>c.determineDaysOfMonths(C+1,o)?C+=1:C},u=60-(e.minMinute+e.minSecond/60),p=u*r,m=e.minHour+1,f=m;60===u&&(p=0,f=m=e.minHour);var b=i;f>=24&&(f=0,h="day",m=b+=1);var x=d(b,n).month;x=g(b,x),m>31&&(m=b=1),this.timeScaleArray.push({position:p,value:m,unit:h,day:b,hour:f,year:o,month:A.monthMod(x)}),f++;for(var v=p,_=0;_<a;_++){h="hour",f>=24&&(f=0,h="day",x=d(b+=1,x).month,x=g(b,x));var w=this._getYear(o,x,0);this.timeScaleArray.push({position:v=60*r+v,value:0===f?b:f,unit:h,hour:f,day:b,year:w,month:A.monthMod(x)}),f++}}},{key:"generateMinuteScale",value:function(t){for(var h=t.minutesWidthOnXAxis,g=t.numberOfMinutes,u=t.currentMinute+1,p=t.currentDate,m=t.currentMonth,f=t.currentYear,b=t.currentHour,x=(60-t.currentSecond-t.currentMillisecond/1e3)*t.secondsWidthOnXAxis,v=0;v<g;v++)u>=60&&(u=0,24===(b+=1)&&(b=0)),this.timeScaleArray.push({position:x,value:u,unit:"minute",hour:b,minute:u,day:p,year:this._getYear(f,m,0),month:A.monthMod(m)}),x+=h,u++}},{key:"generateSecondScale",value:function(t){for(var h=t.secondsWidthOnXAxis,d=t.numberOfSeconds,g=t.currentSecond+1,u=t.currentMinute,p=t.currentDate,m=t.currentMonth,f=t.currentYear,b=t.currentHour,x=(1e3-t.currentMillisecond)/1e3*h,v=0;v<d;v++)g>=60&&(g=0,++u>=60&&(u=0,24==++b&&(b=0))),this.timeScaleArray.push({position:x,value:g,unit:"second",hour:b,minute:u,second:g,day:p,year:this._getYear(f,m,0),month:A.monthMod(m)}),x+=h,g++}},{key:"createRawDateString",value:function(t,e){var i=t.year;return 0===t.month&&(t.month=1),i+="-"+("0"+t.month.toString()).slice(-2),i+="day"===t.unit?"day"===t.unit?"-"+("0"+e).slice(-2):"-01":"-"+("0"+(t.day?t.day:"1")).slice(-2),i+="hour"===t.unit?"hour"===t.unit?"T"+("0"+e).slice(-2):"T00":"T"+("0"+(t.hour?t.hour:"0")).slice(-2),i+="minute"===t.unit?":"+("0"+e).slice(-2):":"+(t.minute?("0"+t.minute).slice(-2):"00"),i+="second"===t.unit?":"+("0"+e).slice(-2):":00",this.utc&&(i+=".000Z"),i}},{key:"formatDates",value:function(t){var e=this,i=this.w;return t.map(function(n){var o=n.value.toString(),r=new Lt(e.ctx),a=e.createRawDateString(n,o),c=r.getDate(r.parseDate(a));if(e.utc||(c=r.getDate(r.parseDateWithTimezone(a))),void 0===i.config.xaxis.labels.format){var h="dd MMM",d=i.config.xaxis.labels.datetimeFormatter;"year"===n.unit&&(h=d.year),"month"===n.unit&&(h=d.month),"day"===n.unit&&(h=d.day),"hour"===n.unit&&(h=d.hour),"minute"===n.unit&&(h=d.minute),"second"===n.unit&&(h=d.second),o=r.formatDate(c,h)}else o=r.formatDate(c,i.config.xaxis.labels.format);return{dateString:a,position:n.position,value:o,unit:n.unit,year:n.year,month:n.month}})}},{key:"removeOverlappingTS",value:function(t){var e,i=this,n=new D(this.ctx),o=!1;t.length>0&&t[0].value&&t.every(function(c){return c.value.length===t[0].value.length})&&(o=!0,e=n.getTextRects(t[0].value).width);var r=0;return t.map(function(c,h){if(h>0&&i.w.config.xaxis.labels.hideOverlappingLabels){var d=o?e:n.getTextRects(t[r].value).width;return c.position>t[r].position+d+10?(r=h,c):null}return c}).filter(function(c){return null!==c})}},{key:"_getYear",value:function(t,e,i){return t+Math.floor(e/12)+i}}]),s}(),Wx=function(){function s(t,e){N(this,s),this.ctx=e,this.w=e.w,this.el=t}return B(s,[{key:"setupElements",value:function(){var t=this.w,e=t.globals,i=t.config,n=i.chart.type;e.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].includes(n),e.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].includes(n),e.isBarHorizontal=["bar","rangeBar","boxPlot"].includes(n)&&i.plotOptions.bar.horizontal,e.chartClass=".apexcharts".concat(e.chartID),e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),D.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas ".concat(e.chartClass.substring(1))}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=window.SVG().addTo(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(i.chart.offsetX,", ").concat(i.chart.offsetY,")")}),e.dom.Paper.node.style.background="dark"!==i.theme.mode||i.chart.background?"light"!==i.theme.mode||i.chart.background?i.chart.background:"#fff":"#343A3F",this.setSVGDimensions(),e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject"),D.setAttrs(e.dom.elLegendForeign,{x:0,y:0,width:e.svgWidth,height:e.svgHeight}),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elWrap.appendChild(e.dom.elLegendWrap),e.dom.Paper.node.appendChild(e.dom.elLegendForeign),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var i=this.w,n=this.ctx,o=i.config,r=i.globals,a={line:{series:[],i:[]},area:{series:[],i:[]},scatter:{series:[],i:[]},bubble:{series:[],i:[]},bar:{series:[],i:[]},candlestick:{series:[],i:[]},boxPlot:{series:[],i:[]},rangeBar:{series:[],i:[]},rangeArea:{series:[],seriesRangeEnd:[],i:[]}},c=o.chart.type||"line",h=null,d=0;r.series.forEach(function(k,C){var M,P,O="column"===(null===(M=t[C])||void 0===M?void 0:M.type)?"bar":(null===(P=t[C])||void 0===P?void 0:P.type)||("column"===c?"bar":c);a[O]?("rangeArea"===O?(a[O].series.push(r.seriesRangeStart[C]),a[O].seriesRangeEnd.push(r.seriesRangeEnd[C])):a[O].series.push(k),a[O].i.push(C),"bar"===O&&(i.globals.columnSeries=a.bar)):["heatmap","treemap","pie","donut","polarArea","radialBar","radar"].includes(O)?h=O:console.warn("You have specified an unrecognized series type (".concat(O,").")),c!==O&&"scatter"!==O&&d++}),d>0&&(h&&console.warn("Chart or series type ".concat(h," cannot appear with other chart or series types.")),a.bar.series.length>0&&o.plotOptions.bar.horizontal&&(d-=a.bar.series.length,a.bar={series:[],i:[]},i.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),r.comboCharts||(r.comboCharts=d>0);var g=new or(n,e),u=new nr(n,e);n.pie=new hh(n);var p=new Fx(n);n.rangeBar=new zx(n,e);var m=new Dx(n),f=[];if(r.comboCharts){var b,x,v=new kt(n);if(a.area.series.length>0&&(b=f).push.apply(b,At(v.drawSeriesByGroup(a.area,r.areaGroups,"area",g))),a.bar.series.length>0)if(o.chart.stacked){var _=new ah(n,e);f.push(_.draw(a.bar.series,a.bar.i))}else n.bar=new Oi(n,e),f.push(n.bar.draw(a.bar.series,a.bar.i));if(a.rangeArea.series.length>0&&f.push(g.draw(a.rangeArea.series,"rangeArea",a.rangeArea.i,a.rangeArea.seriesRangeEnd)),a.line.series.length>0&&(x=f).push.apply(x,At(v.drawSeriesByGroup(a.line,r.lineGroups,"line",g))),a.candlestick.series.length>0&&f.push(u.draw(a.candlestick.series,"candlestick",a.candlestick.i)),a.boxPlot.series.length>0&&f.push(u.draw(a.boxPlot.series,"boxPlot",a.boxPlot.i)),a.rangeBar.series.length>0&&f.push(n.rangeBar.draw(a.rangeBar.series,a.rangeBar.i)),a.scatter.series.length>0){var w=new or(n,e,!0);f.push(w.draw(a.scatter.series,"scatter",a.scatter.i))}if(a.bubble.series.length>0){var y=new or(n,e,!0);f.push(y.draw(a.bubble.series,"bubble",a.bubble.i))}}else switch(o.chart.type){case"line":f=g.draw(r.series,"line");break;case"area":f=g.draw(r.series,"area");break;case"bar":o.chart.stacked?f=new ah(n,e).draw(r.series):(n.bar=new Oi(n,e),f=n.bar.draw(r.series));break;case"candlestick":f=new nr(n,e).draw(r.series,"candlestick");break;case"boxPlot":f=new nr(n,e).draw(r.series,o.chart.type);break;case"rangeBar":f=n.rangeBar.draw(r.series);break;case"rangeArea":f=g.draw(r.seriesRangeStart,"rangeArea",void 0,r.seriesRangeEnd);break;case"heatmap":f=new Lx(n,e).draw(r.series);break;case"treemap":f=new Hx(n,e).draw(r.series);break;case"pie":case"donut":case"polarArea":f=n.pie.draw(r.series);break;case"radialBar":f=p.draw(r.series);break;case"radar":f=m.draw(r.series);break;default:f=g.draw(r.series)}return f}},{key:"setSVGDimensions",value:function(){var t=this.w,e=t.globals,i=t.config;i.chart.width=i.chart.width||"100%",i.chart.height=i.chart.height||"auto",e.svgWidth=i.chart.width,e.svgHeight=i.chart.height;var n=A.getDimensions(this.el),o=i.chart.width.toString().split(/[0-9]+/g).pop();"%"===o?A.isNumber(n[0])&&(0===n[0].width&&(n=A.getDimensions(this.el.parentNode)),e.svgWidth=n[0]*parseInt(i.chart.width,10)/100):"px"!==o&&""!==o||(e.svgWidth=parseInt(i.chart.width,10));var r=String(i.chart.height).toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===r){var a=A.getDimensions(this.el.parentNode);e.svgHeight=a[1]*parseInt(i.chart.height,10)/100}else e.svgHeight=parseInt(i.chart.height,10);else e.svgHeight=e.axisCharts?e.svgWidth/1.61:e.svgWidth/1.2;e.svgWidth=Math.max(e.svgWidth,0),e.svgHeight=Math.max(e.svgHeight,0),D.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==r&&(e.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(e.svgHeight+(i.chart.sparkline.enabled?0:e.axisCharts?i.chart.parentHeightOffset:0),"px")),e.dom.elWrap.style.width="".concat(e.svgWidth,"px"),e.dom.elWrap.style.height="".concat(e.svgHeight,"px")}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY;D.setAttrs(t.dom.elGraphical.node,{transform:"translate(".concat(t.translateX,", ").concat(e,")")})}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,i=0,n=t.config.chart.sparkline.enabled?1:15;n+=t.config.grid.padding.bottom,["top","bottom"].includes(t.config.legend.position)&&t.config.legend.show&&!t.config.legend.floating&&(i=new ih(this.ctx).legendHelpers.getLegendDimensions().clwh+7);var o=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),r=2.05*t.globals.radialSize;if(o&&!t.config.chart.sparkline.enabled&&0!==t.config.plotOptions.radialBar.startAngle){var a=A.getBoundingClientRect(o);r=a.bottom,r=Math.max(2.05*t.globals.radialSize,a.bottom-a.top)}var h=Math.ceil(r+e.translateY+i+n);e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",h),t.config.chart.height&&String(t.config.chart.height).includes("%")||(e.dom.elWrap.style.height="".concat(h,"px"),D.setAttrs(e.dom.Paper.node,{height:h}),e.dom.Paper.node.parentNode.parentNode.style.minHeight="".concat(h,"px"))}},{key:"coreCalculations",value:function(){new tr(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map(function(){return[]})},i=new Kc,n=this.w.globals,o={dataWasParsed:n.dataWasParsed,originalSeries:n.originalSeries};i.initGlobalVars(n),n.seriesXvalues=e(),n.seriesYvalues=e(),o.dataWasParsed&&(n.dataWasParsed=o.dataWasParsed,n.originalSeries=o.originalSeries)}},{key:"isMultipleY",value:function(){return!!(Array.isArray(this.w.config.yaxis)&&this.w.config.yaxis.length>1)&&(this.w.globals.isMultipleYAxis=!0,!0)}},{key:"xySettings",value:function(){var t=this.w,e=null;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new ir(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new ir(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new Xx(this.ctx);var i=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(i=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(i)}e=new kt(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,e=this.ctx,i=this.w;if(i.config.chart.brush.enabled&&"function"!=typeof i.config.chart.events.selection){var n=Array.isArray(i.config.chart.brush.targets)?i.config.chart.brush.targets:[i.config.chart.brush.target];n.forEach(function(o){var r=e.constructor.getChartByID(o);r.w.globals.brushSource=t.ctx,"function"!=typeof r.w.config.chart.events.zoomed&&(r.w.config.chart.events.zoomed=function(){return t.updateSourceChart(r)}),"function"!=typeof r.w.config.chart.events.scrolled&&(r.w.config.chart.events.scrolled=function(){return t.updateSourceChart(r)})}),i.config.chart.events.selection=function(o,r){n.forEach(function(a){e.constructor.getChartByID(a).ctx.updateHelpers._updateOptions({xaxis:{min:r.xaxis.min,max:r.xaxis.max}},!1,!1,!1,!1)})}}}}]),s}(),Ux=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"_updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise(function(a){var c=[e.ctx];o&&(c=e.ctx.getSyncedCharts()),e.ctx.w.globals.isExecCalled&&(c=[e.ctx],e.ctx.w.globals.isExecCalled=!1),c.forEach(function(h,d){var g=h.w;if(g.globals.shouldAnimate=n,i||(g.globals.resized=!0,g.globals.dataChanged=!0,n&&h.series.getPreviousPaths()),t&&"object"===Bt(t)&&(h.config=new cn(t),t=kt.extendArrayProps(h.config,t,g),h.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,g.config=A.extend(g.config,t),r&&(g.globals.lastXAxis=t.xaxis?A.clone(t.xaxis):[],g.globals.lastYAxis=t.yaxis?A.clone(t.yaxis):[],g.globals.initialConfig=A.extend({},g.config),g.globals.initialSeries=A.clone(g.config.series),t.series))){for(var u=0;u<g.globals.collapsedSeriesIndices.length;u++){var p=g.config.series[g.globals.collapsedSeriesIndices[u]];g.globals.collapsedSeries[u].data=g.globals.axisCharts?p.data.slice():p}for(var m=0;m<g.globals.ancillaryCollapsedSeriesIndices.length;m++){var f=g.config.series[g.globals.ancillaryCollapsedSeriesIndices[m]];g.globals.ancillaryCollapsedSeries[m].data=g.globals.axisCharts?f.data.slice():f}h.series.emptyCollapsedSeries(g.config.series)}return h.update(t).then(function(){d===c.length-1&&a(h)})})})}},{key:"_updateSeries",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(function(o){var r=i.w;return r.globals.shouldAnimate=e,r.globals.dataChanged=!0,e&&i.ctx.series.getPreviousPaths(),i.ctx.data.resetParsingFlags(),i.ctx.data.parseData(t),n&&(r.globals.initialConfig.series=A.clone(r.config.series),r.globals.initialSeries=A.clone(r.config.series)),i.ctx.update().then(function(){o(i.ctx)})})}},{key:"_extendSeries",value:function(t,e){var i=this.w,n=i.config.series[e];return z(z({},i.config.series[e]),{},{name:t.name?t.name:n?.name,color:t.color?t.color:n?.color,type:t.type?t.type:n?.type,group:t.group?t.group:n?.group,hidden:void 0!==t.hidden?t.hidden:n?.hidden,data:t.data?t.data:n?.data,zIndex:void 0!==t.zIndex?t.zIndex:e})}},{key:"toggleDataPointSelection",value:function(t,e){var i=this.w,n=null,o=".apexcharts-series[data\\:realIndex='".concat(t,"']");return i.globals.axisCharts?n=i.globals.dom.Paper.findOne("".concat(o," path[j='").concat(e,"'], ").concat(o," circle[j='").concat(e,"'], ").concat(o," rect[j='").concat(e,"']")):void 0===e&&(n=i.globals.dom.Paper.findOne("".concat(o," path[j='").concat(t,"']")),"pie"!==i.config.chart.type&&"polarArea"!==i.config.chart.type&&"donut"!==i.config.chart.type||this.ctx.pie.pieClicked(t)),n?(new D(this.ctx).pathMouseDown(n,null),n.node?n.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach(function(n){void 0!==t.xaxis[n]&&(e.config.xaxis[n]=t.xaxis[n],e.globals.lastXAxis[n]=t.xaxis[n])}),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var i=new ln(t);t=i.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){return t.chart&&t.chart.stacked&&"100%"===t.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach(function(e,i){t.yaxis[i].min=0,t.yaxis[i].max=100}):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,i=this.w,n=i.globals.lastXAxis,o=i.globals.lastYAxis;t&&t.xaxis&&(n=t.xaxis),t&&t.yaxis&&(o=t.yaxis),i.config.xaxis.min=n.min,i.config.xaxis.max=n.max,i.config.yaxis.map(function(a,c){i.globals.zoomed||void 0!==o[c]?function(a){void 0!==o[a]&&(i.config.yaxis[a].min=o[a].min,i.config.yaxis[a].max=o[a].max)}(c):void 0!==e.ctx.opts.yaxis[c]&&(a.min=e.ctx.opts.yaxis[c].min,a.max=e.ctx.opts.yaxis[c].max)})}}]),s}();!function(){function s(){for(var o=arguments.length>0&&arguments[0]!==g?arguments[0]:[],r=arguments.length>1?arguments[1]:g,a=arguments.length>2?arguments[2]:g,c=arguments.length>3?arguments[3]:g,h=arguments.length>4?arguments[4]:g,d=arguments.length>5?arguments[5]:g,g=arguments.length>6?arguments[6]:g,u=o.slice(r,a||g),p=c.slice(h,d||g),m=0,f={pos:[0,0],start:[0,0]},b={pos:[0,0],start:[0,0]};u[m]=t.call(f,u[m]),p[m]=t.call(b,p[m]),u[m][0]!=p[m][0]||"M"==u[m][0]||"A"==u[m][0]&&(u[m][4]!=p[m][4]||u[m][5]!=p[m][5])?(Array.prototype.splice.apply(u,[m,1].concat(i.call(f,u[m]))),Array.prototype.splice.apply(p,[m,1].concat(i.call(b,p[m])))):(u[m]=e.call(f,u[m]),p[m]=e.call(b,p[m])),++m!=u.length||m!=p.length;)m==u.length&&u.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]),m==p.length&&p.push(["C",b.pos[0],b.pos[1],b.pos[0],b.pos[1],b.pos[0],b.pos[1]]);return{start:u,dest:p}}function t(o){switch(o[0]){case"z":case"Z":o[0]="L",o[1]=this.start[0],o[2]=this.start[1];break;case"H":o[0]="L",o[2]=this.pos[1];break;case"V":o[0]="L",o[2]=o[1],o[1]=this.pos[0];break;case"T":o[0]="Q",o[3]=o[1],o[4]=o[2],o[1]=this.reflection[1],o[2]=this.reflection[0];break;case"S":o[0]="C",o[6]=o[4],o[5]=o[3],o[4]=o[2],o[3]=o[1],o[2]=this.reflection[1],o[1]=this.reflection[0]}return o}function e(o){var r=o.length;return this.pos=[o[r-2],o[r-1]],-1!="SCQT".indexOf(o[0])&&(this.reflection=[2*this.pos[0]-o[r-4],2*this.pos[1]-o[r-3]]),o}function i(o){var r=[o];switch(o[0]){case"M":return this.pos=this.start=[o[1],o[2]],r;case"L":o[5]=o[3]=o[1],o[6]=o[4]=o[2],o[1]=this.pos[0],o[2]=this.pos[1];break;case"Q":o[6]=o[4],o[5]=o[3],o[4]=1*o[4]/3+2*o[2]/3,o[3]=1*o[3]/3+2*o[1]/3,o[2]=1*this.pos[1]/3+2*o[2]/3,o[1]=1*this.pos[0]/3+2*o[1]/3;break;case"A":o=(r=function(a,c){var h,d,g,u,p,m,f,b,x,v,_,w,y,k,C,M,P,O,S,E,I,R,T,L,F,V,H=Math.abs(c[1]),Y=Math.abs(c[2]),X=c[3]%360,Q=c[4],ct=c[5],$=c[6],bt=c[7],K=new at(a),it=new at($,bt),rt=[];if(0===H||0===Y||K.x===it.x&&K.y===it.y)return[["C",K.x,K.y,it.x,it.y,it.x,it.y]];for((d=(h=new at((K.x-it.x)/2,(K.y-it.y)/2).transform((new W).rotate(X))).x*h.x/(H*H)+h.y*h.y/(Y*Y))>1&&(H*=d=Math.sqrt(d),Y*=d),g=(new W).rotate(X).scale(1/H,1/Y).rotate(-X),K=K.transform(g),m=(u=[(it=it.transform(g)).x-K.x,it.y-K.y])[0]*u[0]+u[1]*u[1],p=Math.sqrt(m),u[0]/=p,u[1]/=p,f=m<4?Math.sqrt(1-m/4):0,Q===ct&&(f*=-1),b=new at((it.x+K.x)/2+f*-u[1],(it.y+K.y)/2+f*u[0]),x=new at(K.x-b.x,K.y-b.y),v=new at(it.x-b.x,it.y-b.y),_=Math.acos(x.x/Math.sqrt(x.x*x.x+x.y*x.y)),x.y<0&&(_*=-1),w=Math.acos(v.x/Math.sqrt(v.x*v.x+v.y*v.y)),v.y<0&&(w*=-1),ct&&_>w&&(w+=2*Math.PI),!ct&&_<w&&(w-=2*Math.PI),M=[],P=_,y=(w-_)/(k=Math.ceil(2*Math.abs(_-w)/Math.PI)),C=4*Math.tan(y/4)/3,I=0;I<=k;I++)S=Math.cos(P),O=Math.sin(P),E=new at(b.x+S,b.y+O),M[I]=[new at(E.x+C*O,E.y-C*S),E,new at(E.x-C*O,E.y+C*S)],P+=y;for(M[0][0]=M[0][1].clone(),M[M.length-1][2]=M[M.length-1][1].clone(),g=(new W).rotate(X).scale(H,Y).rotate(-X),I=0,R=M.length;I<R;I++)M[I][0]=M[I][0].transform(g),M[I][1]=M[I][1].transform(g),M[I][2]=M[I][2].transform(g);for(I=1,R=M.length;I<R;I++)T=(E=M[I-1][2]).x,L=E.y,F=(E=M[I][0]).x,V=E.y,$=(E=M[I][1]).x,rt.push(["C",T,L,F,V,$,bt=E.y]);return rt}(this.pos,o))[0]}return o[0]="C",this.pos=[o[5],o[6]],this.reflection=[2*o[5]-o[3],2*o[6]-o[4]],r}function n(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;if(!1===r)return!1;for(var a=r,c=o.length;a<c;++a)if("M"==o[a][0])return a;return!1}U(se,{morph:function(o,r,a,c,h){for(var d=this.parse(o),g=this.parse(r),u=0,p=0,m=!1,f=!1;!1!==u||!1!==p;){var b;m=n(d,!1!==u&&u+1),f=n(g,!1!==p&&p+1),!1===u&&(u=0==(b=new se(x.start).bbox()).height||0==b.width?d.push(d[0])-1:d.push(["M",b.x+b.width/2,b.y+b.height/2])-1),!1===p&&(p=0==(b=new se(x.dest).bbox()).height||0==b.width?g.push(g[0])-1:g.push(["M",b.x+b.width/2,b.y+b.height/2])-1);var x=s(d,u,m,g,p,f);d=d.slice(0,u).concat(x.start,!1===m?[]:d.slice(m)),g=g.slice(0,p).concat(x.dest,!1===f?[]:g.slice(f)),u=!1!==m&&u+x.start.length,p=!1!==f&&p+x.dest.length}return this._array=d,this.destination=new se,this.destination._array=g,this.fromArray(d.map(function(_,w){return g[w].map(function(k,C){return 0===C?k:c.step(_[C],g[w][C],a,h[w],h)})}))}})}();const gh=s=>(s.changedTouches&&(s=s.changedTouches[0]),{x:s.clientX,y:s.clientY});class Gx{constructor(t){t.remember("_draggable",this),this.el=t,this.drag=this.drag.bind(this),this.startDrag=this.startDrag.bind(this),this.endDrag=this.endDrag.bind(this)}init(t){t?(this.el.on("mousedown.drag",this.startDrag),this.el.on("touchstart.drag",this.startDrag,{passive:!1})):(this.el.off("mousedown.drag"),this.el.off("touchstart.drag"))}startDrag(t){const e=!t.type.indexOf("mouse");if(e&&1!==t.which&&0!==t.buttons||this.el.dispatch("beforedrag",{event:t,handler:this}).defaultPrevented)return;t.preventDefault(),t.stopPropagation(),this.init(!1),this.box=this.el.bbox(),this.lastClick=this.el.point(gh(t));const i=(e?"mouseup":"touchend")+".drag";_e(window,(e?"mousemove":"touchmove")+".drag",this.drag,this,{passive:!1}),_e(window,i,this.endDrag,this,{passive:!1}),this.el.fire("dragstart",{event:t,handler:this,box:this.box})}drag(t){const{box:e,lastClick:i}=this,n=this.el.point(gh(t)),o=n.x-i.x,r=n.y-i.y;if(!o&&!r)return e;const a=e.x+o,c=e.y+r;this.box=new Ct(a,c,e.w,e.h),this.lastClick=n,this.el.dispatch("dragmove",{event:t,handler:this,box:this.box}).defaultPrevented||this.move(a,c)}move(t,e){"svg"===this.el.type?Fe.prototype.move.call(this.el,t,e):this.el.move(t,e)}endDrag(t){this.drag(t),this.el.fire("dragend",{event:t,handler:this,box:this.box}),Qt(window,"mousemove.drag"),Qt(window,"touchmove.drag"),Qt(window,"mouseup.drag"),Qt(window,"touchend.drag"),this.init(!0)}}function rr(s,t,e,i=null){return function(n){n.preventDefault(),n.stopPropagation(),t.fire(s,{x:n.pageX||n.touches[0].pageX,y:n.pageY||n.touches[0].pageY,event:n,index:i,points:e})}}function ar([s,t],{a:e,b:i,c:n,d:o,e:r,f:a}){return[s*e+t*n+r,s*i+t*o+a]}U(Tt,{draggable(s=!0){return(this.remember("_draggable")||new Gx(this)).init(s),this}});let uh=class{constructor(s){this.el=s,s.remember("_selectHandler",this),this.selection=new Fe,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=Qi();this.observer=new t.MutationObserver(this.mutationHandler)}init(s){this.createHandle=s.createHandle||this.createHandleFn,this.createRot=s.createRot||this.createRotFn,this.updateHandle=s.updateHandle||this.updateHandleFn,this.updateRot=s.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(s,t){if(!s)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((s,t,e)=>{const i=this.order[t];this.createHandle.call(this,this.selection,s,t,e,i),this.selection.get(t+1).addClass("svg_select_handle svg_select_handle_"+i).on("mousedown.selection touchstart.selection",rr(i,this.el,this.handlePoints,t))})}createHandleFn(s){s.polyline()}updateHandleFn(s,t,e,i){const n=i.at(e-1),o=i[(e+1)%i.length],r=t,a=[r[0]-n[0],r[1]-n[1]],c=[r[0]-o[0],r[1]-o[1]],h=Math.sqrt(a[0]*a[0]+a[1]*a[1]),d=Math.sqrt(c[0]*c[0]+c[1]*c[1]),g=[a[0]/h,a[1]/h],u=[c[0]/d,c[1]/d];s.plot([[r[0]-10*g[0],r[1]-10*g[1]],r,[r[0]-10*u[0],r[1]-10*u[1]]])}updateResizeHandles(){this.handlePoints.forEach((s,t,e)=>{const i=this.order[t];this.updateHandle.call(this,this.selection.get(t+1),s,t,e,i)})}createRotFn(s){s.line(),s.circle(5)}getPoint(s){return this.handlePoints[this.order.indexOf(s)]}getPointHandle(s){return this.selection.get(this.order.indexOf(s)+1)}updateRotFn(s,t){const e=this.getPoint("t");s.get(0).plot(e[0],e[1],t[0],t[1]),s.get(1).center(t[0],t[1])}createRotationHandle(){const s=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",rr("rot",this.el,this.handlePoints));this.createRot.call(this,s)}updateRotationHandle(){const s=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(s,this.rotationPoint,this.handlePoints)}updatePoints(){const s=this.el.bbox(),t=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(s).map(e=>ar(e,t)),this.rotationPoint=ar(this.getRotationPoint(s),t)}getHandlePoints({x:s,x2:t,y:e,y2:i,cx:n,cy:o}=this.el.bbox()){return[[s,e],[n,e],[t,e],[t,o],[t,i],[n,i],[s,i],[s,o]]}getRotationPoint({y:s,cx:t}=this.el.bbox()){return[t,s-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}};const ph=s=>function(t=!0,e={}){"object"==typeof t&&(e=t,t=!0);let i=this.remember("_"+s.name);return i||(t.prototype instanceof uh?(i=new t(this),t=!0):i=new s(this),this.remember("_"+s.name,i)),i.active(t,e),this};function lr(s,t,e,i=null){return function(n){n.preventDefault(),n.stopPropagation(),t.fire(s,{x:n.pageX||n.touches[0].pageX,y:n.pageY||n.touches[0].pageY,event:n,index:i,points:e})}}function cr([s,t],{a:e,b:i,c:n,d:o,e:r,f:a}){return[s*e+t*n+r,s*i+t*o+a]}U(Tt,{select:ph(uh)}),U([si,oi,ei],{pointSelect:ph(class{constructor(s){this.el=s,s.remember("_pointSelectHandler",this),this.selection=new Fe,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=Qi();this.observer=new t.MutationObserver(this.mutationHandler)}init(s){this.createHandle=s.createHandle||this.createHandleFn,this.updateHandle=s.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(s,t){if(!s)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((s,t,e)=>{this.createHandle.call(this,this.selection,s,t,e),this.selection.get(t+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",rr("point",this.el,this.points,t))})}createHandleFn(s){s.circle(5)}updateHandleFn(s,t){s.center(t[0],t[1])}updatePointHandles(){this.points.forEach((s,t,e)=>{this.updateHandle.call(this,this.selection.get(t+1),s,t,e)})}updatePoints(){const s=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(t=>ar(t,s))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});class fh{constructor(t){this.el=t,t.remember("_selectHandler",this),this.selection=new Fe,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const e=Qi();this.observer=new e.MutationObserver(this.mutationHandler)}init(t){this.createHandle=t.createHandle||this.createHandleFn,this.createRot=t.createRot||this.createRotFn,this.updateHandle=t.updateHandle||this.updateHandleFn,this.updateRot=t.updateRot||this.updateRotFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createResizeHandles(),this.updateResizeHandles(),this.createRotationHandle(),this.updateRotationHandle(),this.observer.observe(this.el.node,{attributes:!0})}active(t,e){if(!t)return this.selection.clear().remove(),void this.observer.disconnect();this.init(e)}createSelection(){this.selection.polygon(this.handlePoints).addClass("svg_select_shape")}updateSelection(){this.selection.get(0).plot(this.handlePoints)}createResizeHandles(){this.handlePoints.forEach((t,e,i)=>{const n=this.order[e];this.createHandle.call(this,this.selection,t,e,i,n),this.selection.get(e+1).addClass("svg_select_handle svg_select_handle_"+n).on("mousedown.selection touchstart.selection",lr(n,this.el,this.handlePoints,e))})}createHandleFn(t){t.polyline()}updateHandleFn(t,e,i,n){const o=n.at(i-1),r=n[(i+1)%n.length],a=e,c=[a[0]-o[0],a[1]-o[1]],h=[a[0]-r[0],a[1]-r[1]],d=Math.sqrt(c[0]*c[0]+c[1]*c[1]),g=Math.sqrt(h[0]*h[0]+h[1]*h[1]),u=[c[0]/d,c[1]/d],p=[h[0]/g,h[1]/g];t.plot([[a[0]-10*u[0],a[1]-10*u[1]],a,[a[0]-10*p[0],a[1]-10*p[1]]])}updateResizeHandles(){this.handlePoints.forEach((t,e,i)=>{const n=this.order[e];this.updateHandle.call(this,this.selection.get(e+1),t,e,i,n)})}createRotFn(t){t.line(),t.circle(5)}getPoint(t){return this.handlePoints[this.order.indexOf(t)]}getPointHandle(t){return this.selection.get(this.order.indexOf(t)+1)}updateRotFn(t,e){const i=this.getPoint("t");t.get(0).plot(i[0],i[1],e[0],e[1]),t.get(1).center(e[0],e[1])}createRotationHandle(){const t=this.selection.group().addClass("svg_select_handle_rot").on("mousedown.selection touchstart.selection",lr("rot",this.el,this.handlePoints));this.createRot.call(this,t)}updateRotationHandle(){const t=this.selection.findOne("g.svg_select_handle_rot");this.updateRot(t,this.rotationPoint,this.handlePoints)}updatePoints(){const t=this.el.bbox(),e=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.handlePoints=this.getHandlePoints(t).map(i=>cr(i,e)),this.rotationPoint=cr(this.getRotationPoint(t),e)}getHandlePoints({x:t,x2:e,y:i,y2:n,cx:o,cy:r}=this.el.bbox()){return[[t,i],[o,i],[e,i],[e,r],[e,n],[o,n],[t,n],[t,r]]}getRotationPoint({y:t,cx:e}=this.el.bbox()){return[e,t-20]}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updateResizeHandles(),this.updateRotationHandle()}}const mh=s=>function(t=!0,e={}){"object"==typeof t&&(e=t,t=!0);let i=this.remember("_"+s.name);return i||(t.prototype instanceof fh?(i=new t(this),t=!0):i=new s(this),this.remember("_"+s.name,i)),i.active(t,e),this};U(Tt,{select:mh(fh)}),U([si,oi,ei],{pointSelect:mh(class{constructor(s){this.el=s,s.remember("_pointSelectHandler",this),this.selection=new Fe,this.order=["lt","t","rt","r","rb","b","lb","l","rot"],this.mutationHandler=this.mutationHandler.bind(this);const t=Qi();this.observer=new t.MutationObserver(this.mutationHandler)}init(s){this.createHandle=s.createHandle||this.createHandleFn,this.updateHandle=s.updateHandle||this.updateHandleFn,this.el.root().put(this.selection),this.updatePoints(),this.createSelection(),this.createPointHandles(),this.updatePointHandles(),this.observer.observe(this.el.node,{attributes:!0})}active(s,t){if(!s)return this.selection.clear().remove(),void this.observer.disconnect();this.init(t)}createSelection(){this.selection.polygon(this.points).addClass("svg_select_shape_pointSelect")}updateSelection(){this.selection.get(0).plot(this.points)}createPointHandles(){this.points.forEach((s,t,e)=>{this.createHandle.call(this,this.selection,s,t,e),this.selection.get(t+1).addClass("svg_select_handle_point").on("mousedown.selection touchstart.selection",lr("point",this.el,this.points,t))})}createHandleFn(s){s.circle(5)}updateHandleFn(s,t){s.center(t[0],t[1])}updatePointHandles(){this.points.forEach((s,t,e)=>{this.updateHandle.call(this,this.selection.get(t+1),s,t,e)})}updatePoints(){const s=this.el.parent().screenCTM().inverseO().multiplyO(this.el.screenCTM());this.points=this.el.array().map(t=>cr(t,s))}mutationHandler(){this.updatePoints(),this.updateSelection(),this.updatePointHandles()}})});const ls=s=>(s.changedTouches&&(s=s.changedTouches[0]),{x:s.clientX,y:s.clientY}),bh=s=>{let t=1/0,e=1/0,i=-1/0,n=-1/0;for(let o=0;o<s.length;o++){const r=s[o];t=Math.min(t,r[0]),e=Math.min(e,r[1]),i=Math.max(i,r[0]),n=Math.max(n,r[1])}return new Ct(t,e,i-t,n-e)};class xh{constructor(t){this.el=t,t.remember("_ResizeHandler",this),this.lastCoordinates=null,this.eventType="",this.lastEvent=null,this.handleResize=this.handleResize.bind(this),this.resize=this.resize.bind(this),this.endResize=this.endResize.bind(this),this.rotate=this.rotate.bind(this),this.movePoint=this.movePoint.bind(this)}active(t,e){this.preserveAspectRatio=e.preserveAspectRatio??!1,this.aroundCenter=e.aroundCenter??!1,this.grid=e.grid??0,this.degree=e.degree??0,this.el.off(".resize"),t&&(this.el.on(["lt.resize","rt.resize","rb.resize","lb.resize","t.resize","r.resize","b.resize","l.resize","rot.resize","point.resize"],this.handleResize),this.lastEvent&&("rot"===this.eventType?this.rotate(this.lastEvent):"point"===this.eventType?this.movePoint(this.lastEvent):this.resize(this.lastEvent)))}handleResize(t){this.eventType=t.type;const{event:e,index:i,points:n}=t.detail,o=!e.type.indexOf("mouse");if(o&&1!==(e.which||e.buttons)||this.el.dispatch("beforeresize",{event:t,handler:this}).defaultPrevented)return;this.box=this.el.bbox(),this.startPoint=this.el.point(ls(e)),this.index=i,this.points=n.slice();const a=(o?"mouseup":"touchcancel.resize touchend")+".resize";_e(window,(o?"mousemove":"touchmove")+".resize","point"===t.type?this.movePoint:"rot"===t.type?this.rotate:this.resize),_e(window,a,this.endResize)}resize(t){this.lastEvent=t;const e=this.snapToGrid(this.el.point(ls(t)));let i=e.x-this.startPoint.x,n=e.y-this.startPoint.y;this.preserveAspectRatio&&this.aroundCenter&&(i*=2,n*=2);const o=this.box.x+i,r=this.box.y+n,a=this.box.x2+i,c=this.box.y2+n;let h=new Ct(this.box);if(this.eventType.includes("l")&&(h.x=Math.min(o,this.box.x2),h.x2=Math.max(o,this.box.x2)),this.eventType.includes("r")&&(h.x=Math.min(a,this.box.x),h.x2=Math.max(a,this.box.x)),this.eventType.includes("t")&&(h.y=Math.min(r,this.box.y2),h.y2=Math.max(r,this.box.y2)),this.eventType.includes("b")&&(h.y=Math.min(c,this.box.y),h.y2=Math.max(c,this.box.y)),h.width=h.x2-h.x,h.height=h.y2-h.y,this.preserveAspectRatio){const d=h.width/this.box.width,g=h.height/this.box.height,u=["lt","t","rt","r","rb","b","lb","l"],p=(u.indexOf(this.eventType)+4)%u.length,m=this.aroundCenter?[this.box.cx,this.box.cy]:this.points[p];let f=this.eventType.includes("t")||this.eventType.includes("b")?g:d;f=2===this.eventType.length?Math.max(d,g):f,h=function(b,x,v){const _=[[b.x,b.y],[b.x+b.width,b.y],[b.x+b.width,b.y+b.height],[b.x,b.y+b.height]].map(([w,y])=>[(w-x[0])*v+x[0],(y-x[1])*v+x[1]]);return bh(_)}(this.box,m,f)}this.el.dispatch("resize",{box:new Ct(h),angle:0,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.size(h.width,h.height).move(h.x,h.y)}movePoint(t){this.lastEvent=t;const{x:e,y:i}=this.snapToGrid(this.el.point(ls(t))),n=this.el.array().slice();n[this.index]=[e,i],this.el.dispatch("resize",{box:bh(n),angle:0,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.plot(n)}rotate(t){this.lastEvent=t;const e=this.startPoint,i=this.el.point(ls(t)),{cx:n,cy:o}=this.box,r=e.x-n,a=e.y-o,c=i.x-n,h=i.y-o,d=Math.sqrt(r*r+a*a)*Math.sqrt(c*c+h*h);if(0===d)return;let g=Math.acos((r*c+a*h)/d)/Math.PI*180;if(!g)return;i.x<e.x&&(g=-g);const u=new W(this.el),{x:p,y:m}=new at(n,o).transformO(u),{rotate:f}=u.decompose(),b=this.snapToAngle(f+g)-f;this.el.dispatch("resize",{box:this.box,angle:b,eventType:this.eventType,event:t,handler:this}).defaultPrevented||this.el.transform(u.rotateO(b,p,m))}endResize(t){"rot"!==this.eventType&&"point"!==this.eventType&&this.resize(t),this.lastEvent=null,this.eventType="",Qt(window,"mousemove.resize touchmove.resize"),Qt(window,"mouseup.resize touchend.resize")}snapToGrid(t){return this.grid&&(t.x=Math.round(t.x/this.grid)*this.grid,t.y=Math.round(t.y/this.grid)*this.grid),t}snapToAngle(t){return this.degree&&(t=Math.round(t/this.degree)*this.degree),t}}U(Tt,{resize:function(s=!0,t={}){"object"==typeof s&&(t=s,s=!0);let e=this.remember("_ResizeHandler");return e||(s.prototype instanceof xh?(e=new s(this),s=!0):e=new xh(this),this.remember("_resizeHandler",e)),e.active(s,t),this}}),void 0===window.SVG&&(window.SVG=cx),void 0===window.Apex&&(window.Apex={});var vh=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","highlightSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new bi(this.ctx),this.ctx.axes=new xx(this.ctx),this.ctx.core=new Wx(this.ctx.el,this.ctx),this.ctx.config=new cn({}),this.ctx.data=new Qo(this.ctx),this.ctx.grid=new th(this.ctx),this.ctx.graphics=new D(this.ctx),this.ctx.coreUtils=new kt(this.ctx),this.ctx.crosshairs=new ir(this.ctx),this.ctx.events=new mx(this.ctx),this.ctx.exports=new hn(this.ctx),this.ctx.fill=new re(this.ctx),this.ctx.localization=new bx(this.ctx),this.ctx.options=new ri,this.ctx.responsive=new vx(this.ctx),this.ctx.series=new ee(this.ctx),this.ctx.theme=new yx(this.ctx),this.ctx.formatters=new an(this.ctx),this.ctx.titleSubtitle=new _x(this.ctx),this.ctx.legend=new ih(this.ctx),this.ctx.toolbar=new nh(this.ctx),this.ctx.tooltip=new rh(this.ctx),this.ctx.dimensions=new as(this.ctx),this.ctx.updateHelpers=new Ux(this.ctx),this.ctx.zoomPanSelection=new Ox(this.ctx),this.ctx.w.globals.tooltip=new rh(this.ctx)}}]),s}(),yh=function(){function s(t){N(this,s),this.ctx=t,this.w=t.w}return B(s,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each(function(){this.removeClass("*"),this.off()},!0),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,n=this.w.globals.dom.Paper.node;n.parentNode&&n.parentNode.parentNode&&!t.isUpdating&&(n.parentNode.parentNode.style.minHeight="unset");var o=this.w.globals.dom.baseEl;o&&this.ctx.eventList.forEach(function(a){o.removeEventListener(a,e.ctx.events.documentEvent)});var r=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(r.Paper),r.Paper.remove(),r.elWrap=null,r.elGraphical=null,r.elLegendWrap=null,r.elLegendForeign=null,r.baseEl=null,r.elGridRect=null,r.elGridRectMask=null,r.elGridRectBarMask=null,r.elGridRectMarkerMask=null,r.elForecastMask=null,r.elNonForecastMask=null,r.elDefs=null}}]),s}(),hr=new WeakMap,_h=function(){function s(t,e){N(this,s),this.opts=e,this.ctx=this,this.w=new fx(e).init(),this.el=t,this.w.globals.cuid=A.randomId(),this.w.globals.chartID=this.w.config.chart.id?A.escapeString(this.w.config.chart.id):this.w.globals.cuid,new vh(this).initModules(),this.lastUpdateOptions=null,this.create=A.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return B(s,[{key:"render",value:function(){var t=this;return new Promise(function(e,i){if(A.elementExists(t.el)){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var n=t.w.config.chart.events.beforeMount;"function"==typeof n&&n(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(u,p){var m=!1;if(u.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var f=u.getBoundingClientRect();"none"!==u.style.display&&0!==f.width||(m=!0)}var b=new ResizeObserver(function(x){m&&p.call(u,x),m=!0});u.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(u.children).forEach(function(x){return b.observe(x)}):b.observe(u),hr.set(p,b)}(t.el.parentNode,t.parentResizeHandler);var o=t.el.getRootNode&&t.el.getRootNode(),r=A.is("ShadowRoot",o),a=t.el.ownerDocument,c=r?o.getElementById("apexcharts-css"):a.getElementById("apexcharts-css");if(!c){var h;(c=document.createElement("style")).id="apexcharts-css",c.textContent='@keyframes opaque {\n  0% {\n    opacity: 0\n  }\n\n  to {\n    opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n\n  0%,\n  to {\n    opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  direction: ltr !important;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\nrect.legend-mouseover-inactive,\n.legend-mouseover-inactive rect,\n.legend-mouseover-inactive path,\n.legend-mouseover-inactive circle,\n.legend-mouseover-inactive line,\n.legend-mouseover-inactive text.apexcharts-yaxis-title-text,\n.legend-mouseover-inactive text.apexcharts-yaxis-label {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, .96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, .8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, .7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-z-value:empty,\n.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,\n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,\n.apexcharts-tooltip-text-goals-label,\n.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  display: inline-block;\n  position: relative;\n  width: 16px;\n  height: 16px;\n  font-size: 16px;\n  line-height: 16px;\n  margin-right: 4px;\n  text-align: center;\n  vertical-align: middle;\n  color: inherit;\n}\n\n.apexcharts-tooltip-marker::before {\n  content: "";\n  display: inline-block;\n  width: 100%;\n  text-align: center;\n  color: currentcolor;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  font-size: 26px;\n  font-family: Arial, Helvetica, sans-serif;\n  line-height: 14px;\n  font-weight: 900;\n}\n\n.apexcharts-tooltip-marker[shape="circle"]::before {\n  content: "\\25CF";\n}\n\n.apexcharts-tooltip-marker[shape="square"]::before,\n.apexcharts-tooltip-marker[shape="rect"]::before {\n  content: "\\25A0";\n  transform: translate(-1px, -2px);\n}\n\n.apexcharts-tooltip-marker[shape="line"]::before {\n  content: "\\2500";\n}\n\n.apexcharts-tooltip-marker[shape="diamond"]::before {\n  content: "\\25C6";\n  font-size: 28px;\n}\n\n.apexcharts-tooltip-marker[shape="triangle"]::before {\n  content: "\\25B2";\n  font-size: 22px;\n}\n\n.apexcharts-tooltip-marker[shape="cross"]::before {\n  content: "\\2715";\n  font-size: 18px;\n}\n\n.apexcharts-tooltip-marker[shape="plus"]::before {\n  content: "\\2715";\n  transform: rotate(45deg) translate(-1px, -1px);\n  font-size: 18px;\n}\n\n.apexcharts-tooltip-marker[shape="star"]::before {\n  content: "\\2605";\n  font-size: 18px;\n}\n\n.apexcharts-tooltip-marker[shape="sparkle"]::before {\n  content: "\\2726";\n  font-size: 20px;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,\n.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, .7);\n  border: 1px solid rgba(0, 0, 0, .5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, .7);\n  border: 1px solid rgba(0, 0, 0, .5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, .5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_shape {\n  stroke-width: 1;\n  stroke-dasharray: 10 10;\n  stroke: black;\n  stroke-opacity: 0.1;\n  pointer-events: none;\n  fill: none;\n}\n\n.svg_select_handle {\n  stroke-width: 3;\n  stroke: black;\n  fill: none;\n}\n\n.svg_select_handle_r {\n  cursor: e-resize;\n}\n\n.svg_select_handle_l {\n  cursor: w-resize;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,\n.apexcharts-pan-icon,\n.apexcharts-reset-icon,\n.apexcharts-selection-icon,\n.apexcharts-toolbar-custom-icon,\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,\n.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,\n.apexcharts-reset-icon,\n.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, .7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,\n.apexcharts-datalabel.apexcharts-element-hidden,\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value,\n.apexcharts-datalabels,\n.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-gridline,\n.apexcharts-line,\n.apexcharts-point-annotation-label,\n.apexcharts-radar-series path:not(.apexcharts-marker),\n.apexcharts-radar-series polygon,\n.apexcharts-toolbar svg,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-xaxis-annotation-label,\n.apexcharts-yaxis-annotation-label,\n.apexcharts-zoom-rect,\n.no-pointer-events {\n  pointer-events: none\n}\n\n.apexcharts-tooltip-active .apexcharts-marker {\n  transition: .15s ease all\n}\n\n.apexcharts-radar-series .apexcharts-yaxis {\n  pointer-events: none;\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,\n.resize-triggers,\n.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers {\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows {\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers {\n  pointer-events: none\n}\n\n.apexcharts-disable-transitions * {\n  transition: none !important;\n}';var d=(null===(h=t.opts.chart)||void 0===h?void 0:h.nonce)||t.w.config.chart.nonce;d&&c.setAttribute("nonce",d),r?o.prepend(c):!1!==t.w.config.chart.injectStyleSheet&&a.head.appendChild(c)}var g=t.create(t.w.config.series,{});if(!g)return e(t);t.mount(g).then(function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(g)}).catch(function(u){i(u)})}else i(new Error("Element not found"))})}},{key:"create",value:function(t,e){var i=this,n=this.w;new vh(this).initModules();var o=this.w.globals;if(o.noData=!1,o.animationEnded=!1,!A.elementExists(this.el)||(this.responsive.checkResponsiveConfig(e),n.config.xaxis.convertedCatToNumeric&&new ln(n.config).convertCatToNumericXaxis(n.config,this.ctx),this.core.setupElements(),"treemap"===n.config.chart.type&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),0===o.svgWidth))return o.animationEnded=!0,null;var r=t;t.forEach(function(u,p){u.hidden&&(r=i.legend.legendHelpers.getSeriesAfterCollapsing({realIndex:p}))});var a=kt.checkComboSeries(r,n.config.chart.type);o.comboCharts=a.comboCharts,o.comboBarCount=a.comboBarCount;var c=r.every(function(u){return u.data&&0===u.data.length});(0===r.length||c&&o.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(r),this.theme.init(),new Mi(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),o.noData&&o.collapsedSeries.length!==o.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),o.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new kt(this).getLargestMarkerSize(),this.dimensions.plotCoords();var h=this.core.xySettings();this.grid.createGridMask();var d=this.core.plotChartType(r,h),g=new Pi(this);return g.bringForward(),n.config.dataLabels.background.enabled&&g.dataLabelsBackground(),this.core.shiftGraphPosition(),n.globals.dataPoints>50&&n.globals.dom.elWrap.classList.add("apexcharts-disable-transitions"),{elGraph:d,xyRatios:h,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this,n=i.w;return new Promise(function(o,r){if(null===i.el)return r(new Error("Not enough data to display or target element not found"));(null===e||n.globals.allSeriesCollapsed)&&i.series.handleNoData(),i.grid=new th(i);var a,c,h=i.grid.drawGrid();if(i.annotations=new px(i),i.annotations.drawImageAnnos(),i.annotations.drawTextAnnos(),"back"===n.config.grid.position&&(h&&n.globals.dom.elGraphical.add(h.el),null!=h&&null!==(a=h.elGridBorders)&&void 0!==a&&a.node&&n.globals.dom.elGraphical.add(h.elGridBorders)),Array.isArray(e.elGraph))for(var d=0;d<e.elGraph.length;d++)n.globals.dom.elGraphical.add(e.elGraph[d]);else n.globals.dom.elGraphical.add(e.elGraph);"front"===n.config.grid.position&&(h&&n.globals.dom.elGraphical.add(h.el),null!=h&&null!==(c=h.elGridBorders)&&void 0!==c&&c.node&&n.globals.dom.elGraphical.add(h.elGridBorders)),"front"===n.config.xaxis.crosshairs.position&&i.crosshairs.drawXCrosshairs(),"front"===n.config.yaxis[0].crosshairs.position&&i.crosshairs.drawYCrosshairs(),"treemap"!==n.config.chart.type&&i.axes.drawAxis(n.config.chart.type,h);var g=new dn(t.ctx,h),u=new er(t.ctx,h);if(null!==h&&(g.xAxisLabelCorrections(h.xAxisTickWidth),u.setYAxisTextAlignments(),n.config.yaxis.map(function(m,f){-1===n.globals.ignoreYAxisIndexes.indexOf(f)&&u.yAxisTitleRotate(f,m.opposite)})),i.annotations.drawAxesAnnotations(),!n.globals.noData){if(n.config.tooltip.enabled&&!n.globals.noData&&i.w.globals.tooltip.drawTooltip(e.xyRatios),n.globals.axisCharts&&(n.globals.isXNumeric||n.config.xaxis.convertedCatToNumeric||n.globals.isRangeBar))(n.config.chart.zoom.enabled||n.config.chart.selection&&n.config.chart.selection.enabled||n.config.chart.pan&&n.config.chart.pan.enabled)&&i.zoomPanSelection.init({xyRatios:e.xyRatios});else{var p=n.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(m){p[m]=!1})}n.config.chart.toolbar.show&&!n.globals.allSeriesCollapsed&&i.toolbar.createToolbar()}n.globals.memory.methodsToExec.length>0&&n.globals.memory.methodsToExec.forEach(function(m){m.method(m.params,!1,m.context)}),n.globals.axisCharts||n.globals.noData||i.core.resizeNonAxisCharts(),o(i)})}},{key:"destroy",value:function(){var i,n;window.removeEventListener("resize",this.windowResizeHandler),(n=hr.get(i=this.parentResizeHandler))&&(n.disconnect(),hr.delete(i));var t=this.w.config.chart.id;t&&Apex._chartInstances.forEach(function(e,i){e.id===A.escapeString(t)&&Apex._chartInstances.splice(i,1)}),new yh(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w;return a.globals.selection=void 0,this.lastUpdateOptions&&JSON.stringify(this.lastUpdateOptions)===JSON.stringify(t)?this:(t.series&&(this.data.resetParsingFlags(),this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map(function(c,h){return e.updateHelpers._extendSeries(c,h)})),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,i,n,o,r))}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.data.resetParsingFlags(),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,i)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.data.resetParsingFlags();var n=this.w.config.series.slice();return n.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(n,e,i)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this;i.data.resetParsingFlags(),i.w.globals.dataChanged=!0,i.series.getPreviousPaths();for(var n=i.w.config.series.slice(),o=0;o<n.length;o++)if(null!=t[o])for(var r=0;r<t[o].data.length;r++)n[o].data.push(t[o].data[r]);return i.w.config.series=n,e&&(i.w.globals.initialSeries=A.clone(i.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise(function(i,n){if(e.lastUpdateOptions&&JSON.stringify(e.lastUpdateOptions)===JSON.stringify(t))return i(e);e.lastUpdateOptions=A.clone(t),new yh(e.ctx).clear({isUpdating:!0});var o=e.create(e.w.config.series,t);if(!o)return i(e);e.mount(o).then(function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,i(e)}).catch(function(r){n(r)})})}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach(function(i){e.push(i)})),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter(function(e){if(e.group)return!0}).map(function(e){return t.w.config.chart.group===e.group?e.chart:t})}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,e){return this.series.toggleSeriesOnHover(t,e)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"highlightSeries",value:function(t){this.series.highlightSeries(t)}},{key:"isSeriesHidden",value:function(t){this.series.isSeriesHidden(t)}},{key:"resetSeries",value:function(){this.series.resetSeries(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addXaxisAnnotationExternal(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n)}},{key:"addYaxisAnnotation",value:function(t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addYaxisAnnotationExternal(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n)}},{key:"addPointAnnotation",value:function(t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this;i&&(n=i),n.annotations.addPointAnnotationExternal(t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=this;e&&(i=e),i.annotations.removeAnnotation(i,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new tr(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new tr(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new hn(this.ctx).dataURI(t)}},{key:"getSvgString",value:function(t){return new hn(this.ctx).getSvgString(t)}},{key:"exportToCSV",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new hn(this.ctx).exportToCSV(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=A.escapeString(t);if(Apex._chartInstances){var i=Apex._chartInstances.filter(function(n){return n.id===e})[0];return i&&i.chart}}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),e=0;e<t.length;e++)new s(t[e],JSON.parse(t[e].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var i=this.getChartByID(t);if(i){i.w.globals.isExecCalled=!0;var n=null;if(-1!==i.publicMethods.indexOf(e)){for(var o=arguments.length,r=new Array(o>2?o-2:0),a=2;a<o;a++)r[a-2]=arguments[a];n=i[e].apply(i,r)}return n}}},{key:"merge",value:function(t,e){return A.extend(t,e)}},{key:"getThemePalettes",value:function(){return{palette1:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"],palette2:["#3F51B5","#03A9F4","#4CAF50","#F9CE1D","#FF9800"],palette3:["#33B2DF","#546E7A","#D4526E","#13D8AA","#A5978B"],palette4:["#4ECDC4","#C7F464","#81D4FA","#FD6A6A","#546E7A"],palette5:["#2B908F","#F9A3A4","#90EE7E","#FA4443","#69D2E7"],palette6:["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"],palette7:["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"],palette8:["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"],palette9:["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"],palette10:["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}}}]),s}();window.ApexCharts=_h;let Zx=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=l.$C({type:s}),s.\u0275inj=l.G2t({imports:[[]]}),s})();var Kx=G(5596);let Jx=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=l.$C({type:s})}static{this.\u0275inj=l.G2t({imports:[pt.MD,kb,Mb.G,Vl.w,Xn,io,T0,L0,Zx,Kx.Hu,qt.YN]})}}return s})()}}]);