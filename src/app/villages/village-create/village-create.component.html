<div class="village-create-container">
  
  <!-- Header -->
  <div class="page-header">
    <button class="back-btn" (click)="goBack()">
      <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      Back
    </button>
    <div class="header-content">
      <h1 class="page-title">
        <span class="title-icon">{{ isEditMode ? '‚úèÔ∏è' : 'üèòÔ∏è' }}</span>
        {{ isEditMode ? 'Edit Village' : 'Create New Village' }}
      </h1>
      <p class="page-subtitle">{{ isEditMode ? 'Update village information' : 'Add a new village to the system' }}</p>
    </div>
  </div>

  <!-- Form Section -->
  <div class="form-section">
    <form #villageForm="ngForm" (ngSubmit)="onSubmit()">
      
      <!-- Location Hierarchy -->
      <div class="form-group-section">
        <h2 class="section-title">
          <span class="section-icon">üåç</span>
          Location Hierarchy
        </h2>
        
        <div class="form-row">
          <div class="form-group">
            <label for="country" class="form-label">
              Country <span class="required">*</span>
            </label>
            <div class="select-wrapper">
              <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <select 
                id="country" 
                name="country"
                class="form-select"
                [(ngModel)]="village.country"
                (change)="onCountryChange()"
                required
                #countryField="ngModel"
                [class.error]="countryField.invalid && countryField.touched">
                <option value="" disabled>Select a country</option>
                <option *ngFor="let country of countries" [value]="country">{{country}}</option>
              </select>
            </div>
            <span class="error-message" *ngIf="countryField.invalid && countryField.touched">
              Country is required
            </span>
          </div>

          <div class="form-group">
            <label for="state" class="form-label">
              State <span class="required">*</span>
            </label>
            <div class="select-wrapper">
              <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path>
              </svg>
              <select 
                id="state" 
                name="state"
                class="form-select"
                [(ngModel)]="village.state"
                (change)="onStateChange()"
                required
                [disabled]="!village.country"
                #stateField="ngModel"
                [class.error]="stateField.invalid && stateField.touched">
                <option value="" disabled>Select a state</option>
                <option *ngFor="let state of states" [value]="state">{{state}}</option>
              </select>
            </div>
            <span class="error-message" *ngIf="stateField.invalid && stateField.touched">
              State is required
            </span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="district" class="form-label">
              District <span class="required">*</span>
            </label>
            <div class="select-wrapper">
              <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              <select 
                id="district" 
                name="district"
                class="form-select"
                [(ngModel)]="village.district"
                (change)="onDistrictChange()"
                required
                [disabled]="!village.state"
                #districtField="ngModel"
                [class.error]="districtField.invalid && districtField.touched">
                <option value="" disabled>Select a district</option>
                <option *ngFor="let district of districts" [value]="district">{{district}}</option>
              </select>
            </div>
            <span class="error-message" *ngIf="districtField.invalid && districtField.touched">
              District is required
            </span>
          </div>

          <div class="form-group">
            <label for="mandal" class="form-label">
              Mandal <span class="required">*</span>
            </label>
            <div class="select-wrapper">
              <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
              </svg>
              <select 
                id="mandal" 
                name="mandal"
                class="form-select"
                [(ngModel)]="village.mandal"
                required
                [disabled]="!village.district"
                #mandalField="ngModel"
                [class.error]="mandalField.invalid && mandalField.touched">
                <option value="" disabled>Select a mandal</option>
                <option *ngFor="let mandal of mandals" [value]="mandal">{{mandal}}</option>
              </select>
            </div>
            <span class="error-message" *ngIf="mandalField.invalid && mandalField.touched">
              Mandal is required
            </span>
          </div>
        </div>
      </div>

      <!-- Village Information -->
      <div class="form-group-section">
        <h2 class="section-title">
          <span class="section-icon">üè°</span>
          Village Information
        </h2>
        
        <div class="form-row">
          <div class="form-group">
            <label for="name" class="form-label">
              Village Name <span class="required">*</span>
            </label>
            <div class="input-wrapper">
              <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
              </svg>
              <input 
                type="text" 
                id="name" 
                name="name"
                class="form-input"
                placeholder="Enter village name"
                [(ngModel)]="village.name"
                required
                #nameField="ngModel"
                [class.error]="nameField.invalid && nameField.touched">
            </div>
            <span class="error-message" *ngIf="nameField.invalid && nameField.touched">
              Village name is required
            </span>
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input 
                type="checkbox" 
                name="isActive"
                class="form-checkbox"
                [(ngModel)]="village.isActive">
              <span class="checkbox-text">
                <span class="checkbox-title">Active Village</span>
                <span class="checkbox-description">Village is active and operational</span>
              </span>
            </label>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="onReset()">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
          </svg>
          Reset
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="villageForm.invalid || isSubmitting">
          <svg *ngIf="!isSubmitting" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M5 13l4 4L19 7"></path>
          </svg>
          <svg *ngIf="isSubmitting" class="spinner" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          {{ isSubmitting ? 'Saving...' : (isEditMode ? 'Update Village' : 'Create Village') }}
        </button>
      </div>

    </form>
  </div>

</div>
